webpackJsonp([11],{"54MD":function(t,e){},vtXg:function(t,e,o){"use strict";function r(t){o("54MD")}Object.defineProperty(e,"__esModule",{value:!0});var a=o("3cXf"),s=o.n(a),n={data:function(){return{rules:{bookName:[{require:!0,message:"请选取书籍",trigger:"blur"}],checkworkattendance:[{required:!0,message:"请添加考勤金额"},{type:"number",message:"金额必需为数字"}],pepper:[{required:!0,message:"请添加打赏金额"},{type:"number",message:"金额必需为数字"}],bubscribe:[{required:!0,message:"请添加订阅金额"},{type:"number",message:"金额必需为数字"}],thirdPart:[{required:!0,message:"请添加第三方金额"},{type:"number",message:"金额必需为数字"}],millet:[{required:!0,message:"请添加小米椒金额"},{type:"number",message:"金额必需为数字"}]},bookInfo:"",authorBook:[],userInfo:{},monthReport:{bookid:"",bookName:"",checkworkattendance:"",pepper:"",bubscribe:"",thirdPart:"",millet:""}}},methods:{submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return e.$message({message:"请核对信息是否完整",type:"warning"}),!1;var o=JSON.parse(s()(e.monthReport));"authorEditMonReport"===e.$route.name?e.$ajax("/admin/updateAuthorMonthlyreportByAuthormon",o,function(t){200===t.returnCode&&(e.$message({message:t.msg,type:"success"}),e.getBookMonthly())}):e.$ajax("/admin/addAuthorMonthlyreportByAuthormon",o,function(t){200===t.returnCode&&(e.$message({message:"更新成功",type:"success"}),e.getAuthorBook())})})},getAuthorBook:function(){var t=this;this.$ajax("/admin/agetAuthorBookLists",{authorId:this.$route.params.aid},function(e){if(200===e.returnCode){var o=[];e.data.forEach(function(t){t.bookCheckStatus&&o.push(t)}),t.authorBook=o}})},getUserInfo:function(){var t=this;this.$ajax("/person-SimplifyUserInfo",{puserid:this.$route.params.aid},function(e){200===e.returnCode&&(t.userInfo=e.data,t.$set(t.monthReport,"authorid",e.data.userId),t.$set(t.monthReport,"authorName",e.data.pseudonym))})},getBookInfo:function(){var t=this;this.$ajax("/book-showBookInfo",{bookid:this.$route.params.bid},function(e){200===e.returnCode&&(t.$set(t.monthReport,"bookid",e.data.bookId),t.$set(t.monthReport,"bookName",e.data.bookName),t.$set(t.monthReport,"authorid",e.data.bookWriterId),t.$set(t.monthReport,"authorName",e.data.writerName))})},getBookMonthly:function(){var t=this,e=[];e=this.$route.params.time?this.$route.params.time.split("-"):sessionStorage.getItem("monthly_date").split("-"),this.$ajax("/admin/getAuthorMonthlyreportById",{bookid:this.$route.params.bid,year:e[0],month:e[1],type:2},function(e){200===e.returnCode&&(delete e.data.dataTime,delete e.data.subTotalCount,t.monthReport=e.data)})}},created:function(){this.$route.params.time&&sessionStorage.setItem("monthly_date",this.$route.params.time),"authorAddMonReport"===this.$route.name?(this.getUserInfo(),this.getAuthorBook()):(this.getBookInfo(),this.getBookMonthly())},watch:{bookInfo:function(t){this.monthReport.bookid=t.split(",")[0],this.monthReport.bookName=t.split(",")[1]}}},l=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"user-detail-info"},[o("el-alert",{attrs:{title:"操作说明",type:"info","show-icon":""}},[o("div",[o("p",[t._v("\n        管理员可对已上架书籍定制月报，也可以对已生成的月报重新调整\n      ")])])]),t._v(" "),o("el-row",{staticClass:"mbt20"}),t._v(" "),o("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm",attrs:{model:t.monthReport,"status-icon":"",rules:t.rules,"label-width":"100px"}},[o("el-row",{attrs:{gutter:40}},[o("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[o("el-form-item",{attrs:{label:"书籍名称",prop:"bookName"}},["authorEditMonReport"===t.$route.name?o("el-input",{staticClass:"mw220",attrs:{readonly:""},model:{value:t.monthReport.bookName,callback:function(e){t.$set(t.monthReport,"bookName",e)},expression:"monthReport.bookName"}}):o("el-select",{staticClass:"mw220",attrs:{placeholder:"请选取书籍"},model:{value:t.bookInfo,callback:function(e){t.bookInfo=e},expression:"bookInfo"}},[t._l(t.authorBook,function(t){return[o("el-option",{attrs:{label:t.bookName,value:t.bookId+","+t.bookName}})]})],2)],1)],1),t._v(" "),o("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[o("el-form-item",{attrs:{label:"作  者",prop:"authorName"}},[o("el-input",{staticClass:"mw220",attrs:{readonly:""},model:{value:t.monthReport.authorName,callback:function(e){t.$set(t.monthReport,"authorName",t._n(e))},expression:"monthReport.authorName"}})],1)],1)],1),t._v(" "),o("el-row",{attrs:{gutter:40}},[o("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[o("el-form-item",{attrs:{label:"打  赏",prop:"pepper"}},[o("el-input",{staticClass:"mw220",model:{value:t.monthReport.pepper,callback:function(e){t.$set(t.monthReport,"pepper",t._n(e))},expression:"monthReport.pepper"}})],1)],1),t._v(" "),o("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[o("el-form-item",{attrs:{label:"考  勤",prop:"checkworkattendance"}},[o("el-input",{staticClass:"mw220",model:{value:t.monthReport.checkworkattendance,callback:function(e){t.$set(t.monthReport,"checkworkattendance",t._n(e))},expression:"monthReport.checkworkattendance"}})],1)],1)],1),t._v(" "),o("el-row",{attrs:{gutter:40}},[o("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[o("el-form-item",{attrs:{label:"订  阅",prop:"bubscribe"}},[o("el-input",{staticClass:"mw220",model:{value:t.monthReport.bubscribe,callback:function(e){t.$set(t.monthReport,"bubscribe",t._n(e))},expression:"monthReport.bubscribe"}})],1)],1),t._v(" "),o("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[o("el-form-item",{attrs:{label:"第三方",prop:"thirdPart"}},[o("el-input",{staticClass:"mw220",model:{value:t.monthReport.thirdPart,callback:function(e){t.$set(t.monthReport,"thirdPart",t._n(e))},expression:"monthReport.thirdPart"}})],1)],1)],1),t._v(" "),o("el-row",{attrs:{gutter:40}},[o("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[o("el-form-item",{attrs:{label:"小米椒",prop:"millet"}},[o("el-input",{staticClass:"mw220",model:{value:t.monthReport.millet,callback:function(e){t.$set(t.monthReport,"millet",t._n(e))},expression:"monthReport.millet"}})],1)],1),t._v(" "),o("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}})],1),t._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm2")}}},[t._v("生成")])],1)],1)],1)},m=[],i=o("18Nq"),u=r,p=Object(i.a)(n,l,m,!1,u,null,null);e.default=p.exports}});
//# sourceMappingURL=11.c316e6f9e4b937c3be80.js.map