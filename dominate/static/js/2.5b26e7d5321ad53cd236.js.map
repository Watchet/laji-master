{"version":3,"sources":["webpack:///static/js/2.5b26e7d5321ad53cd236.js","webpack:///./static/img/Bitmap@3x.png","webpack:///./src/components/book/index.vue","webpack:///src/components/book/index.vue","webpack:///./src/components/book/index.vue?a8b5"],"names":["webpackJsonp","1+Xl","module","exports","__webpack_require__","p","Zl42","qsEH","__webpack_exports__","injectStyle","context","Object","defineProperty","value","img_upload","book","components","pic-cropper","data","currentTitle","dialogTableVisible","bookList","updateData","multipleSelection","keywords","selectType","fold","filterList","orderParemeter","bookCheckStatus","bookStatus","$routeParams","keepAlive","firstOne","editTitle","hiddenIcon","methods","getBookList","_this","this","searchValue","page","$route","name","params","bid","val","$http","trim","Number","$message","message","type","k","$ajax","res","returnCode","list","forEach","item","i","$set","searchBook","$router","push","toggleSelection","_this2","length","id","bookId","$confirm","confirmButtonText","cancelButtonText","then","bookid","toString","catch","handleRowClick","row","event","column","label","$refs","multipleTable","toggleRowSelection","handleSelectionChange","handleClick","path","handleCurrentChange","openEdit","_this3","edit","bookName","keyCode","e","updateBookTitle","_this4","msg","dialogShow","bookImage","closeIt","successBack","handleChange","_this5","change","$store","dispatch","console","log","collectionDocuments","created","activated","watch","handler","deep","computed","authority","state","userInfo","adminRolemenuanduserrole","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","title","show-icon","_v","to","_e","href","on","click","$event","directives","rawName","expression","model","callback","$$v","plain","xs","sm","md","lg","xl","placeholder","nativeOn","keyup","_k","key","slot","icon","ref","staticStyle","width","border","stripe","row-click","selection-change","align","prop","scopedSlots","_u","fn","scope","mouseover","hidden","mouseout","_s","style","cursor","visibility","placement","keydown","text-align","margin","bottom","size","writerName","bookWriterId","_f","bookCreatedTime","lastUpdateTime","src","alt","trigger","command","background","current-page","pageNum","page-size","pageSize","layout","total","current-change","action","visible","maxWidth","url","aspectRatio","update:visible","close","success","staticRenderFns","component_normalizer","__vue_styles__","Component"],"mappings":"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","file":"static/js/2.5b26e7d5321ad53cd236.js","sourcesContent":["webpackJsonp([2],{\n\n/***/ \"1+Xl\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"static/img/Bitmap@3x.0613312.png\";\n\n/***/ }),\n\n/***/ \"Zl42\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"qsEH\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// EXTERNAL MODULE: ./src/components/img_upload.vue + 3 modules\nvar img_upload = __webpack_require__(\"PsVy\");\n\n// CONCATENATED MODULE: ./node_modules/_babel-loader@7.1.4@babel-loader/lib!./node_modules/_vue-loader@14.2.2@vue-loader/lib/selector.js?type=script&index=0!./src/components/book/index.vue\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n/* harmony default export */ var book = ({\n\n  components: {\n    'pic-cropper': img_upload[\"default\"]\n  },\n\n  data: function data() {\n    return {\n      currentTitle: '',\n      dialogTableVisible: false,\n      bookList: {},\n      updateData: {},\n      multipleSelection: [],\n      keywords: null,\n      selectType: 'bookName',\n      fold: false,\n      filterList: {\n        orderParemeter: -1,\n        bookCheckStatus: -1,\n        bookStatus: -1\n      },\n      $routeParams: '',\n      keepAlive: false,\n      firstOne: true,\n      editTitle: false, // 修改书籍标题状态,\n      hiddenIcon: true\n    };\n  },\n\n\n  methods: {\n    getBookList: function getBookList() {\n      var _this = this;\n\n      var searchValue = { page: this.$routeParams.page, orderParemeter: 'bookId' };\n      if (this.$route.name === 'bookInfo') {\n        searchValue = { page: 1, orderParemeter: 'bookId' };\n        this.selectType = 'bookId';\n        this.keywords = this.$route.params.bid;\n      }\n      var val = this.$http.trim(this.keywords);\n      if (this.selectType && val) {\n        if ((this.selectType === 'bookId' || this.selectType === 'bookWriterId') && !Number(val)) {\n          this.$message({ message: 'ID必需为数字', type: 'warning' });\n          return false;\n        }\n        searchValue[this.selectType] = val;\n        this.bookList = {};\n      }\n      for (var k in this.filterList) {\n        if (typeof this.filterList[k] === 'number' && this.filterList[k] > -1 || typeof this.filterList[k] === 'string') {\n          searchValue[k] = this.filterList[k];\n        }\n      }\n      if (this.$route.name === 'bookList' || this.$route.name === 'bookInfo') {\n        this.$ajax('/admin/getBookInfoList', searchValue, function (res) {\n          if (res.returnCode === 200) {\n            _this.bookList = res.data;\n            _this.bookList.list.forEach(function (item, i) {\n              _this.$set(_this.bookList.list[i], 'edit', false);\n              _this.$set(_this.bookList.list[i], 'hidden', true);\n            });\n          } else if (!res.data) {\n            _this.bookList = {};\n          }\n        });\n      }\n    },\n    searchBook: function searchBook() {\n      if (Number(this.$route.params.page) !== 1) {\n        this.$router.push({ params: { page: 1 } });\n      } else {\n        this.getBookList();\n      }\n    },\n\n\n    // 批量删除书籍\n    toggleSelection: function toggleSelection() {\n      var _this2 = this;\n\n      if (this.multipleSelection.length) {\n        var id = [];\n        this.multipleSelection.forEach(function (item) {\n          id.push(item.bookId);\n        });\n        this.$confirm('此操作将永久删除所选的' + id.length + '书籍, 是否继续?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(function () {\n          _this2.$ajax('/admin/bookBatchDelete', { bookid: id.toString() }, function (res) {\n            if (res.returnCode === 200) {\n              _this2.$message({ message: '删除成功！', type: 'success' });\n              _this2.getBookList();\n            }\n          });\n        }).catch(function () {\n          _this2.$message({ type: 'info', message: '已取消删除' });\n        });\n      } else {\n        this.$message({ message: ' 请选择要删除的书籍！', type: 'warning' });\n      }\n    },\n    handleRowClick: function handleRowClick(row, event, column) {\n      if (column.label !== '操作' && column.label !== '书名') {\n        this.$refs.multipleTable.toggleRowSelection(row);\n      }\n    },\n    handleSelectionChange: function handleSelectionChange(val) {\n      this.multipleSelection = val;\n    },\n    handleClick: function handleClick(val, data) {\n      if (val === 'a') {\n        // 章节列表\n        this.$router.push({ path: '/book_chapter_list/' + data.bookId });\n      } else if (val === 'b') {\n        // 编辑书籍详情\n        this.$router.push({ path: '/book_detail/' + data.bookId });\n      } else if (val === 'c') {\n        // 添加章节\n        this.$router.push({ path: '/add_new_chapter/' + data.bookId });\n      } else if (val === 'd') {\n        this.toggleSelection();\n      }\n    },\n    handleCurrentChange: function handleCurrentChange(page) {\n      this.$router.push({ params: { page: page } });\n    },\n    openEdit: function openEdit(row) {\n      var _this3 = this;\n\n      this.bookList.list.forEach(function (item, i) {\n        if (item.edit) {\n          _this3.$set(_this3.bookList.list[i], 'edit', false);\n        }\n      });\n      this.currentTitle = row.bookName;\n      row.edit = true;\n    },\n    keyCode: function keyCode(e, row) {\n      if (e.keyCode === 13) {\n        this.updateBookTitle(row);\n      }\n    },\n    updateBookTitle: function updateBookTitle(row) {\n      var _this4 = this;\n\n      if (this.currentTitle !== row.bookName) {\n        this.$ajax('/admin/updateBookName', { bookId: row.bookId, bookName: this.currentTitle }, function (res) {\n          if (res.returnCode === 200) {\n            _this4.$message({ message: res.msg, type: 'success' });\n            if (_this4.keywords) {\n              _this4.keywords = _this4.currentTitle;\n            }\n            _this4.getBookList();\n            row.edit = false;\n          }\n        });\n      } else {\n        row.edit = false;\n      }\n    },\n    dialogShow: function dialogShow(value) {\n      this.dialogTableVisible = true;\n      this.$set(this.updateData, 'bookId', value.bookId);\n      this.$set(this.updateData, 'bookImage', value.bookImage);\n    },\n\n\n    // 上传封面\n    closeIt: function closeIt() {\n      this.dialogTableVisible = false;\n    },\n\n\n    // 上传成功回调\n    successBack: function successBack(val) {\n      if (val.returnCode === 200) {\n        this.getBookList();\n      }\n    },\n\n\n    // 修改状态\n    handleChange: function handleChange(type, val) {\n      var _this5 = this;\n\n      var data = { bookId: val.bookId };\n      var change = function change(data) {\n        _this5.$store.dispatch('sysbookupdate', data).then(function (res) {\n          if (res.returnCode === 200) {\n            _this5.$message({ type: 'success', message: res.msg });\n            _this5.getBookList();\n          }\n        });\n      };\n      this.$confirm('此操作将更改本书籍状态, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        if (type === '连载') {\n          data.bookStatus = val.bookStatus === 0 ? 1 : 0;\n          change(data);\n          console.log(data);\n        } else if (type === '审核') {\n          _this5.$store.dispatch('getChapterCount', { bookId: data.bookId }).then(function (res) {\n            if (res.returnCode === 200 && res.data > 1) {\n              data.bookCheckStatus = val.bookCheckStatus === 0 ? 1 : 0;\n              console.log(data);\n              change(data);\n            } else {\n              _this5.$message({ message: '已发布章节不足两章，不可通过审核！', type: 'warning' });\n            }\n          });\n        } else if (type === '上架') {\n          if (val.bookCheckStatus === 0) {\n            _this5.$message({ type: 'warning', message: '书籍暂未审核，请先审核通过！' });\n          } else {\n            data.bookCheckStatus = val.bookCheckStatus === 1 ? 2 : 1;\n            console.log(data);\n            change(data);\n          }\n        } else if (type === '征文') {\n          data.collectionDocuments = val.collectionDocuments === 0 ? 1 : 0;\n          console.log(data);\n          change(data);\n        }\n      }).catch(function () {\n        _this5.$message({ type: 'info', message: '已取消操作！' });\n      });\n    }\n  },\n\n  created: function created() {\n    if (this.firstOne) {\n      this.$routeParams = this.$route.params;\n      this.getBookList();\n      this.firstOne = false;\n    }\n  },\n  activated: function activated(val) {\n    if (!this.firstOne) {\n      this.$routeParams = this.$route.params;\n      this.getBookList();\n    }\n  },\n\n\n  watch: {\n    $route: function $route(val) {\n      this.$routeParams = val.params;\n      this.getBookList();\n    },\n\n    filterList: {\n      handler: function handler() {\n        this.getBookList();\n      },\n\n      deep: true\n    }\n  },\n\n  computed: {\n    authority: function authority() {\n      return this.$store.state.userInfo.adminRolemenuanduserrole ? this.$store.state.userInfo.adminRolemenuanduserrole : {};\n    }\n  }\n});\n// CONCATENATED MODULE: ./node_modules/_vue-loader@14.2.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-18644c57\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@14.2.2@vue-loader/lib/selector.js?type=template&index=0!./src/components/book/index.vue\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"admin-book-wrap\"},[_c('el-alert',{attrs:{\"title\":\"操作说明\",\"type\":\"info\",\"show-icon\":\"\"}},[_c('div',[_c('p',[_vm._v(\"\\n                此表为本站全部书籍列表，您可以通过相应书籍ID来批量管理，也可以通过\\n                \"),(_vm.authority.adds)?_c('router-link',{staticClass:\"red\",attrs:{\"to\":{name:'addNewBook'}}},[_vm._v(\"新建书籍\")]):_vm._e(),_vm._v(\"来添加新书\\n            \")],1),_vm._v(\" \"),_c('p',[_c('span',{staticClass:\"red\"},[_vm._v(\"提示：\")]),_vm._v(\"需要更多详细筛选条件请直接点击 \"),_c('a',{attrs:{\"href\":\"javascript:0;\"},on:{\"click\":function($event){_vm.fold?_vm.fold=false:_vm.fold=true}}},[_vm._v(\"展开\")]),_vm._v(\"；双击书名可进行修改\\n            \")])])]),_vm._v(\" \"),_c('el-row',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.fold),expression:\"fold\"}],staticClass:\"mbt20 fitler-search\"},[_c('div',[_vm._v(\"\\n            排序类型：\\n            \"),_c('el-radio-group',{model:{value:(_vm.filterList.orderParemeter),callback:function ($$v) {_vm.$set(_vm.filterList, \"orderParemeter\", $$v)},expression:\"filterList.orderParemeter\"}},[_c('el-radio-button',{attrs:{\"label\":-1}},[_vm._v(\"全部\")]),_vm._v(\" \"),_c('el-radio-button',{attrs:{\"label\":\"bookCreatedTime\"}},[_vm._v(\"创建时间\")]),_vm._v(\" \"),_c('el-radio-button',{attrs:{\"label\":\"bookWorldCount\"}},[_vm._v(\"字数\")]),_vm._v(\" \"),_c('el-radio-button',{attrs:{\"label\":\"lastUpdateTime\"}},[_vm._v(\"更新时间\")])],1)],1),_vm._v(\" \"),_c('div',[_vm._v(\"\\n            书籍状态：\\n            \"),_c('el-radio-group',{model:{value:(_vm.filterList.bookCheckStatus),callback:function ($$v) {_vm.$set(_vm.filterList, \"bookCheckStatus\", $$v)},expression:\"filterList.bookCheckStatus\"}},[_c('el-radio-button',{attrs:{\"label\":-1}},[_vm._v(\"全部\")]),_vm._v(\" \"),_c('el-radio-button',{attrs:{\"label\":0}},[_vm._v(\"未审核\")]),_vm._v(\" \"),_c('el-radio-button',{attrs:{\"label\":1}},[_vm._v(\"已审核\")]),_vm._v(\" \"),_c('el-radio-button',{attrs:{\"label\":2}},[_vm._v(\"已上架\")])],1)],1),_vm._v(\" \"),_c('div',[_vm._v(\"\\n            连载状态：\\n            \"),_c('el-radio-group',{model:{value:(_vm.filterList.bookStatus),callback:function ($$v) {_vm.$set(_vm.filterList, \"bookStatus\", $$v)},expression:\"filterList.bookStatus\"}},[_c('el-radio-button',{attrs:{\"label\":-1}},[_vm._v(\"全部\")]),_vm._v(\" \"),_c('el-radio-button',{attrs:{\"label\":0}},[_vm._v(\"连载中\")]),_vm._v(\" \"),_c('el-radio-button',{attrs:{\"label\":1}},[_vm._v(\"已完结\")])],1)],1)]),_vm._v(\" \"),_c('el-row',{staticClass:\"mbt20\"},[(_vm.authority.deletes)?_c('el-button',{attrs:{\"type\":\"danger\",\"plain\":\"\"},on:{\"click\":function($event){_vm.toggleSelection()}}},[_vm._v(\"批量删除\")]):_vm._e()],1),_vm._v(\" \"),_c('el-row',{staticClass:\"mbt20\"},[_c('el-col',{attrs:{\"xs\":20,\"sm\":16,\"md\":12,\"lg\":9,\"xl\":6}},[_c('el-input',{staticClass:\"input-with-select\",attrs:{\"placeholder\":\"请输入内容\"},nativeOn:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.searchBook($event)}},model:{value:(_vm.keywords),callback:function ($$v) {_vm.keywords=$$v},expression:\"keywords\"}},[_c('el-select',{attrs:{\"slot\":\"prepend\",\"placeholder\":\"请选择\"},slot:\"prepend\",model:{value:(_vm.selectType),callback:function ($$v) {_vm.selectType=$$v},expression:\"selectType\"}},[_c('el-option',{attrs:{\"label\":\"书  名\",\"value\":\"bookName\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"作 者\",\"value\":\"writerName\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"书籍ID\",\"value\":\"bookId\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"作者ID\",\"value\":\"bookWriterId\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"手机号\",\"value\":\"userPhone\"}})],1),_vm._v(\" \"),_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.searchBook},slot:\"append\"})],1)],1)],1),_vm._v(\" \"),_c('el-row',[_c('el-table',{ref:\"multipleTable\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.bookList.list,\"border\":\"\",\"stripe\":\"\"},on:{\"row-click\":_vm.handleRowClick,\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"align\":\"center\",\"type\":\"selection\",\"width\":\"30\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"bookId\",\"width\":\"80\",\"label\":\"ID\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"bookName\",\"label\":\"书名\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('p',{on:{\"mouseover\":function($event){scope.row.hidden = false},\"mouseout\":function($event){scope.row.hidden = true}}},[_vm._v(\"\\n                        \"+_vm._s(scope.row.bookName)+\"\\n                        \"),_c('i',{staticClass:\"fa fa-edit\",style:({'cursor':'pointer',visibility: scope.row.hidden ? 'hidden' : null}),on:{\"click\":function($event){_vm.openEdit(scope.row)}}})]),_vm._v(\" \"),_c('el-popover',{attrs:{\"placement\":\"top\"},model:{value:(scope.row.edit),callback:function ($$v) {_vm.$set(scope.row, \"edit\", $$v)},expression:\"scope.row.edit\"}},[_c('el-input',{staticStyle:{\"width\":\"100%\"},on:{\"keydown\":function($event){_vm.keyCode($event, scope.row)}},model:{value:(_vm.currentTitle),callback:function ($$v) {_vm.currentTitle=$$v},expression:\"currentTitle\"}}),_vm._v(\" \"),_c('div',{staticStyle:{\"text-align\":\"left\",\"margin\":\"10px 0 0 0\",\"bottom\":\"20px\"}},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.updateBookTitle(scope.row)}}},[_vm._v(\"确定\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){scope.row.edit = false}}},[_vm._v(\"取消\")])],1)],1)]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"writerName\",\"label\":\"作者\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n                    \"+_vm._s(scope.row.writerName)+\"(id:\"+_vm._s(scope.row.bookWriterId)+\")\\n                \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"bookStatus\",\"label\":\"是否连载\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{on:{\"click\":function($event){_vm.handleChange('连载', scope.row)}}},[_c('el-switch',{attrs:{\"value\":scope.row.bookStatus === 0 ? false : true}})],1)]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"bookCheckStatus\",\"label\":\"是否审核\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{on:{\"click\":function($event){_vm.handleChange('审核', scope.row)}}},[_c('el-switch',{attrs:{\"value\":scope.row.bookCheckStatus ? true : false}})],1)]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"bookCheckStatus\",\"label\":\"是否上架\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{on:{\"click\":function($event){_vm.handleChange('上架', scope.row)}}},[_c('el-switch',{attrs:{\"value\":scope.row.bookCheckStatus === 2 ? true : false}})],1)]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"创建时间\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(_vm._f(\"time\")(scope.row.bookCreatedTime,'long')))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"更新时间\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(_vm._f(\"time\")(scope.row.lastUpdateTime,'long')))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"bookWorldCount\",\"label\":\"字数\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"是否征文\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{on:{\"click\":function($event){_vm.handleChange('征文', scope.row)}}},[_c('el-switch',{attrs:{\"value\":scope.row.collectionDocuments === 0 ? false : true}})],1)]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"width\":\"80\",\"label\":\"封面\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"cover-wrap\",on:{\"click\":function($event){_vm.dialogShow(scope.row)}}},[(scope.row.bookRemarks)?_c('img',{staticClass:\"icon\",attrs:{\"src\":__webpack_require__(\"1+Xl\")}}):_vm._e(),_vm._v(\" \"),_c('img',{staticClass:\"cover\",attrs:{\"src\":scope.row.bookImage,\"alt\":\"\"}})])]}}])}),_vm._v(\" \"),_c('el-table-column',{staticClass:\"last-column\",attrs:{\"label\":\"操作\",\"width\":\"70\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-dropdown',{attrs:{\"trigger\":\"click\",\"size\":\"medium\",\"placement\":\"bottom\"},on:{\"command\":function($event){_vm.handleClick($event,scope.row)}}},[_c('a',{staticClass:\"btn\",attrs:{\"href\":\"javascript:0;\"}},[_vm._v(\"更多\")]),_vm._v(\" \"),_c('el-dropdown-menu',{attrs:{\"slot\":\"dropdown\"},slot:\"dropdown\"},[(_vm.authority.shows)?_c('el-dropdown-item',{attrs:{\"command\":\"a\"}},[_vm._v(\"章节列表\")]):_vm._e(),_vm._v(\" \"),(_vm.authority.updates)?_c('el-dropdown-item',{attrs:{\"command\":\"b\"}},[_vm._v(\"编辑详情\")]):_vm._e(),_vm._v(\" \"),(_vm.authority.adds)?_c('el-dropdown-item',{attrs:{\"command\":\"c\"}},[_vm._v(\"添加章节\")]):_vm._e(),_vm._v(\" \"),(_vm.authority.deletes)?_c('el-dropdown-item',{staticClass:\"danger\",attrs:{\"command\":\"d\"}},[_vm._v(\"删除书籍\")]):_vm._e()],1)],1)]}}])})],1),_vm._v(\" \"),_c('el-pagination',{staticClass:\"mbt20\",attrs:{\"background\":\"\",\"current-page\":_vm.bookList.pageNum,\"page-size\":_vm.bookList.pageSize,\"layout\":\"total, prev, pager, next, jumper\",\"total\":_vm.bookList.total},on:{\"current-change\":_vm.handleCurrentChange}})],1),_vm._v(\" \"),_c('pic-cropper',{ref:\"avatarUpdate\",attrs:{\"action\":\"https://www.lajixs.com/api/admin/updateBookCoverAvatarimgUpload\",\"visible\":_vm.dialogTableVisible,\"maxWidth\":400,\"data\":{bookid:_vm.updateData.bookId},\"url\":\"/static/img/defaultcoverimg.jpg\",\"aspectRatio\":3/4},on:{\"update:visible\":function($event){_vm.dialogTableVisible=$event},\"close\":_vm.closeIt,\"success\":_vm.successBack}})],1)}\nvar staticRenderFns = []\n\n// EXTERNAL MODULE: ./node_modules/_vue-loader@14.2.2@vue-loader/lib/runtime/component-normalizer.js\nvar component_normalizer = __webpack_require__(\"18Nq\");\n\n// CONCATENATED MODULE: ./src/components/book/index.vue\nfunction injectStyle (context) {\n  __webpack_require__(\"Zl42\")\n}\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\n\nvar Component = Object(component_normalizer[\"a\" /* default */])(\n  book,\n  render,\n  staticRenderFns,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ var components_book = __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/2.5b26e7d5321ad53cd236.js","module.exports = __webpack_public_path__ + \"static/img/Bitmap@3x.0613312.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./static/img/Bitmap@3x.png\n// module id = 1+Xl\n// module chunks = 2","function injectStyle (context) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"scoped\\\":false,\\\"sourceMap\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-18644c57\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/book/index.vue\n// module id = null\n// module chunks = ","<template>\n<div class=\"admin-book-wrap\">\n    <el-alert title=\"操作说明\" type=\"info\" show-icon>\n        <div>\n            <p>\n                此表为本站全部书籍列表，您可以通过相应书籍ID来批量管理，也可以通过\n                <router-link v-if=\"authority.adds\" class=\"red\" :to=\"{name:'addNewBook'}\">新建书籍</router-link>来添加新书\n            </p>\n            <p>\n                <span class=\"red\">提示：</span>需要更多详细筛选条件请直接点击 <a href=\"javascript:0;\" @click=\"fold?fold=false:fold=true\">展开</a>；双击书名可进行修改\n            </p>\n        </div>\n    </el-alert>\n\n    <el-row v-show=\"fold\" class=\"mbt20 fitler-search\">\n        <div>\n            排序类型：\n            <el-radio-group v-model=\"filterList.orderParemeter\">\n                <el-radio-button :label=\"-1\">全部</el-radio-button>\n                <el-radio-button label=\"bookCreatedTime\">创建时间</el-radio-button>\n                <el-radio-button label=\"bookWorldCount\">字数</el-radio-button>\n                <el-radio-button label=\"lastUpdateTime\">更新时间</el-radio-button>\n            </el-radio-group>\n        </div>\n\n        <div>\n            书籍状态：\n            <el-radio-group v-model=\"filterList.bookCheckStatus\">\n                <el-radio-button :label=\"-1\">全部</el-radio-button>\n                <el-radio-button :label=\"0\">未审核</el-radio-button>\n                <el-radio-button :label=\"1\">已审核</el-radio-button>\n                <el-radio-button :label=\"2\">已上架</el-radio-button>\n            </el-radio-group>\n        </div>\n  \n        <div>\n            连载状态：\n            <el-radio-group v-model=\"filterList.bookStatus\">\n                <el-radio-button :label=\"-1\">全部</el-radio-button>\n                <el-radio-button :label=\"0\">连载中</el-radio-button>\n                <el-radio-button :label=\"1\">已完结</el-radio-button>\n            </el-radio-group>\n        </div>\n    </el-row>\n\n    <el-row class=\"mbt20\">\n        <el-button type=\"danger\" v-if=\"authority.deletes\" plain @click=\"toggleSelection()\">批量删除</el-button>\n    </el-row>\n\n    <el-row class=\"mbt20\">\n        <el-col :xs=\"20\" :sm=\"16\" :md=\"12\" :lg=\"9\" :xl=\"6\">\n            <el-input placeholder=\"请输入内容\" v-model=\"keywords\" class=\"input-with-select\" @keyup.enter.native=\"searchBook\">\n                <el-select v-model=\"selectType\" slot=\"prepend\" placeholder=\"请选择\">\n                    <el-option label=\"书  名\" value=\"bookName\"></el-option>\n                    <el-option label=\"作 者\" value=\"writerName\"></el-option>\n                    <el-option label=\"书籍ID\" value=\"bookId\"></el-option>\n                    <el-option label=\"作者ID\" value=\"bookWriterId\"></el-option>\n                    <el-option label=\"手机号\" value=\"userPhone\"></el-option>\n                </el-select>\n                <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"searchBook\"></el-button>\n            </el-input>\n        </el-col>\n    </el-row>\n      \n    <el-row>\n        <el-table\n            ref=\"multipleTable\"\n            :data=\"bookList.list\"\n            border\n            stripe\n            @row-click=\"handleRowClick\"\n            @selection-change=\"handleSelectionChange\"\n            style=\"width: 100%\">\n            <el-table-column align=\"center\" type=\"selection\" width=\"30\"></el-table-column>\n\n            <el-table-column align=\"center\" prop=\"bookId\" width=\"80\" label=\"ID\"></el-table-column>\n          \n            <el-table-column align=\"center\" prop=\"bookName\" label=\"书名\">\n                <template slot-scope=\"scope\">\n                    <p @mouseover=\"scope.row.hidden = false\" @mouseout=\"scope.row.hidden = true\">\n                        {{scope.row.bookName}}\n                        <i class=\"fa fa-edit\" @click=\"openEdit(scope.row)\" :style=\"{'cursor':'pointer',visibility: scope.row.hidden ? 'hidden' : null}\"></i>\n                    </p>\n                    <el-popover placement=\"top\" v-model=\"scope.row.edit\">\n                        <el-input v-model=\"currentTitle\" style=\"width:100%\" @keydown=\"keyCode($event, scope.row)\"></el-input>\n                        <div style=\"text-align: left; margin: 10px 0 0 0; bottom: 20px;\">\n                            <el-button type=\"primary\" size=\"mini\" @click=\"updateBookTitle(scope.row)\">确定</el-button>\n                            <el-button size=\"mini\" @click=\"scope.row.edit = false\">取消</el-button>\n                        </div>\n                    </el-popover>\n                </template>\n            </el-table-column>\n  \n            <el-table-column align=\"center\" prop=\"writerName\" label=\"作者\">\n                <template slot-scope=\"scope\">\n                    {{scope.row.writerName}}(id:{{scope.row.bookWriterId}})\n                </template>\n            </el-table-column>\n          \n            <el-table-column align=\"center\" prop=\"bookStatus\" label=\"是否连载\">\n                <template slot-scope=\"scope\">\n                    <div @click=\"handleChange('连载', scope.row)\">\n                        <el-switch :value=\"scope.row.bookStatus === 0 ? false : true\"></el-switch>\n                    </div>\n                </template>\n            </el-table-column>\n  \n            <el-table-column align=\"center\" prop=\"bookCheckStatus\" label=\"是否审核\">\n                <template slot-scope=\"scope\">\n                    <div @click=\"handleChange('审核', scope.row)\">\n                        <el-switch :value=\"scope.row.bookCheckStatus ? true : false\"></el-switch>\n                    </div>\n                </template>\n            </el-table-column>\n          \n            <el-table-column align=\"center\" prop=\"bookCheckStatus\" label=\"是否上架\">\n                <template slot-scope=\"scope\">\n                    <div @click=\"handleChange('上架', scope.row)\">\n                        <el-switch :value=\"scope.row.bookCheckStatus === 2 ? true : false\"></el-switch>\n                    </div>\n                </template>\n            </el-table-column>\n          \n            <el-table-column label=\"创建时间\" align=\"center\">\n                <template slot-scope=\"scope\">\n                    <span >{{ scope.row.bookCreatedTime | time('long') }}</span>\n                </template>\n            </el-table-column>\n          \n            <el-table-column label=\"更新时间\" align=\"center\">\n                <template slot-scope=\"scope\">\n                    <span>{{ scope.row.lastUpdateTime | time('long') }}</span>\n                </template>\n            </el-table-column>\n          \n            <el-table-column prop=\"bookWorldCount\" label=\"字数\" align=\"center\"></el-table-column>\n\n            <el-table-column label=\"是否征文\" align=\"center\">\n                <template slot-scope=\"scope\">\n                    <div @click=\"handleChange('征文', scope.row)\">\n                        <el-switch :value=\"scope.row.collectionDocuments === 0 ? false : true\"></el-switch>\n                    </div>\n                </template>\n            </el-table-column>\n            \n            <el-table-column width=\"80\" label=\"封面\">\n                <template slot-scope=\"scope\">\n                    <div class=\"cover-wrap\" @click=\"dialogShow(scope.row)\">\n                        <img class=\"icon\" v-if=\"scope.row.bookRemarks\" src=\"../../../static/img/Bitmap@3x.png\">\n                        <img class=\"cover\" :src=\"scope.row.bookImage\" alt=\"\">\n                    </div>\n                </template>\n            </el-table-column>\n          \n            <el-table-column class=\"last-column\" label=\"操作\" width=\"70\" align=\"center\">\n                <template slot-scope=\"scope\">\n                    <el-dropdown trigger=\"click\" size=\"medium\" placement=\"bottom\" @command=\"handleClick($event,scope.row)\">\n                        <a href=\"javascript:0;\" class=\"btn\">更多</a>\n                        <el-dropdown-menu slot=\"dropdown\">\n                            <el-dropdown-item command=\"a\" v-if=\"authority.shows\">章节列表</el-dropdown-item>\n                            <el-dropdown-item command=\"b\" v-if=\"authority.updates\">编辑详情</el-dropdown-item>\n                            <el-dropdown-item command=\"c\" v-if=\"authority.adds\">添加章节</el-dropdown-item>\n                            <el-dropdown-item class=\"danger\" v-if=\"authority.deletes\" command=\"d\">删除书籍</el-dropdown-item>\n                        </el-dropdown-menu>\n                    </el-dropdown>\n                </template>\n            </el-table-column>\n        </el-table>\n\n        <el-pagination\n            class=\"mbt20\"\n            background\n            @current-change=\"handleCurrentChange\"\n            :current-page=\"bookList.pageNum\"\n            :page-size=\"bookList.pageSize\"\n            layout=\"total, prev, pager, next, jumper\"\n            :total=\"bookList.total\">\n        </el-pagination>\n    </el-row>\n  \n    <!--书籍封面上传-->\n    <pic-cropper\n        ref=\"avatarUpdate\"\n        action=\"https://www.lajixs.com/api/admin/updateBookCoverAvatarimgUpload\"\n        :visible.sync=\"dialogTableVisible\"\n        @close=\"closeIt\"\n        @success=\"successBack\"\n        :maxWidth=\"400\"\n        :data=\"{bookid:updateData.bookId}\"\n        url=\"/static/img/defaultcoverimg.jpg\"\n        :aspectRatio=\"3/4\">\n    </pic-cropper>\n</div>\n</template>\n\n<script type=\"text/ecmascript-6\">\nimport PicCropper from '../img_upload.vue'\nexport default{\n\n  components: {\n    'pic-cropper': PicCropper\n  },\n\n  data() {\n    return {\n      currentTitle: '',\n      dialogTableVisible: false,\n      bookList: {},\n      updateData: {},\n      multipleSelection: [],\n      keywords: null,\n      selectType: 'bookName',\n      fold: false,\n      filterList: {\n        orderParemeter: -1,\n        bookCheckStatus: -1,\n        bookStatus: -1\n      },\n      $routeParams: '',\n      keepAlive: false,\n      firstOne: true,\n      editTitle: false,  // 修改书籍标题状态,\n      hiddenIcon: true\n    }\n  },\n\n  methods: {\n    getBookList() {\n      let searchValue = { page: this.$routeParams.page, orderParemeter: 'bookId' }\n      if (this.$route.name === 'bookInfo') {\n        searchValue = { page: 1, orderParemeter: 'bookId' }\n        this.selectType = 'bookId'\n        this.keywords = this.$route.params.bid\n      }\n      const val = this.$http.trim(this.keywords)\n      if (this.selectType && val) {\n        if ((this.selectType === 'bookId' || this.selectType === 'bookWriterId') && !Number(val)) {\n          this.$message({ message: 'ID必需为数字', type: 'warning' })\n          return false\n        }\n        searchValue[this.selectType] = val\n        this.bookList = {}\n      }\n      for (const k in this.filterList) {\n        if ((typeof this.filterList[k] === 'number' && this.filterList[k] > -1) || typeof this.filterList[k] === 'string') {\n          searchValue[k] = this.filterList[k]\n        }\n      }\n      if (this.$route.name === 'bookList' || this.$route.name === 'bookInfo') {\n        this.$ajax('/admin/getBookInfoList', searchValue, res => {\n          if (res.returnCode === 200) {\n            this.bookList = res.data\n            this.bookList.list.forEach((item, i) => {\n              this.$set(this.bookList.list[i], 'edit', false)\n              this.$set(this.bookList.list[i], 'hidden', true)\n            })\n          } else if (!res.data) {\n            this.bookList = {}\n          }\n        })\n      }\n    },\n\n    searchBook() {\n      if (Number(this.$route.params.page) !== 1) {\n        this.$router.push({ params: { page: 1 }})\n      } else {\n        this.getBookList()\n      }\n    },\n\n        // 批量删除书籍\n    toggleSelection() {\n      if (this.multipleSelection.length) {\n        const id = []\n        this.multipleSelection.forEach((item) => { id.push(item.bookId) })\n        this.$confirm('此操作将永久删除所选的' + id.length + '书籍, 是否继续?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          this.$ajax('/admin/bookBatchDelete', { bookid: id.toString() }, res => {\n            if (res.returnCode === 200) {\n              this.$message({ message: '删除成功！', type: 'success' })\n              this.getBookList()\n            }\n          })\n        }).catch(() => {\n          this.$message({ type: 'info', message: '已取消删除' })\n        })\n      } else {\n        this.$message({ message: ' 请选择要删除的书籍！', type: 'warning' })\n      }\n    },\n\n    handleRowClick(row, event, column) {\n      if (column.label !== '操作' && column.label !== '书名') {\n        this.$refs.multipleTable.toggleRowSelection(row)\n      }\n    },\n\n    handleSelectionChange(val) {\n      this.multipleSelection = val\n    },\n\n    handleClick(val, data) {\n      if (val === 'a') {\n                // 章节列表\n        this.$router.push({ path: '/book_chapter_list/' + data.bookId })\n      } else if (val === 'b') {\n                // 编辑书籍详情\n        this.$router.push({ path: '/book_detail/' + data.bookId })\n      } else if (val === 'c') {\n                // 添加章节\n        this.$router.push({ path: '/add_new_chapter/' + data.bookId })\n      } else if (val === 'd') {\n        this.toggleSelection()\n      }\n    },\n\n    handleCurrentChange(page) {\n      this.$router.push({ params: { page: page }})\n    },\n\n    openEdit(row) {\n      this.bookList.list.forEach((item, i) => {\n        if (item.edit) {\n          this.$set(this.bookList.list[i], 'edit', false)\n        }\n      })\n      this.currentTitle = row.bookName\n      row.edit = true\n    },\n\n    keyCode(e, row) {\n      if (e.keyCode === 13) {\n        this.updateBookTitle(row)\n      }\n    },\n\n    updateBookTitle(row) {\n      if (this.currentTitle !== row.bookName) {\n        this.$ajax('/admin/updateBookName', { bookId: row.bookId, bookName: this.currentTitle }, res => {\n          if (res.returnCode === 200) {\n            this.$message({ message: res.msg, type: 'success' })\n            if (this.keywords) {\n              this.keywords = this.currentTitle\n            }\n            this.getBookList()\n            row.edit = false\n          }\n        })\n      } else {\n        row.edit = false\n      }\n    },\n\n    dialogShow(value) {\n      this.dialogTableVisible = true\n      this.$set(this.updateData, 'bookId', value.bookId)\n      this.$set(this.updateData, 'bookImage', value.bookImage)\n    },\n\n        // 上传封面\n    closeIt() {\n      this.dialogTableVisible = false\n    },\n\n        // 上传成功回调\n    successBack(val) {\n      if (val.returnCode === 200) {\n        this.getBookList()\n      }\n    },\n\n        // 修改状态\n    handleChange(type, val) {\n      var data = { bookId: val.bookId }\n      var change = (data) => {\n        this.$store.dispatch('sysbookupdate', data).then(res => {\n          if (res.returnCode === 200) {\n            this.$message({ type: 'success', message: res.msg })\n            this.getBookList()\n          }\n        })\n      }\n      this.$confirm('此操作将更改本书籍状态, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        if (type === '连载') {\n          data.bookStatus = val.bookStatus === 0 ? 1 : 0\n          change(data)\n          console.log(data)\n        } else if (type === '审核') {\n          this.$store.dispatch('getChapterCount', { bookId: data.bookId }).then(res => {\n            if (res.returnCode === 200 && res.data > 1) {\n              data.bookCheckStatus = val.bookCheckStatus === 0 ? 1 : 0\n              console.log(data)\n              change(data)\n            } else {\n              this.$message({ message: '已发布章节不足两章，不可通过审核！', type: 'warning' })\n            }\n          })\n        } else if (type === '上架') {\n          if (val.bookCheckStatus === 0) {\n            this.$message({ type: 'warning', message: '书籍暂未审核，请先审核通过！' })\n          } else {\n            data.bookCheckStatus = val.bookCheckStatus === 1 ? 2 : 1\n            console.log(data)\n            change(data)\n          }\n        } else if (type === '征文') {\n          data.collectionDocuments = val.collectionDocuments === 0 ? 1 : 0\n          console.log(data)\n          change(data)\n        }\n      }).catch(() => {\n        this.$message({ type: 'info', message: '已取消操作！' })\n      })\n    }\n  },\n\n  created() {\n    if (this.firstOne) {\n      this.$routeParams = this.$route.params\n      this.getBookList()\n      this.firstOne = false\n    }\n  },\n\n  activated(val) {\n    if (!this.firstOne) {\n      this.$routeParams = this.$route.params\n      this.getBookList()\n    }\n  },\n\n  watch: {\n    $route: function(val) {\n      this.$routeParams = val.params\n      this.getBookList()\n    },\n\n    filterList: {\n      handler() {\n        this.getBookList()\n      },\n      deep: true\n    }\n  },\n\n  computed: {\n    authority: function() {\n      return this.$store.state.userInfo.adminRolemenuanduserrole ? this.$store.state.userInfo.adminRolemenuanduserrole : {}\n    }\n  }\n}\n</script>\n\n<style lang=\"stylus\" rel=\"stylesheet/stylus\">\n.el-popover\n    bottom 0px\n    width 400px\n.icon\n    position absolute\n    top 5px\n    right 2px\n    width 20px\n    height 20px\n.cover\n    width 100%\n    cursor pointer\n    .cover-preview\n        border 1px solid #ddd\n        .avatar\n            width 200px\n            height 200px\n        .cell\n            >textarea\n                padding 5px\n                resize none\n                border 1px transparent\n                background #fff\n        .edit\n            border none\n        .el-textarea__inner\n            border none!important\n            cursor inherit!important\n            color #333!important\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/book/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"admin-book-wrap\"},[_c('el-alert',{attrs:{\"title\":\"操作说明\",\"type\":\"info\",\"show-icon\":\"\"}},[_c('div',[_c('p',[_vm._v(\"\\n                此表为本站全部书籍列表，您可以通过相应书籍ID来批量管理，也可以通过\\n                \"),(_vm.authority.adds)?_c('router-link',{staticClass:\"red\",attrs:{\"to\":{name:'addNewBook'}}},[_vm._v(\"新建书籍\")]):_vm._e(),_vm._v(\"来添加新书\\n            \")],1),_vm._v(\" \"),_c('p',[_c('span',{staticClass:\"red\"},[_vm._v(\"提示：\")]),_vm._v(\"需要更多详细筛选条件请直接点击 \"),_c('a',{attrs:{\"href\":\"javascript:0;\"},on:{\"click\":function($event){_vm.fold?_vm.fold=false:_vm.fold=true}}},[_vm._v(\"展开\")]),_vm._v(\"；双击书名可进行修改\\n            \")])])]),_vm._v(\" \"),_c('el-row',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.fold),expression:\"fold\"}],staticClass:\"mbt20 fitler-search\"},[_c('div',[_vm._v(\"\\n            排序类型：\\n            \"),_c('el-radio-group',{model:{value:(_vm.filterList.orderParemeter),callback:function ($$v) {_vm.$set(_vm.filterList, \"orderParemeter\", $$v)},expression:\"filterList.orderParemeter\"}},[_c('el-radio-button',{attrs:{\"label\":-1}},[_vm._v(\"全部\")]),_vm._v(\" \"),_c('el-radio-button',{attrs:{\"label\":\"bookCreatedTime\"}},[_vm._v(\"创建时间\")]),_vm._v(\" \"),_c('el-radio-button',{attrs:{\"label\":\"bookWorldCount\"}},[_vm._v(\"字数\")]),_vm._v(\" \"),_c('el-radio-button',{attrs:{\"label\":\"lastUpdateTime\"}},[_vm._v(\"更新时间\")])],1)],1),_vm._v(\" \"),_c('div',[_vm._v(\"\\n            书籍状态：\\n            \"),_c('el-radio-group',{model:{value:(_vm.filterList.bookCheckStatus),callback:function ($$v) {_vm.$set(_vm.filterList, \"bookCheckStatus\", $$v)},expression:\"filterList.bookCheckStatus\"}},[_c('el-radio-button',{attrs:{\"label\":-1}},[_vm._v(\"全部\")]),_vm._v(\" \"),_c('el-radio-button',{attrs:{\"label\":0}},[_vm._v(\"未审核\")]),_vm._v(\" \"),_c('el-radio-button',{attrs:{\"label\":1}},[_vm._v(\"已审核\")]),_vm._v(\" \"),_c('el-radio-button',{attrs:{\"label\":2}},[_vm._v(\"已上架\")])],1)],1),_vm._v(\" \"),_c('div',[_vm._v(\"\\n            连载状态：\\n            \"),_c('el-radio-group',{model:{value:(_vm.filterList.bookStatus),callback:function ($$v) {_vm.$set(_vm.filterList, \"bookStatus\", $$v)},expression:\"filterList.bookStatus\"}},[_c('el-radio-button',{attrs:{\"label\":-1}},[_vm._v(\"全部\")]),_vm._v(\" \"),_c('el-radio-button',{attrs:{\"label\":0}},[_vm._v(\"连载中\")]),_vm._v(\" \"),_c('el-radio-button',{attrs:{\"label\":1}},[_vm._v(\"已完结\")])],1)],1)]),_vm._v(\" \"),_c('el-row',{staticClass:\"mbt20\"},[(_vm.authority.deletes)?_c('el-button',{attrs:{\"type\":\"danger\",\"plain\":\"\"},on:{\"click\":function($event){_vm.toggleSelection()}}},[_vm._v(\"批量删除\")]):_vm._e()],1),_vm._v(\" \"),_c('el-row',{staticClass:\"mbt20\"},[_c('el-col',{attrs:{\"xs\":20,\"sm\":16,\"md\":12,\"lg\":9,\"xl\":6}},[_c('el-input',{staticClass:\"input-with-select\",attrs:{\"placeholder\":\"请输入内容\"},nativeOn:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.searchBook($event)}},model:{value:(_vm.keywords),callback:function ($$v) {_vm.keywords=$$v},expression:\"keywords\"}},[_c('el-select',{attrs:{\"slot\":\"prepend\",\"placeholder\":\"请选择\"},slot:\"prepend\",model:{value:(_vm.selectType),callback:function ($$v) {_vm.selectType=$$v},expression:\"selectType\"}},[_c('el-option',{attrs:{\"label\":\"书  名\",\"value\":\"bookName\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"作 者\",\"value\":\"writerName\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"书籍ID\",\"value\":\"bookId\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"作者ID\",\"value\":\"bookWriterId\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"手机号\",\"value\":\"userPhone\"}})],1),_vm._v(\" \"),_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.searchBook},slot:\"append\"})],1)],1)],1),_vm._v(\" \"),_c('el-row',[_c('el-table',{ref:\"multipleTable\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.bookList.list,\"border\":\"\",\"stripe\":\"\"},on:{\"row-click\":_vm.handleRowClick,\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"align\":\"center\",\"type\":\"selection\",\"width\":\"30\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"bookId\",\"width\":\"80\",\"label\":\"ID\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"bookName\",\"label\":\"书名\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('p',{on:{\"mouseover\":function($event){scope.row.hidden = false},\"mouseout\":function($event){scope.row.hidden = true}}},[_vm._v(\"\\n                        \"+_vm._s(scope.row.bookName)+\"\\n                        \"),_c('i',{staticClass:\"fa fa-edit\",style:({'cursor':'pointer',visibility: scope.row.hidden ? 'hidden' : null}),on:{\"click\":function($event){_vm.openEdit(scope.row)}}})]),_vm._v(\" \"),_c('el-popover',{attrs:{\"placement\":\"top\"},model:{value:(scope.row.edit),callback:function ($$v) {_vm.$set(scope.row, \"edit\", $$v)},expression:\"scope.row.edit\"}},[_c('el-input',{staticStyle:{\"width\":\"100%\"},on:{\"keydown\":function($event){_vm.keyCode($event, scope.row)}},model:{value:(_vm.currentTitle),callback:function ($$v) {_vm.currentTitle=$$v},expression:\"currentTitle\"}}),_vm._v(\" \"),_c('div',{staticStyle:{\"text-align\":\"left\",\"margin\":\"10px 0 0 0\",\"bottom\":\"20px\"}},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.updateBookTitle(scope.row)}}},[_vm._v(\"确定\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){scope.row.edit = false}}},[_vm._v(\"取消\")])],1)],1)]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"writerName\",\"label\":\"作者\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n                    \"+_vm._s(scope.row.writerName)+\"(id:\"+_vm._s(scope.row.bookWriterId)+\")\\n                \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"bookStatus\",\"label\":\"是否连载\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{on:{\"click\":function($event){_vm.handleChange('连载', scope.row)}}},[_c('el-switch',{attrs:{\"value\":scope.row.bookStatus === 0 ? false : true}})],1)]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"bookCheckStatus\",\"label\":\"是否审核\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{on:{\"click\":function($event){_vm.handleChange('审核', scope.row)}}},[_c('el-switch',{attrs:{\"value\":scope.row.bookCheckStatus ? true : false}})],1)]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"bookCheckStatus\",\"label\":\"是否上架\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{on:{\"click\":function($event){_vm.handleChange('上架', scope.row)}}},[_c('el-switch',{attrs:{\"value\":scope.row.bookCheckStatus === 2 ? true : false}})],1)]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"创建时间\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(_vm._f(\"time\")(scope.row.bookCreatedTime,'long')))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"更新时间\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(_vm._f(\"time\")(scope.row.lastUpdateTime,'long')))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"bookWorldCount\",\"label\":\"字数\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"是否征文\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{on:{\"click\":function($event){_vm.handleChange('征文', scope.row)}}},[_c('el-switch',{attrs:{\"value\":scope.row.collectionDocuments === 0 ? false : true}})],1)]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"width\":\"80\",\"label\":\"封面\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"cover-wrap\",on:{\"click\":function($event){_vm.dialogShow(scope.row)}}},[(scope.row.bookRemarks)?_c('img',{staticClass:\"icon\",attrs:{\"src\":require(\"../../../static/img/Bitmap@3x.png\")}}):_vm._e(),_vm._v(\" \"),_c('img',{staticClass:\"cover\",attrs:{\"src\":scope.row.bookImage,\"alt\":\"\"}})])]}}])}),_vm._v(\" \"),_c('el-table-column',{staticClass:\"last-column\",attrs:{\"label\":\"操作\",\"width\":\"70\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-dropdown',{attrs:{\"trigger\":\"click\",\"size\":\"medium\",\"placement\":\"bottom\"},on:{\"command\":function($event){_vm.handleClick($event,scope.row)}}},[_c('a',{staticClass:\"btn\",attrs:{\"href\":\"javascript:0;\"}},[_vm._v(\"更多\")]),_vm._v(\" \"),_c('el-dropdown-menu',{attrs:{\"slot\":\"dropdown\"},slot:\"dropdown\"},[(_vm.authority.shows)?_c('el-dropdown-item',{attrs:{\"command\":\"a\"}},[_vm._v(\"章节列表\")]):_vm._e(),_vm._v(\" \"),(_vm.authority.updates)?_c('el-dropdown-item',{attrs:{\"command\":\"b\"}},[_vm._v(\"编辑详情\")]):_vm._e(),_vm._v(\" \"),(_vm.authority.adds)?_c('el-dropdown-item',{attrs:{\"command\":\"c\"}},[_vm._v(\"添加章节\")]):_vm._e(),_vm._v(\" \"),(_vm.authority.deletes)?_c('el-dropdown-item',{staticClass:\"danger\",attrs:{\"command\":\"d\"}},[_vm._v(\"删除书籍\")]):_vm._e()],1)],1)]}}])})],1),_vm._v(\" \"),_c('el-pagination',{staticClass:\"mbt20\",attrs:{\"background\":\"\",\"current-page\":_vm.bookList.pageNum,\"page-size\":_vm.bookList.pageSize,\"layout\":\"total, prev, pager, next, jumper\",\"total\":_vm.bookList.total},on:{\"current-change\":_vm.handleCurrentChange}})],1),_vm._v(\" \"),_c('pic-cropper',{ref:\"avatarUpdate\",attrs:{\"action\":\"https://www.lajixs.com/api/admin/updateBookCoverAvatarimgUpload\",\"visible\":_vm.dialogTableVisible,\"maxWidth\":400,\"data\":{bookid:_vm.updateData.bookId},\"url\":\"/static/img/defaultcoverimg.jpg\",\"aspectRatio\":3/4},on:{\"update:visible\":function($event){_vm.dialogTableVisible=$event},\"close\":_vm.closeIt,\"success\":_vm.successBack}})],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@14.2.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-18644c57\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@14.2.2@vue-loader/lib/selector.js?type=template&index=0!./src/components/book/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}