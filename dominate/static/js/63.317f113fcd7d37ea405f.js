webpackJsonp([63],{CUxv:function(a,t){},QZJV:function(a,t,e){"use strict";function r(a){e("CUxv")}Object.defineProperty(t,"__esModule",{value:!0});var s=e("5YEj"),n=e.n(s),i=e("0EVO"),o={components:{canalID:i.a},data:function(){return{canalIDList:[],showUp:!1,beginMonUp:"",endMonUp:"",dayValueUp:[],showStrUp:"按日查询",isClickUp:!1,isShowDayUp:!1,isShowMonthUp:!1,active:0,defaultDate:{channelId:"",dateTime:this.dateTiming((new Date).getTime()-5184e5,"start"),endTime:this.dateTiming((new Date).getTime(),"end"),group:"A"},allDateArr:{All:[[],[],[],[],[],[]],android:[[],[],[],[],[],[]],ios:[[],[],[],[],[],[]],wap:[[],[],[],[],[],[]],pc:[[],[],[],[],[],[]]},option:{tooltip:{trigger:"axis"},grid:{left:"3%",top:"12%"},legend:{data:["安装量","下载量","注册量","1日留存","7日留存","30日留存"]},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar","stack","tiled"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!0,xAxis:[{type:"category",boundaryGap:!1,data:[]}],yAxis:[{type:"value"}],series:[{name:"安装量",type:"line",data:[]},{name:"下载量",type:"line",data:[]},{name:"注册量",type:"line",data:[]},{name:"1日留存",type:"line",data:[]},{name:"7日留存",type:"line",data:[]},{name:"30日留存",type:"line",data:[]}]}}},created:function(){"北京九山海"===JSON.parse(sessionStorage.getItem("user_info")).adminInfo.userName?(this.canalIDList=this.$store.state.census.jiushanhaiList,this.defaultDate.channelId=this.$store.state.census.jiushanhaiList[0].id):"哔哩哔哩"===JSON.parse(sessionStorage.getItem("user_info")).adminInfo.userName?(this.canalIDList=this.$store.state.census.bilibiliList,this.defaultDate.channelId=this.$store.state.census.bilibiliList[0].id):(this.canalIDList=this.$store.state.census.censusList,this.defaultDate.channelId=this.$store.state.census.censusList[0].id);for(var a=(new Date).getTime(),t=0;t<7;t++)this.option.xAxis[0].data.unshift(this.FunWeekTime(a-1e3*t*60*60*24));this.bookChart()},methods:{bookChart:function(){var a=this;this.allDateArr={All:[[],[],[],[],[],[]],android:[[],[],[],[],[],[]],ios:[[],[],[],[],[],[]],wap:[[],[],[],[],[],[]],pc:[[],[],[],[],[],[]]},this.$store.dispatch("census/getPromotioninfoData",this.defaultDate).then(function(t){if(200===t.returnCode){for(var e=a.option.xAxis[0].data,r=[],s=t.data.promotioninfoList,n=0;n<t.data.promotioninfoList.length;n++)r.push(a.FunWeekTime(t.data.promotioninfoList[n].dateTime));for(var i=0;i<e.length;i++){var o=r.indexOf(e[i]);if(o>=0?(a.allDateArr.All[0].push(s[o].androidInstallationCount+s[o].iosInstallationCount),a.allDateArr.All[1].push(s[o].androidDownloadCount+s[o].iosDownloadCount),a.allDateArr.All[2].push(s[o].androidRegisterCount+s[o].iosRegisterCount+s[o].wapRegisterCount+s[o].pcRegisterCount),a.allDateArr.android[0].push(s[o].androidInstallationCount),a.allDateArr.android[1].push(s[o].androidDownloadCount),a.allDateArr.android[2].push(s[o].androidRegisterCount),a.allDateArr.ios[0].push(s[o].iosInstallationCount),a.allDateArr.ios[1].push(s[o].iosDownloadCount),a.allDateArr.ios[2].push(s[o].iosRegisterCount),a.allDateArr.wap[0].push(0),a.allDateArr.wap[1].push(0),a.allDateArr.wap[2].push(s[o].wapRegisterCount),a.allDateArr.pc[0].push(0),a.allDateArr.pc[1].push(0),a.allDateArr.pc[2].push(s[o].pcRegisterCount)):(a.allDateArr.All[0].push(0),a.allDateArr.All[1].push(0),a.allDateArr.All[2].push(0),a.allDateArr.android[0].push(0),a.allDateArr.android[1].push(0),a.allDateArr.android[2].push(0),a.allDateArr.ios[0].push(0),a.allDateArr.ios[1].push(0),a.allDateArr.ios[2].push(0),a.allDateArr.wap[0].push(0),a.allDateArr.wap[1].push(0),a.allDateArr.wap[2].push(0),a.allDateArr.pc[0].push(0),a.allDateArr.pc[1].push(0),a.allDateArr.pc[2].push(0)),"按日查询"===a.showStrUp){var l=a.groupA(t.data.AndroidUserRetainCountGroup1).indexOf(e[i]);l>=0?a.allDateArr.android[3].push(t.data.AndroidUserRetainCountGroup1[l].counts):a.allDateArr.android[3].push(0);var u=a.groupA(t.data.AndroidUserRetainCountGroup7).indexOf(e[i]);u>=0?a.allDateArr.android[3].push(t.data.AndroidUserRetainCountGroup7[u].counts):a.allDateArr.android[4].push(0);var p=a.groupA(t.data.AndroidUserRetainCountGroup30).indexOf(e[i]);p>=0?a.allDateArr.android[5].push(t.data.AndroidUserRetainCountGroup30[p].counts):a.allDateArr.android[5].push(0);var d=a.groupA(t.data.IOSUserRetainCountGroup1).indexOf(e[i]);d>=0?a.allDateArr.ios[3].push(t.data.IOSUserRetainCountGroup1[d].counts):a.allDateArr.ios[3].push(0);var h=a.groupA(t.data.IOSAndroidUserRetainCountGroup7).indexOf(e[i]);h>=0?a.allDateArr.ios[4].push(t.data.IOSAndroidUserRetainCountGroup7[h].counts):a.allDateArr.ios[4].push(0);var c=a.groupA(t.data.IOSAndroidUserRetainCountGroup30).indexOf(e[i]);c>=0?a.allDateArr.ios[5].push(t.data.IOSAndroidUserRetainCountGroup30[c].counts):a.allDateArr.ios[5].push(0);var A=a.groupA(t.data.WAPuserRetainCountGroup1).indexOf(e[i]);A>=0?a.allDateArr.wap[3].push(t.data.WAPuserRetainCountGroup1[A].counts):a.allDateArr.wap[3].push(0);var D=a.groupA(t.data.WAPuserRetainCountGroup7).indexOf(e[i]);D>=0?a.allDateArr.wap[4].push(t.data.WAPuserRetainCountGroup7[D].counts):a.allDateArr.wap[4].push(0);var f=a.groupA(t.data.WAPuserRetainCountGroup30).indexOf(e[i]);f>=0?a.allDateArr.wap[5].push(t.data.WAPuserRetainCountGroup30[f].counts):a.allDateArr.wap[5].push(0);var C=a.groupA(t.data.userRetainCount1).indexOf(e[i]);C>=0?a.allDateArr.All[3].push(t.data.userRetainCount1[C].counts):a.allDateArr.All[3].push(0);var n=a.groupA(t.data.userRetainCount7).indexOf(e[i]);n>=0?a.allDateArr.All[4].push(t.data.userRetainCount7[n].counts):a.allDateArr.All[4].push(0);var v=a.groupA(t.data.userRetainCount30).indexOf(e[i]);v>=0?a.allDateArr.All[5].push(t.data.userRetainCount30[v].counts):a.allDateArr.All[5].push(0)}else if("按月查询"===a.showStrUp){var l=a.groupMonth(t.data.AndroidUserRetainCountGroup1).indexOf(e[i]);l>=0?a.allDateArr.android[3].push(t.data.AndroidUserRetainCountGroup1[l].counts):a.allDateArr.android[3].push(0);var u=a.groupMonth(t.data.AndroidUserRetainCountGroup7).indexOf(e[i]);u>=0?a.allDateArr.android[3].push(t.data.AndroidUserRetainCountGroup7[u].counts):a.allDateArr.android[4].push(0);var p=a.groupMonth(t.data.AndroidUserRetainCountGroup30).indexOf(e[i]);p>=0?a.allDateArr.android[5].push(t.data.AndroidUserRetainCountGroup30[p].counts):a.allDateArr.android[5].push(0);var d=a.groupMonth(t.data.IOSUserRetainCountGroup1).indexOf(e[i]);d>=0?a.allDateArr.ios[3].push(t.data.IOSUserRetainCountGroup1[d].counts):a.allDateArr.ios[3].push(0);var h=a.groupMonth(t.data.IOSAndroidUserRetainCountGroup7).indexOf(e[i]);h>=0?a.allDateArr.ios[4].push(t.data.IOSAndroidUserRetainCountGroup7[h].counts):a.allDateArr.ios[4].push(0);var c=a.groupMonth(t.data.IOSAndroidUserRetainCountGroup30).indexOf(e[i]);c>=0?a.allDateArr.ios[5].push(t.data.IOSAndroidUserRetainCountGroup30[c].counts):a.allDateArr.ios[5].push(0);var A=a.groupMonth(t.data.WAPuserRetainCountGroup1).indexOf(e[i]);A>=0?a.allDateArr.wap[3].push(t.data.WAPuserRetainCountGroup1[A].counts):a.allDateArr.wap[3].push(0);var D=a.groupMonth(t.data.WAPuserRetainCountGroup7).indexOf(e[i]);D>=0?a.allDateArr.wap[4].push(t.data.WAPuserRetainCountGroup7[D].counts):a.allDateArr.wap[4].push(0);var f=a.groupMonth(t.data.WAPuserRetainCountGroup30).indexOf(e[i]);f>=0?a.allDateArr.wap[5].push(t.data.WAPuserRetainCountGroup30[f].counts):a.allDateArr.wap[5].push(0);var g=a.groupMonth(t.data.PCUserRetainCountGroup1).indexOf(e[i]);g>=0?a.allDateArr.pc[3].push(t.data.PCUserRetainCountGroup1[g].counts):a.allDateArr.pc[3].push(0);var U=a.groupMonth(t.data.PCUserRetainCountGroup7).indexOf(e[i]);U>=0?a.allDateArr.pc[4].push(t.data.PCUserRetainCountGroup7[U].counts):a.allDateArr.pc[4].push(0);var w=a.groupMonth(t.data.PCUserRetainCountGroup30).indexOf(e[i]);w>=0?a.allDateArr.pc[5].push(t.data.PCUserRetainCountGroup30[w].counts):a.allDateArr.pc[5].push(0);var C=a.groupMonth(t.data.userRetainCount1).indexOf(e[i]);C>=0?a.allDateArr.All[3].push(t.data.userRetainCount1[C].counts):a.allDateArr.All[3].push(0);var n=a.groupMonth(t.data.userRetainCount7).indexOf(e[i]);n>=0?a.allDateArr.All[4].push(t.data.userRetainCount7[n].counts):a.allDateArr.All[4].push(0);var v=a.groupMonth(t.data.userRetainCount30).indexOf(e[i]);v>=0?a.allDateArr.All[5].push(t.data.userRetainCount30[v].counts):a.allDateArr.All[5].push(0)}}a.repeatEchart(a.allDateArr.All)}else a.allDateArr.All[0].push(0),a.allDateArr.All[1].push(0),a.allDateArr.All[2].push(0),a.allDateArr.All[3].push(0),a.allDateArr.All[4].push(0),a.allDateArr.All[5].push(0),a.repeatEchart(a.allDateArr.All)})},groupA:function(a){for(var t=[],e=0;e<a.length;e++)t.push(this.FunWeekTime(a[e].userCreateDate));return t},groupMonth:function(a){for(var t=[],e=0;e<a.length;e++)t.push(this.RecectMonth(a[e].userCreateDate));return t},canalParam:function(a){this.defaultDate.channelId=a,this.bookChart()},repeatEchart:function(a){var t=n.a.init(document.getElementById("trendGrowth1"));t.showLoading();for(var e=0;e<6;e++)this.option.series[e].data=a[e];t.setOption(this.option,!0),t.hideLoading()},handleCommandUp:function(a){this.option.xAxis[0].data=[],"按日查询"===a?(this.showStrUp=a,this.showUp=!0,this.isShowDayUp=!0,this.isShowMonthUp=!1):"按月查询"===a&&(this.showStrUp=a,this.showUp=!0,this.isShowDayUp=!1,this.isShowMonthUp=!0)},handChangeDateUp:function(){if("按日查询"===this.showStrUp)if(this.dayValueUp[1]-this.dayValueUp[0]<=2592e6){this.defaultDate.group="A",this.defaultDate.dateTime=this.dateTiming(this.dayValueUp[0].getTime(),"start"),this.defaultDate.endTime=this.dateTiming(this.dayValueUp[1].getTime(),"end"),this.isShowDayUp=!1,this.isShowMonthUp=!1,this.showUp=!1;for(var a=(this.dayValueUp[1]-this.dayValueUp[0])/864e5,t=0;t<=a;t++)this.option.xAxis[0].data.unshift(this.FunWeekTime(this.dayValueUp[1]-1e3*t*60*60*24));this.bookChart()}else this.$message({message:"时间间隔不能超过一个月！",type:"warning"});else if("按月查询"===this.showStrUp)if(""===this.endMonUp||""===this.beginMonUp)this.$message({message:"月份不能为空错误！",type:"warning"});else if(this.endMonUp-this.beginMonUp<0)this.$message({message:"月份选取错误！",type:"warning"});else{this.defaultDate.group="B",this.defaultDate.dateTime=this.dateTiming(this.beginMonUp.getTime(),"start"),this.defaultDate.endTime=this.dateTiming(this.endMonUp.getTime()-864e5,"end"),this.isShowDayUp=!1,this.isShowMonthUp=!1,this.showUp=!1;for(var a=(this.endMonUp-this.beginMonUp)/2592e6,e=0;e<=a;e++)this.option.xAxis[0].data.unshift(this.RecectMonth(this.endMonUp-1e3*e*60*60*24*30));this.bookChart()}}},watch:{active:function(a){document.getElementById("echarts-box").innerHTML='<div id="trendGrowth1" style="width: 100%; height: 400px;"></div>',0===a?this.repeatEchart(this.allDateArr.All):1===a?this.repeatEchart(this.allDateArr.android):2===a?this.repeatEchart(this.allDateArr.ios):3===a?this.repeatEchart(this.allDateArr.wap):4===a&&this.repeatEchart(this.allDateArr.pc)}}},l=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"create-book"},[[e("canalID",{attrs:{list:a.canalIDList},on:{canalParam:a.canalParam}})],a._v(" "),e("div",{staticClass:"echart"},[e("span",[a._v("总统计量")]),a._v(" "),e("span",{class:{active:0===a.active},on:{click:function(t){a.active=0}}},[a._v("All")]),a._v(" "),e("span",{class:{active:1===a.active},on:{click:function(t){a.active=1}}},[e("i",{staticClass:"fa fa-android"}),a._v(" Android")]),a._v(" "),e("span",{class:{active:2===a.active},on:{click:function(t){a.active=2}}},[e("i",{staticClass:"fa fa-apple"}),a._v(" IOS")]),a._v(" "),e("span",{class:{active:3===a.active},on:{click:function(t){a.active=3}}},[e("i",{staticClass:"fa fa-mobile"}),a._v(" 手机站")]),a._v(" "),e("span",{class:{active:4===a.active},on:{click:function(t){a.active=4}}},[e("i",{staticClass:"fa fa-desktop"}),a._v(" PC")]),a._v(" "),e("div",{staticClass:"drop-down-echart"},[e("el-button",{staticClass:"title",on:{click:function(t){a.showUp=!a.showUp}}},[a._v(a._s(a.showStrUp)+" "),e("i",{staticClass:"fa fa-sort-down"})]),a._v(" "),e("div",{staticClass:"drop-down-box"},[e("el-collapse-transition",[e("div",{directives:[{name:"show",rawName:"v-show",value:a.showUp,expression:"showUp"}]},[e("div",{staticClass:"transition-box",on:{click:function(t){a.handleCommandUp("按日查询")}}},[a._v("\r\n                            按日查询\r\n                            "),e("div",{staticClass:"change-date"},[a.isShowDayUp?e("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:a.dayValueUp,callback:function(t){a.dayValueUp=t},expression:"dayValueUp"}}):a._e()],1)]),a._v(" "),e("div",{staticClass:"transition-box",on:{click:function(t){a.handleCommandUp("按月查询")}}},[a._v("\r\n                            按月查询\r\n                            "),e("div",{staticClass:"change-date"},[a.isShowMonthUp?e("el-date-picker",{attrs:{type:"month",placeholder:"起始月份"},model:{value:a.beginMonUp,callback:function(t){a.beginMonUp=t},expression:"beginMonUp"}}):a._e(),a._v(" "),a.isShowMonthUp?e("el-date-picker",{attrs:{type:"month",placeholder:"结束月份"},model:{value:a.endMonUp,callback:function(t){a.endMonUp=t},expression:"endMonUp"}}):a._e()],1)]),a._v(" "),e("div",{staticClass:"transition-box tool"},[e("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){a.handChangeDateUp()}}},[a._v("确定")]),a._v(" "),e("el-button",{attrs:{size:"mini"},on:{click:function(t){a.showUp=!1,a.isShowMonthUp=!1,a.isShowDayUp=!1}}},[a._v("取消")])],1)])])],1)],1)]),a._v(" "),a._m(0)],2)},u=[function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"trendGrowth",attrs:{id:"echarts-box"}},[e("div",{staticStyle:{width:"100%",height:"400px"},attrs:{id:"trendGrowth1"}})])}],p=e("18Nq"),d=r,h=Object(p.a)(o,l,u,!1,d,"data-v-fb783b96",null);t.default=h.exports}});
//# sourceMappingURL=63.317f113fcd7d37ea405f.js.map