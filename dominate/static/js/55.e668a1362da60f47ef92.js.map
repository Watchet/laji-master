{"version":3,"sources":["webpack:///static/js/55.e668a1362da60f47ef92.js","webpack:///./src/components/book/draft_list.vue","webpack:///src/components/book/draft_list.vue","webpack:///./src/components/book/draft_list.vue?fdf1"],"names":["webpackJsonp","9tLl","module","exports","9ztl","__webpack_exports__","__webpack_require__","injectStyle","context","Object","defineProperty","value","vuedraggable","vuedraggable_default","n","draft_list","components","draggable","a","data","checkList","centerDialogVisible","draftList","cloneList","updateData","page","multipleSelection","newDrag","keywords","methods","getChapterList","_this","this","$ajax","$route","params","searchCondition","res","returnCode","toggleRowSelection","_this2","length","$confirm","confirmButtonText","cancelButtonText","type","then","$message","message","catch","showClose","handleSelectionChange","val","handleRowClick","row","$refs","multipleTable","handleClick","$router","push","path","id","handleCurrentChange","bookChangeState","_this3","state","bookCheckStatus","status","bookStatus","bookId","bookAuthorization","msg","getBookList","created","watch","computed","nowTime","time","Date","getTime","beijing","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","separator-class","_v","title","show-icon","plain","on","click","xs","sm","md","lg","xl","placeholder","nativeOn","keyup","$event","_k","keyCode","key","model","callback","$$v","expression","slot","icon","ref","staticStyle","width","border","list","tooltip-effect","selection-change","prop","label","scopedSlots","_u","fn","scope","_s","bookTitle","align","_f","releaseTime","$store","userInfo","adminRolemenuanduserrole","updates","size","trigger","placement","command","href","_e","total","pageSize","current-page","Number","page-size","layout","current-change","staticRenderFns","component_normalizer","__vue_styles__","Component"],"mappings":"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","file":"static/js/55.e668a1362da60f47ef92.js","sourcesContent":["webpackJsonp([55],{\n\n/***/ \"9tLl\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"9ztl\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// EXTERNAL MODULE: ./node_modules/_vuedraggable@2.16.0@vuedraggable/dist/vuedraggable.js\nvar vuedraggable = __webpack_require__(\"405r\");\nvar vuedraggable_default = /*#__PURE__*/__webpack_require__.n(vuedraggable);\n\n// CONCATENATED MODULE: ./node_modules/_babel-loader@7.1.4@babel-loader/lib!./node_modules/_vue-loader@14.2.2@vue-loader/lib/selector.js?type=script&index=0!./src/components/book/draft_list.vue\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n/* harmony default export */ var draft_list = ({\n  components: {\n    draggable: vuedraggable_default.a\n  },\n  data: function data() {\n    return {\n      checkList: [],\n      centerDialogVisible: false,\n      draftList: [],\n      cloneList: [],\n      updateData: {},\n      page: 1,\n      multipleSelection: [],\n      newDrag: true,\n      keywords: ''\n    };\n  },\n\n  methods: {\n    getChapterList: function getChapterList() {\n      var _this = this;\n\n      this.$ajax('/admin/getAdminChapterDraft', {\n        page: this.$route.params.page,\n        searchCondition: this.keywords\n      }, function (res) {\n        if (res.returnCode === 200) {\n          //            res.data.forEach((item)=>{\n          //              if(item.resultList.length>0){\n          //                arr = arr.concat(item.resultList)\n          //              }\n          //            });\n          _this.draftList = res.data;\n        }\n      });\n    },\n\n\n    //      批量删除\n    toggleRowSelection: function toggleRowSelection() {\n      var _this2 = this;\n\n      if (this.multipleSelection.length) {\n        this.$confirm('此操作将永久删除所选章节, 是否继续?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(function () {\n          _this2.getChapterList();\n          _this2.$message({\n            type: 'success',\n            message: '删除成功!'\n          });\n        }).catch(function () {\n          _this2.$message({\n            type: 'info',\n            message: '已取消删除'\n          });\n        });\n      } else {\n        this.$message({ message: '请选取要删除的章节！', type: 'warning', showClose: true });\n      }\n    },\n    handleSelectionChange: function handleSelectionChange(val) {\n      this.multipleSelection = val;\n    },\n\n    //      点击行选中\n    handleRowClick: function handleRowClick(row) {\n      this.$refs.multipleTable.toggleRowSelection(row);\n    },\n    handleClick: function handleClick(val, data) {\n      if (val === 'a') {\n        this.$router.push({ path: '/edit_chapter/' + data.id });\n      } else if (val === 'b') {} else if (val === 'c') {}\n    },\n    handleCurrentChange: function handleCurrentChange(page) {\n      this.page = page;\n      this.$router.push({ params: { page: page } });\n    },\n\n\n    //        书籍上架下架\n    bookChangeState: function bookChangeState(val, data) {\n      var _this3 = this;\n\n      var state = data.bookCheckStatus,\n          status = data.bookStatus;\n      if (val === 'a') {\n        //              书籍审核\n        state = 1;\n      } else if (val === 'b') {\n        //              书籍上架\n        if (data.bookCheckStatus === 0) {\n          this.$message({ message: '书籍暂未审核，请先审核通过！', type: 'warning' });\n        } else {\n          state = 2;\n        }\n      } else if (val === 'c') {\n        //              书籍下架\n        if (data.bookCheckStatus <= 1) {\n          this.$message({ message: '书籍已下架！', type: 'warning' });\n        } else {\n          state = 1;\n        }\n      } else if (val === 'd') {\n        status = 1;\n      }\n      this.$ajax('/admin/sysbookupdate', { bookId: data.bookId, bookCheckStatus: state, bookAuthorization: data.bookAuthorization, bookStatus: status }, function (res) {\n        if (res.returnCode === 200) {\n          _this3.$message(res.msg);\n          _this3.getBookList();\n        }\n      });\n    }\n  },\n  created: function created() {\n    this.getChapterList();\n  },\n\n  watch: {\n    $route: function $route() {\n      this.getChapterList();\n    }\n  },\n  computed: {\n    nowTime: function nowTime() {\n      var time = new Date().getTime();\n      this.$ajax('/sys-getNetWorkDateTime', '', function (res) {\n        if (res.returnCode === 200) {\n          time = res.data.beijing;\n        }\n      }, 'get');\n      return time;\n    }\n  }\n});\n// CONCATENATED MODULE: ./node_modules/_vue-loader@14.2.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-2fa5a7fc\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@14.2.2@vue-loader/lib/selector.js?type=template&index=0!./src/components/book/draft_list.vue\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"admin-book-wrap\"},[_c('el-breadcrumb',{staticClass:\"mbt20\",attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',[_vm._v(\"书籍管理\")]),_vm._v(\" \"),_c('el-breadcrumb-item',[_vm._v(\"草稿箱列表\")])],1),_vm._v(\" \"),_c('el-alert',{attrs:{\"title\":\"操作说明\",\"type\":\"info\",\"show-icon\":\"\"}},[_c('div',[_c('p',[_vm._v(\"\\n        此表是本站全部草稿章节，您可通过ID进行批量管理\\n      \")])])]),_vm._v(\" \"),_c('el-row',{staticClass:\"mbt20\"},[_c('el-button',{attrs:{\"type\":\"danger\",\"plain\":\"\"},on:{\"click\":_vm.toggleRowSelection}},[_vm._v(\"批量删除\")])],1),_vm._v(\" \"),_c('el-row',{staticClass:\"mbt20\"},[_c('el-col',{attrs:{\"xs\":20,\"sm\":16,\"md\":12,\"lg\":9,\"xl\":6}},[_c('el-input',{staticClass:\"input-with-select\",attrs:{\"placeholder\":\"请输入书籍id或者书籍名称\"},nativeOn:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.getChapterList($event)}},model:{value:(_vm.keywords),callback:function ($$v) {_vm.keywords=$$v},expression:\"keywords\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.getChapterList},slot:\"append\"})],1)],1)],1),_vm._v(\" \"),_c('el-row',[_c('el-table',{ref:\"multipleTable\",staticStyle:{\"width\":\"100%\"},attrs:{\"border\":\"\",\"data\":_vm.draftList.list,\"tooltip-effect\":\"dark\"},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"type\":\"selection\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"章节ID\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"bookTitle\",\"label\":\"书名\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n            (id:\"+_vm._s(scope.row.bookId)+\")\"+_vm._s(scope.row.bookTitle)+\"\\n          \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"chapterTitle\",\"label\":\"章节名\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"chapterIsvip\",\"label\":\"VIP状态\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.chapterIsvip)?_c('span',{staticClass:\"red\"},[_vm._v(\"VIP\")]):_c('span',{staticClass:\"green\"},[_vm._v(\"普通\")])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"chapterState\",\"label\":\"审核状态\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.chapterState)?_c('span',{staticClass:\"red\"},[_vm._v(\"未审核\")]):_c('span',{staticClass:\"green\"},[_vm._v(\"已审核\")])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"发布时间\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n           \"+_vm._s(_vm._f(\"time\")(scope.row.releaseTime,'long'))+\"\\n          \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"chapterLength\",\"align\":\"center\",\"label\":\"字数\"}}),_vm._v(\" \"),(_vm.$store.state.userInfo && _vm.$store.state.userInfo.adminRolemenuanduserrole.updates)?_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-dropdown',{attrs:{\"size\":\"medium\",\"trigger\":\"click\",\"placement\":\"bottom\"},on:{\"command\":function($event){_vm.handleClick($event,scope.row)}}},[_c('a',{attrs:{\"href\":\"javascript:0;\"}},[_vm._v(\"更多\")]),_vm._v(\" \"),_c('el-dropdown-menu',{attrs:{\"slot\":\"dropdown\"},slot:\"dropdown\"},[_c('el-dropdown-item',{attrs:{\"command\":\"a\"}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('el-dropdown-item',{attrs:{\"command\":\"b\"}},[_vm._v(\"审核\")]),_vm._v(\" \"),_c('el-dropdown-item',{staticClass:\"danger\",attrs:{\"command\":\"c\"}},[_vm._v(\"删除\")])],1)],1)]}}])}):_vm._e()],1),_vm._v(\" \"),(_vm.draftList.list && _vm.draftList.total>_vm.draftList.pageSize)?_c('el-pagination',{staticClass:\"mbt20\",attrs:{\"current-page\":Number(_vm.$route.params.page),\"page-size\":_vm.draftList.pageSize,\"layout\":\"total, prev, pager, next, jumper\",\"total\":_vm.draftList.total},on:{\"current-change\":_vm.handleCurrentChange}}):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\n// EXTERNAL MODULE: ./node_modules/_vue-loader@14.2.2@vue-loader/lib/runtime/component-normalizer.js\nvar component_normalizer = __webpack_require__(\"18Nq\");\n\n// CONCATENATED MODULE: ./src/components/book/draft_list.vue\nfunction injectStyle (context) {\n  __webpack_require__(\"9tLl\")\n}\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\n\nvar Component = Object(component_normalizer[\"a\" /* default */])(\n  draft_list,\n  render,\n  staticRenderFns,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ var book_draft_list = __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/55.e668a1362da60f47ef92.js","function injectStyle (context) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"scoped\\\":false,\\\"sourceMap\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/selector?type=styles&index=0!./draft_list.vue\")\n}\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/selector?type=script&index=0!./draft_list.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/selector?type=script&index=0!./draft_list.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2fa5a7fc\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/selector?type=template&index=0!./draft_list.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/book/draft_list.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"admin-book-wrap\">\n    <el-breadcrumb class=\"mbt20\" separator-class=\"el-icon-arrow-right\">\n      <el-breadcrumb-item>书籍管理</el-breadcrumb-item>\n      <el-breadcrumb-item >草稿箱列表</el-breadcrumb-item>\n    </el-breadcrumb>\n    <el-alert\n      title=\"操作说明\"\n      type=\"info\"\n      show-icon>\n      <div>\n        <p>\n          此表是本站全部草稿章节，您可通过ID进行批量管理\n        </p>\n      </div>\n    </el-alert>\n  \n    <el-row class=\"mbt20\">\n      <el-button type=\"danger\" plain @click=\"toggleRowSelection\">批量删除</el-button>\n    </el-row>\n    \n    <el-row class=\"mbt20\">\n      <el-col :xs=\"20\" :sm=\"16\" :md=\"12\" :lg=\"9\" :xl=\"6\">\n        <el-input placeholder=\"请输入书籍id或者书籍名称\" v-model=\"keywords\" class=\"input-with-select\" @keyup.enter.native=\"getChapterList\">\n          <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"getChapterList\"></el-button>\n        </el-input>\n      </el-col>\n    </el-row>\n    \n    <el-row>\n      <!--<div class=\"table-wrap\">-->\n        <el-table\n          ref=\"multipleTable\"\n          border\n          :data=\"draftList.list\"\n          tooltip-effect=\"dark\"\n          style=\"width: 100%\"\n          @selection-change=\"handleSelectionChange\">\n          <el-table-column\n            type=\"selection\">\n          </el-table-column>\n          <el-table-column\n            prop=\"id\"\n            label=\"章节ID\">\n          </el-table-column>\n          <el-table-column\n            prop=\"bookTitle\"\n            label=\"书名\">\n            <template slot-scope=\"scope\">\n              (id:{{scope.row.bookId}}){{scope.row.bookTitle}}\n            </template>\n          </el-table-column>\n          <el-table-column\n            prop=\"chapterTitle\"\n            label=\"章节名\">\n          </el-table-column>\n  \n          <el-table-column\n            prop=\"chapterIsvip\"\n            label=\"VIP状态\"\n            align=\"center\">\n            <template slot-scope=\"scope\">\n              <span class=\"red\" v-if=\"scope.row.chapterIsvip\">VIP</span>\n              <span v-else class=\"green\">普通</span>\n            </template>\n          </el-table-column>\n  \n          <el-table-column\n            prop=\"chapterState\"\n            label=\"审核状态\"\n            align=\"center\">\n            <template slot-scope=\"scope\">\n              <span class=\"red\" v-if=\"scope.row.chapterState\">未审核</span>\n              <span v-else class=\"green\">已审核</span>\n            </template>\n          </el-table-column>\n  \n          <el-table-column\n            label=\"发布时间\">\n            <template slot-scope=\"scope\">\n             {{scope.row.releaseTime | time('long')}}\n            </template>\n          </el-table-column>\n  \n          <el-table-column\n            prop=\"chapterLength\"\n            align=\"center\"\n            label=\"字数\">\n          </el-table-column>\n          \n          <el-table-column\n            v-if=\"$store.state.userInfo && $store.state.userInfo.adminRolemenuanduserrole.updates\"\n            align=\"center\"\n            label=\"操作\">\n            <template slot-scope=\"scope\">\n              <el-dropdown size=\"medium\" trigger=\"click\" placement=\"bottom\" @command=\"handleClick($event,scope.row)\">\n                <a href=\"javascript:0;\">更多</a>\n                <el-dropdown-menu slot=\"dropdown\">\n                  <el-dropdown-item command=\"a\">编辑</el-dropdown-item>\n                  <el-dropdown-item command=\"b\">审核</el-dropdown-item>\n                  <el-dropdown-item class=\"danger\" command=\"c\">删除</el-dropdown-item>\n                </el-dropdown-menu>\n              </el-dropdown>\n            </template>\n          </el-table-column>\n        </el-table>\n      <!--</div>-->\n      <el-pagination\n        v-if=\"draftList.list && draftList.total>draftList.pageSize\"\n        class=\"mbt20\"\n        @current-change=\"handleCurrentChange\"\n        :current-page=\"Number($route.params.page)\"\n        :page-size=\"draftList.pageSize\"\n        layout=\"total, prev, pager, next, jumper\"\n        :total=\"draftList.total\">\n      </el-pagination>\n    </el-row>\n    \n    <!--书籍封面上传-->\n  </div>\n</template>\n\n<script type=\"text/ecmascript-6\">\n  import draggable from 'vuedraggable'\n  export default{\n    components: {\n      draggable\n    },\n    data() {\n      return {\n        checkList: [],\n        centerDialogVisible: false,\n        draftList: [],\n        cloneList: [],\n        updateData: {},\n        page: 1,\n        multipleSelection: [],\n        newDrag: true,\n        keywords: ''\n      }\n    },\n    methods: {\n      getChapterList() {\n        this.$ajax('/admin/getAdminChapterDraft', {\n          page: this.$route.params.page,\n          searchCondition: this.keywords\n        }, res => {\n          if (res.returnCode === 200) {\n//            res.data.forEach((item)=>{\n//              if(item.resultList.length>0){\n//                arr = arr.concat(item.resultList)\n//              }\n//            });\n            this.draftList = res.data\n          }\n        })\n      },\n\n//      批量删除\n      toggleRowSelection() {\n        if (this.multipleSelection.length) {\n          this.$confirm('此操作将永久删除所选章节, 是否继续?', '提示', {\n            confirmButtonText: '确定',\n            cancelButtonText: '取消',\n            type: 'warning'\n          }).then(() => {\n            this.getChapterList()\n            this.$message({\n              type: 'success',\n              message: '删除成功!'\n            })\n          }).catch(() => {\n            this.$message({\n              type: 'info',\n              message: '已取消删除'\n            })\n          })\n        } else {\n          this.$message({ message: '请选取要删除的章节！', type: 'warning', showClose: true })\n        }\n      },\n  \n      handleSelectionChange(val) {\n        this.multipleSelection = val\n      },\n//      点击行选中\n      handleRowClick(row) {\n        this.$refs.multipleTable.toggleRowSelection(row)\n      },\n  \n      handleClick(val, data) {\n        if (val === 'a') {\n          this.$router.push({ path: '/edit_chapter/' + data.id })\n        } else if (val === 'b') {\n  \n        } else if (val === 'c') {\n  \n        }\n      },\n  \n      handleCurrentChange(page) {\n        this.page = page\n        this.$router.push({ params: { page: page }})\n      },\n\n//        书籍上架下架\n      bookChangeState(val, data) {\n        let state = data.bookCheckStatus, status = data.bookStatus\n        if (val === 'a') {\n//              书籍审核\n          state = 1\n        } else if (val === 'b') {\n//              书籍上架\n          if (data.bookCheckStatus === 0) {\n            this.$message({ message: '书籍暂未审核，请先审核通过！', type: 'warning' })\n          } else {\n            state = 2\n          }\n        } else if (val === 'c') {\n//              书籍下架\n          if (data.bookCheckStatus <= 1) {\n            this.$message({ message: '书籍已下架！', type: 'warning' })\n          } else {\n            state = 1\n          }\n        } else if (val === 'd') {\n          status = 1\n        }\n        this.$ajax('/admin/sysbookupdate', { bookId: data.bookId, bookCheckStatus: state, bookAuthorization: data.bookAuthorization, bookStatus: status }, res => {\n          if (res.returnCode === 200) {\n            this.$message(res.msg)\n            this.getBookList()\n          }\n        })\n      }\n    },\n    created() {\n      this.getChapterList()\n    },\n    watch: {\n      $route: function() {\n        this.getChapterList()\n      }\n    },\n    computed: {\n      nowTime: function() {\n        let time = new Date().getTime()\n        this.$ajax('/sys-getNetWorkDateTime', '', res => {\n          if (res.returnCode === 200) {\n            time = res.data.beijing\n          }\n        }, 'get')\n        return time\n      }\n    }\n  }\n</script>\n<style lang=\"stylus\" rel=\"stylesheet/stylus\">\n  .cover\n    width 100%\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/book/draft_list.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"admin-book-wrap\"},[_c('el-breadcrumb',{staticClass:\"mbt20\",attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',[_vm._v(\"书籍管理\")]),_vm._v(\" \"),_c('el-breadcrumb-item',[_vm._v(\"草稿箱列表\")])],1),_vm._v(\" \"),_c('el-alert',{attrs:{\"title\":\"操作说明\",\"type\":\"info\",\"show-icon\":\"\"}},[_c('div',[_c('p',[_vm._v(\"\\n        此表是本站全部草稿章节，您可通过ID进行批量管理\\n      \")])])]),_vm._v(\" \"),_c('el-row',{staticClass:\"mbt20\"},[_c('el-button',{attrs:{\"type\":\"danger\",\"plain\":\"\"},on:{\"click\":_vm.toggleRowSelection}},[_vm._v(\"批量删除\")])],1),_vm._v(\" \"),_c('el-row',{staticClass:\"mbt20\"},[_c('el-col',{attrs:{\"xs\":20,\"sm\":16,\"md\":12,\"lg\":9,\"xl\":6}},[_c('el-input',{staticClass:\"input-with-select\",attrs:{\"placeholder\":\"请输入书籍id或者书籍名称\"},nativeOn:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.getChapterList($event)}},model:{value:(_vm.keywords),callback:function ($$v) {_vm.keywords=$$v},expression:\"keywords\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.getChapterList},slot:\"append\"})],1)],1)],1),_vm._v(\" \"),_c('el-row',[_c('el-table',{ref:\"multipleTable\",staticStyle:{\"width\":\"100%\"},attrs:{\"border\":\"\",\"data\":_vm.draftList.list,\"tooltip-effect\":\"dark\"},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"type\":\"selection\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"章节ID\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"bookTitle\",\"label\":\"书名\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n            (id:\"+_vm._s(scope.row.bookId)+\")\"+_vm._s(scope.row.bookTitle)+\"\\n          \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"chapterTitle\",\"label\":\"章节名\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"chapterIsvip\",\"label\":\"VIP状态\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.chapterIsvip)?_c('span',{staticClass:\"red\"},[_vm._v(\"VIP\")]):_c('span',{staticClass:\"green\"},[_vm._v(\"普通\")])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"chapterState\",\"label\":\"审核状态\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.chapterState)?_c('span',{staticClass:\"red\"},[_vm._v(\"未审核\")]):_c('span',{staticClass:\"green\"},[_vm._v(\"已审核\")])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"发布时间\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n           \"+_vm._s(_vm._f(\"time\")(scope.row.releaseTime,'long'))+\"\\n          \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"chapterLength\",\"align\":\"center\",\"label\":\"字数\"}}),_vm._v(\" \"),(_vm.$store.state.userInfo && _vm.$store.state.userInfo.adminRolemenuanduserrole.updates)?_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-dropdown',{attrs:{\"size\":\"medium\",\"trigger\":\"click\",\"placement\":\"bottom\"},on:{\"command\":function($event){_vm.handleClick($event,scope.row)}}},[_c('a',{attrs:{\"href\":\"javascript:0;\"}},[_vm._v(\"更多\")]),_vm._v(\" \"),_c('el-dropdown-menu',{attrs:{\"slot\":\"dropdown\"},slot:\"dropdown\"},[_c('el-dropdown-item',{attrs:{\"command\":\"a\"}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('el-dropdown-item',{attrs:{\"command\":\"b\"}},[_vm._v(\"审核\")]),_vm._v(\" \"),_c('el-dropdown-item',{staticClass:\"danger\",attrs:{\"command\":\"c\"}},[_vm._v(\"删除\")])],1)],1)]}}])}):_vm._e()],1),_vm._v(\" \"),(_vm.draftList.list && _vm.draftList.total>_vm.draftList.pageSize)?_c('el-pagination',{staticClass:\"mbt20\",attrs:{\"current-page\":Number(_vm.$route.params.page),\"page-size\":_vm.draftList.pageSize,\"layout\":\"total, prev, pager, next, jumper\",\"total\":_vm.draftList.total},on:{\"current-change\":_vm.handleCurrentChange}}):_vm._e()],1)],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@14.2.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-2fa5a7fc\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@14.2.2@vue-loader/lib/selector.js?type=template&index=0!./src/components/book/draft_list.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}