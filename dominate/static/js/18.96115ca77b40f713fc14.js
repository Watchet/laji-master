webpackJsonp([18],{OFbv:function(t,e){},RXwa:function(t,e,a){"use strict";function s(t){a("OFbv")}Object.defineProperty(e,"__esModule",{value:!0});var i={data:function(){return{dialogVisible:!1,dialogVisibleTable:!1,searchInput:"",extendLinkParams:{page:1,channelId:"LGDMT20180627"},updateParams:{channelId:"",chapterName:""},recordList:[]}},mounted:function(){this.$store.dispatch("census/getExtensionLink",this.extendLinkParams)},methods:{openDialog:function(t){this.updateParams.channelId=t.newMediaId,this.updateParams.chapterName=t.chapterName,this.dialogVisible=!0},openDialogTable:function(t){this.recordList=t,this.dialogVisibleTable=!0},handleCurrentChange:function(t){this.$router.push({params:{page:t}})}},computed:{extendLinkObj:function(){return this.$store.state.census.extendLinkObj}},filters:{extendTime:function(t){return t?t=t.toString().slice(0,4)+"-"+t.toString().slice(4,6)+"-"+t.toString().slice(6):""},computedTotal:function(t){if(0==t.length)return 0;for(var e=0,a=0;a<t.length;a++)e+=t[a].totalCount;return e}},watch:{$route:function(t){this.extendLinkParams.page=t.params.page,this.$store.dispatch("census/getExtensionLink",this.extendLinkParams)}}},n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/bookdistribution"}}},[t._v("小说分销平台")]),t._v(" "),a("el-breadcrumb-item",[t._v("推广链接")])],1),t._v(" "),a("div",{staticClass:"extend-search"},[a("div",{staticClass:"search"},[a("el-input",{attrs:{placeholder:"小说或派单渠道名称"},model:{value:t.searchInput,callback:function(e){t.searchInput=e},expression:"searchInput"}}),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"}})],1)]),t._v(" "),a("el-table",{staticClass:"extend-table",staticStyle:{width:"100%"},attrs:{data:t.extendLinkObj.list,border:""}},[a("el-table-column",{attrs:{label:"推广链接"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{staticClass:"extend-media-name"},[t._v(t._s(e.row.newMediaName))]),t._v(" "),a("p",{staticClass:"extend-url"},[a("span",[t._v(t._s(e.row.url))]),t._v(" "),a("el-tooltip",{attrs:{effect:"dark",content:"复制链接",placement:"top"}},[a("i",{directives:[{name:"clipboard",rawName:"v-clipboard",value:e.row.url,expression:"scope.row.url"}],staticClass:"fa fa-copy"})])],1),t._v(" "),a("p",{staticClass:"extend-time"},[t._v("创建时间："+t._s(t._f("extendTime")(e.row.addTime)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"入口页面"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{staticClass:"extend-book-name"},[a("router-link",{attrs:{to:"/extend/chapterList/"+e.row.bookId}},[t._v(t._s(e.row.bookName))])],1),t._v(" "),a("p",{staticClass:"extend-chapter"},[t._v(t._s(e.row.chapterName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"原文点击次数",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("computedTotal")(e.row.infoTotal)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"访问记录",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"primary",attrs:{size:"mini"},on:{click:function(a){t.openDialogTable(e.row.infoTotal)}}},[t._v("详情")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"more-btn",attrs:{size:"mini"},on:{click:function(t){e.row.show=!e.row.show}}},[t._v("\r\n                    更多 "),a("i",{staticClass:"fa fa-caret-down"}),t._v(" "),a("el-collapse-transition",[a("ul",{directives:[{name:"show",rawName:"v-show",value:e.row.show,expression:"scope.row.show"}],staticClass:"tool-list"},[a("li",[a("a",{on:{click:function(a){t.openDialog(e.row)}}},[a("i",{staticClass:"fa fa-edit"}),t._v(" 修改链接")])]),t._v(" "),a("li",[a("a",[a("i",{staticClass:"fa fa-trash-o"}),t._v(" 删除")])])])])],1)]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.extendLinkObj.pageNo,"page-size":t.extendLinkObj.pageSize,layout:"total, prev, pager, next, jumper",total:t.extendLinkObj.totalCount},on:{"current-change":t.handleCurrentChange}}),t._v(" "),a("el-dialog",{staticClass:"dialog",attrs:{title:"修改推广链接属性",visible:t.dialogVisible,width:"600px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticClass:"dialog-item"},[a("p",[t._v("入口页面")]),t._v(" "),a("span",[t._v("小说阅读页")])]),t._v(" "),a("div",{staticClass:"dialog-item"},[a("p",[t._v("渠道名称")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.updateParams.channelId,callback:function(e){t.$set(t.updateParams,"channelId",e)},expression:"updateParams.channelId"}},t._l(this.$store.state.census.spreadNameList,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("div",{staticClass:"dialog-item"},[a("p",[t._v("阅读原文章节")]),t._v(" "),a("span",[t._v(t._s(t.updateParams.chapterName))])]),t._v(" "),a("div",{staticClass:"dialog-tool",staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"primary"}},[t._v("保存修改")])],1)]),t._v(" "),a("el-dialog",{staticClass:"dialog-table",attrs:{title:"访问记录",visible:t.dialogVisibleTable,width:"600px"},on:{"update:visible":function(e){t.dialogVisibleTable=e}}},[a("el-table",{attrs:{data:t.recordList,stripe:"",border:""}},[a("el-table-column",{attrs:{label:"日期"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("extendTime")(e.row.date)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"ipCount",label:"IP点击数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"totalCount",label:"总数量"}})],1)],1)],1)},l=[],o=a("18Nq"),r=s,c=Object(o.a)(i,n,l,!1,r,null,null);e.default=c.exports}});
//# sourceMappingURL=18.96115ca77b40f713fc14.js.map