{"version":3,"sources":["webpack:///static/js/11.c316e6f9e4b937c3be80.js","webpack:///./src/components/statistics/add_monthly.vue","webpack:///src/components/statistics/add_monthly.vue","webpack:///./src/components/statistics/add_monthly.vue?f267"],"names":["webpackJsonp","54MD","module","exports","vtXg","__webpack_exports__","__webpack_require__","injectStyle","context","Object","defineProperty","value","stringify","stringify_default","n","add_monthly","data","rules","bookName","require","message","trigger","checkworkattendance","required","type","pepper","bubscribe","thirdPart","millet","bookInfo","authorBook","userInfo","monthReport","bookid","methods","submitForm","formName","_this","this","$refs","validate","valid","$message","subData","JSON","parse","$route","name","$ajax","res","returnCode","msg","getBookMonthly","getAuthorBook","_this2","authorId","params","aid","list","forEach","item","bookCheckStatus","push","getUserInfo","_this3","puserid","$set","userId","pseudonym","getBookInfo","_this4","bid","bookId","bookWriterId","writerName","_this5","time","split","sessionStorage","getItem","year","month","dataTime","subTotalCount","created","setItem","watch","val","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","title","show-icon","_v","ref","model","status-icon","label-width","gutter","xs","sm","md","lg","xl","label","prop","readonly","callback","$$v","expression","placeholder","_l","_n","on","click","$event","staticRenderFns","component_normalizer","__vue_styles__","Component"],"mappings":"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","file":"static/js/11.c316e6f9e4b937c3be80.js","sourcesContent":["webpackJsonp([11],{\n\n/***/ \"54MD\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"vtXg\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// EXTERNAL MODULE: ./node_modules/_babel-runtime@6.26.0@babel-runtime/core-js/json/stringify.js\nvar stringify = __webpack_require__(\"3cXf\");\nvar stringify_default = /*#__PURE__*/__webpack_require__.n(stringify);\n\n// CONCATENATED MODULE: ./node_modules/_babel-loader@7.1.4@babel-loader/lib!./node_modules/_vue-loader@14.2.2@vue-loader/lib/selector.js?type=script&index=0!./src/components/statistics/add_monthly.vue\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ var add_monthly = ({\n  data: function data() {\n    return {\n      rules: {\n        bookName: [{ require: true, message: '请选取书籍', trigger: 'blur' }],\n        checkworkattendance: [{ required: true, message: '请添加考勤金额' }, { type: 'number', message: '金额必需为数字' }],\n        pepper: [{ required: true, message: '请添加打赏金额' }, { type: 'number', message: '金额必需为数字' }],\n        bubscribe: [{ required: true, message: '请添加订阅金额' }, { type: 'number', message: '金额必需为数字' }],\n        thirdPart: [{ required: true, message: '请添加第三方金额' }, { type: 'number', message: '金额必需为数字' }],\n        millet: [{ required: true, message: '请添加小米椒金额' }, { type: 'number', message: '金额必需为数字' }]\n      },\n      bookInfo: '',\n      authorBook: [],\n      userInfo: {},\n      monthReport: {\n        bookid: '',\n        bookName: '',\n        checkworkattendance: '',\n        pepper: '',\n        bubscribe: '',\n        thirdPart: '',\n        millet: ''\n      }\n    };\n  },\n\n  methods: {\n    submitForm: function submitForm(formName) {\n      var _this = this;\n\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          var subData = JSON.parse(stringify_default()(_this.monthReport));\n          if (_this.$route.name === 'authorEditMonReport') {\n            _this.$ajax('/admin/updateAuthorMonthlyreportByAuthormon', subData, function (res) {\n              if (res.returnCode === 200) {\n                _this.$message({ message: res.msg, type: 'success' });\n                _this.getBookMonthly();\n              }\n            });\n          } else {\n            _this.$ajax('/admin/addAuthorMonthlyreportByAuthormon', subData, function (res) {\n              if (res.returnCode === 200) {\n                _this.$message({ message: '更新成功', type: 'success' });\n                _this.getAuthorBook();\n              }\n            });\n          }\n        } else {\n          _this.$message({ message: '请核对信息是否完整', type: 'warning' });\n          return false;\n        }\n      });\n    },\n    getAuthorBook: function getAuthorBook() {\n      var _this2 = this;\n\n      this.$ajax('/admin/agetAuthorBookLists', {\n        authorId: this.$route.params.aid\n      }, function (res) {\n        if (res.returnCode === 200) {\n          var list = [];\n          res.data.forEach(function (item) {\n            if (item.bookCheckStatus) {\n              list.push(item);\n            }\n          });\n          _this2.authorBook = list;\n        }\n      });\n    },\n    getUserInfo: function getUserInfo() {\n      var _this3 = this;\n\n      this.$ajax('/person-SimplifyUserInfo', { puserid: this.$route.params.aid }, function (res) {\n        if (res.returnCode === 200) {\n          _this3.userInfo = res.data;\n          _this3.$set(_this3.monthReport, 'authorid', res.data.userId);\n          _this3.$set(_this3.monthReport, 'authorName', res.data.pseudonym);\n        }\n      });\n    },\n    getBookInfo: function getBookInfo() {\n      var _this4 = this;\n\n      this.$ajax('/book-showBookInfo', { bookid: this.$route.params.bid }, function (res) {\n        if (res.returnCode === 200) {\n          _this4.$set(_this4.monthReport, 'bookid', res.data.bookId);\n          _this4.$set(_this4.monthReport, 'bookName', res.data.bookName);\n          _this4.$set(_this4.monthReport, 'authorid', res.data.bookWriterId);\n          _this4.$set(_this4.monthReport, 'authorName', res.data.writerName);\n        }\n      });\n    },\n    getBookMonthly: function getBookMonthly() {\n      var _this5 = this;\n\n      var time = [];\n      if (this.$route.params.time) {\n        time = this.$route.params.time.split('-');\n      } else {\n        time = sessionStorage.getItem('monthly_date').split('-');\n      }\n      this.$ajax('/admin/getAuthorMonthlyreportById', {\n        bookid: this.$route.params.bid,\n        year: time[0],\n        month: time[1],\n        type: 2\n      }, function (res) {\n        if (res.returnCode === 200) {\n          delete res.data.dataTime;\n          delete res.data.subTotalCount;\n          _this5.monthReport = res.data;\n        }\n      });\n    }\n  },\n  created: function created() {\n    if (this.$route.params.time) {\n      sessionStorage.setItem('monthly_date', this.$route.params.time);\n    }\n    if (this.$route.name === 'authorAddMonReport') {\n      this.getUserInfo();\n      this.getAuthorBook();\n    } else {\n      this.getBookInfo();\n      this.getBookMonthly();\n    }\n  },\n\n  watch: {\n    bookInfo: function bookInfo(val) {\n      this.monthReport.bookid = val.split(',')[0];\n      this.monthReport.bookName = val.split(',')[1];\n    }\n  }\n});\n// CONCATENATED MODULE: ./node_modules/_vue-loader@14.2.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-f5711af6\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@14.2.2@vue-loader/lib/selector.js?type=template&index=0!./src/components/statistics/add_monthly.vue\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"user-detail-info\"},[_c('el-alert',{attrs:{\"title\":\"操作说明\",\"type\":\"info\",\"show-icon\":\"\"}},[_c('div',[_c('p',[_vm._v(\"\\n        管理员可对已上架书籍定制月报，也可以对已生成的月报重新调整\\n      \")])])]),_vm._v(\" \"),_c('el-row',{staticClass:\"mbt20\"}),_vm._v(\" \"),_c('el-form',{ref:\"ruleForm2\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.monthReport,\"status-icon\":\"\",\"rules\":_vm.rules,\"label-width\":\"100px\"}},[_c('el-row',{attrs:{\"gutter\":40}},[_c('el-col',{attrs:{\"xs\":24,\"sm\":12,\"md\":12,\"lg\":12,\"xl\":12}},[_c('el-form-item',{attrs:{\"label\":\"书籍名称\",\"prop\":\"bookName\"}},[(_vm.$route.name==='authorEditMonReport')?_c('el-input',{staticClass:\"mw220\",attrs:{\"readonly\":\"\"},model:{value:(_vm.monthReport.bookName),callback:function ($$v) {_vm.$set(_vm.monthReport, \"bookName\", $$v)},expression:\"monthReport.bookName\"}}):_c('el-select',{staticClass:\"mw220\",attrs:{\"placeholder\":\"请选取书籍\"},model:{value:(_vm.bookInfo),callback:function ($$v) {_vm.bookInfo=$$v},expression:\"bookInfo\"}},[_vm._l((_vm.authorBook),function(item){return [_c('el-option',{attrs:{\"label\":item.bookName,\"value\":item.bookId+','+item.bookName}})]})],2)],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"xs\":24,\"sm\":12,\"md\":12,\"lg\":12,\"xl\":12}},[_c('el-form-item',{attrs:{\"label\":\"作  者\",\"prop\":\"authorName\"}},[_c('el-input',{staticClass:\"mw220\",attrs:{\"readonly\":\"\"},model:{value:(_vm.monthReport.authorName),callback:function ($$v) {_vm.$set(_vm.monthReport, \"authorName\", _vm._n($$v))},expression:\"monthReport.authorName\"}})],1)],1)],1),_vm._v(\" \"),_c('el-row',{attrs:{\"gutter\":40}},[_c('el-col',{attrs:{\"xs\":24,\"sm\":12,\"md\":12,\"lg\":12,\"xl\":12}},[_c('el-form-item',{attrs:{\"label\":\"打  赏\",\"prop\":\"pepper\"}},[_c('el-input',{staticClass:\"mw220\",model:{value:(_vm.monthReport.pepper),callback:function ($$v) {_vm.$set(_vm.monthReport, \"pepper\", _vm._n($$v))},expression:\"monthReport.pepper\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"xs\":24,\"sm\":12,\"md\":12,\"lg\":12,\"xl\":12}},[_c('el-form-item',{attrs:{\"label\":\"考  勤\",\"prop\":\"checkworkattendance\"}},[_c('el-input',{staticClass:\"mw220\",model:{value:(_vm.monthReport.checkworkattendance),callback:function ($$v) {_vm.$set(_vm.monthReport, \"checkworkattendance\", _vm._n($$v))},expression:\"monthReport.checkworkattendance\"}})],1)],1)],1),_vm._v(\" \"),_c('el-row',{attrs:{\"gutter\":40}},[_c('el-col',{attrs:{\"xs\":24,\"sm\":12,\"md\":12,\"lg\":12,\"xl\":12}},[_c('el-form-item',{attrs:{\"label\":\"订  阅\",\"prop\":\"bubscribe\"}},[_c('el-input',{staticClass:\"mw220\",model:{value:(_vm.monthReport.bubscribe),callback:function ($$v) {_vm.$set(_vm.monthReport, \"bubscribe\", _vm._n($$v))},expression:\"monthReport.bubscribe\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"xs\":24,\"sm\":12,\"md\":12,\"lg\":12,\"xl\":12}},[_c('el-form-item',{attrs:{\"label\":\"第三方\",\"prop\":\"thirdPart\"}},[_c('el-input',{staticClass:\"mw220\",model:{value:(_vm.monthReport.thirdPart),callback:function ($$v) {_vm.$set(_vm.monthReport, \"thirdPart\", _vm._n($$v))},expression:\"monthReport.thirdPart\"}})],1)],1)],1),_vm._v(\" \"),_c('el-row',{attrs:{\"gutter\":40}},[_c('el-col',{attrs:{\"xs\":24,\"sm\":12,\"md\":12,\"lg\":12,\"xl\":12}},[_c('el-form-item',{attrs:{\"label\":\"小米椒\",\"prop\":\"millet\"}},[_c('el-input',{staticClass:\"mw220\",model:{value:(_vm.monthReport.millet),callback:function ($$v) {_vm.$set(_vm.monthReport, \"millet\", _vm._n($$v))},expression:\"monthReport.millet\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"xs\":24,\"sm\":12,\"md\":12,\"lg\":12,\"xl\":12}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.submitForm('ruleForm2')}}},[_vm._v(\"生成\")])],1)],1)],1)}\nvar staticRenderFns = []\n\n// EXTERNAL MODULE: ./node_modules/_vue-loader@14.2.2@vue-loader/lib/runtime/component-normalizer.js\nvar component_normalizer = __webpack_require__(\"18Nq\");\n\n// CONCATENATED MODULE: ./src/components/statistics/add_monthly.vue\nfunction injectStyle (context) {\n  __webpack_require__(\"54MD\")\n}\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\n\nvar Component = Object(component_normalizer[\"a\" /* default */])(\n  add_monthly,\n  render,\n  staticRenderFns,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ var statistics_add_monthly = __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/11.c316e6f9e4b937c3be80.js","function injectStyle (context) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"scoped\\\":false,\\\"sourceMap\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/selector?type=styles&index=0!./add_monthly.vue\")\n}\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/selector?type=script&index=0!./add_monthly.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/selector?type=script&index=0!./add_monthly.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-f5711af6\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/selector?type=template&index=0!./add_monthly.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/statistics/add_monthly.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"user-detail-info\">\n    <el-alert\n      title=\"操作说明\"\n      type=\"info\"\n      show-icon>\n      <div>\n        <p>\n          管理员可对已上架书籍定制月报，也可以对已生成的月报重新调整\n        </p>\n      </div>\n    </el-alert>\n    <el-row class=\"mbt20\"></el-row>\n    <el-form :model=\"monthReport\" status-icon :rules=\"rules\" ref=\"ruleForm2\" label-width=\"100px\" class=\"demo-ruleForm\">\n      <el-row :gutter=\"40\">\n        <el-col :xs=\"24\" :sm=\"12\" :md=\"12\" :lg=\"12\" :xl=\"12\">\n          <el-form-item label=\"书籍名称\" prop=\"bookName\">\n            <el-input v-if=\"$route.name==='authorEditMonReport'\" readonly v-model=\"monthReport.bookName\" class=\"mw220\"></el-input>\n            <el-select v-else v-model=\"bookInfo\" placeholder=\"请选取书籍\" class=\"mw220\">\n              <template v-for=\"item in authorBook\">\n                <el-option :label=\"item.bookName\" :value=\"item.bookId+','+item.bookName\"></el-option>\n              </template>\n            </el-select>\n          </el-form-item>\n        </el-col>\n        <el-col :xs=\"24\" :sm=\"12\" :md=\"12\" :lg=\"12\" :xl=\"12\">\n          <el-form-item label=\"作  者\" prop=\"authorName\">\n            <el-input readonly v-model.number=\"monthReport.authorName\" class=\"mw220\"></el-input>\n          </el-form-item>\n        </el-col>\n      </el-row>\n      \n      <el-row :gutter=\"40\">\n        <el-col :xs=\"24\" :sm=\"12\" :md=\"12\" :lg=\"12\" :xl=\"12\">\n          <el-form-item\n            label=\"打  赏\"\n            prop=\"pepper\">\n            <el-input v-model.number=\"monthReport.pepper\" class=\"mw220\"></el-input>\n          </el-form-item>\n        </el-col>\n        <el-col :xs=\"24\" :sm=\"12\" :md=\"12\" :lg=\"12\" :xl=\"12\">\n          <el-form-item label=\"考  勤\" prop=\"checkworkattendance\">\n            <el-input v-model.number=\"monthReport.checkworkattendance\" class=\"mw220\"></el-input>\n          </el-form-item>\n        </el-col>\n      </el-row>\n      \n      <el-row :gutter=\"40\">\n        <el-col :xs=\"24\" :sm=\"12\" :md=\"12\" :lg=\"12\" :xl=\"12\">\n  \n          <el-form-item label=\"订  阅\" prop=\"bubscribe\">\n            <el-input v-model.number=\"monthReport.bubscribe\" class=\"mw220\"></el-input>\n          </el-form-item>\n         \n        </el-col>\n        <el-col :xs=\"24\" :sm=\"12\" :md=\"12\" :lg=\"12\" :xl=\"12\">\n          <el-form-item label=\"第三方\" prop=\"thirdPart\">\n            <el-input v-model.number=\"monthReport.thirdPart\" class=\"mw220\"></el-input>\n          </el-form-item>\n        </el-col>\n      </el-row>\n  \n      <el-row :gutter=\"40\">\n        <el-col :xs=\"24\" :sm=\"12\" :md=\"12\" :lg=\"12\" :xl=\"12\">\n          <el-form-item label=\"小米椒\" prop=\"millet\">\n            <el-input v-model.number=\"monthReport.millet\" class=\"mw220\"></el-input>\n          </el-form-item>\n        </el-col>\n        <el-col :xs=\"24\" :sm=\"12\" :md=\"12\" :lg=\"12\" :xl=\"12\">\n          <!--<el-form-item label=\"第三方\" prop=\"thirdPart\">-->\n            <!--<el-input v-model.number=\"monthReport.thirdPart\" class=\"mw220\"></el-input>-->\n          <!--</el-form-item>-->\n        </el-col>\n      </el-row>\n      \n      <el-form-item>\n        <el-button type=\"primary\" @click=\"submitForm('ruleForm2')\">生成</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n\n</template>\n<script>\n  export default {\n    data() {\n      return {\n        rules: {\n          bookName: [\n            { require: true, message: '请选取书籍', trigger: 'blur' }\n          ],\n          checkworkattendance: [\n            { required: true, message: '请添加考勤金额' },\n            { type: 'number', message: '金额必需为数字' }\n          ],\n          pepper: [\n            { required: true, message: '请添加打赏金额' },\n            { type: 'number', message: '金额必需为数字' }\n          ],\n          bubscribe: [\n            { required: true, message: '请添加订阅金额' },\n            { type: 'number', message: '金额必需为数字' }\n          ],\n          thirdPart: [\n            { required: true, message: '请添加第三方金额' },\n            { type: 'number', message: '金额必需为数字' }\n          ],\n          millet: [\n            { required: true, message: '请添加小米椒金额' },\n            { type: 'number', message: '金额必需为数字' }\n          ]\n        },\n        bookInfo: '',\n        authorBook: [],\n        userInfo: {},\n        monthReport: {\n          bookid: '',\n          bookName: '',\n          checkworkattendance: '',\n          pepper: '',\n          bubscribe: '',\n          thirdPart: '',\n          millet: ''\n        }\n      }\n  },\n    methods: {\n      submitForm(formName) {\n        this.$refs[formName].validate((valid) => {\n          if (valid) {\n            const subData = JSON.parse(JSON.stringify(this.monthReport))\n            if (this.$route.name === 'authorEditMonReport') {\n              this.$ajax('/admin/updateAuthorMonthlyreportByAuthormon', subData, res => {\n                if (res.returnCode === 200) {\n                  this.$message({ message: res.msg, type: 'success' })\n                  this.getBookMonthly()\n                }\n              })\n            } else {\n              this.$ajax('/admin/addAuthorMonthlyreportByAuthormon', subData, res => {\n                if (res.returnCode === 200) {\n                  this.$message({ message: '更新成功', type: 'success' })\n                  this.getAuthorBook()\n                }\n              })\n            }\n          } else {\n            this.$message({ message: '请核对信息是否完整', type: 'warning' })\n            return false\n          }\n        })\n      },\n      getAuthorBook() {\n        this.$ajax('/admin/agetAuthorBookLists', {\n          authorId: this.$route.params.aid\n        }, res => {\n          if (res.returnCode === 200) {\n            const list = []\n            res.data.forEach(function(item) {\n              if (item.bookCheckStatus) {\n                list.push(item)\n              }\n            })\n            this.authorBook = list\n          }\n        })\n      },\n      getUserInfo() {\n        this.$ajax('/person-SimplifyUserInfo', { puserid: this.$route.params.aid }, res => {\n          if (res.returnCode === 200) {\n            this.userInfo = res.data\n            this.$set(this.monthReport, 'authorid', res.data.userId)\n            this.$set(this.monthReport, 'authorName', res.data.pseudonym)\n          }\n        })\n      },\n      getBookInfo() {\n        this.$ajax('/book-showBookInfo', { bookid: this.$route.params.bid }, res => {\n          if (res.returnCode === 200) {\n            this.$set(this.monthReport, 'bookid', res.data.bookId)\n            this.$set(this.monthReport, 'bookName', res.data.bookName)\n            this.$set(this.monthReport, 'authorid', res.data.bookWriterId)\n            this.$set(this.monthReport, 'authorName', res.data.writerName)\n          }\n        })\n      },\n      getBookMonthly() {\n        let time = []\n        if (this.$route.params.time) {\n          time = this.$route.params.time.split('-')\n        } else {\n          time = sessionStorage.getItem('monthly_date').split('-')\n        }\n        this.$ajax('/admin/getAuthorMonthlyreportById', {\n          bookid: this.$route.params.bid,\n          year: time[0],\n          month: time[1],\n          type: 2\n        }, res => {\n          if (res.returnCode === 200) {\n            delete res.data.dataTime\n            delete res.data.subTotalCount\n            this.monthReport = res.data\n          }\n        })\n      }\n    },\n    created() {\n      if (this.$route.params.time) {\n        sessionStorage.setItem('monthly_date', this.$route.params.time)\n      }\n      if (this.$route.name === 'authorAddMonReport') {\n        this.getUserInfo()\n        this.getAuthorBook()\n      } else {\n        this.getBookInfo()\n        this.getBookMonthly()\n      }\n    },\n    watch: {\n      bookInfo: function(val) {\n        this.monthReport.bookid = val.split(',')[0]\n        this.monthReport.bookName = val.split(',')[1]\n      }\n    }\n  }\n</script>\n<style lang=\"stylus\" rel=\"stylesheet/stylus\">\n  p.gray\n    line-height 1.5em\n    color #666\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/statistics/add_monthly.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"user-detail-info\"},[_c('el-alert',{attrs:{\"title\":\"操作说明\",\"type\":\"info\",\"show-icon\":\"\"}},[_c('div',[_c('p',[_vm._v(\"\\n        管理员可对已上架书籍定制月报，也可以对已生成的月报重新调整\\n      \")])])]),_vm._v(\" \"),_c('el-row',{staticClass:\"mbt20\"}),_vm._v(\" \"),_c('el-form',{ref:\"ruleForm2\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.monthReport,\"status-icon\":\"\",\"rules\":_vm.rules,\"label-width\":\"100px\"}},[_c('el-row',{attrs:{\"gutter\":40}},[_c('el-col',{attrs:{\"xs\":24,\"sm\":12,\"md\":12,\"lg\":12,\"xl\":12}},[_c('el-form-item',{attrs:{\"label\":\"书籍名称\",\"prop\":\"bookName\"}},[(_vm.$route.name==='authorEditMonReport')?_c('el-input',{staticClass:\"mw220\",attrs:{\"readonly\":\"\"},model:{value:(_vm.monthReport.bookName),callback:function ($$v) {_vm.$set(_vm.monthReport, \"bookName\", $$v)},expression:\"monthReport.bookName\"}}):_c('el-select',{staticClass:\"mw220\",attrs:{\"placeholder\":\"请选取书籍\"},model:{value:(_vm.bookInfo),callback:function ($$v) {_vm.bookInfo=$$v},expression:\"bookInfo\"}},[_vm._l((_vm.authorBook),function(item){return [_c('el-option',{attrs:{\"label\":item.bookName,\"value\":item.bookId+','+item.bookName}})]})],2)],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"xs\":24,\"sm\":12,\"md\":12,\"lg\":12,\"xl\":12}},[_c('el-form-item',{attrs:{\"label\":\"作  者\",\"prop\":\"authorName\"}},[_c('el-input',{staticClass:\"mw220\",attrs:{\"readonly\":\"\"},model:{value:(_vm.monthReport.authorName),callback:function ($$v) {_vm.$set(_vm.monthReport, \"authorName\", _vm._n($$v))},expression:\"monthReport.authorName\"}})],1)],1)],1),_vm._v(\" \"),_c('el-row',{attrs:{\"gutter\":40}},[_c('el-col',{attrs:{\"xs\":24,\"sm\":12,\"md\":12,\"lg\":12,\"xl\":12}},[_c('el-form-item',{attrs:{\"label\":\"打  赏\",\"prop\":\"pepper\"}},[_c('el-input',{staticClass:\"mw220\",model:{value:(_vm.monthReport.pepper),callback:function ($$v) {_vm.$set(_vm.monthReport, \"pepper\", _vm._n($$v))},expression:\"monthReport.pepper\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"xs\":24,\"sm\":12,\"md\":12,\"lg\":12,\"xl\":12}},[_c('el-form-item',{attrs:{\"label\":\"考  勤\",\"prop\":\"checkworkattendance\"}},[_c('el-input',{staticClass:\"mw220\",model:{value:(_vm.monthReport.checkworkattendance),callback:function ($$v) {_vm.$set(_vm.monthReport, \"checkworkattendance\", _vm._n($$v))},expression:\"monthReport.checkworkattendance\"}})],1)],1)],1),_vm._v(\" \"),_c('el-row',{attrs:{\"gutter\":40}},[_c('el-col',{attrs:{\"xs\":24,\"sm\":12,\"md\":12,\"lg\":12,\"xl\":12}},[_c('el-form-item',{attrs:{\"label\":\"订  阅\",\"prop\":\"bubscribe\"}},[_c('el-input',{staticClass:\"mw220\",model:{value:(_vm.monthReport.bubscribe),callback:function ($$v) {_vm.$set(_vm.monthReport, \"bubscribe\", _vm._n($$v))},expression:\"monthReport.bubscribe\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"xs\":24,\"sm\":12,\"md\":12,\"lg\":12,\"xl\":12}},[_c('el-form-item',{attrs:{\"label\":\"第三方\",\"prop\":\"thirdPart\"}},[_c('el-input',{staticClass:\"mw220\",model:{value:(_vm.monthReport.thirdPart),callback:function ($$v) {_vm.$set(_vm.monthReport, \"thirdPart\", _vm._n($$v))},expression:\"monthReport.thirdPart\"}})],1)],1)],1),_vm._v(\" \"),_c('el-row',{attrs:{\"gutter\":40}},[_c('el-col',{attrs:{\"xs\":24,\"sm\":12,\"md\":12,\"lg\":12,\"xl\":12}},[_c('el-form-item',{attrs:{\"label\":\"小米椒\",\"prop\":\"millet\"}},[_c('el-input',{staticClass:\"mw220\",model:{value:(_vm.monthReport.millet),callback:function ($$v) {_vm.$set(_vm.monthReport, \"millet\", _vm._n($$v))},expression:\"monthReport.millet\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"xs\":24,\"sm\":12,\"md\":12,\"lg\":12,\"xl\":12}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.submitForm('ruleForm2')}}},[_vm._v(\"生成\")])],1)],1)],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@14.2.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-f5711af6\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@14.2.2@vue-loader/lib/selector.js?type=template&index=0!./src/components/statistics/add_monthly.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}