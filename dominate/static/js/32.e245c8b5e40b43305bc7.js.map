{"version":3,"sources":["webpack:///static/js/32.e245c8b5e40b43305bc7.js","webpack:///./src/page/extend/extendLink.vue","webpack:///src/page/extend/extendLink.vue","webpack:///./src/page/extend/extendLink.vue?adb3"],"names":["webpackJsonp","OFbv","module","exports","RXwa","__webpack_exports__","__webpack_require__","injectStyle","context","Object","defineProperty","value","extendLink","data","dialogVisible","dialogVisibleTable","searchInput","extendLinkParams","page","channelId","updateParams","chapterName","recordList","mounted","this","$store","dispatch","methods","openDialog","row","newMediaId","openDialogTable","arr","copyMessige","$message","message","type","deleteLink","_this","$confirm","confirmButtonText","cancelButtonText","then","id","_id","res","msg","catch","handleCurrentChange","$router","push","params","computed","extendLinkObj","state","census","filters","extendTime","toString","slice","computedTotal","length","n","i","totalCount","watch","$route","val","render","_vm","_h","$createElement","_c","_self","attrs","separator-class","to","path","_v","staticClass","placeholder","model","callback","$$v","expression","icon","staticStyle","width","list","border","label","scopedSlots","_u","key","fn","scope","_s","newMediaName","url","effect","content","placement","directives","name","rawName","on","click","$event","_f","addTime","bookId","bookName","infoTotal","align","size","current-page","pageNo","page-size","pageSize","layout","total","current-change","title","visible","update:visible","$set","_l","item","index","text-align","stripe","date","prop","staticRenderFns","component_normalizer","__vue_styles__","Component"],"mappings":"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","file":"static/js/32.e245c8b5e40b43305bc7.js","sourcesContent":["webpackJsonp([32],{\n\n/***/ \"OFbv\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"RXwa\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// CONCATENATED MODULE: ./node_modules/_babel-loader@7.1.4@babel-loader/lib!./node_modules/_vue-loader@14.2.2@vue-loader/lib/selector.js?type=script&index=0!./src/page/extend/extendLink.vue\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ var extendLink = ({\n    data: function data() {\n        return {\n            dialogVisible: false,\n            dialogVisibleTable: false,\n            searchInput: '',\n            extendLinkParams: {\n                page: 1,\n                channelId: 'LGDMT20180627'\n            },\n            updateParams: {\n                channelId: '',\n                chapterName: ''\n            },\n            recordList: []\n        };\n    },\n    mounted: function mounted() {\n        this.$store.dispatch('census/getExtensionLink', this.extendLinkParams);\n    },\n\n\n    methods: {\n        openDialog: function openDialog(row) {\n            this.updateParams.channelId = row.newMediaId;\n            this.updateParams.chapterName = row.chapterName;\n            this.dialogVisible = true;\n        },\n        openDialogTable: function openDialogTable(arr) {\n            this.recordList = arr;\n            this.dialogVisibleTable = true;\n        },\n        copyMessige: function copyMessige() {\n            this.$message({ message: '复制成功！', type: 'success' });\n        },\n        deleteLink: function deleteLink(row) {\n            var _this = this;\n\n            this.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n            }).then(function () {\n                _this.$store.dispatch('census/deleteExtensionLink', { id: row._id }).then(function (res) {\n                    _this.$message({ type: 'success', message: res.msg });\n                    _this.$store.dispatch('census/getExtensionLink', _this.extendLinkParams);\n                });\n            }).catch(function () {\n                _this.$message({ type: 'info', message: '已取消删除' });\n            });\n        },\n        handleCurrentChange: function handleCurrentChange(page) {\n            this.$router.push({ params: { page: page } });\n        }\n    },\n\n    computed: {\n        extendLinkObj: function extendLinkObj() {\n            return this.$store.state.census.extendLinkObj;\n        }\n    },\n\n    filters: {\n        extendTime: function extendTime(value) {\n            if (!value) return '';\n            return value = value.toString().slice(0, 4) + '-' + value.toString().slice(4, 6) + '-' + value.toString().slice(6);\n        },\n        computedTotal: function computedTotal(value) {\n            if (value.length == 0) return 0;\n            var n = 0;\n            for (var i = 0; i < value.length; i++) {\n                n += value[i].totalCount;\n            }\n            return n;\n        }\n    },\n\n    watch: {\n        $route: function $route(val) {\n            this.extendLinkParams.page = val.params.page;\n            this.$store.dispatch('census/getExtensionLink', this.extendLinkParams);\n        }\n    }\n});\n// CONCATENATED MODULE: ./node_modules/_vue-loader@14.2.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-56516032\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@14.2.2@vue-loader/lib/selector.js?type=template&index=0!./src/page/extend/extendLink.vue\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/bookdistribution' }}},[_vm._v(\"小说分销平台\")]),_vm._v(\" \"),_c('el-breadcrumb-item',[_vm._v(\"推广链接\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"extend-search\"},[_c('div',{staticClass:\"search\"},[_c('el-input',{attrs:{\"placeholder\":\"小说或派单渠道名称\"},model:{value:(_vm.searchInput),callback:function ($$v) {_vm.searchInput=$$v},expression:\"searchInput\"}}),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-search\"}})],1)]),_vm._v(\" \"),_c('el-table',{staticClass:\"extend-table\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.extendLinkObj.list,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"label\":\"推广链接\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('p',{staticClass:\"extend-media-name\"},[_vm._v(_vm._s(scope.row.newMediaName))]),_vm._v(\" \"),_c('p',{staticClass:\"extend-url\"},[_c('span',[_vm._v(_vm._s(scope.row.url))]),_vm._v(\" \"),_c('el-tooltip',{attrs:{\"effect\":\"dark\",\"content\":\"复制链接\",\"placement\":\"top\"}},[_c('i',{directives:[{name:\"clipboard\",rawName:\"v-clipboard\",value:(scope.row.url),expression:\"scope.row.url\"}],staticClass:\"fa fa-copy\",on:{\"click\":function($event){_vm.copyMessige()}}})])],1),_vm._v(\" \"),_c('p',{staticClass:\"extend-time\"},[_vm._v(\"创建时间：\"+_vm._s(_vm._f(\"extendTime\")(scope.row.addTime)))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"入口页面\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('p',{staticClass:\"extend-book-name\"},[_c('router-link',{attrs:{\"to\":'/extend/chapterList/'+scope.row.bookId}},[_vm._v(_vm._s(scope.row.bookName))])],1),_vm._v(\" \"),_c('p',{staticClass:\"extend-chapter\"},[_vm._v(_vm._s(scope.row.chapterName))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"原文点击次数\",\"width\":\"150\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(_vm._f(\"computedTotal\")(scope.row.infoTotal)))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"访问记录\",\"width\":\"150\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{staticClass:\"primary\",attrs:{\"size\":\"mini\"},on:{\"click\":function($event){_vm.openDialogTable(scope.row.infoTotal)}}},[_vm._v(\"详情\")])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"200\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{staticClass:\"more-btn\",attrs:{\"size\":\"mini\"},on:{\"click\":function($event){_vm.deleteLink(scope.row)}}},[_c('i',{staticClass:\"fa fa-trash-o\"}),_vm._v(\" 删除\")])]}}])})],1),_vm._v(\" \"),_c('el-pagination',{attrs:{\"current-page\":_vm.extendLinkObj.pageNo,\"page-size\":_vm.extendLinkObj.pageSize,\"layout\":\"total, prev, pager, next, jumper\",\"total\":_vm.extendLinkObj.totalCount},on:{\"current-change\":_vm.handleCurrentChange}}),_vm._v(\" \"),_c('el-dialog',{staticClass:\"dialog\",attrs:{\"title\":\"修改推广链接属性\",\"visible\":_vm.dialogVisible,\"width\":\"600px\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('div',{staticClass:\"dialog-item\"},[_c('p',[_vm._v(\"入口页面\")]),_vm._v(\" \"),_c('span',[_vm._v(\"小说阅读页\")])]),_vm._v(\" \"),_c('div',{staticClass:\"dialog-item\"},[_c('p',[_vm._v(\"渠道名称\")]),_vm._v(\" \"),_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.updateParams.channelId),callback:function ($$v) {_vm.$set(_vm.updateParams, \"channelId\", $$v)},expression:\"updateParams.channelId\"}},_vm._l((this.$store.state.census.spreadNameList),function(item,index){return _c('el-option',{key:index,attrs:{\"label\":item.name,\"value\":item.id}})}))],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-item\"},[_c('p',[_vm._v(\"阅读原文章节\")]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.updateParams.chapterName))])]),_vm._v(\" \"),_c('div',{staticClass:\"dialog-tool\",staticStyle:{\"text-align\":\"right\"}},[_c('el-button',{attrs:{\"type\":\"primary\"}},[_vm._v(\"保存修改\")])],1)]),_vm._v(\" \"),_c('el-dialog',{staticClass:\"dialog-table\",attrs:{\"title\":\"访问记录\",\"visible\":_vm.dialogVisibleTable,\"width\":\"600px\"},on:{\"update:visible\":function($event){_vm.dialogVisibleTable=$event}}},[_c('el-table',{attrs:{\"data\":_vm.recordList,\"stripe\":\"\",\"border\":\"\"}},[_c('el-table-column',{attrs:{\"label\":\"日期\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(_vm._f(\"extendTime\")(scope.row.date)))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"ipCount\",\"label\":\"IP点击数\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"totalCount\",\"label\":\"总数量\"}})],1)],1)],1)}\nvar staticRenderFns = []\n\n// EXTERNAL MODULE: ./node_modules/_vue-loader@14.2.2@vue-loader/lib/runtime/component-normalizer.js\nvar component_normalizer = __webpack_require__(\"18Nq\");\n\n// CONCATENATED MODULE: ./src/page/extend/extendLink.vue\nfunction injectStyle (context) {\n  __webpack_require__(\"OFbv\")\n}\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\n\nvar Component = Object(component_normalizer[\"a\" /* default */])(\n  extendLink,\n  render,\n  staticRenderFns,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ var extend_extendLink = __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/32.e245c8b5e40b43305bc7.js","function injectStyle (context) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"scoped\\\":false,\\\"sourceMap\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/selector?type=styles&index=0!./extendLink.vue\")\n}\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/selector?type=script&index=0!./extendLink.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/selector?type=script&index=0!./extendLink.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-56516032\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/selector?type=template&index=0!./extendLink.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/extend/extendLink.vue\n// module id = null\n// module chunks = ","<template>\r\n<div>\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n        <el-breadcrumb-item :to=\"{ path: '/bookdistribution' }\">小说分销平台</el-breadcrumb-item>\r\n        <el-breadcrumb-item>推广链接</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n\r\n    <div class=\"extend-search\">\r\n        <div class=\"search\">\r\n            <el-input v-model=\"searchInput\" placeholder=\"小说或派单渠道名称\"></el-input>\r\n            <el-button type=\"primary\" icon=\"el-icon-search\"></el-button>\r\n        </div>\r\n    </div>\r\n\r\n    <el-table class=\"extend-table\" :data=\"extendLinkObj.list\" border style=\"width: 100%\">\r\n        <el-table-column label=\"推广链接\">\r\n            <template slot-scope=\"scope\">\r\n                <p class=\"extend-media-name\">{{scope.row.newMediaName}}</p>\r\n                <p class=\"extend-url\">\r\n                    <span>{{scope.row.url}}</span>\r\n                    <el-tooltip effect=\"dark\" content=\"复制链接\" placement=\"top\">\r\n                        <i class=\"fa fa-copy\" v-clipboard=\"scope.row.url\" @click=\"copyMessige()\"></i>\r\n                    </el-tooltip>\r\n                </p>\r\n                <p class=\"extend-time\">创建时间：{{scope.row.addTime | extendTime()}}</p>\r\n            </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column label=\"入口页面\">\r\n            <template slot-scope=\"scope\">\r\n                <p class=\"extend-book-name\"><router-link :to=\"'/extend/chapterList/'+scope.row.bookId\">{{scope.row.bookName}}</router-link></p>\r\n                <p class=\"extend-chapter\">{{scope.row.chapterName}}</p>\r\n            </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column label=\"原文点击次数\" width=\"150\">\r\n            <template slot-scope=\"scope\">\r\n                <span>{{scope.row.infoTotal | computedTotal()}}</span>\r\n            </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column label=\"访问记录\" width=\"150\" align=\"center\">\r\n            <template slot-scope=\"scope\">\r\n                <el-button class=\"primary\" size=\"mini\" @click=\"openDialogTable(scope.row.infoTotal)\">详情</el-button>\r\n            </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column label=\"操作\" width=\"200\" align=\"center\">\r\n            <template slot-scope=\"scope\">\r\n                <!-- <el-button class=\"more-btn\" size=\"mini\" @click=\"scope.row.show = !scope.row.show\">\r\n                    更多 <i class=\"fa fa-caret-down\"></i>\r\n                    <el-collapse-transition>\r\n                        <ul class=\"tool-list\" v-show=\"scope.row.show\">\r\n                            <li><a @click=\"openDialog(scope.row)\"><i class=\"fa fa-edit\"></i> 修改链接</a></li>\r\n                            <li><a @click=\"deleteLink(scope.row)\"><i class=\"fa fa-trash-o\"></i> 删除</a></li>\r\n                        </ul>\r\n                    </el-collapse-transition>\r\n                </el-button> -->\r\n                <el-button class=\"more-btn\" size=\"mini\" @click=\"deleteLink(scope.row)\"><i class=\"fa fa-trash-o\"></i> 删除</el-button>\r\n            </template>\r\n        </el-table-column>\r\n    </el-table>\r\n\r\n    <el-pagination\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page=\"extendLinkObj.pageNo\"\r\n        :page-size=\"extendLinkObj.pageSize\"\r\n        layout=\"total, prev, pager, next, jumper\"\r\n        :total=\"extendLinkObj.totalCount\">\r\n    </el-pagination>\r\n\r\n    <el-dialog class=\"dialog\" title=\"修改推广链接属性\" :visible.sync=\"dialogVisible\" width=\"600px\">\r\n        <div class=\"dialog-item\">\r\n            <p>入口页面</p>\r\n            <span>小说阅读页</span>\r\n        </div>\r\n        <div class=\"dialog-item\">\r\n            <p>渠道名称</p>\r\n            <el-select v-model=\"updateParams.channelId\" placeholder=\"请选择\">\r\n                <el-option v-for=\"(item, index) in this.$store.state.census.spreadNameList\" :key=\"index\" :label=\"item.name\" :value=\"item.id\"></el-option>\r\n            </el-select>\r\n        </div>\r\n        <div class=\"dialog-item\">\r\n            <p>阅读原文章节</p>\r\n            <span>{{updateParams.chapterName}}</span>\r\n        </div>\r\n        <div class=\"dialog-tool\" style=\"text-align: right;\">\r\n            <el-button type=\"primary\">保存修改</el-button>\r\n        </div>\r\n    </el-dialog>\r\n\r\n    <el-dialog class=\"dialog-table\" title=\"访问记录\" :visible.sync=\"dialogVisibleTable\" width=\"600px\">\r\n        <el-table :data=\"recordList\" stripe border>\r\n            <el-table-column label=\"日期\">\r\n                <template slot-scope=\"scope\">\r\n                    <span>{{scope.row.date | extendTime()}}</span>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"ipCount\" label=\"IP点击数\"></el-table-column>\r\n            <el-table-column prop=\"totalCount\" label=\"总数量\"></el-table-column>\r\n        </el-table>\r\n    </el-dialog>\r\n</div>\r\n</template>\r\n\r\n<script type=\"text/ecmascript-6\">\r\nexport default {\r\n    data() {\r\n        return {\r\n            dialogVisible: false,\r\n            dialogVisibleTable: false,\r\n            searchInput: '',\r\n            extendLinkParams: {\r\n                page: 1,\r\n                channelId: 'LGDMT20180627'\r\n            },\r\n            updateParams: {\r\n                channelId: '',\r\n                chapterName: '',\r\n            },\r\n            recordList: []\r\n        }\r\n    },\r\n\r\n    mounted() {\r\n        this.$store.dispatch('census/getExtensionLink', this.extendLinkParams)\r\n    },\r\n\r\n    methods: {\r\n        openDialog(row) {\r\n            this.updateParams.channelId = row.newMediaId\r\n            this.updateParams.chapterName = row.chapterName\r\n            this.dialogVisible = true\r\n        },\r\n\r\n        openDialogTable(arr) {\r\n            this.recordList = arr\r\n            this.dialogVisibleTable = true\r\n        },\r\n\r\n        copyMessige() {\r\n            this.$message({ message: '复制成功！', type: 'success' })\r\n        },\r\n\r\n        deleteLink(row) {\r\n            this.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            }).then(() => {\r\n                this.$store.dispatch('census/deleteExtensionLink', { id: row._id }).then(res => {\r\n                    this.$message({ type: 'success', message: res.msg })\r\n                    this.$store.dispatch('census/getExtensionLink', this.extendLinkParams)\r\n                })\r\n            }).catch(() => {\r\n                this.$message({ type: 'info', message: '已取消删除' })\r\n            })\r\n        },\r\n\r\n        handleCurrentChange(page) {\r\n            this.$router.push({ params: { page: page }})\r\n        },\r\n        \r\n    },\r\n\r\n    computed: {\r\n        extendLinkObj() {\r\n            return this.$store.state.census.extendLinkObj\r\n        }\r\n    },\r\n\r\n    filters: {\r\n        extendTime: (value) => {\r\n            if (!value) return ''\r\n            return value = value.toString().slice(0, 4) + '-' + value.toString().slice(4, 6) + '-' + value.toString().slice(6)\r\n        },\r\n        computedTotal: (value) => {\r\n            if(value.length == 0) return 0\r\n            var n = 0\r\n            for(var i=0; i<value.length; i++) {\r\n                n += value[i].totalCount\r\n            }\r\n            return n\r\n        }\r\n    },\r\n\r\n    watch: {\r\n        $route: function(val) {\r\n            this.extendLinkParams.page = val.params.page\r\n            this.$store.dispatch('census/getExtensionLink', this.extendLinkParams)\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" rel=\"stylesheet/stylus\" scope>\r\n.extend-search::after\r\n    display block\r\n    content ''\r\n    clear both\r\n.extend-search\r\n    margin 20px 0\r\n    .search\r\n        float right\r\n        .el-input\r\n            width 160px\r\n.extend-table\r\n    margin-bottom 20px\r\n    overflow visible\r\n    font-size 14px\r\n    .el-table__body-wrapper\r\n        overflow visible\r\n    .extend-url\r\n        color #337ab7\r\n        i\r\n            color #393939\r\n            cursor pointer\r\n    .extend-time\r\n        color #777\r\n        font-size 13px\r\n    .extend-book-name\r\n        color #337ab7\r\n        cursor pointer\r\n    .extend-book-name:hover\r\n        text-decoration underline\r\n    .cell\r\n        overflow visible\r\n        .more-btn\r\n            position relative\r\n            background #87b87f\r\n            outline none\r\n            color #fff\r\n            ul.tool-list\r\n                position absolute\r\n                z-index 100\r\n                top 29px\r\n                left -60px\r\n                padding 5px 0\r\n                min-width 160px\r\n                background #fff\r\n                text-align left\r\n                box-shadow 0 2px 4px rgba(0,0,0,.2)\r\n                a\r\n                    display block\r\n                    color #333\r\n                    padding 5px 11px\r\n                    white-space nowrap\r\n                    font-size 14px\r\n                    font-weight 400\r\n                    i\r\n                        width 12px\r\n                        text-align center\r\n                a:hover\r\n                    background #4f99c6\r\n                    color #fff\r\n.dialog\r\n    .dialog-item\r\n        width 100%\r\n        margin-bottom 20px\r\n        height 40px\r\n        line-height 40px\r\n        p\r\n            float left\r\n            width 25%\r\n            padding 0 15px\r\n            box-sizing border-box\r\n            text-align right\r\n\r\n\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/page/extend/extendLink.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/bookdistribution' }}},[_vm._v(\"小说分销平台\")]),_vm._v(\" \"),_c('el-breadcrumb-item',[_vm._v(\"推广链接\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"extend-search\"},[_c('div',{staticClass:\"search\"},[_c('el-input',{attrs:{\"placeholder\":\"小说或派单渠道名称\"},model:{value:(_vm.searchInput),callback:function ($$v) {_vm.searchInput=$$v},expression:\"searchInput\"}}),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-search\"}})],1)]),_vm._v(\" \"),_c('el-table',{staticClass:\"extend-table\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.extendLinkObj.list,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"label\":\"推广链接\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('p',{staticClass:\"extend-media-name\"},[_vm._v(_vm._s(scope.row.newMediaName))]),_vm._v(\" \"),_c('p',{staticClass:\"extend-url\"},[_c('span',[_vm._v(_vm._s(scope.row.url))]),_vm._v(\" \"),_c('el-tooltip',{attrs:{\"effect\":\"dark\",\"content\":\"复制链接\",\"placement\":\"top\"}},[_c('i',{directives:[{name:\"clipboard\",rawName:\"v-clipboard\",value:(scope.row.url),expression:\"scope.row.url\"}],staticClass:\"fa fa-copy\",on:{\"click\":function($event){_vm.copyMessige()}}})])],1),_vm._v(\" \"),_c('p',{staticClass:\"extend-time\"},[_vm._v(\"创建时间：\"+_vm._s(_vm._f(\"extendTime\")(scope.row.addTime)))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"入口页面\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('p',{staticClass:\"extend-book-name\"},[_c('router-link',{attrs:{\"to\":'/extend/chapterList/'+scope.row.bookId}},[_vm._v(_vm._s(scope.row.bookName))])],1),_vm._v(\" \"),_c('p',{staticClass:\"extend-chapter\"},[_vm._v(_vm._s(scope.row.chapterName))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"原文点击次数\",\"width\":\"150\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(_vm._f(\"computedTotal\")(scope.row.infoTotal)))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"访问记录\",\"width\":\"150\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{staticClass:\"primary\",attrs:{\"size\":\"mini\"},on:{\"click\":function($event){_vm.openDialogTable(scope.row.infoTotal)}}},[_vm._v(\"详情\")])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"200\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{staticClass:\"more-btn\",attrs:{\"size\":\"mini\"},on:{\"click\":function($event){_vm.deleteLink(scope.row)}}},[_c('i',{staticClass:\"fa fa-trash-o\"}),_vm._v(\" 删除\")])]}}])})],1),_vm._v(\" \"),_c('el-pagination',{attrs:{\"current-page\":_vm.extendLinkObj.pageNo,\"page-size\":_vm.extendLinkObj.pageSize,\"layout\":\"total, prev, pager, next, jumper\",\"total\":_vm.extendLinkObj.totalCount},on:{\"current-change\":_vm.handleCurrentChange}}),_vm._v(\" \"),_c('el-dialog',{staticClass:\"dialog\",attrs:{\"title\":\"修改推广链接属性\",\"visible\":_vm.dialogVisible,\"width\":\"600px\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('div',{staticClass:\"dialog-item\"},[_c('p',[_vm._v(\"入口页面\")]),_vm._v(\" \"),_c('span',[_vm._v(\"小说阅读页\")])]),_vm._v(\" \"),_c('div',{staticClass:\"dialog-item\"},[_c('p',[_vm._v(\"渠道名称\")]),_vm._v(\" \"),_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.updateParams.channelId),callback:function ($$v) {_vm.$set(_vm.updateParams, \"channelId\", $$v)},expression:\"updateParams.channelId\"}},_vm._l((this.$store.state.census.spreadNameList),function(item,index){return _c('el-option',{key:index,attrs:{\"label\":item.name,\"value\":item.id}})}))],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-item\"},[_c('p',[_vm._v(\"阅读原文章节\")]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.updateParams.chapterName))])]),_vm._v(\" \"),_c('div',{staticClass:\"dialog-tool\",staticStyle:{\"text-align\":\"right\"}},[_c('el-button',{attrs:{\"type\":\"primary\"}},[_vm._v(\"保存修改\")])],1)]),_vm._v(\" \"),_c('el-dialog',{staticClass:\"dialog-table\",attrs:{\"title\":\"访问记录\",\"visible\":_vm.dialogVisibleTable,\"width\":\"600px\"},on:{\"update:visible\":function($event){_vm.dialogVisibleTable=$event}}},[_c('el-table',{attrs:{\"data\":_vm.recordList,\"stripe\":\"\",\"border\":\"\"}},[_c('el-table-column',{attrs:{\"label\":\"日期\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(_vm._f(\"extendTime\")(scope.row.date)))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"ipCount\",\"label\":\"IP点击数\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"totalCount\",\"label\":\"总数量\"}})],1)],1)],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@14.2.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-56516032\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@14.2.2@vue-loader/lib/selector.js?type=template&index=0!./src/page/extend/extendLink.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}