webpackJsonp([22],{Lz4X:function(t,e,a){"use strict";function n(t){a("T4Ha")}Object.defineProperty(e,"__esModule",{value:!0});var l=this,r={data:function(){return{noticeType:[{name:"首页公告",value:1},{name:"滚动公告",value:2},{name:"福利公告",value:3}],currentType:1,tableList:{}}},methods:{getNotice:function(){var t=this;this.$store.dispatch("system/getNotice",{menuId:this.currentType,page:this.$route.params.page}).then(function(e){t.tableList=e.data})},delNotice:function(t){var e=this;this.$confirm("此操作将永久删除该公告, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$store.dispatch("system/deleteNotice",{id:t}).then(function(t){e.$message({message:"删除成功",type:"success"}),e.getNotice()})})},handleClick:function(t){this.$router.push({path:"/system/edit_notice/"+t.id})}},created:function(){this.getNotice()},watch:{currentType:function(t){l.getNotice()}}},c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sys-notice-wrap"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:"/system/notice"}},[t._v("新闻公告")]),t._v(" "),a("el-breadcrumb-item",[t._v("公告列表")])],1),t._v(" "),a("el-alert",{attrs:{title:"操作说明",type:"info",description:"请选取推荐位类型，按类型搜索需要修改的推荐位。图片轮播和右侧小图推荐位需要单独上传图片，请编辑完成后点击换图进行图片更换","show-icon":""}},[a("div",[a("p",[t._v("\n                此表包括网站、APP所有公告通知，当新增完所有公告后请使用\n                "),a("a",{attrs:{href:"javascript:0;"},on:{click:function(e){t.$clearCache()}}},[t._v("清除缓存")]),t._v("\n                使网站首页公告列表立即更新\n            ")])])]),t._v(" "),a("el-row",{staticClass:"mbt20"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.$router.push({path:"/system/add_notice"})}}},[t._v("添加")]),t._v(" "),a("el-button",{staticClass:"fr",attrs:{type:"primary"},on:{click:function(e){t.$clearCache()}}},[t._v("清除缓存")])],1),t._v(" "),a("el-row",{staticClass:"mbt20",attrs:{gutter:10}},[a("el-col",{attrs:{xs:18,sm:12,md:9,lg:6,xl:3}},[a("el-select",{attrs:{placeholder:"请选择类型"},model:{value:t.currentType,callback:function(e){t.currentType=e},expression:"currentType"}},t._l(t.noticeType,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.value}})}))],1)],1),t._v(" "),a("el-row",{staticClass:"mbt20"},[a("el-table",{ref:"multipleTable",attrs:{data:t.tableList.list,border:"",select:"row","tooltip-effect":"dark"}},[a("el-table-column",{attrs:{type:"selection",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"100",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"menuName",label:"类型",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"标题",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"adminName",label:"发布者",align:"center"}}),a("el-table-column",{attrs:{label:"时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t._f("time")(e.row.releaseDate,"long")))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{attrs:{href:"javascript:0;"},on:{click:function(a){t.handleClick(e.row,"edit")}}},[t._v("编辑")]),t._v(" "),a("a",{staticClass:"red",attrs:{href:"javascript:0;"},on:{click:function(a){t.delNotice(e.row.id)}}},[t._v("删除")])]}}])})],1)],1)],1)},i=[],s=a("18Nq"),o=n,u=Object(s.a)(r,c,i,!1,o,null,null);e.default=u.exports},T4Ha:function(t,e){}});
//# sourceMappingURL=22.94f6a65279b1817de8fd.js.map