webpackJsonp([1,68],{"4xxa":function(e,t){},G5zc:function(e,t){},PsVy:function(e,t,r){"use strict";function a(e){r("4xxa")}Object.defineProperty(t,"__esModule",{value:!0});var n=r("hRKE"),s=r.n(n);!function(e){e.Jcrop=function(t,r){function a(e){return Math.round(e)+"px"}function n(e){return L.baseClass+"-"+e}function i(){return e.fx.step.hasOwnProperty("backgroundColor")}function o(t){var r=e(t).offset();return[r.left,r.top]}function c(e){return[e.pageX-P[0],e.pageY-P[1]]}function u(t){"object"!==(void 0===t?"undefined":s()(t))&&(t={}),L=e.extend(L,t),e.each(["onChange","onSelect","onRelease","onDblClick"],function(e,t){"function"!=typeof L[t]&&(L[t]=function(){})})}function l(e,t,r){if(P=o(N),ge.setCursor("move"===e?e:e+"-resize"),"move"===e)return ge.activateHandlers(p(t),v,r);var a=pe.getFixed(),n=h(e),s=pe.getCorner(h(n));pe.setPressed(pe.getCorner(n)),pe.setCurrent(s),ge.activateHandlers(d(e,a),v,r)}function d(e,t){return function(r){if(L.aspectRatio)switch(e){case"e":case"w":r[1]=t.y+1;break;case"n":case"s":r[0]=t.x+1}else switch(e){case"e":case"w":r[1]=t.y2;break;case"n":case"s":r[0]=t.x2}pe.setCurrent(r),fe.update()}}function p(e){var t=e;return me.watchKeys(),function(e){pe.moveOffset([e[0]-t[0],e[1]-t[1]]),t=e,fe.update()}}function h(e){switch(e){case"n":return"sw";case"s":case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function f(e){return function(t){return!L.disabled&&(!("move"===e&&!L.allowMove)&&(P=o(N),ne=!0,l(e,c(t)),t.stopPropagation(),t.preventDefault(),!1))}}function g(e,t,r){var a=e.width(),n=e.height();a>t&&t>0&&(a=t,n=t/e.width()*e.height()),n>r&&r>0&&(n=r,a=r/e.height()*e.width()),re=e.width()/a,ae=e.height()/n,e.width(a).height(n)}function m(e){return{x:e.x*re,y:e.y*ae,x2:e.x2*re,y2:e.y2*ae,w:e.w*re,h:e.h*ae}}function v(e){var t=pe.getFixed();t.w>L.minSelect[0]&&t.h>L.minSelect[1]?(fe.enableHandles(),fe.done()):fe.release(),ge.setCursor(L.allowSelect?"crosshair":"default")}function b(e){if(!L.disabled&&L.allowSelect){ne=!0,P=o(N),fe.disableHandles(),ge.setCursor("crosshair");var t=c(e);return pe.setPressed(t),fe.update(),ge.activateHandlers(w,v,"touch"===e.type.substring(0,5)),me.watchKeys(),e.stopPropagation(),e.preventDefault(),!1}}function w(e){pe.setCurrent(e),fe.update()}function y(){var t=e("<div></div>").addClass(n("tracker"));return D&&t.css({opacity:0,backgroundColor:"white"}),t}function x(e){Q.removeClass().addClass(n("holder")).addClass(e)}function C(e,t){function r(){window.setTimeout(b,d)}var a=e[0]/re,n=e[1]/ae,s=e[2]/re,i=e[3]/ae;if(!se){var o=pe.flipCoords(a,n,s,i),c=pe.getFixed(),u=[c.x,c.y,c.x2,c.y2],l=u,d=L.animationDelay,p=o[0]-u[0],h=o[1]-u[1],f=o[2]-u[2],g=o[3]-u[3],m=0,v=L.swingSpeed;a=l[0],n=l[1],s=l[2],i=l[3],fe.animMode(!0);var b=function(){return function(){m+=(100-m)/v,l[0]=Math.round(a+m/100*p),l[1]=Math.round(n+m/100*h),l[2]=Math.round(s+m/100*f),l[3]=Math.round(i+m/100*g),m>=99.8&&(m=100),m<100?(S(l),r()):(fe.done(),fe.animMode(!1),"function"==typeof t&&t.call(ve))}}();r()}}function _(e){S([e[0]/re,e[1]/ae,e[2]/re,e[3]/ae]),L.onSelect.call(ve,m(pe.getFixed())),fe.enableHandles()}function S(e){pe.setPressed([e[0],e[1]]),pe.setCurrent([e[2],e[3]]),fe.update()}function k(){return m(pe.getFixed())}function $(){return pe.getFixed()}function I(e){u(e),M()}function z(){L.disabled=!0,fe.disableHandles(),fe.setCursor("default"),ge.setCursor("default")}function A(){L.disabled=!1,M()}function T(){fe.done(),ge.activateHandlers(null,null)}function j(){Q.remove(),H.show(),H.css("visibility","visible"),e(t).removeData("Jcrop")}function B(e,t){fe.release(),z();var r=new Image;r.onload=function(){var a=r.width,n=r.height,s=L.boxWidth,i=L.boxHeight;N.width(a).height(n),N.attr("src",e),K.attr("src",e),g(N,s,i),V=N.width(),W=N.height(),K.width(V).height(W),K.css({background:"#0f0"}),ce.width(V+2*oe).height(W+2*oe),Q.width(V).height(W),he.resize(V,W),A(),"function"==typeof t&&t.call(ve)},r.src=e}function O(e,t,r){var a=t||L.bgColor;L.bgFade&&i()&&L.fadeTime&&!r?e.animate({backgroundColor:a},{queue:!1,duration:L.fadeTime}):e.css("backgroundColor",a)}function M(e){L.allowResize?e?fe.enableOnly():fe.enableHandles():fe.disableHandles(),ge.setCursor(L.allowSelect?"crosshair":"default"),fe.setCursor(L.allowMove?"move":"default"),L.hasOwnProperty("trueSize")&&(re=L.trueSize[0]/V,ae=L.trueSize[1]/W),L.hasOwnProperty("setSelect")&&(_(L.setSelect),fe.done(),delete L.setSelect),he.refresh(),L.bgColor!=ue&&(O(L.shade?he.getShades():Q,L.shade?L.shadeColor||L.bgColor:L.bgColor),ue=L.bgColor),le!=L.bgOpacity&&(le=L.bgOpacity,L.shade?he.refresh():fe.setBgOpacity(le)),Y=L.maxSize[0]||0,Z=L.maxSize[1]||0,ee=L.minSize[0]||0,te=L.minSize[1]||0,L.hasOwnProperty("outerImage")&&(N.attr("src",L.outerImage),delete L.outerImage),fe.refresh()}var P,L=e.extend({},e.Jcrop.defaults),R=navigator.userAgent.toLowerCase(),D=/msie/.test(R),F=/msie [1-6]\./.test(R);"object"!==(void 0===t?"undefined":s()(t))&&(t=e(t)[0]),"object"!==(void 0===r?"undefined":s()(r))&&(r={}),u(r);var U={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},H=e(t),E=!0;if("IMG"==t.tagName){if(0!=H[0].width&&0!=H[0].height)H.width(H[0].width),H.height(H[0].height);else{var J=new Image;J.src=H[0].src,H.width(J.width),H.height(J.height)}var N=H.clone().removeAttr("id").css(U).show();N.width(H.width()),N.height(H.height()),H.after(N).hide()}else N=H.css(U).show(),E=!1,null===L.shade&&(L.shade=!0);g(N,L.boxWidth,L.boxHeight);var V=N.width(),W=N.height(),Q=e("<div />").width(V).height(W).addClass(n("holder")).css({position:"relative",backgroundColor:L.bgColor}).insertAfter(H).append(N);L.addClass&&Q.addClass(L.addClass);var K=e("<div />"),q=e("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),G=e("<div />").width("100%").height("100%").css("zIndex",320),X=e("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var e=pe.getFixed();L.onDblClick.call(ve,e)}).insertBefore(N).append(q,G);E&&(K=e("<img />").attr("src",N.attr("src")).css(U).width(V).height(W),q.append(K)),F&&X.css({overflowY:"hidden"});var Y,Z,ee,te,re,ae,ne,se,ie,oe=L.boundary,ce=y().width(V+2*oe).height(W+2*oe).css({position:"absolute",top:a(-oe),left:a(-oe),zIndex:290}).mousedown(b),ue=L.bgColor,le=L.bgOpacity;P=o(N);var de=function(){function e(){var e,t={},r=["touchstart","touchmove","touchend"],a=document.createElement("div");try{for(e=0;e<r.length;e++){var n=r[e];n="on"+n;var s=n in a;s||(a.setAttribute(n,"return;"),s="function"==typeof a[n]),t[r[e]]=s}return t.touchstart&&t.touchend&&t.touchmove}catch(e){return!1}}return{createDragger:function(e){return function(t){return!L.disabled&&(!("move"===e&&!L.allowMove)&&(P=o(N),ne=!0,l(e,c(de.cfilter(t)),!0),t.stopPropagation(),t.preventDefault(),!1))}},newSelection:function(e){return b(de.cfilter(e))},cfilter:function(e){return e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,e},isSupported:e,support:function(){return!0===L.touchSupport||!1===L.touchSupport?L.touchSupport:e()}()}}(),pe=function(){function e(e){e=i(e),f=p=e[0],g=h=e[1]}function t(e){e=i(e),l=e[0]-f,d=e[1]-g,f=e[0],g=e[1]}function r(){return[l,d]}function a(e){var t=e[0],r=e[1];p+t<0&&(t-=t+p),h+r<0&&(r-=r+h),W<g+r&&(r+=W-(g+r)),V<f+t&&(t+=V-(f+t)),p+=t,f+=t,h+=r,g+=r}function n(e){var t=s();switch(e){case"ne":return[t.x2,t.y];case"nw":return[t.x,t.y];case"se":return[t.x2,t.y2];case"sw":return[t.x,t.y2]}}function s(){if(!L.aspectRatio)return c();var e,t,r,a,n=L.aspectRatio,s=L.minSize[0]/re,i=L.maxSize[0]/re,l=L.maxSize[1]/ae,d=f-p,m=g-h,v=Math.abs(d),b=Math.abs(m),w=v/b;return 0===i&&(i=10*V),0===l&&(l=10*W),w<n?(t=g,r=b*n,e=d<0?p-r:r+p,e<0?(e=0,a=Math.abs((e-p)/n),t=m<0?h-a:a+h):e>V&&(e=V,a=Math.abs((e-p)/n),t=m<0?h-a:a+h)):(e=f,a=v/n,t=m<0?h-a:h+a,t<0?(t=0,r=Math.abs((t-h)*n),e=d<0?p-r:r+p):t>W&&(t=W,r=Math.abs(t-h)*n,e=d<0?p-r:r+p)),e>p?(e-p<s?e=p+s:e-p>i&&(e=p+i),t=t>h?h+(e-p)/n:h-(e-p)/n):e<p&&(p-e<s?e=p-s:p-e>i&&(e=p-i),t=t>h?h+(p-e)/n:h-(p-e)/n),e<0?(p-=e,e=0):e>V&&(p-=e-V,e=V),t<0?(h-=t,t=0):t>W&&(h-=t-W,t=W),u(o(p,h,e,t))}function i(e){return e[0]<0&&(e[0]=0),e[1]<0&&(e[1]=0),e[0]>V&&(e[0]=V),e[1]>W&&(e[1]=W),[Math.round(e[0]),Math.round(e[1])]}function o(e,t,r,a){var n=e,s=r,i=t,o=a;return r<e&&(n=r,s=e),a<t&&(i=a,o=t),[n,i,s,o]}function c(){var e,t=f-p,r=g-h;return Y&&Math.abs(t)>Y&&(f=t>0?p+Y:p-Y),Z&&Math.abs(r)>Z&&(g=r>0?h+Z:h-Z),te/ae&&Math.abs(r)<te/ae&&(g=r>0?h+te/ae:h-te/ae),ee/re&&Math.abs(t)<ee/re&&(f=t>0?p+ee/re:p-ee/re),p<0&&(f-=p,p-=p),h<0&&(g-=h,h-=h),f<0&&(p-=f,f-=f),g<0&&(h-=g,g-=g),f>V&&(e=f-V,p-=e,f-=e),g>W&&(e=g-W,h-=e,g-=e),p>V&&(e=p-W,g-=e,h-=e),h>W&&(e=h-W,g-=e,h-=e),u(o(p,h,f,g))}function u(e){return{x:e[0],y:e[1],x2:e[2],y2:e[3],w:e[2]-e[0],h:e[3]-e[1]}}var l,d,p=0,h=0,f=0,g=0;return{flipCoords:o,setPressed:e,setCurrent:t,getOffset:r,moveOffset:a,getCorner:n,getFixed:s}}(),he=function(){function t(e,t){f.left.css({height:a(t)}),f.right.css({height:a(t)})}function r(){return n(pe.getFixed())}function n(e){f.top.css({left:a(e.x),width:a(e.w),height:a(e.y)}),f.bottom.css({top:a(e.y2),left:a(e.x),width:a(e.w),height:a(W-e.y2)}),f.right.css({left:a(e.x2),width:a(V-e.x2)}),f.left.css({width:a(e.x)})}function s(){return e("<div />").css({position:"absolute",backgroundColor:L.shadeColor||L.bgColor}).appendTo(h)}function i(){p||(p=!0,h.insertBefore(N),r(),fe.setBgOpacity(1,0,1),K.hide(),o(L.shadeColor||L.bgColor,1),fe.isAwake()?u(L.bgOpacity,1):u(1,1))}function o(e,t){O(d(),e,t)}function c(){p&&(h.remove(),K.show(),p=!1,fe.isAwake()?fe.setBgOpacity(L.bgOpacity,1,1):(fe.setBgOpacity(1,1,1),fe.disableHandles()),O(Q,0,1))}function u(e,t){p&&(L.bgFade&&!t?h.animate({opacity:1-e},{queue:!1,duration:L.fadeTime}):h.css({opacity:1-e}))}function l(){L.shade?i():c(),fe.isAwake()&&u(L.bgOpacity)}function d(){return h.children()}var p=!1,h=e("<div />").css({position:"absolute",zIndex:240,opacity:0}),f={top:s(),left:s().height(W),right:s().height(W),bottom:s()};return{update:r,updateRaw:n,getShades:d,setBgColor:o,enable:i,disable:c,resize:t,refresh:l,opacity:u}}(),fe=function(){function t(t){var r=e("<div />").css({position:"absolute",opacity:L.borderOpacity}).addClass(n(t));return q.append(r),r}function r(t,r){var a=e("<div />").mousedown(f(t)).css({cursor:t+"-resize",position:"absolute",zIndex:r}).addClass("ord-"+t);return de.support&&a.bind("touchstart.jcrop",de.createDragger(t)),G.append(a),a}function s(e){var t=L.handleSize,a=r(e,S++).css({opacity:L.handleOpacity}).addClass(n("handle"));return t&&a.width(t).height(t),a}function i(e){return r(e,S++).addClass("jcrop-dragbar")}function o(e,t){L.shade||K.css({top:a(-t),left:a(-e)}),X.css({top:a(t),left:a(e)})}function c(e,t){X.width(Math.round(e)).height(Math.round(t))}function u(){var e=pe.getFixed();pe.setPressed([e.x,e.y]),pe.setCurrent([e.x2,e.y2]),l()}function l(e){if(_)return d(e)}function d(e){var t=pe.getFixed();c(t.w,t.h),o(t.x,t.y),L.shade&&he.updateRaw(t),_||h(),e?L.onSelect.call(ve,m(t)):L.onChange.call(ve,m(t))}function p(e,t,r){(_||t)&&(L.bgFade&&!r?N.animate({opacity:e},{queue:!1,duration:L.fadeTime}):N.css("opacity",e))}function h(){X.show(),L.shade?he.opacity(le):p(le,!0),_=!0}function g(){w(),X.hide(),L.shade?he.opacity(1):p(1),_=!1,L.onRelease.call(ve)}function v(){z&&G.show()}function b(){if(z=!0,L.allowResize)return G.show(),!0}function w(){z=!1,G.hide()}function x(e){e?(se=!0,w()):(se=!1,b())}function C(){x(!1),u()}var _,S=370,k={},$={},I={},z=!1;L.dragEdges&&e.isArray(L.createDragbars)&&function(e){var t;for(t=0;t<e.length;t++)I[e[t]]=i(e[t])}(L.createDragbars),e.isArray(L.createHandles)&&function(e){var t;for(t=0;t<e.length;t++)$[e[t]]=s(e[t])}(L.createHandles),L.drawBorders&&e.isArray(L.createBorders)&&function(e){var r,a;for(a=0;a<e.length;a++){switch(e[a]){case"n":r="hline";break;case"s":r="hline bottom";break;case"e":r="vline right";break;case"w":r="vline"}k[e[a]]=t(r)}}(L.createBorders),e(document).bind("touchstart.jcrop-ios",function(t){e(t.currentTarget).hasClass("jcrop-tracker")&&t.stopPropagation()});var A=y().mousedown(f("move")).css({cursor:"move",position:"absolute",zIndex:360});return de.support&&A.bind("touchstart.jcrop",de.createDragger("move")),q.append(A),w(),{updateVisible:l,update:d,release:g,refresh:u,isAwake:function(){return _},setCursor:function(e){A.css("cursor",e)},enableHandles:b,enableOnly:function(){z=!0},showHandles:v,disableHandles:w,animMode:x,setBgOpacity:p,done:C}}(),ge=function(){function t(t){ce.css({zIndex:450}),t?e(document).bind("touchmove.jcrop",i).bind("touchend.jcrop",o):p&&e(document).bind("mousemove.jcrop",a).bind("mouseup.jcrop",n)}function r(){ce.css({zIndex:290}),e(document).unbind(".jcrop")}function a(e){return l(c(e)),!1}function n(e){return e.preventDefault(),e.stopPropagation(),ne&&(ne=!1,d(c(e)),fe.isAwake()&&L.onSelect.call(ve,m(pe.getFixed())),r(),l=function(){},d=function(){}),!1}function s(e,r,a){return ne=!0,l=e,d=r,t(a),!1}function i(e){return l(c(de.cfilter(e))),!1}function o(e){return n(de.cfilter(e))}function u(e){ce.css("cursor",e)}var l=function(){},d=function(){},p=L.trackDocument;return p||ce.mousemove(a).mouseup(n).mouseout(n),N.before(ce),{activateHandlers:s,setCursor:u}}(),me=function(){function t(){L.keySupport&&(s.show(),s.focus())}function r(e){s.hide()}function a(e,t,r){L.allowMove&&(pe.moveOffset([t,r]),fe.updateVisible(!0)),e.preventDefault(),e.stopPropagation()}function n(e){if(e.ctrlKey||e.metaKey)return!0;ie=!!e.shiftKey;var t=ie?10:1;switch(e.keyCode){case 37:a(e,-t,0);break;case 39:a(e,t,0);break;case 38:a(e,0,-t);break;case 40:a(e,0,t);break;case 27:L.allowSelect&&fe.release();break;case 9:return!0}return!1}var s=e('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),i=e("<div />").css({position:"absolute",overflow:"hidden"}).append(s);return L.keySupport&&(s.keydown(n).blur(r),F||!L.fixedSupport?(s.css({position:"absolute",left:"-20px"}),i.append(s).insertBefore(N)):s.insertBefore(N)),{watchKeys:t}}();de.support&&ce.bind("touchstart.jcrop",de.newSelection),G.hide(),M(!0);var ve={setImage:B,animateTo:C,setSelect:_,setOptions:I,tellSelect:k,tellScaled:$,setClass:x,disable:z,enable:A,cancel:T,release:fe.release,destroy:j,focus:me.watchKeys,getBounds:function(){return[V*re,W*ae]},getWidgetSize:function(){return[V,W]},getScaleFactor:function(){return[re,ae]},getOptions:function(){return L},ui:{holder:Q,selection:X}};return D&&Q.bind("selectstart",function(){return!1}),H.data("Jcrop",ve),ve},e.fn.Jcrop=function(t,r){var a;return this.each(function(){if(e(this).data("Jcrop")){if("api"===t)return e(this).data("Jcrop");e(this).data("Jcrop").setOptions(t)}else"IMG"==this.tagName?e.Jcrop.Loader(this,function(){e(this).css({display:"block",visibility:"hidden"}),a=e.Jcrop(this,t),e.isFunction(r)&&r.call(a)}):(e(this).css({display:"block",visibility:"hidden"}),a=e.Jcrop(this,t),e.isFunction(r)&&r.call(a))}),this},e.Jcrop.Loader=function(t,r,a){function n(){i.complete?(s.unbind(".jcloader"),e.isFunction(r)&&r.call(i)):window.setTimeout(n,50)}var s=e(t),i=s[0];s.bind("load.jcloader",n).bind("error.jcloader",function(t){s.unbind(".jcloader"),e.isFunction(a)&&a.call(i)}),i.complete&&e.isFunction(r)&&(s.unbind(".jcloader"),r.call(i))},e.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:null,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}}(jQuery);var i=(r("rxrk"),{props:{action:{default:""},aspectRatio:{default:1},width:{default:200},url:{default:""},maxSize:{default:2},acceptType:{default:"jpeg,jpg,png"},data:{},sync:{default:!1},maxWidth:{default:600},title:{default:"图片上传"},visible:{default:!1}},data:function(){return{img_url:this.url,jcrop_api:"",boundx:"",boundy:"",widget:[0,0],$preview:void 0,$pcnt:void 0,$pimg:void 0,canvasOption:{},icon_url:"",pre_width:0,zoom:1}},methods:{testMaxSize:function(e){var t=this,r=new Image;if(e.files&&e.files[0]){var a=e.files[0],n=a.size,s=new FileReader;s.onload=function(a){var s=a.target.result;r.src=s,r.onload=function(){if(t.boundy=r.height,t.boundx=r.width,r.width>5e3||r.height>5e3)return $("#inputImage").val(""),t.$message({message:"图片尺寸太大，请重新选择！",type:"warning"}),!1;n?t.maxSize<n/1048576?(t.$message({message:"所选图片不可超过"+t.maxSize+"M",type:"warning"}),$("#inputImage").val("")):t.acceptType.indexOf(e.files[0].type.split("/")[1].toLowerCase())<0?(t.$message({message:"只能上传"+t.acceptType+"格式图片",type:"warning"}),$("#inputImage").val("")):(t.jcrop_api.setImage(s,function(){t.widget=this.getWidgetSize(),this.setSelect([0,0,300,300]),$("#pre-picture").parent().css({position:"absolute",width:t.widget[0]+"px",marginLeft:"-"+t.widget[0]/2+"px",marginTop:"-"+t.widget[1]/2+"px"})}),t.img_url=s,t.resetCrop()):t.$message({message:"请选取图片",type:"warning"})},r.onerror=function(e){return t.$message({message:"非法图片格式，请重新选择",type:"error"}),$("#inputImage").val(""),!1}},s.readAsDataURL(a)}else this.isIE()},subForm:function(){if(this.setCanvas(this.canvasOption)){if(this.syncUrl(this.icon_url),this.sync)return this.cancel(),!1;this.submitImageFile()}else this.$message({message:"无法剪裁，请更换浏览器重新尝试！",type:"warning"})},submitImageFile:function(e){var t=this;if("error"!==this.icon_url){if(""===this.icon_url)return e({returnCode:200});var r=new FormData,a=this.dataURLtoBlob(this.icon_url);r.append("file",a,"avatar-image.png");for(var n in this.data)r.append(n,this.data[n]);this.sync||this.$myLoad("正在上传中..."),$.ajax({url:this.action,type:"post",data:r,dataType:"text",processData:!1,contentType:!1,success:function(r){t.$emit("success",JSON.parse(r)),t.sync?e(JSON.parse(r)):(t.cancel(),t.$loading().close(),t.$message({message:JSON.parse(r).msg,type:"success"}))},error:function(e){t.$loading().close()},xhr:function(){var e=new XMLHttpRequest;return e.upload.addEventListener("progress",function(e){e.lengthComputable},!1),e}})}else this.$message({message:"无法获取剪切数据，请重新尝试！",type:"warning"})},dataURLtoBlob:function(e){for(var t=e.split(","),r=t[0].match(/:(.*?);/)[1],a=atob(t[1]),n=a.length,s=new Uint8Array(n);n--;)s[n]=a.charCodeAt(n);return new Blob([s],{type:r,filename:"image.png"})},resetCrop:function(){var e=this;this.$preview=$("#preview-pane"),this.$pimg=$("#preview-pane .preview-container img"),$("#pre-picture").Jcrop({bgFade:!0,boxHeight:400,boxWidth:400,onChange:this.updatePreview,onSelect:this.updatePreview,aspectRatio:this.aspectRatio},function(){e.jcrop_api=this;var t=this.getBounds();e.widget=this.getWidgetSize(),e.boundx=t[0],e.boundy=t[1],this.setSelect([0,0,300,200]),$("#pre-picture").parent().css({position:"absolute",width:e.widget[0]+"px",marginLeft:"-"+e.widget[0]/2+"px",marginTop:"-"+e.widget[1]/2+"px"})})},setCanvas:function(e){var t=$("#preview-pane .preview-container img")[0],r=document.createElement("img"),a=1;r.src=t.src;var n=document.createElement("canvas");this.zoom=r.width/this.boundx,e.w*this.zoom>this.maxWidth&&(a=this.maxWidth/(e.w*this.zoom)),n.width=e.w*this.zoom*a,n.height=e.h*this.zoom*a;try{n.getContext("2d").drawImage(t,e.x*this.zoom,e.y*this.zoom,e.w*this.zoom,e.h*this.zoom,0,0,e.w*this.zoom*a,e.h*this.zoom*a),this.icon_url=n.toDataURL()}catch(e){return this.icon_url="error"}return this.icon_url},changeImg:function(e){this.testMaxSize(e.target)},updatePreview:function(e){if(parseInt(e.w)>0){var t=this.width/e.w,r=this.width/this.aspectRatio/e.h;this.canvasOption=e,this.$pimg.css({width:Math.round(t*this.boundx)+"px",height:Math.round(r*this.boundy)+"px",marginLeft:"-"+Math.round(t*e.x)+"px",marginTop:"-"+Math.round(r*e.y)+"px"})}},isIE:function(){var e=navigator.userAgent;if(e.indexOf("compatible")>-1&&e.indexOf("MSIE")>-1&&(new RegExp("MSIE (\\d+\\.\\d+);").test(e),10!==parseFloat(RegExp.$1)))return this.$message({message:"您的计算机当前ie版本过低，无法使用图片上传，请您更换浏览器重新尝试！",type:"warning"}),!1},cancel:function(){this.$emit("close",!0)},syncUrl:function(e){this.$emit("syncUrl",e)}},mounted:function(){},watch:{visible:function(e){var t=this;e&&this.$nextTick(function(){t.resetCrop(t.img_url)})}}}),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.visible?r("div",{staticClass:"picture-cropper-mode"},[r("div",{staticClass:"picture-cropper-wrap"},[r("div",{staticClass:"pc-inner-header"},[r("span",{staticClass:"pc-header-title"},[e._v(e._s(e.title))]),e._v(" "),r("i",{staticClass:"el-icon-close",on:{click:e.cancel}})]),e._v(" "),r("div",{staticClass:"pc-wrap-inner clear"},[r("div",{staticClass:"wrap-container"},[r("div",{staticClass:"pic-wrapper"},[r("img",{ref:"pre-picture",attrs:{src:e.img_url,id:"pre-picture",alt:""}})])]),e._v(" "),r("div",{staticClass:"pc-wrap-inner-right",style:{width:e.width+20+"px"}},[r("div",{style:{height:e.width/e.aspectRatio+"px",width:e.width+"px"},attrs:{id:"preview-pane"}},[r("div",{staticClass:"preview-container",style:{height:e.width/e.aspectRatio+"px",width:e.width+"px"}},[r("img",{staticClass:"jcrop-preview",attrs:{src:e.img_url,alt:"Preview"}})])]),e._v(" "),e._m(0)])]),e._v(" "),r("div",{staticClass:"pc-handle-wrap"},[r("form",{attrs:{id:"picture-form",action:"",enctype:"multipart/form-data"}},[r("label",{staticClass:"btn-check-file",attrs:{for:"inputImage"}},[r("input",{staticClass:"btn-file",attrs:{name:"file",type:"file",id:"inputImage"},on:{change:e.changeImg}}),e._v(" "),r("span",[e._v("选取图片")])])]),e._v(" "),r("button",{staticClass:"el-button el-button--primary",on:{click:e.subForm}},[e._v(e._s(e.sync?"确定":"上传"))])])])]):e._e()},c=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"tip-msg"},[r("p",[r("span",{staticClass:"red"},[e._v("提示：")]),e._v("请勿使用360兼容模式以及ie10以下版本，可能导致无法使用剪裁上传功能\n          ")])])}],u=r("18Nq"),l=a,d=Object(u.a)(i,o,c,!1,l,null,null);t.default=d.exports},ZIML:function(e,t,r){"use strict";function a(e){r("G5zc")}Object.defineProperty(t,"__esModule",{value:!0});var n=r("rVsN"),s=r.n(n),i=r("PsVy"),o=r("sv36").Base64,c={components:{PicCropper:i.default},data:function(){return{dialogTableVisible:!1,userList:{},keywords:"",selectType:"pseudonym",centerDialogVisible:!1,fileList:[],file:[],uploadData:{},userParams:{page:this.$route.params.page,isAuthor:0,orderParemeter:"userId"}}},methods:{IPCity:function(e){for(var t=this,r=0,a=e.list.length;r<a;r++){var n;!function(t,r){n=new s.a(function(r,a){$.getScript("https://ip.ws.126.net/ipquery?ip="+e.list[t].userIpAddress,function(){e.list[t].city=localAddress.province+" "+localAddress.city,r()})})}(r)}n.then(function(){t.userList=e})},getUserList:function(){var e=this,t={page:this.$route.params.page,isAuthor:0};"userInfo"===this.$route.name&&(t={page:1},this.keywords=this.$route.params.uid,this.selectType="userId");var r=this.$http.trim(this.keywords);if(this.selectType&&r){if("userId"===this.selectType&&""===this.selectType&&Number(r))return this.$message({message:"ID必需为数字",type:"warning"}),!1;t[this.selectType]=r}"authorList"===this.$route.name&&(t.isAuthor=1),t.orderParemeter="userId",this.$store.dispatch("user/getUserList",{params:t,type:""}).then(function(t){200===t.returnCode?e.IPCity(t.data):800===t.returnCode&&(e.userList={})})},searchUser:function(){1!=this.$route.params.page?this.$router.push({params:{page:1}}):this.getUserList()},pageChange:function(e){this.$router.push({params:{page:e}})},handleClick:function(e,t){var r=this;if("f"!==e){var a="",n={userId:t.userId},s=function(e){r.$ajax("/admin/updateUserInfo",e,function(e){200===e.returnCode&&(r.$message({message:"更新成功",type:"success"}),r.getUserList())})};switch(e){case"a":a="辣椒";break;case"b":a="小米椒";break;case"c":a="金椒";break;case"d":a="阅读券";break;case"e":a="积分";break;case"f":a="等级"}"g"!==e?this.$prompt("请输入修改后"+a,"修改"+a,{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/[0-9]/,inputErrorMessage:"请输入数字"}).then(function(t){var r=t.value;if("g"!==e){switch(e){case"a":n.userMoney=r;break;case"b":n.userRecommendTicket=r;break;case"c":n.userGoldenTicket=r;break;case"d":n.userReadTicket=r;break;case"e":n.integration=r}s(n)}}):(n.userState=Number(!t.userState),s(n))}else this.$router.push("/user/detail/"+t.userId)},isShow:function(e){this.centerDialogVisible=!e},dialogShow:function(e){this.dialogTableVisible=!0,this.$set(this.uploadData,"userId",e.userId),this.$set(this.uploadData,"userAvatar",e.userHeadPortraitURL)},submitUpload:function(){this.$refs.upload.uploadFiles=this.$refs.upload.uploadFiles.slice(-1),this.$myLoad("正在上传中..."),this.$refs.upload.submit()},successBack:function(e){200===e.returnCode&&this.getUserList()},fileError:function(e){this.$loading().close(),this.centerDialogVisible=!1,this.$message({message:e,type:"error"})},handlePictureCard:function(e,t){this.uploadData.userAvatar=e.url},closeIt:function(){this.dialogTableVisible=!1},handleCommand:function(e,t){switch(e){case"a":this.$router.push({path:"/statistics/charge/"+t.userId+"/1"});break;case"b":this.$router.push({path:"/statistics/reward/"+t.userId+"/1"});break;case"c":this.$router.push({path:"/statistics/subscribe/"+t.userId+"/1"});break;case"d":this.$router.push({path:"/statistics/recommend/"+t.userId+"/1"});break;case"e":this.$router.push({path:"/statistics/pepper/"+t.userId+"/1"});break;case"f":this.$router.push({path:"/author/monthly/"+t.userId});break;case"g":this.openLoginBox(t)}},openLoginBox:function(e){var t=this;this.$confirm("确定登录？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$message({type:"success",message:"登陆成功！"}),setTimeout(function(){var t=o.encode(e.userPassword+"_LGADMIN");window.location.href="https://www.lajixs.com/transfer?userName="+e.userName+"&password="+t},500)}).catch(function(){t.$message({type:"info",message:"已取消操作！"})})}},created:function(){this.getUserList()},watch:{$route:function(){this.getUserList()}}},u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"admin-user-wrap"},[r("el-alert",{attrs:{title:" ",type:"info","show-icon":""}},[r("div",[r("p",[r("span",[e._v("说明：")]),e._v(" 此表展示的是本站全部"+e._s("authorList"===e.$route.name?"作者":"普通用户"))])])]),e._v(" "),r("el-row",{staticClass:"mbt20"},[r("el-col",{attrs:{xs:20,sm:16,md:12,lg:9,xl:6}},[r("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchUser(t):null}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}},[r("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.selectType,callback:function(t){e.selectType=t},expression:"selectType"}},[r("el-option",{attrs:{label:"笔  名",value:"pseudonym"}}),e._v(" "),r("el-option",{attrs:{label:"用户名",value:"userName"}}),e._v(" "),r("el-option",{attrs:{label:"真  名",value:"realName"}}),e._v(" "),r("el-option",{attrs:{label:"用户ID",value:"userId"}}),e._v(" "),r("el-option",{attrs:{label:"手机号",value:"userPhone"}})],1),e._v(" "),r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchUser},slot:"append"})],1)],1)],1),e._v(" "),r("el-row",{staticClass:"mbt20"},[r("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.userList.list,border:"",select:"row","tooltip-effect":"dark"}},[r("el-table-column",{attrs:{type:"selection",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"userId",label:"ID",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"userName",label:"用户名",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"pseudonym",label:"笔名"}}),e._v(" "),r("el-table-column",{attrs:{label:"性别"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(0===t.row.userSex?"男":"女"))])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"userMoney",label:"辣椒"}}),e._v(" "),r("el-table-column",{attrs:{prop:"userRecommendTicket",label:"小米椒"}}),e._v(" "),r("el-table-column",{attrs:{prop:"userGoldenTicket",label:"金椒"}}),e._v(" "),r("el-table-column",{attrs:{prop:"userReadTicket",label:"阅读券"}}),e._v(" "),r("el-table-column",{attrs:{prop:"integration",label:"积分"}}),e._v(" "),r("el-table-column",{attrs:{prop:"lastLogTime",label:"最近登录"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("time")(t.row.lastLogTime,"long")))])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"userIpAddress",label:"最新登录IP"}}),e._v(" "),r("el-table-column",{attrs:{prop:"city",label:"登录地址"}}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.userState?r("span",{staticClass:"red"},[e._v("锁定")]):r("span",{staticClass:"green"},[e._v("正常")])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"userQQ",label:"QQ号码"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s("0"===t.row.userQQ?"无":t.row.userQQ))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"头像"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"cover-wrap",on:{click:function(r){e.dialogShow(t.row)}}},[r("a",{attrs:{href:"javascipt:;"}},[r("img",{staticClass:"avatar",attrs:{src:t.row.userHeadPortraitURL,alt:""}})])])]}}])}),e._v(" "),e.$store.state.userInfo&&e.$store.state.userInfo.adminRolemenuanduserrole.updates?r("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("router-link",{staticClass:"btn",attrs:{to:"/user/detail/"+t.row.userId}},[e._v("编辑")]),e._v(" "),r("el-dropdown",{attrs:{size:"medium",trigger:"click"},on:{command:function(r){e.handleCommand(r,t.row)}}},[r("a",{staticClass:"btn",attrs:{href:"javascript:0;"}},[e._v("更多")]),e._v(" "),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",{attrs:{command:"a"}},[e._v("充值记录")]),e._v(" "),r("el-dropdown-item",{attrs:{command:"b"}},[e._v("打赏记录")]),e._v(" "),r("el-dropdown-item",{attrs:{command:"c"}},[e._v("订阅记录")]),e._v(" "),r("el-dropdown-item",{attrs:{command:"d"}},[e._v("小米椒记录")]),e._v(" "),"authorList"===e.$route.name?[r("el-dropdown-item",{attrs:{command:"e"}},[e._v("金椒记录")]),e._v(" "),r("el-dropdown-item",{attrs:{command:"f"}},[e._v("月报")])]:e._e(),e._v(" "),r("el-dropdown-item",{attrs:{command:"g"}},[e._v("一键登录")])],2)],1)]}}])}):e._e()],1),e._v(" "),r("el-pagination",{staticClass:"mbt20",attrs:{pageSize:e.userList.pageSize,layout:"prev, pager, next, jumper",total:e.userList.total},on:{"current-change":e.pageChange}})],1),e._v(" "),r("PicCropper",{ref:"avatarUpdate",attrs:{action:"https://www.lajixs.com/api/admin/updateUserAvatarimgUpload",visible:e.dialogTableVisible,maxWidth:400,data:{puserid:e.uploadData.userId},url:"/static/img/defaultavatarimg.jpg",aspectRatio:1},on:{"update:visible":function(t){e.dialogTableVisible=t},close:e.closeIt,success:e.successBack}})],1)},l=[],d=r("18Nq"),p=a,h=Object(d.a)(c,u,l,!1,p,null,null);t.default=h.exports},rxrk:function(e,t){},sv36:function(e,t,r){(function(a){var n,s;!function(t,r){e.exports=r(t)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==a?a:this,function(a){"use strict";var i,o=a.Base64;if(void 0!==e&&e.exports)try{i=r("7xR8").Buffer}catch(e){}var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=function(e){for(var t={},r=0,a=e.length;r<a;r++)t[e.charAt(r)]=r;return t}(c),l=String.fromCharCode,d=function(e){if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?l(192|t>>>6)+l(128|63&t):l(224|t>>>12&15)+l(128|t>>>6&63)+l(128|63&t)}var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return l(240|t>>>18&7)+l(128|t>>>12&63)+l(128|t>>>6&63)+l(128|63&t)},p=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,h=function(e){return e.replace(p,d)},f=function(e){var t=[0,2,1][e.length%3],r=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[c.charAt(r>>>18),c.charAt(r>>>12&63),t>=2?"=":c.charAt(r>>>6&63),t>=1?"=":c.charAt(63&r)].join("")},g=a.btoa?function(e){return a.btoa(e)}:function(e){return e.replace(/[\s\S]{1,3}/g,f)},m=i?i.from&&Uint8Array&&i.from!==Uint8Array.from?function(e){return(e.constructor===i.constructor?e:i.from(e)).toString("base64")}:function(e){return(e.constructor===i.constructor?e:new i(e)).toString("base64")}:function(e){return g(h(e))},v=function(e,t){return t?m(String(e)).replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}).replace(/=/g,""):m(String(e))},b=function(e){return v(e,!0)},w=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),y=function(e){switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),r=t-65536;return l(55296+(r>>>10))+l(56320+(1023&r));case 3:return l((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return l((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},x=function(e){return e.replace(w,y)},C=function(e){var t=e.length,r=t%4,a=(t>0?u[e.charAt(0)]<<18:0)|(t>1?u[e.charAt(1)]<<12:0)|(t>2?u[e.charAt(2)]<<6:0)|(t>3?u[e.charAt(3)]:0),n=[l(a>>>16),l(a>>>8&255),l(255&a)];return n.length-=[0,0,2,1][r],n.join("")},_=a.atob?function(e){return a.atob(e)}:function(e){return e.replace(/[\s\S]{1,4}/g,C)},S=i?i.from&&Uint8Array&&i.from!==Uint8Array.from?function(e){return(e.constructor===i.constructor?e:i.from(e,"base64")).toString()}:function(e){return(e.constructor===i.constructor?e:new i(e,"base64")).toString()}:function(e){return x(_(e))},k=function(e){return S(String(e).replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},$=function(){var e=a.Base64;return a.Base64=o,e};if(a.Base64={VERSION:"2.4.5",atob:_,btoa:g,fromBase64:k,toBase64:v,utob:h,encode:v,encodeURI:b,btou:x,decode:k,noConflict:$},"function"==typeof Object.defineProperty){var I=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};a.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",I(function(){return k(this)})),Object.defineProperty(String.prototype,"toBase64",I(function(e){return v(this,e)})),Object.defineProperty(String.prototype,"toBase64URI",I(function(){return v(this,!0)}))}}return a.Meteor&&(Base64=a.Base64),void 0!==e&&e.exports?e.exports.Base64=a.Base64:(n=[],void 0!==(s=function(){return a.Base64}.apply(t,n))&&(e.exports=s)),{Base64:a.Base64}})}).call(t,r("9AUj"))}});
//# sourceMappingURL=1.52b829c5206c693f39fb.js.map