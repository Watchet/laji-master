webpackJsonp([26],{OnDw:function(t,e){},gp6M:function(t,e,o){"use strict";function a(t){o("OnDw")}Object.defineProperty(e,"__esModule",{value:!0});var l={data:function(){return{searchArr:"",timeout:null,bookList:[],exportIds:[]}},methods:{querySearchAsync:function(t,e){var o=this;this.$store.dispatch("system/stacksSearch",{keyWord:t,isHotWorld:0,startPage:1}).then(function(a){if(200===a.returnCode){for(var l=a.data.list,s=[],n=0,r=l.length;n<r;n++)o.$set(s,s.length,{value:l[n].bookName,id:l[n].bookId,writerName:l[n].writerName,bookWorldCount:l[n].bookWorldCount,lastUpdateTime:l[n].lastUpdateTime,bookImage:l[n].bookImage});var i=t?s.filter(o.createStateFilter(t)):s;clearTimeout(o.timeout),o.timeout=setTimeout(function(){e(i)},3e3*Math.random())}})},createStateFilter:function(t){return function(e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase())}},handleSelect:function(t){this.bookList.length<=10?(this.bookList.push(t),this.exportIds.push(t.id)):this.$message({message:"最多一次性导出十本书籍！",type:"warning"})},handleClick:function(t){0!==t.length?this.$store.dispatch("chapterContentImport",{bookIds:t}).then(function(e){if(500===e.returnCode){var o=document.createElement("a");o.href="https://www.lajixs.com/api/ChapterZipDownload?bookId="+t,o.click()}}):this.$message({message:"至少需要一本书籍！",type:"warning"})},deleteRow:function(t){this.bookList.splice(t,1),this.exportIds.splice(t,1)}}},s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-alert",{attrs:{title:"操作说明",type:"info","show-icon":""}},[o("div",[o("p",[t._v("此功能可实现一键 导出/下载 书籍相关信息")]),t._v(" "),o("p",{staticClass:"tip"},[o("span",{staticClass:"red"},[t._v("操作提示：")]),t._v("搜索书籍，单独导出或一键导出\n            ")])])]),t._v(" "),o("div",{staticClass:"tool-area"},[o("el-autocomplete",{staticClass:"search-btn",attrs:{"fetch-suggestions":t.querySearchAsync,placeholder:"请输入内容"},on:{select:t.handleSelect},model:{value:t.searchArr,callback:function(e){t.searchArr=e},expression:"searchArr"}}),t._v(" "),o("el-button",{staticClass:"export-btn",attrs:{type:"primary",icon:"el-icon-download"},on:{click:function(e){t.handleClick(t.exportIds)}}},[t._v("一键导出")])],1),t._v(" "),o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.bookList,border:""}},[o("el-table-column",{attrs:{prop:"id",label:"书ID"}}),t._v(" "),o("el-table-column",{attrs:{label:"封面"},scopedSlots:t._u([{key:"default",fn:function(t){return[o("img",{attrs:{src:t.row.bookImage}})]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"value",label:"书名"}}),t._v(" "),o("el-table-column",{attrs:{prop:"writerName",label:"作者"}}),t._v(" "),o("el-table-column",{attrs:{prop:"bookWorldCount",label:"字数"}}),t._v(" "),o("el-table-column",{attrs:{label:"更新时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(t._f("time")(e.row.lastUpdateTime,"long")))])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){t.handleClick(e.row.id)}}},[t._v("导出")]),t._v(" "),o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){t.deleteRow(e.$index)}}},[t._v("删除")])]}}])})],1)],1)},n=[],r=o("18Nq"),i=a,c=Object(r.a)(l,s,n,!1,i,null,null);e.default=c.exports}});
//# sourceMappingURL=26.00de878cdf2ba13e301a.js.map