webpackJsonp([19],{GvZY:function(a,t,e){"use strict";function s(a){e("dme2")}Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{dialogFormVisible:!1,caralParams:{newMediaName:"",newMediaId:"",bookName:"",bookId:"",chapterName:"",chapterId:"",url:""}}},mounted:function(){this.$store.dispatch("user/bookShowBookInfo",{bookid:this.$route.params.bookId}),this.$store.dispatch("user/chapterList",this.$route.params.bookId)},methods:{openDialog:function(a){this.dialogFormVisible=!0,this.caralParams.chapterId=a.id,this.caralParams.chapterName=a.chapterTitle},changeCaral:function(){for(var a=0;a<this.$store.state.census.spreadNameList.length;a++)this.$store.state.census.spreadNameList[a].id==this.caralParams.newMediaId&&(this.caralParams.newMediaName=this.$store.state.census.spreadNameList[a].name)},createLink:function(){this.caralObj==={}?this.$message({message:"请选择推广渠道！",type:"warning",showClose:!0}):(this.caralParams.bookName=this.bookInfoDetail.bookName,this.caralParams.bookId=this.bookInfoDetail.bookId,this.caralParams.url="https://www.lajixs.com/referrals/index?chapterId="+this.caralParams.chapterId+"&bookId="+this.caralParams.bookId+"&channelId="+this.caralParams.newMediaId+"&bookName="+this.caralParams.bookName,this.$store.dispatch("census/addExtensionLink",this.caralParams),this.dialogFormVisible=!1)}},computed:{bookInfoDetail:function(){return this.$store.state.user.bookInfoDetail},chapterList:function(){return this.$store.state.user.chapterList}}},o=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"charpter-list"},[e("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[e("el-breadcrumb-item",{attrs:{to:{path:"/bookdistribution"}}},[a._v("小说分销平台")]),a._v(" "),e("el-breadcrumb-item",{attrs:{to:{path:"/bookdistribution/booklist/1"}}},[a._v("小说列表")]),a._v(" "),e("el-breadcrumb-item",[a._v(a._s(a.bookInfoDetail.bookName))])],1),a._v(" "),e("el-row",{staticClass:"contant",staticStyle:{"margin-left":"0","margin-right":"0"},attrs:{gutter:24}},[e("el-col",{attrs:{xs:24,sm:24,md:24,lg:6,xl:6}},[e("div",{staticClass:"book-info"},[e("img",{attrs:{src:a.bookInfoDetail.bookImage,alt:""}}),a._v(" "),e("p",{staticClass:"name"},[a._v(a._s(a.bookInfoDetail.bookName))]),a._v(" "),e("p",{staticClass:"counts"},[a._v(a._s("字数："+a.bookInfoDetail.bookWorldCount))]),a._v(" "),e("p",{staticClass:"desc"},[a._v(a._s(a.bookInfoDetail.bookIntroduction))])])]),a._v(" "),e("el-col",{attrs:{xs:24,sm:24,md:24,lg:18,xl:18}},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:this.$store.state.user.loading,expression:"this.$store.state.user.loading"}],staticClass:"charpter-table",attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading"}},a._l(a.chapterList,function(t,s){return e("p",{key:s},[e("span",[a._v(a._s(s+1))]),a._v(" "),e("span",[a._v(a._s(t.chapterTitle))]),a._v(" "),e("span",[a._v(a._s(0===t.chapterIsvip?"普通":"VIP"))]),a._v(" "),e("span",[a._v(a._s(a._f("time")(t.releaseTime,"long")))]),a._v(" "),e("span",{on:{click:function(e){a.openDialog(t)}}},[e("i",{staticClass:"fa fa-link"}),a._v(" 生成推广链接")])])}))])],1),a._v(" "),e("el-dialog",{staticClass:"dialog",attrs:{title:"生成推广链接",visible:a.dialogFormVisible,width:"600px"},on:{"update:visible":function(t){a.dialogFormVisible=t},close:function(t){a.caralParams.newMediaId=""}}},[e("div",{staticClass:"dialog-item"},[e("p",[a._v("渠道名称")]),a._v(" "),e("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){a.changeCaral()}},model:{value:a.caralParams.newMediaId,callback:function(t){a.$set(a.caralParams,"newMediaId",t)},expression:"caralParams.newMediaId"}},a._l(this.$store.state.census.spreadNameList,function(a,t){return e("el-option",{key:t,attrs:{label:a.name,value:a.id}})}))],1),a._v(" "),e("div",{staticClass:"dialog-tool",staticStyle:{"text-align":"right"}},[e("el-button",{attrs:{type:"primary"},on:{click:function(t){a.createLink()}}},[a._v("生成链接")])],1)])],1)},r=[],l=e("18Nq"),n=s,c=Object(l.a)(i,o,r,!1,n,null,null);t.default=c.exports},dme2:function(a,t){}});
//# sourceMappingURL=19.69a52dca69a27578cd5c.js.map