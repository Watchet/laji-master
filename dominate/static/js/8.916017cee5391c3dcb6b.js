webpackJsonp([8],{"/Ue+":function(e,t,a){"use strict";function s(e){a("9+BI")}Object.defineProperty(t,"__esModule",{value:!0});var o={data:function(){return{searchForm:{},defaultValue:null,pickerOptions:{shortcuts:[{text:"本月",onClick:function(e){var t=new Date,a=new Date;a.setDate(1),e.$emit("pick",[a,t])}}],disabledDate:function(e){return e.getTime()>Date.now()}},recommendCommentList:{},keywords:"",selectType:"bookName",multipleSelection:[],userInfo:{},date:""}},methods:{getRecommendStatisticList:function(){var e=this;if(this.searchForm={},this.searchForm.page=this.$route.params.page,this.$route.params.uid&&(this.searchForm.userId=this.$route.params.uid),this.selectType&&this.keywords){if(("bookId"===this.selectType||"userId"===this.selectType)&&!Number(this.keywords))return this.$message({message:"ID必需为数字",type:"warning"}),!1;this.searchForm[this.selectType]=this.keywords}this.date&&(this.searchForm.startdate=this.date[0]+" 00:00:00",this.searchForm.enddate=this.date[1]+" 23:59:59"),this.$ajax("/admin/getAdminRecommendationticketList",this.searchForm,function(t){200===t.returnCode?e.recommendCommentList=t.data:t.data||(e.recommendCommentList={})})},searchReplyCom:function(){1===Number(this.$route.params.page)?this.getRecommendStatisticList():this.$router.push({params:{page:1}})},handleCurrentChange:function(e){this.$router.push({params:{page:e}})},getUserInfo:function(){var e=this;this.$route.params.uid&&this.$ajax("/person-SimplifyUserInfo",{puserid:this.$route.params.uid},function(t){200===t.returnCode&&(e.userInfo=t.data)})}},created:function(){"staUserRecommend"===this.$route.name&&(this.date=[this.$formTime(new Date((new Date).setDate(1)),"sort"),this.$formTime(new Date,"sort")]),this.getRecommendStatisticList(),this.getUserInfo()},watch:{$route:function(){this.getRecommendStatisticList()},date:function(e,t){""!==t&&this.getRecommendStatisticList()}}},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"reply-comment-wrap"},[a("el-alert",{attrs:{title:"操作说明",type:"info","show-icon":""}},[a("div",[a("p",[e._v("\n        此表为\n        "),a("span",{staticClass:"red"},[e._v(e._s("staUserReward"==e.$route.name?e.userInfo.pseudonym:"全站"))]),e._v("\n        的小米椒统计，您可以通过相应类型进行精确搜索\n      ")])])]),e._v(" "),a("el-row",{staticClass:"mbt20"},[a("el-col",[a("el-date-picker",{attrs:{type:"daterange","picker-options":e.pickerOptions,"value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)],1),e._v(" "),a("el-row",{staticClass:"mbt20"},[a("el-col",{attrs:{xs:20,sm:16,md:12,lg:9,xl:6}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchReplyCom(t):null}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}},["staUserRecommend"==e.$route.name?a("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.selectType,callback:function(t){e.selectType=t},expression:"selectType"}},[a("el-option",{attrs:{label:"书  名",value:"bookName"}}),e._v(" "),a("el-option",{attrs:{label:"书籍ID",value:"bookid"}})],1):a("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.selectType,callback:function(t){e.selectType=t},expression:"selectType"}},[a("el-option",{attrs:{label:"书  名",value:"bookName"}}),e._v(" "),a("el-option",{attrs:{label:"用户名",value:"userName"}}),e._v(" "),a("el-option",{attrs:{label:"用户ID",value:"userId"}}),e._v(" "),a("el-option",{attrs:{label:"书籍ID",value:"bookid"}})],1),e._v(" "),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchReplyCom},slot:"append"})],1)],1)],1),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.recommendCommentList.list,border:""}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bookid",width:"70",align:"center",label:"书籍ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bookName",label:"书名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userId",label:"用户ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"recommendTicketCount",width:"70",align:"center",label:"小米椒"}}),e._v(" "),a("el-table-column",{attrs:{label:"时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("time")(t.row.giveDateTime,"long")))])]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"mbt20",attrs:{background:"","current-page":e.recommendCommentList.pageNum,"page-size":e.recommendCommentList.pageSize,layout:"total, prev, pager, next, jumper",total:e.recommendCommentList.total},on:{"current-change":e.handleCurrentChange}})],1)},n=[],l=a("18Nq"),i=s,c=Object(l.a)(o,r,n,!1,i,null,null);t.default=c.exports},"9+BI":function(e,t){}});
//# sourceMappingURL=8.916017cee5391c3dcb6b.js.map