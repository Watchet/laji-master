webpackJsonp([64],{SGrf:function(t,e){},tIlR:function(t,e,a){"use strict";function s(t){a("SGrf")}Object.defineProperty(e,"__esModule",{value:!0});var i=a("lC5x"),n=a.n(i),o=a("J0Oq"),d=a.n(o),r=a("5YEj"),h=a.n(r),l=a("0EVO"),p={components:{canalID:l.a},data:function(){return{showUp:!1,beginMonUp:"",endMonUp:"",dayValueUp:[],showStrUp:"按日查询",isClickUp:!1,isShowDayUp:!1,isShowMonthUp:!1,showDown:!1,dayValueDown:[],showStrDown:"按日查询",isClickDown:!1,isShowDayDown:!1,typeName:"用户名",showType:!1,userInput:"",active:0,defaultDate:{channelId:"",dateTime:this.dateTiming((new Date).getTime()-5184e5,"start"),endTime:this.dateTiming((new Date).getTime(),"end"),group:"A"},option:{title:{text:"充值数量"},tooltip:{trigger:"axis"},grid:{left:"3%",top:"12%"},legend:{data:["ALL","Android","IOS","PC","手机站"]},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar","stack","tiled"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!0,xAxis:[{type:"category",boundaryGap:!1,data:[]}],yAxis:[{type:"value"}],series:[{name:"ALL",type:"line",data:[]},{name:"Android",type:"line",data:[]},{name:"IOS",type:"line",data:[]},{name:"PC",type:"line",data:[]},{name:"手机站",type:"line",data:[]}]},moneyOption:{title:{text:"充值金额"},tooltip:{trigger:"axis"},grid:{left:"3%",top:"12%"},legend:{data:["ALL","Android","IOS","PC","手机站"]},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar","stack","tiled"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!0,xAxis:[{type:"category",boundaryGap:!1,data:[]}],yAxis:[{type:"value"}],series:[{name:"ALL",type:"line",data:[]},{name:"Android",type:"line",data:[]},{name:"IOS",type:"line",data:[]},{name:"PC",type:"line",data:[]},{name:"手机站",type:"line",data:[]}]},tableList:[],tableDate:{isOK:1,channelId:"LG20180608001",page:1,type:1,startdate:this.dateTiming((new Date).getTime(),"start"),enddate:this.dateTiming((new Date).getTime(),"end")}}},mounted:function(){"北京九山海"===JSON.parse(sessionStorage.getItem("user_info")).adminInfo.userName?(this.defaultDate.channelId=this.$store.state.census.spreadNameList[1].id,this.tableDate.channelId=this.$store.state.census.spreadNameList[1].id):"哔哩哔哩"===JSON.parse(sessionStorage.getItem("user_info")).adminInfo.userName?(this.defaultDate.channelId=this.$store.state.census.spreadNameList[3].id,this.tableDate.channelId=this.$store.state.census.spreadNameList[3].id):(this.defaultDate.channelId=this.$store.state.census.spreadNameList[0].id,this.tableDate.channelId=this.$store.state.census.spreadNameList[0].id);for(var t=(new Date).getTime(),e=0;e<7;e++)this.option.xAxis[0].data.unshift(this.FunWeekTime(t-1e3*e*60*60*24)),this.moneyOption.xAxis[0].data.unshift(this.FunWeekTime(t-1e3*e*60*60*24));this.bookChart(),this.bookTable()},methods:{bookChart:function(){var t=this;return d()(n.a.mark(function e(){var a,s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.option.series[0].data=[],t.option.series[1].data=[],t.option.series[2].data=[],t.option.series[3].data=[],t.option.series[4].data=[],t.moneyOption.series[0].data=[],t.moneyOption.series[1].data=[],t.moneyOption.series[2].data=[],t.moneyOption.series[3].data=[],t.moneyOption.series[4].data=[],a=h.a.init(document.getElementById("trendGrowth")),s=h.a.init(document.getElementById("money")),a.showLoading(),s.showLoading(),e.next=16,t.$store.dispatch("census/getUserExtensionstatistics",t.defaultDate).then(function(e){if(200===e.returnCode){for(var i=t.option.xAxis[0].data,n=t.option.series,o=t.moneyOption.series,d=0;d<i.length;d++)if("全部"===t.showStrUp||"按日查询"===t.showStrUp){var r=t.groupA(e.data.androIdRechargerecordList).indexOf(i[d]);r>=0?(n[1].data.push(e.data.androIdRechargerecordList[r].counts),o[1].data.push(e.data.androIdRechargerecordList[r].money)):(n[1].data.push(0),o[1].data.push(0));var h=t.groupA(e.data.iosRechargerecordList).indexOf(i[d]);h>=0?(n[2].data.push(e.data.iosRechargerecordList[h].counts),o[2].data.push(e.data.iosRechargerecordList[h].money)):(n[2].data.push(0),o[2].data.push(0));var l=t.groupA(e.data.pcRechargerecordList).indexOf(i[d]);l>=0?(n[3].data.push(e.data.pcRechargerecordList[l].counts),o[3].data.push(e.data.pcRechargerecordList[l].money)):(n[3].data.push(0),o[3].data.push(0));var p=t.groupA(e.data.wapRechargerecordList).indexOf(i[d]);p>=0?(n[4].data.push(e.data.wapRechargerecordList[p].counts),o[4].data.push(e.data.wapRechargerecordList[p].money)):(n[4].data.push(0),o[4].data.push(0)),n[0].data[d]=n[1].data[d]+n[2].data[d]+n[3].data[d]+n[4].data[d],o[0].data[d]=o[1].data[d]+o[2].data[d]+o[3].data[d]+o[4].data[d]}else if("按月查询"===t.showStrUp){var r=t.groupB(e.data.androIdRechargerecordList).indexOf(i[d]);r>=0?(n[1].data.push(e.data.androIdRechargerecordList[r].counts),o[1].data.push(e.data.androIdRechargerecordList[r].money)):(n[1].data.push(0),o[1].data.push(0));var h=t.groupB(e.data.iosRechargerecordList).indexOf(i[d]);h>=0?(n[2].data.push(e.data.iosRechargerecordList[h].counts),o[2].data.push(e.data.iosRechargerecordList[h].money)):(n[2].data.push(0),o[2].data.push(0));var l=t.groupB(e.data.pcRechargerecordList).indexOf(i[d]);l>=0?(n[3].data.push(e.data.pcRechargerecordList[l].counts),o[3].data.push(e.data.pcRechargerecordList[l].money)):(n[3].data.push(0),o[3].data.push(0));var p=t.groupB(e.data.wapRechargerecordList).indexOf(i[d]);p>=0?(n[4].data.push(e.data.wapRechargerecordList[p].counts),o[4].data.push(e.data.wapRechargerecordList[p].money)):(n[4].data.push(0),o[4].data.push(0)),n[0].data[d]=n[1].data[d]+n[2].data[d]+n[3].data[d]+n[4].data[d],o[0].data[d]=o[1].data[d]+o[2].data[d]+o[3].data[d]+o[4].data[d]}a.setOption(t.option,!0),s.setOption(t.moneyOption,!0),a.hideLoading(),s.hideLoading()}else t.$message({message:"暂无数据！",type:"warning"}),a.setOption({},!0),s.setOption({},!0),a.hideLoading(),s.hideLoading()});case 16:case"end":return e.stop()}},e,t)}))()},groupA:function(t){for(var e=[],a=0;a<t.length;a++)e.push(this.FunWeekTime(t[a].dateTimes));return e},groupB:function(t){for(var e=[],a=0;a<t.length;a++)e.push(this.RecectMonth(t[a].dateTimes));return e},canalParam:function(t){this.defaultDate.channelId=t,this.tableDate.channelId=t,this.bookChart(),this.bookTable()},handleCommandUp:function(t){this.option.xAxis[0].data=[],this.moneyOption.xAxis[0].data=[],"按日查询"===t?(this.showStrUp=t,this.showUp=!0,this.isShowDayUp=!0,this.isShowMonthUp=!1):"按月查询"===t&&(this.showStrUp=t,this.showUp=!0,this.isShowDayUp=!1,this.isShowMonthUp=!0)},handChangeDateUp:function(){if("按日查询"===this.showStrUp)if(this.dayValueUp[1]-this.dayValueUp[0]<=2592e6){this.defaultDate.group="A",this.defaultDate.startdate=this.dateTiming(this.dayValueUp[0].getTime(),"start"),this.defaultDate.enddate=this.dateTiming(this.dayValueUp[1].getTime(),"end"),this.isShowDayUp=!1,this.isShowMonthUp=!1,this.showUp=!1;for(var t=(this.dayValueUp[1]-this.dayValueUp[0])/864e5,e=0;e<=t;e++)this.option.xAxis[0].data.unshift(this.FunWeekTime(this.dayValueUp[1]-1e3*e*60*60*24)),this.moneyOption.xAxis[0].data.unshift(this.FunWeekTime(this.dayValueUp[1]-1e3*e*60*60*24));this.bookChart()}else this.$message({message:"时间间隔不能超过一个月！",type:"warning"});else if("按月查询"===this.showStrUp)if(""===this.endMonUp||""===this.beginMonUp)this.$message({message:"月份不能为空错误！",type:"warning"});else if(this.endMonUp-this.beginMonUp<0)this.$message({message:"月份选取错误！",type:"warning"});else{this.defaultDate.group="B",this.defaultDate.startdate=this.dateTiming(this.beginMonUp.getTime(),"start"),this.defaultDate.enddate=this.dateTiming(this.endMonUp.getTime()-864e5,"end"),this.isShowDayUp=!1,this.isShowMonthUp=!1,this.showUp=!1;for(var t=(this.endMonUp-this.beginMonUp)/2592e6,a=0;a<=t;a++)this.option.xAxis[0].data.unshift(this.RecectMonth(this.endMonUp-1e3*a*60*60*24*30)),this.moneyOption.xAxis[0].data.unshift(this.RecectMonth(this.endMonUp-1e3*a*60*60*24*30));this.bookChart()}},handleCommandDown:function(t){this.showStrDown=t,this.showDown=!0,this.isShowDayDown=!0},bookTable:function(){var t=this;this.tableList=[];var e=this.tableDate;this.$store.dispatch("census/RechargeRecordStatistics",e).then(function(e){200===e.returnCode&&(t.tableList=e.data.list)})},handChangeDateDown:function(){this.tableDate.startdate=this.dateTiming(this.dayValueDown[0].getTime(),"start"),this.tableDate.enddate=this.dateTiming(this.dayValueDown[1].getTime(),"end"),this.isShowDayDown=!1,this.showDown=!1,this.bookTable()},search:function(){""!=this.userInput?(this.tableDate.userName=this.userInput,this.bookTable()):(delete this.tableDate.userName,this.bookTable())}}},c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"recharge"},["张三"===this.$store.state.userInfo.adminInfo.userName?[a("canalID",{on:{canalParam:t.canalParam}})]:t._e(),t._v(" "),a("div",{staticClass:"echart"},[a("span",[t._v("总统计量")]),t._v(" "),a("div",{staticClass:"drop-down-echart"},[a("el-button",{staticClass:"title",on:{click:function(e){t.showUp=!t.showUp}}},[t._v(t._s(t.showStrUp)+" "),a("i",{staticClass:"fa fa-sort-down"})]),t._v(" "),a("div",{staticClass:"drop-down-box"},[a("el-collapse-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showUp,expression:"showUp"}]},[a("div",{staticClass:"transition-box",on:{click:function(e){t.handleCommandUp("按日查询")}}},[t._v("\r\n                            按日查询\r\n                            "),a("div",{staticClass:"change-date"},[t.isShowDayUp?a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.dayValueUp,callback:function(e){t.dayValueUp=e},expression:"dayValueUp"}}):t._e()],1)]),t._v(" "),a("div",{staticClass:"transition-box",on:{click:function(e){t.handleCommandUp("按月查询")}}},[t._v("\r\n                            按月查询\r\n                            "),a("div",{staticClass:"change-date"},[t.isShowMonthUp?a("el-date-picker",{attrs:{type:"month",placeholder:"起始月份"},model:{value:t.beginMonUp,callback:function(e){t.beginMonUp=e},expression:"beginMonUp"}}):t._e(),t._v(" "),t.isShowMonthUp?a("el-date-picker",{attrs:{type:"month",placeholder:"结束月份"},model:{value:t.endMonUp,callback:function(e){t.endMonUp=e},expression:"endMonUp"}}):t._e()],1)]),t._v(" "),a("div",{staticClass:"transition-box tool"},[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){t.handChangeDateUp()}}},[t._v("确定")]),t._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.showUp=!1,t.isShowMonthUp=!1,t.isShowDayUp=!1}}},[t._v("取消")])],1)])])],1)],1)]),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"table"},[a("div",{staticClass:"drop-down-type"},[a("el-button",{staticClass:"title",on:{click:function(e){t.showType=!t.showType}}},[t._v(t._s(t.typeName)+" "),a("i",{staticClass:"fa fa-sort-down"})]),t._v(" "),a("div",{staticClass:"drop-down-box"},[a("el-collapse-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showType,expression:"showType"}]},[a("div",{staticClass:"transition-box",on:{click:function(e){t.typeName="用户名",t.showType=!1}}},[t._v("用户名")])])])],1)],1),t._v(" "),a("el-input",{staticClass:"user-input",attrs:{placeholder:"请输入内容"},model:{value:t.userInput,callback:function(e){t.userInput=e},expression:"userInput"}}),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(e){t.search()}}},[t._v("搜索")]),t._v(" "),a("div",{staticClass:"drop-down-table"},[a("el-button",{staticClass:"title",on:{click:function(e){t.showDown=!t.showDown}}},[t._v("按日查询 "),a("i",{staticClass:"fa fa-sort-down"})]),t._v(" "),a("div",{staticClass:"drop-down-box"},[a("el-collapse-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showDown,expression:"showDown"}]},[a("div",{staticClass:"transition-box",on:{click:function(e){t.handleCommandDown()}}},[t._v("\r\n                            按日查询\r\n                            "),a("div",{staticClass:"change-date"},[t.isShowDayDown?a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.dayValueDown,callback:function(e){t.dayValueDown=e},expression:"dayValueDown"}}):t._e()],1)]),t._v(" "),a("div",{staticClass:"transition-box tool"},[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){t.handChangeDateDown()}}},[t._v("确定")]),t._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.showDown=!1,t.isShowMonthDown=!1,t.isShowDayDown=!1}}},[t._v("取消")])],1)])])],1)],1)],1),t._v(" "),a("div",{staticClass:"table-box"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableList,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"id",label:"用户ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"用户名"}}),t._v(" "),a("el-table-column",{attrs:{label:"类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[110===e.row.rechargeType?a("span",[t._v("支付宝")]):t._e(),t._v(" "),111===e.row.rechargeType?a("span",[t._v("微信")]):t._e(),t._v(" "),112===e.row.rechargeType?a("span",[t._v("IOS")]):t._e(),t._v(" "),113===e.row.rechargeType?a("span",[t._v("第三方")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"money",label:"金额"}}),t._v(" "),a("el-table-column",{attrs:{prop:"orderNo",label:"订单号"}}),t._v(" "),a("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\r\n                    "+t._s(0===e.row.isOK?"失败":"成功")+"\r\n                ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"client",label:"终端"}}),t._v(" "),a("el-table-column",{attrs:{label:"时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\r\n                    "+t._s(t._f("time")(e.row.dateTimes,"long"))+"\r\n                ")]}}])})],1)],1)],2)},u=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"trendGrowth"},[a("div",{attrs:{id:"trendGrowth"}}),t._v(" "),a("div",{attrs:{id:"money"}})])}],m=a("18Nq"),w=s,g=Object(m.a)(p,c,u,!1,w,"data-v-279abfd7",null);e.default=g.exports}});
//# sourceMappingURL=64.235170b1af864578c4b5.js.map