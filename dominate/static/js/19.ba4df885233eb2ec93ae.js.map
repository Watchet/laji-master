{"version":3,"sources":["webpack:///static/js/19.ba4df885233eb2ec93ae.js","webpack:///./src/components/system/version.vue","webpack:///src/components/system/version.vue","webpack:///./src/components/system/version.vue?6ca4"],"names":["webpackJsonp","I6C7","module","__webpack_exports__","__webpack_require__","injectStyle","context","Object","defineProperty","value","version","data","versionData","versionTerminal","versionUpdateDataTime","Date","versionDescription","code","file","mounted","this","$store","dispatch","methods","handleChange","fileList","handleRemove","beforeRemove","$confirm","name","versionUpdate","_this","$message","message","type","FunWeekTime","getTime","nowDate","dateTiming","formData","FormData","append","raw","info","then","res","returnCode","msg","dataURLtoBlob","dataurl","arr","split","mime","match","bstr","atob","n","length","u8arr","Uint8Array","charCodeAt","blob","Blob","filename","console","log","computed","versionTimeLine","state","system","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","title","show-icon","_v","staticStyle","margin","gutter","span","text-align","ref","action","limit","auto-upload","on-change","on-remove","before-remove","size","slot","model","callback","$$v","$set","expression","placeholder","outline","round","on","click","$event","offset","id","_l","tmp","index","key","_s","_f","staticRenderFns","component_normalizer","__vue_styles__","Component","awcr","exports"],"mappings":"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","file":"static/js/19.ba4df885233eb2ec93ae.js","sourcesContent":["webpackJsonp([19],{\n\n/***/ \"I6C7\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// CONCATENATED MODULE: ./node_modules/_babel-loader@7.1.4@babel-loader/lib!./node_modules/_vue-loader@14.2.2@vue-loader/lib/selector.js?type=script&index=0!./src/components/system/version.vue\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ var version = ({\n    data: function data() {\n        return {\n            versionData: {\n                version: '',\n                versionTerminal: '安卓',\n                versionUpdateDataTime: new Date(),\n                versionDescription: '',\n                code: '200'\n            },\n            file: null\n        };\n    },\n    mounted: function mounted() {\n        this.$store.dispatch('system/getVersionList');\n    },\n\n\n    methods: {\n        handleChange: function handleChange(file, fileList) {\n            this.file = file;\n        },\n        handleRemove: function handleRemove(file, fileList) {\n            this.file = null;\n        },\n        beforeRemove: function beforeRemove(file, fileList) {\n            return this.$confirm('\\u786E\\u5B9A\\u79FB\\u9664 ' + file.name + '\\uFF1F');\n        },\n        versionUpdate: function versionUpdate() {\n            var _this = this;\n\n            if (this.file === null) {\n                this.$message({ message: '请上传文件！', type: 'warning' });\n            } else if (this.versionData.version === '') {\n                this.$message({ message: '请填写版本号！', type: 'warning' });\n            } else if (this.versionData.versionUpdateDataTime === '') {\n                this.$message({ message: '请选择版本更新时间！', type: 'warning' });\n            } else if (this.versionData.versionDescription === '') {\n                this.$message({ message: '请填写版本描述！！', type: 'warning' });\n            } else {\n                if (this.FunWeekTime(this.versionData.versionUpdateDataTime.getTime()) == this.FunWeekTime(new Date().getTime())) {\n                    this.versionData.versionUpdateDataTime = this.nowDate(this.versionData.versionUpdateDataTime.getTime());\n                } else {\n                    this.versionData.versionUpdateDataTime = this.dateTiming(this.versionData.versionUpdateDataTime, 'start');\n                }\n                // console.log(this.file.raw)\n                // var r = new FileReader();  //本地预览\n                // r.readAsDataURL(this.file.raw);    //Base64\n                // r.onloadend = () => {\n                // 图片的 base64 格式, 可以直接当成 img 的 src 属性值        \n                // var dataURL = r.result\n                // 下面逻辑处理\n\n                var formData = new FormData();\n                // var blob = this.dataURLtoBlob(r.result)\n                formData.append('file', this.file.raw);\n\n                // var blob = new Blob([this.file.raw], {type: 'file'})\n                this.$store.dispatch('system/versionUpdate', { file: formData, info: this.versionData }).then(function (res) {\n                    if (res.returnCode === 200) {\n                        _this.$message({ message: res.msg, type: 'success' });\n                        // this.$refs.upload.clearFiles()\n                        // this.versionData = {\n                        //     version: '',\n                        //     versionTerminal: '安卓',\n                        //     versionUpdateDataTime: new Date(),\n                        //     versionDescription: '',\n                        //     code: '200',\n                        // }\n                    }\n                });\n                // }\n            }\n        },\n        dataURLtoBlob: function dataURLtoBlob(dataurl) {\n            var arr = dataurl.split(','),\n                mime = arr[0].match(/:(.*?);/)[1],\n                bstr = atob(arr[1]),\n                n = bstr.length,\n                u8arr = new Uint8Array(n);\n            while (n--) {\n                u8arr[n] = bstr.charCodeAt(n);\n            }\n            var blob = new Blob([u8arr], { type: mime, filename: 'image.png' });\n            console.log(blob);\n            return blob;\n        }\n    },\n\n    computed: {\n        versionTimeLine: function versionTimeLine() {\n            return this.$store.state.system.versionTimeLine;\n        }\n    }\n});\n// CONCATENATED MODULE: ./node_modules/_vue-loader@14.2.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-ad0dce02\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@14.2.2@vue-loader/lib/selector.js?type=template&index=0!./src/components/system/version.vue\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"version-update\"},[_c('el-alert',{attrs:{\"title\":\"操作说明\",\"type\":\"info\",\"show-icon\":\"\"}},[_c('div',[_c('span',[_vm._v(\"暂无\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"version-contain\"},[_c('el-row',{staticStyle:{\"margin\":\"0\"},attrs:{\"gutter\":24}},[_c('el-col',{staticClass:\"version-info\",attrs:{\"span\":8}},[_c('el-row',{staticStyle:{\"margin\":\"20px 0\"},attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":4}},[_c('p',{staticStyle:{\"text-align\":\"right\"}},[_vm._v(\"上传APK文件\")])]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":18}},[_c('el-upload',{ref:\"upload\",attrs:{\"action\":\"\",\"limit\":1,\"auto-upload\":false,\"on-change\":_vm.handleChange,\"on-remove\":_vm.handleRemove,\"before-remove\":_vm.beforeRemove}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"点击上传\")]),_vm._v(\" \"),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"只能上传apk文件\")])],1)],1)],1),_vm._v(\" \"),_c('el-row',{staticStyle:{\"margin\":\"20px 0\"},attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":4}},[_c('p',{staticStyle:{\"text-align\":\"right\"}},[_vm._v(\"版本号\")])]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":18}},[_c('el-input',{model:{value:(_vm.versionData.version),callback:function ($$v) {_vm.$set(_vm.versionData, \"version\", $$v)},expression:\"versionData.version\"}})],1)],1),_vm._v(\" \"),_c('el-row',{staticStyle:{\"margin\":\"20px 0\"},attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":4}},[_c('p',{staticStyle:{\"text-align\":\"right\"}},[_vm._v(\"更新时间\")])]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":18}},[_c('el-date-picker',{attrs:{\"type\":\"date\",\"placeholder\":\"选择日期\"},model:{value:(_vm.versionData.versionUpdateDataTime),callback:function ($$v) {_vm.$set(_vm.versionData, \"versionUpdateDataTime\", $$v)},expression:\"versionData.versionUpdateDataTime\"}})],1)],1),_vm._v(\" \"),_c('el-row',{staticStyle:{\"margin\":\"20px 0\"},attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":4}},[_c('p',{staticStyle:{\"text-align\":\"right\"}},[_vm._v(\"版本号描述\")])]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":18}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.versionData.versionDescription),callback:function ($$v) {_vm.$set(_vm.versionData, \"versionDescription\", $$v)},expression:\"versionData.versionDescription\"}})],1)],1),_vm._v(\" \"),_c('el-row',{staticStyle:{\"margin\":\"20px 0\"},attrs:{\"gutter\":20}},[_c('el-col',{staticStyle:{\"text-align\":\"right\"},attrs:{\"span\":20}},[_c('el-button',{staticStyle:{\"outline\":\"none\"},attrs:{\"type\":\"primary\",\"round\":\"\"},on:{\"click\":function($event){_vm.versionUpdate()}}},[_vm._v(\"更新版本\")])],1)],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":14,\"offset\":1}},[_c('div',{staticClass:\"version-date\",attrs:{\"id\":\"version-date\"}},_vm._l((_vm.versionTimeLine),function(tmp,index){return _c('div',{key:index,staticClass:\"timeline-block\"},[_c('div',{staticClass:\"timeline-img\"},[_c('i',{staticClass:\"fa fa-clock-o\"})]),_vm._v(\" \"),_c('div',{staticClass:\"timeline-content\"},[_c('p',[_c('span',{staticClass:\"title\"},[_vm._v(\"版本号：\")]),_c('span',{staticClass:\"content\"},[_vm._v(_vm._s(tmp.version))])]),_vm._v(\" \"),_c('p',[_c('span',{staticClass:\"title\"},[_vm._v(\"版本号ID：\")]),_c('span',{staticClass:\"content\"},[_vm._v(_vm._s(tmp.id))])]),_vm._v(\" \"),_c('p',[_c('span',{staticClass:\"title\"},[_vm._v(\"版本更新描述：\")]),_c('span',{staticClass:\"content\"},[_vm._v(_vm._s(tmp.versionDescription))])]),_vm._v(\" \"),_c('span',{staticClass:\"cd-date\"},[_vm._v(_vm._s(_vm._f(\"time\")(tmp.versionUpdateDataTime,'long')))])])])}))])],1)],1),_vm._v(\" \"),_c('input',{attrs:{\"type\":\"file\",\"id\":\"aaa\"}})],1)}\nvar staticRenderFns = []\n\n// EXTERNAL MODULE: ./node_modules/_vue-loader@14.2.2@vue-loader/lib/runtime/component-normalizer.js\nvar component_normalizer = __webpack_require__(\"18Nq\");\n\n// CONCATENATED MODULE: ./src/components/system/version.vue\nfunction injectStyle (context) {\n  __webpack_require__(\"awcr\")\n}\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\n\nvar Component = Object(component_normalizer[\"a\" /* default */])(\n  version,\n  render,\n  staticRenderFns,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ var system_version = __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"awcr\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/19.ba4df885233eb2ec93ae.js","function injectStyle (context) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"scoped\\\":false,\\\"sourceMap\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/selector?type=styles&index=0!./version.vue\")\n}\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/selector?type=script&index=0!./version.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/selector?type=script&index=0!./version.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-ad0dce02\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/selector?type=template&index=0!./version.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/system/version.vue\n// module id = null\n// module chunks = ","<template>\n<div class=\"version-update\">\n    <el-alert title=\"操作说明\" type=\"info\" show-icon>\n        <div>\n            <span>暂无</span>\n        </div>\n    </el-alert>\n\n    <div class=\"version-contain\">\n        <el-row :gutter=\"24\" style=\"margin:0;\">\n            <el-col :span=\"8\" class=\"version-info\">\n\n                <el-row :gutter=\"20\" style=\"margin: 20px 0;\">\n                    <el-col :span=\"4\">\n                        <p style=\"text-align: right;\">上传APK文件</p>\n                    </el-col>\n                    <el-col :span=\"18\">\n                        <el-upload ref='upload' action=\"\" :limit=\"1\" :auto-upload=\"false\" :on-change=\"handleChange\" :on-remove=\"handleRemove\" :before-remove=\"beforeRemove\">\n                            <el-button size=\"small\" type=\"primary\">点击上传</el-button>\n                            <div slot=\"tip\" class=\"el-upload__tip\">只能上传apk文件</div>\n                        </el-upload>\n                    </el-col>\n                </el-row>\n\n                <el-row :gutter=\"20\" style=\"margin: 20px 0;\">\n                    <el-col :span=\"4\">\n                        <p style=\"text-align: right;\">版本号</p>\n                    </el-col>\n                    <el-col :span=\"18\">\n                        <el-input v-model=\"versionData.version\"></el-input>\n                    </el-col>\n                </el-row>\n\n                <el-row :gutter=\"20\" style=\"margin: 20px 0;\">\n                    <el-col :span=\"4\">\n                        <p style=\"text-align: right;\">更新时间</p>\n                    </el-col>\n                    <el-col :span=\"18\">\n                        <el-date-picker v-model=\"versionData.versionUpdateDataTime\" type=\"date\" placeholder=\"选择日期\"></el-date-picker>\n                    </el-col>\n                </el-row>\n\n                <el-row :gutter=\"20\" style=\"margin: 20px 0;\">\n                    <el-col :span=\"4\">\n                        <p style=\"text-align: right;\">版本号描述</p>\n                    </el-col>\n                    <el-col :span=\"18\">\n                        <el-input type=\"textarea\" v-model=\"versionData.versionDescription\"></el-input>\n                    </el-col>\n                </el-row>\n\n                <el-row :gutter=\"20\" style=\"margin: 20px 0;\">\n                    <el-col :span=\"20\" style=\"text-align: right;\">\n                         <el-button type=\"primary\" round @click=\"versionUpdate()\" style=\"outline: none;\">更新版本</el-button>\n                    </el-col>\n                </el-row>\n            </el-col>\n\n            <el-col :span=\"14\" :offset=\"1\">\n                <div id=\"version-date\" class=\"version-date\">\n                    <div class=\"timeline-block\" v-for=\"(tmp, index) in versionTimeLine\" :key=\"index\">\n                        <div class=\"timeline-img\">\n                            <i class=\"fa fa-clock-o\"></i>\n                        </div>\n                        <div class=\"timeline-content\">\n                            <p><span class=\"title\">版本号：</span><span class=\"content\">{{tmp.version}}</span></p>\n                            <p><span class=\"title\">版本号ID：</span><span class=\"content\">{{tmp.id}}</span></p>\n                            <p><span class=\"title\">版本更新描述：</span><span class=\"content\">{{tmp.versionDescription}}</span></p>\n                            <span class=\"cd-date\">{{tmp.versionUpdateDataTime | time('long')}}</span>\n                        </div>\n                    </div>\n                </div>\n            </el-col>\n        </el-row>\n    </div>\n    <input type=\"file\" id=\"aaa\">\n</div>\n</template>\n\n<script type=\"text/ecmascript-6\">\n    export default{\n        data() {\n            return {\n                versionData: {\n                    version: '',\n                    versionTerminal: '安卓',\n                    versionUpdateDataTime: new Date(),\n                    versionDescription: '',\n                    code: '200',\n                },\n                file: null,\n            }\n        },\n\n        mounted() {\n            this.$store.dispatch('system/getVersionList')\n        },\n\n        methods: {\n            handleChange(file, fileList) {\n                this.file = file\n            },\n\n            handleRemove(file, fileList) {\n                this.file = null\n            },\n\n            beforeRemove(file, fileList) {\n                return this.$confirm(`确定移除 ${ file.name }？`)\n            },\n\n            versionUpdate() {\n                if(this.file === null) {\n                    this.$message({ message: '请上传文件！', type: 'warning' })\n                }else if(this.versionData.version === ''){\n                    this.$message({ message: '请填写版本号！', type: 'warning' })\n                }else if(this.versionData.versionUpdateDataTime === '') {\n                    this.$message({ message: '请选择版本更新时间！', type: 'warning' })\n                }else if(this.versionData.versionDescription === '') {\n                    this.$message({ message: '请填写版本描述！！', type: 'warning' })\n                }else {\n                    if(this.FunWeekTime(this.versionData.versionUpdateDataTime.getTime()) == this.FunWeekTime(new Date().getTime())) {\n                        this.versionData.versionUpdateDataTime = this.nowDate(this.versionData.versionUpdateDataTime.getTime())\n                    }else {\n                        this.versionData.versionUpdateDataTime = this.dateTiming(this.versionData.versionUpdateDataTime, 'start')\n                    }\n                    // console.log(this.file.raw)\n                    // var r = new FileReader();  //本地预览\n                    // r.readAsDataURL(this.file.raw);    //Base64\n                    // r.onloadend = () => {\n                        // 图片的 base64 格式, 可以直接当成 img 的 src 属性值        \n                        // var dataURL = r.result\n                        // 下面逻辑处理\n\n                        var formData = new FormData()\n                        // var blob = this.dataURLtoBlob(r.result)\n                        formData.append('file', this.file.raw)\n\n                        // var blob = new Blob([this.file.raw], {type: 'file'})\n                        this.$store.dispatch('system/versionUpdate', { file: formData, info: this.versionData }).then(res => {\n                            if(res.returnCode === 200) {\n                                this.$message({ message: res.msg, type: 'success' })\n                                // this.$refs.upload.clearFiles()\n                                // this.versionData = {\n                                    //     version: '',\n                                //     versionTerminal: '安卓',\n                                //     versionUpdateDataTime: new Date(),\n                                //     versionDescription: '',\n                                //     code: '200',\n                                // }\n                            }\n                        })\n                    // }\n\n                }\n            },\n            dataURLtoBlob(dataurl) {\n                var arr = dataurl.split(','), mime = arr[0].match(/:(.*?);/)[1],\n                bstr = atob(arr[1]), n = bstr.length, u8arr = new Uint8Array(n);\n                while(n--){\n                    u8arr[n] = bstr.charCodeAt(n);\n                }\n                var blob = new Blob([u8arr], {type:mime,filename:'image.png'});\n                console.log(blob)\n                return blob;\n            },\n\n        },\n\n        computed: {\n            versionTimeLine() {\n                return this.$store.state.system.versionTimeLine\n            }\n        }\n    }\n</script>\n\n<style lang=\"stylus\" rel=\"stylesheet/stylus\">\n.version-contain\n    margin 40px 0\n    .version-info\n        background #fff\n    .version-date\n        position relative\n        padding 2em 0\n        .timeline-block\n            margin 4em 0\n            position relative\n            .timeline-img\n                position absolute\n                background #75ce66\n                top 0\n                border-radius 50%\n                box-shadow 0 0 0 4px white\n                width 60px\n                height 60px\n                left 50%\n                margin-left -30px\n                text-align center\n                line-height 78px\n                i\n                    font-size 45px\n                    color #fff\n            .timeline-content\n                position relative\n                background #fff\n                width 45%\n                padding 1.6em\n                border-radius 0.25em\n                box-shadow 0 3px 0 #d7e4ed\n                .title\n                    text-align right\n                    display inline-block\n                    width 30%\n                    vertical-align top\n                .content\n                    display inline-block\n                    width 70%\n                .cd-date\n                    position absolute\n                    width 100%\n                    left 122%\n                    top 6px\n                    font-size 1.5rem\n                    float left\n                    opacity .7\n                    display inline-block\n                    color #7f8c97\n            .timeline-content::before\n                content ''\n                position absolute\n                top 24px\n                left 100%\n                height 0\n                width 0\n                border 7px solid transparent\n                border-right 7px solid white\n                border-color transparent\n                border-left-color white\n        .timeline-block:nth-child(even)\n            .timeline-content\n                float right\n                .cd-date\n                    left auto\n                    text-align right\n                    right 122%\n            .timeline-content::before\n                left auto\n                right 100%\n                border-color transparent\n                border-right-color white\n        .timeline-block:nth-child(even)::after\n            content \"\"\n            display table\n            clear both\n    .version-date::before\n        content ''\n        position absolute\n        top 0\n        left 50%\n        height 100%\n        width 4px\n        margin-left -2px\n        background #fff\n    .version-date::after\n        content ''\n        display table\n        clear both\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/system/version.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"version-update\"},[_c('el-alert',{attrs:{\"title\":\"操作说明\",\"type\":\"info\",\"show-icon\":\"\"}},[_c('div',[_c('span',[_vm._v(\"暂无\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"version-contain\"},[_c('el-row',{staticStyle:{\"margin\":\"0\"},attrs:{\"gutter\":24}},[_c('el-col',{staticClass:\"version-info\",attrs:{\"span\":8}},[_c('el-row',{staticStyle:{\"margin\":\"20px 0\"},attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":4}},[_c('p',{staticStyle:{\"text-align\":\"right\"}},[_vm._v(\"上传APK文件\")])]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":18}},[_c('el-upload',{ref:\"upload\",attrs:{\"action\":\"\",\"limit\":1,\"auto-upload\":false,\"on-change\":_vm.handleChange,\"on-remove\":_vm.handleRemove,\"before-remove\":_vm.beforeRemove}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"点击上传\")]),_vm._v(\" \"),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"只能上传apk文件\")])],1)],1)],1),_vm._v(\" \"),_c('el-row',{staticStyle:{\"margin\":\"20px 0\"},attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":4}},[_c('p',{staticStyle:{\"text-align\":\"right\"}},[_vm._v(\"版本号\")])]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":18}},[_c('el-input',{model:{value:(_vm.versionData.version),callback:function ($$v) {_vm.$set(_vm.versionData, \"version\", $$v)},expression:\"versionData.version\"}})],1)],1),_vm._v(\" \"),_c('el-row',{staticStyle:{\"margin\":\"20px 0\"},attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":4}},[_c('p',{staticStyle:{\"text-align\":\"right\"}},[_vm._v(\"更新时间\")])]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":18}},[_c('el-date-picker',{attrs:{\"type\":\"date\",\"placeholder\":\"选择日期\"},model:{value:(_vm.versionData.versionUpdateDataTime),callback:function ($$v) {_vm.$set(_vm.versionData, \"versionUpdateDataTime\", $$v)},expression:\"versionData.versionUpdateDataTime\"}})],1)],1),_vm._v(\" \"),_c('el-row',{staticStyle:{\"margin\":\"20px 0\"},attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":4}},[_c('p',{staticStyle:{\"text-align\":\"right\"}},[_vm._v(\"版本号描述\")])]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":18}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.versionData.versionDescription),callback:function ($$v) {_vm.$set(_vm.versionData, \"versionDescription\", $$v)},expression:\"versionData.versionDescription\"}})],1)],1),_vm._v(\" \"),_c('el-row',{staticStyle:{\"margin\":\"20px 0\"},attrs:{\"gutter\":20}},[_c('el-col',{staticStyle:{\"text-align\":\"right\"},attrs:{\"span\":20}},[_c('el-button',{staticStyle:{\"outline\":\"none\"},attrs:{\"type\":\"primary\",\"round\":\"\"},on:{\"click\":function($event){_vm.versionUpdate()}}},[_vm._v(\"更新版本\")])],1)],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":14,\"offset\":1}},[_c('div',{staticClass:\"version-date\",attrs:{\"id\":\"version-date\"}},_vm._l((_vm.versionTimeLine),function(tmp,index){return _c('div',{key:index,staticClass:\"timeline-block\"},[_c('div',{staticClass:\"timeline-img\"},[_c('i',{staticClass:\"fa fa-clock-o\"})]),_vm._v(\" \"),_c('div',{staticClass:\"timeline-content\"},[_c('p',[_c('span',{staticClass:\"title\"},[_vm._v(\"版本号：\")]),_c('span',{staticClass:\"content\"},[_vm._v(_vm._s(tmp.version))])]),_vm._v(\" \"),_c('p',[_c('span',{staticClass:\"title\"},[_vm._v(\"版本号ID：\")]),_c('span',{staticClass:\"content\"},[_vm._v(_vm._s(tmp.id))])]),_vm._v(\" \"),_c('p',[_c('span',{staticClass:\"title\"},[_vm._v(\"版本更新描述：\")]),_c('span',{staticClass:\"content\"},[_vm._v(_vm._s(tmp.versionDescription))])]),_vm._v(\" \"),_c('span',{staticClass:\"cd-date\"},[_vm._v(_vm._s(_vm._f(\"time\")(tmp.versionUpdateDataTime,'long')))])])])}))])],1)],1),_vm._v(\" \"),_c('input',{attrs:{\"type\":\"file\",\"id\":\"aaa\"}})],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@14.2.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-ad0dce02\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@14.2.2@vue-loader/lib/selector.js?type=template&index=0!./src/components/system/version.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}