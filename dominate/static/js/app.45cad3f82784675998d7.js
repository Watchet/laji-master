webpackJsonp([1],{"+/Qo":function(e,t){},"/JMq":function(e,t){},"/Ue+":function(e,t,a){"use strict";function o(e){a("9+BI")}Object.defineProperty(t,"__esModule",{value:!0});var s={data:function(){return{searchForm:{},defaultValue:null,pickerOptions:{shortcuts:[{text:"本月",onClick:function(e){var t=new Date,a=new Date;a.setDate(1),e.$emit("pick",[a,t])}}],disabledDate:function(e){return e.getTime()>Date.now()}},recommendCommentList:{},keywords:"",selectType:"bookName",multipleSelection:[],userInfo:{},date:""}},methods:{getRecommendStatisticList:function(){var e=this;if(this.searchForm={},this.searchForm.page=this.$route.params.page,this.$route.params.uid&&(this.searchForm.userId=this.$route.params.uid),this.selectType&&this.keywords){if(("bookId"===this.selectType||"userId"===this.selectType)&&!Number(this.keywords))return this.$message({message:"ID必需为数字",type:"warning"}),!1;this.searchForm[this.selectType]=this.keywords}this.date&&(this.searchForm.startdate=this.date[0]+" 00:00:00",this.searchForm.enddate=this.date[1]+" 23:59:59"),this.$ajax("/admin/getAdminRecommendationticketList",this.searchForm,function(t){200===t.returnCode?e.recommendCommentList=t.data:t.data||(e.recommendCommentList={})})},searchReplyCom:function(){1===Number(this.$route.params.page)?this.getRecommendStatisticList():this.$router.push({params:{page:1}})},handleCurrentChange:function(e){this.$router.push({params:{page:e}})},getUserInfo:function(){var e=this;this.$route.params.uid&&this.$ajax("/person-SimplifyUserInfo",{puserid:this.$route.params.uid},function(t){200===t.returnCode&&(e.userInfo=t.data)})}},created:function(){"staUserRecommend"===this.$route.name&&(this.date=[this.$formTime(new Date((new Date).setDate(1)),"sort"),this.$formTime(new Date,"sort")]),this.getRecommendStatisticList(),this.getUserInfo()},watch:{$route:function(){this.getRecommendStatisticList()},date:function(e,t){""!==t&&this.getRecommendStatisticList()}}},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"reply-comment-wrap"},[a("el-alert",{attrs:{title:"操作说明",type:"info","show-icon":""}},[a("div",[a("p",[e._v("\n        此表为\n        "),a("span",{staticClass:"red"},[e._v(e._s("staUserReward"==e.$route.name?e.userInfo.pseudonym:"全站"))]),e._v("\n        的小米椒统计，您可以通过相应类型进行精确搜索\n      ")])])]),e._v(" "),a("el-row",{staticClass:"mbt20"},[a("el-col",[a("el-date-picker",{attrs:{type:"daterange","picker-options":e.pickerOptions,"value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)],1),e._v(" "),a("el-row",{staticClass:"mbt20"},[a("el-col",{attrs:{xs:20,sm:16,md:12,lg:9,xl:6}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchReplyCom(t):null}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}},["staUserRecommend"==e.$route.name?a("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.selectType,callback:function(t){e.selectType=t},expression:"selectType"}},[a("el-option",{attrs:{label:"书  名",value:"bookName"}}),e._v(" "),a("el-option",{attrs:{label:"书籍ID",value:"bookid"}})],1):a("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.selectType,callback:function(t){e.selectType=t},expression:"selectType"}},[a("el-option",{attrs:{label:"书  名",value:"bookName"}}),e._v(" "),a("el-option",{attrs:{label:"用户名",value:"userName"}}),e._v(" "),a("el-option",{attrs:{label:"用户ID",value:"userId"}}),e._v(" "),a("el-option",{attrs:{label:"书籍ID",value:"bookid"}})],1),e._v(" "),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchReplyCom},slot:"append"})],1)],1)],1),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.recommendCommentList.list,border:""}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bookid",width:"70",align:"center",label:"书籍ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bookName",label:"书名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userId",label:"用户ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"recommendTicketCount",width:"70",align:"center",label:"小米椒"}}),e._v(" "),a("el-table-column",{attrs:{label:"时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("time")(t.row.giveDateTime,"long")))])]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"mbt20",attrs:{background:"","current-page":e.recommendCommentList.pageNum,"page-size":e.recommendCommentList.pageSize,layout:"total, prev, pager, next, jumper",total:e.recommendCommentList.total},on:{"current-change":e.handleCurrentChange}})],1)},n=[],i=a("18Nq"),l=o,c=Object(i.a)(s,r,n,!1,l,null,null);t.default=c.exports},"1+Xl":function(e,t,a){e.exports=a.p+"static/img/Bitmap@3x.0613312.png"},"129x":function(e,t,a){"use strict";function o(e){a("1zlu")}Object.defineProperty(t,"__esModule",{value:!0});var s={data:function(){return{title:""}},created:function(){console.log(this.$store.state.system.str),this.$store.dispatch("system/getPersonMmessage")}},r=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},n=[],i=a("18Nq"),l=o,c=Object(i.a)(s,r,n,!1,l,null,null);t.default=c.exports},"1zlu":function(e,t){},"2gC3":function(e,t,a){"use strict";function o(e){a("KjuX")}Object.defineProperty(t,"__esModule",{value:!0});var s={},r=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},n=[],i=a("18Nq"),l=o,c=Object(i.a)(s,r,n,!1,l,null,null);t.default=c.exports},"2sKd":function(e,t,a){"use strict";function o(e){a("QhRe")}Object.defineProperty(t,"__esModule",{value:!0});var s={data:function(){return{fold:!1,filterForm:{rechargeType:"",client:"",isOK:""},searchForm:{},defaultValue:null,pickerOptions:{shortcuts:[{text:"本月",onClick:function(e){var t=new Date,a=new Date;a.setDate(1),e.$emit("pick",[a,t])}}],disabledDate:function(e){return e.getTime()>Date.now()}},chargeCommentList:{},keywords:"",selectType:"userName",multipleSelection:[],userInfo:{},date:""}},methods:{getChargeStatisticList:function(){var e=this;if(this.searchForm={},this.searchForm.page=this.$route.params.page,this.$route.params.uid&&(this.searchForm.userId=this.$route.params.uid),this.selectType&&this.keywords){if("userId"===this.selectType&&!Number(this.keywords))return this.$message({message:"ID必需为数字",type:"warning"}),!1;this.searchForm[this.selectType]=this.keywords}for(var t in this.filterForm)""!==this.filterForm[t]&&(this.searchForm[t]=this.filterForm[t]);this.date&&(this.searchForm.startdate=this.date[0]+" 00:00:00",this.searchForm.enddate=this.date[1]+" 23:59:59"),this.$ajax("/sys-RechargeRecordStatistics",this.searchForm,function(t){200===t.returnCode?e.chargeCommentList=t.data:t.data||(e.chargeCommentList={})})},searchReplyCom:function(){1==this.$route.params.page?this.getChargeStatisticList():this.$router.push({params:{page:1}})},handleCurrentChange:function(e){this.$router.push({params:{page:e}})},getUserInfo:function(){var e=this;this.$route.params.uid&&this.$ajax("/person-SimplifyUserInfo",{puserid:this.$route.params.uid},function(t){200===t.returnCode&&(e.userInfo=t.data)})}},created:function(){"staUserCharge"===this.$route.name&&(this.date=[this.$formTime(new Date((new Date).setDate(1)),"sort"),this.$formTime(new Date,"sort")]),this.getChargeStatisticList(),this.getUserInfo()},watch:{$route:function(){this.getChargeStatisticList()},date:function(e,t){""!==t&&this.getChargeStatisticList()},filterForm:{handler:function(){this.getChargeStatisticList()},deep:!0}},filters:{type:function(e){var t="";switch(e){case 110:t="支付宝";break;case 111:t="微信";break;case 112:t="IOS";break;default:t="其他"}return t}}},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"reply-comment-wrap"},[a("el-alert",{attrs:{title:"操作说明",type:"info","show-icon":""}},[a("div",[a("p",[e._v("\n        此表为\n        "),a("span",{staticClass:"red"},[e._v(e._s("staUserCharge"==e.$route.name?e.userInfo.pseudonym:"全站"))]),e._v("\n        的辣椒打赏统计，您可以通过相应类型进行精确搜索，更多搜索条件可以直接 "),a("a",{attrs:{href:"javascript:0;"},on:{click:function(t){e.fold?e.fold=!1:e.fold=!0}}},[e._v(e._s(e.fold?"收起":"展开"))]),e._v(" 查看\n      ")])])]),e._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.fold,expression:"fold"}],staticClass:"mbt20 fitler-search"},[a("div",[e._v("\n      支付类型：\n      "),a("el-radio-group",{model:{value:e.filterForm.rechargeType,callback:function(t){e.$set(e.filterForm,"rechargeType",t)},expression:"filterForm.rechargeType"}},[a("el-radio-button",{attrs:{label:""}},[e._v("全部")]),e._v(" "),a("el-radio-button",{attrs:{label:"110"}},[e._v("支付宝")]),e._v(" "),a("el-radio-button",{attrs:{label:"111"}},[e._v("微信")]),e._v(" "),a("el-radio-button",{attrs:{label:"112"}},[e._v("IOS")])],1)],1),e._v(" "),a("div",[e._v("\n      终  端：\n      "),a("el-radio-group",{model:{value:e.filterForm.client,callback:function(t){e.$set(e.filterForm,"client",t)},expression:"filterForm.client"}},[a("el-radio-button",{attrs:{label:""}},[e._v("全部")]),e._v(" "),a("el-radio-button",{attrs:{label:"PC"}},[e._v("PC")]),e._v(" "),a("el-radio-button",{attrs:{label:"安卓"}},[e._v("Android")]),e._v(" "),a("el-radio-button",{attrs:{label:"苹果支付"}},[e._v("IOS")])],1)],1),e._v(" "),a("div",[e._v("\n      状  态：\n      "),a("el-radio-group",{model:{value:e.filterForm.isOK,callback:function(t){e.$set(e.filterForm,"isOK",t)},expression:"filterForm.isOK"}},[a("el-radio-button",{attrs:{label:""}},[e._v("全部")]),e._v(" "),a("el-radio-button",{attrs:{label:"1"}},[e._v("成功")]),e._v(" "),a("el-radio-button",{attrs:{label:"0"}},[e._v("失败")])],1)],1)]),e._v(" "),a("el-row",{staticClass:"mbt20"},[a("el-col",[a("el-date-picker",{attrs:{type:"daterange","picker-options":e.pickerOptions,"value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)],1),e._v(" "),a("el-row",{staticClass:"mbt20"},[a("el-col",{attrs:{xs:20,sm:16,md:12,lg:9,xl:6}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchReplyCom(t):null}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}},["staUserCharge"==e.$route.name?a("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.selectType,callback:function(t){e.selectType=t},expression:"selectType"}},[a("el-option",{attrs:{label:"订单号",value:"orderNo"}})],1):a("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.selectType,callback:function(t){e.selectType=t},expression:"selectType"}},[a("el-option",{attrs:{label:"订单号",value:"orderNo"}}),e._v(" "),a("el-option",{attrs:{label:"用户名",value:"userName"}}),e._v(" "),a("el-option",{attrs:{label:"用户ID",value:"userId"}})],1),e._v(" "),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchReplyCom},slot:"append"})],1)],1)],1),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.chargeCommentList.list,border:""}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userId",width:"70",align:"center",label:"用户ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"用户名"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",width:"80",label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("type")(t.row.rechargeType))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"money",align:"center",label:"金额",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orderNo",label:"订单号"}}),e._v(" "),a("el-table-column",{attrs:{width:"60",align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isOK?a("span",{staticClass:"green"},[e._v("成功")]):a("span",{staticClass:"red"},[e._v("失败")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"client",width:"60",align:"center",label:"终端"}}),e._v(" "),a("el-table-column",{attrs:{prop:"replyCommentsContent",width:"145",align:"center",label:"时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("time")(t.row.dateTimes,"long")))])]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"mbt20",attrs:{background:"","current-page":e.chargeCommentList.pageNum,"page-size":e.chargeCommentList.pageSize,layout:"total, prev, pager, next, jumper",total:e.chargeCommentList.total},on:{"current-change":e.handleCurrentChange}})],1)},n=[],i=a("18Nq"),l=o,c=Object(i.a)(s,r,n,!1,l,null,null);t.default=c.exports},"3CP6":function(e,t,a){"use strict";function o(e){a("IPyH")}Object.defineProperty(t,"__esModule",{value:!0});var s={},r=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("iframe",{attrs:{id:"external-frame",src:"http://118.31.165.113:8082/",frameborder:"0",scrolling:"no",width:"2300px",height:"1300px",seamless:"seamless"}})])}],i=a("18Nq"),l=o,c=Object(i.a)(s,r,n,!1,l,null,null);t.default=c.exports},"3InB":function(e,t){},"3Inj":function(e,t,a){"use strict";function o(e){a("+/Qo")}Object.defineProperty(t,"__esModule",{value:!0});var s={},r=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},n=[],i=a("18Nq"),l=o,c=Object(i.a)(s,r,n,!1,l,null,null);t.default=c.exports},"3ZnX":function(e,t){},"3ems":function(e,t,a){"use strict";function o(e){a("gNik")}Object.defineProperty(t,"__esModule",{value:!0});var s={data:function(){return{sensitiveWordsList:[],sensitiveWordsVisible:!1,sensitiveWordsValue:"",stopWordsList:[],stopWordsVisible:!1,stopWordsValue:"",warningWordsList:[],warningWordsVisible:!1,warningWordsValue:"",responseWord:function(){var e=this;this.$store.dispatch("getSensitiveWords").then(function(t){e.sensitiveWordsList=t.sensitiveWords,e.stopWordsList=t.stopWordsList,e.warningWordsList=t.warningWords})},contains:function(e,t){for(var a=e.length;a--;)if(e[a]===t)return!0;return!1}}},methods:{handleAddWord:function(e){var t=this;if("敏感词"===e){var a=this.sensitiveWordsValue;a?this.contains(this.sensitiveWordsList,a)?this.$message({message:"词汇重复，请重新输入！",type:"warning"}):this.$store.dispatch("changeSensitiveWords",{type:"1",world:a}).then(function(e){t.responseWord(),t.$message({message:"添加成功！",type:"success"}),t.sensitiveWordsVisible=!1,t.sensitiveWordsValue=""}):this.sensitiveWordsVisible=!1}else if("停顿词"===e){var o=this.stopWordsValue;o?this.contains(this.stopWordsList,o)?this.$message({message:"词汇重复，请重新输入！",type:"warning"}):this.$store.dispatch("changeSensitiveWords",{type:"2",world:o}).then(function(e){t.responseWord(),t.$message({message:"添加成功！",type:"success"}),t.stopWordsVisible=!1,t.stopWordsValue=""}):this.stopWordsVisible=!1}else if("警告词"===e){var s=this.warningWordsValue;s?this.contains(this.warningWordsList,s)?this.$message({message:"词汇重复，请重新输入！",type:"warning"}):this.$store.dispatch("changeSensitiveWords",{type:"3",world:s}).then(function(e){t.responseWord(),t.$message({message:"添加成功！",type:"success"}),t.warningWordsVisible=!1,t.warningWordsValue=""}):this.warningWordsVisible=!1}},handleDeleteWord:function(e,t){var a=this;this.$confirm("确定删除该词语, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){"敏感词"===e?a.$store.dispatch("changeSensitiveWords",{type:"4",world:t}).then(function(e){a.responseWord(),a.$message({message:"添加成功！",type:"success"}),a.sensitiveWordsVisible=!1,a.sensitiveWordsValue=""}):"停顿词"===e?a.$store.dispatch("changeSensitiveWords",{type:"5",world:t}).then(function(e){a.responseWord(),a.$message({message:"添加成功！",type:"success"}),a.stopWordsVisible=!1,a.stopWordsValue=""}):"警告词"===e&&a.$store.dispatch("changeSensitiveWords",{type:"6",world:t}).then(function(e){a.responseWord(),a.$message({message:"添加成功！",type:"success"}),a.warningWordsVisible=!1,a.warningWordsValue=""})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},showInput:function(e){var t=this;"敏感词"===e?(this.sensitiveWordsVisible=!0,this.$nextTick(function(e){t.$refs.sensitiveWordsValue.$refs.input.focus()})):"停顿词"===e?(this.stopWordsVisible=!0,this.$nextTick(function(e){t.$refs.stopWordsValue.$refs.input.focus()})):"警告词"===e&&(this.warningWordsVisible=!0,this.$nextTick(function(e){t.$refs.warningWordsValue.$refs.input.focus()}))}},created:function(){this.responseWord()}},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"book-property-wrap"},[a("el-alert",{attrs:{title:"操作说明",type:"info","show-icon":""}},[a("div",[a("p",[e._v('您可以通过点击"+ New Tag"按钮来添加词汇，或者直接点击"×"删除该词汇。')]),e._v(" "),a("p",[a("span",{staticClass:"red"},[e._v("敏感词")]),e._v("用于网站 私信 评论 间贴 回复 等网站消息系统用到的屏蔽词（效果当用户发布的信息中包含该词汇提示：评论内容不合法）")]),e._v(" "),a("p",[a("span",[e._v("停顿词：")]),e._v("用于检测用户敏感词中包含的特殊字符（解释:如傻@B中包含@也一并检测- 停顿词包含#@！*&……等等）")]),e._v(" "),a("p",[a("span",[e._v("警告词：")]),e._v("用于检测用户发布章节内容中包含的敏感字符 改字符不会直接提示用户，会在后台生成一个警告词记录通过管理员去审核")])])]),e._v(" "),a("el-row",{staticClass:"tag-row"},[a("p",{staticClass:"tag-title"},[e._v("敏感词管理")]),e._v(" "),e._l(e.sensitiveWordsList,function(t){return a("el-tag",{key:t,staticClass:"tag-item",attrs:{closable:""},on:{close:function(a){e.handleDeleteWord("敏感词",t)}}},[e._v(e._s(t))])}),e._v(" "),e.sensitiveWordsVisible?a("el-input",{ref:"sensitiveWordsValue",staticClass:"tag-input",on:{blur:function(t){e.handleAddWord("敏感词")}},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.handleAddWord("敏感词")}},model:{value:e.sensitiveWordsValue,callback:function(t){e.sensitiveWordsValue=t},expression:"sensitiveWordsValue"}}):a("el-button",{staticClass:"tag-button",attrs:{size:"small"},on:{click:function(t){e.showInput("敏感词")}}},[e._v("+ New Tag")])],2),e._v(" "),a("el-row",{staticClass:"tag-row"},[a("p",{staticClass:"tag-title"},[e._v("停顿词管理")]),e._v(" "),e._l(e.stopWordsList,function(t){return a("el-tag",{key:t,staticClass:"tag-item",attrs:{closable:""},on:{close:function(a){e.handleDeleteWord("停顿词",t)}}},[e._v(e._s(t))])}),e._v(" "),e.stopWordsVisible?a("el-input",{ref:"stopWordsValue",staticClass:"tag-input",on:{blur:function(t){e.handleAddWord("停顿词")}},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.handleAddWord("停顿词")}},model:{value:e.stopWordsValue,callback:function(t){e.stopWordsValue=t},expression:"stopWordsValue"}}):a("el-button",{staticClass:"tag-button",attrs:{size:"small"},on:{click:function(t){e.showInput("停顿词")}}},[e._v("+ New Tag")])],2),e._v(" "),a("el-row",{staticClass:"tag-row"},[a("p",{staticClass:"tag-title"},[e._v("警告词管理")]),e._v(" "),e._l(e.warningWordsList,function(t){return a("el-tag",{key:t,staticClass:"tag-item",attrs:{closable:""},on:{close:function(a){e.handleDeleteWord("警告词",t)}}},[e._v(e._s(t))])}),e._v(" "),e.warningWordsVisible?a("el-input",{ref:"warningWordsValue",staticClass:"tag-input",on:{blur:function(t){e.handleAddWord("警告词")}},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.handleAddWord("警告词")}},model:{value:e.warningWordsValue,callback:function(t){e.warningWordsValue=t},expression:"warningWordsValue"}}):a("el-button",{staticClass:"tag-button",attrs:{size:"small"},on:{click:function(t){e.showInput("警告词")}}},[e._v("+ New Tag")])],2)],1)},n=[],i=a("18Nq"),l=o,c=Object(i.a)(s,r,n,!1,l,null,null);t.default=c.exports},"3en8":function(e,t){},"3ntp":function(e,t){},"4Nzc":function(e,t){},"4azy":function(e,t,a){"use strict";function o(e){a("s/uD")}Object.defineProperty(t,"__esModule",{value:!0});var s={},r=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},n=[],i=a("18Nq"),l=o,c=Object(i.a)(s,r,n,!1,l,null,null);t.default=c.exports},"4qUY":function(e,t){},"4tNu":function(e,t){},"4xxa":function(e,t){},"4zb5":function(e,t){},"54MD":function(e,t){},"5LdX":function(e,t,a){"use strict";function o(e){a("nS0L")}Object.defineProperty(t,"__esModule",{value:!0});var s=a("3cXf"),r=a.n(s),n={data:function(){return{activeName:"base",baseData:{},DataChange:!1,bookDetail:{bookName:"",bookClassificationId:null,bookLabId:null,bookAuthorization:null,bookIntroduction:""},bookData:{},rules2:{bookName:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:1,max:20,message:"长度在 20 个字符以内",trigger:"blur"}],bookClassificationId:[{required:!0,type:"number",message:"请选择作品分类",trigger:"change"}],bookLabId:[{type:"array",required:!0,trigger:"change"},{type:"array",min:2,max:5,message:"请选择2-5个标签",trigger:"change"}],bookAuthorization:[{required:!0,type:"number",message:"请选择发布状态",trigger:"change"}],bookIntroduction:[{required:!0,message:"作品简介",trigger:"blur"},{min:1,max:400,message:"长度在 1 到 400 个字符",trigger:"blur"}]}}},methods:{getBookDetail:function(){var e=this;this.$store.dispatch("book_showBookInfo",{bookid:this.$route.params.bid}).then(function(t){delete t.booklableList,delete t.bookImage,t.bookLabId=function(){var e=[];return t.bookLabId.split(",").forEach(function(t){e.push(parseInt(t))}),e}(),t.lastUpdateTime=new Date(t.lastUpdateTime),t.bookCreatedTime=new Date(t.bookCreatedTime),t.topFrameTime&&(t.topFrameTime=new Date(t.topFrameTime)),t.signTime&&(t.signTime=new Date(t.signTime)),t.bookClassificationId=parseInt(t.bookClassificationId),e.bookDetail=t}),this.$store.dispatch("getBookDataView",{bookid:this.$route.params.bid}).then(function(t){e.bookData=t})},onSubmit:function(e){var t=this,a=JSON.parse(r()(this.bookDetail));a.bookLabId=a.bookLabId.toString(),a.bookIntroduction=this.$http.trim(a.bookIntroduction).replace(/\s*\n+\s*/g,"\n"),a.signTime||delete a.signTime,a.topFrameTime||delete a.topFrameTime,this.$refs[e].validate(function(e){if(!e)return t.$message({message:"请完善表单信息！",type:"warning"}),!1;t.$myLoad(),t.$ajax("/admin/sysbookupdate",a,function(e){t.$loading().close(),200===e.returnCode&&(t.bookData&&t.DataChange?t.$ajax("/admin/updateBookData",t.bookData,function(e){200===e.returnCode&&(t.$message({message:"修改成功",type:"success"}),t.getBaseInfo())}):t.$message({message:"修改成功",type:"success"}))})})},submit:function(){var e=this;this.bookDetail.bookLabId.length>5||this.bookDetail.bookLabId.length<2?this.$message({message:"请选择2-5个标签",type:"warning"}):this.bookDetail.bookIntroduction.length>400?this.$message({message:"长度在 1 到 400 个字符",type:"warning"}):(this.bookDetail.bookAuthorization===this.$store.state.bookAuthorization&&(this.bookDetail.bookAuthorization=null),this.bookDetail.bookCheckStatus=null,this.$store.dispatch("sysBookUpdate",this.bookDetail).then(function(t){e.$message({message:"修改成功！",type:"success"}),e.getBookDetail()}))}},created:function(){var e=this;this.$store.dispatch("book_EditBookEcho",{}).then(function(t){e.baseData=t,e.getBookDetail()})},watch:{"bookDetail.bookIntroduction":function(e){this.bookDetail.bookIntroduction=e.replace(/\s*\n+\s*/g,"\n\n")},bookData:function(e){this.DataChange=!0}}},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"book-detail-wrap"},[a("el-breadcrumb",{staticClass:"mbt20",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("书籍管理")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:"/book/list"}},[e._v("书籍列表")]),e._v(" "),a("el-breadcrumb-item",[e._v("书籍详情")])],1),e._v(" "),a("el-alert",{staticClass:"mbt20",attrs:{title:"操作说明",type:"info","show-icon":""}},[a("div",[a("p",[e._v("新建书籍的作者必需已经存在，否则无法创建新书；书籍标签至少2个，最多不超过5个；且书籍简介不可超过字数上限")]),e._v(" "),a("p",[e._v("未创建过章节的书籍暂无扩展信息，")])])]),e._v(" "),a("el-tabs",{attrs:{type:"card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{name:"base",label:"基本信息"}},[a("el-row",{staticClass:"el-row",attrs:{gutter:24}},[a("el-col",{staticClass:"el-title",attrs:{span:1}},[a("span",[e._v("书籍名称")])]),e._v(" "),a("el-col",{attrs:{span:20}},[a("el-input",{staticClass:"mw320",attrs:{readonly:""},model:{value:e.bookDetail.bookName,callback:function(t){e.$set(e.bookDetail,"bookName",t)},expression:"bookDetail.bookName"}})],1)],1),e._v(" "),a("el-row",{staticClass:"el-row",attrs:{gutter:24}},[a("el-col",{staticClass:"el-title",attrs:{span:1}},[a("span",[e._v("作品分类")])]),e._v(" "),a("el-col",{attrs:{span:20}},[a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.bookDetail.bookClassificationId,callback:function(t){e.$set(e.bookDetail,"bookClassificationId",t)},expression:"bookDetail.bookClassificationId"}},e._l(e.baseData.classificationList,function(e,t){return a("el-option",{key:t,attrs:{label:e.classificationName,value:e.id}})}))],1)],1),e._v(" "),a("el-row",{staticClass:"el-row",attrs:{gutter:24}},[a("el-col",{staticClass:"el-title",attrs:{span:1}},[a("span",[e._v("书籍标签")])]),e._v(" "),a("el-col",{attrs:{span:20}},[a("el-checkbox-group",{model:{value:e.bookDetail.bookLabId,callback:function(t){e.$set(e.bookDetail,"bookLabId",t)},expression:"bookDetail.bookLabId"}},e._l(e.baseData.booklablesList,function(t,o){return a("el-checkbox",{key:o,attrs:{label:t.id,name:"bookLabId"}},[e._v(e._s(t.bookLableName))])}))],1)],1),e._v(" "),a("el-row",{staticClass:"el-row",attrs:{gutter:24}},[a("el-col",{staticClass:"el-title",attrs:{span:1}},[a("span",[e._v("千字单价")])]),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{staticClass:"mw220",model:{value:e.bookDetail.bookPrice,callback:function(t){e.$set(e.bookDetail,"bookPrice",t)},expression:"bookDetail.bookPrice"}})],1),e._v(" "),a("el-col",{staticClass:"el-title",attrs:{span:1,offset:5}},[a("span",[e._v("创建时间")])]),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-date-picker",{attrs:{type:"datetime",readonly:"","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间"},model:{value:e.bookDetail.bookCreatedTime,callback:function(t){e.$set(e.bookDetail,"bookCreatedTime",t)},expression:"bookDetail.bookCreatedTime"}})],1)],1),e._v(" "),a("el-row",{staticClass:"el-row",attrs:{gutter:24}},[a("el-col",{staticClass:"el-title",attrs:{span:1}},[a("span",[e._v("最新更新")])]),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间"},model:{value:e.bookDetail.lastUpdateTime,callback:function(t){e.$set(e.bookDetail,"lastUpdateTime",t)},expression:"bookDetail.lastUpdateTime"}})],1),e._v(" "),a("el-col",{staticClass:"el-title",attrs:{span:1,offset:5}},[a("span",[e._v("上架时间")])]),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-date-picker",{attrs:{type:"datetime",readonly:"","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间"},model:{value:e.bookDetail.topFrameTime,callback:function(t){e.$set(e.bookDetail,"topFrameTime",t)},expression:"bookDetail.topFrameTime"}})],1)],1),e._v(" "),a("el-row",{staticClass:"el-row",attrs:{gutter:24}},[a("el-col",{staticClass:"el-title",attrs:{span:1}},[a("span",[e._v("签约时间")])]),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-date-picker",{attrs:{type:"datetime",readonly:"","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间"},model:{value:e.bookDetail.signTime,callback:function(t){e.$set(e.bookDetail,"signTime",t)},expression:"bookDetail.signTime"}})],1),e._v(" "),a("el-col",{staticClass:"el-title",attrs:{span:1,offset:5}},[a("span",[e._v("字母索引")])]),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{staticClass:"mw220",model:{value:e.bookDetail.initials,callback:function(t){e.$set(e.bookDetail,"initials",t)},expression:"bookDetail.initials"}})],1)],1),e._v(" "),a("el-row",{staticClass:"el-row",attrs:{gutter:24}},[a("el-col",{staticClass:"el-title",attrs:{span:1}},[a("span",[e._v("发布状态")])]),e._v(" "),a("el-col",{attrs:{span:20}},[a("el-radio-group",{model:{value:e.bookDetail.bookAuthorization,callback:function(t){e.$set(e.bookDetail,"bookAuthorization",t)},expression:"bookDetail.bookAuthorization"}},[a("el-radio",{attrs:{label:0}},[e._v("网站首发")]),e._v(" "),a("el-radio",{attrs:{label:3}},[e._v("授权发布")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("首发签约")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("授权签约")])],1)],1)],1),e._v(" "),a("el-row",{staticClass:"el-row",attrs:{gutter:24}},[a("el-col",{staticClass:"el-title",attrs:{span:1}},[a("span",[e._v("作品简介")])]),e._v(" "),a("el-col",{attrs:{span:20}},[a("el-input",{staticClass:"book-intro",attrs:{type:"textarea"},model:{value:e.bookDetail.bookIntroduction,callback:function(t){e.$set(e.bookDetail,"bookIntroduction",t)},expression:"bookDetail.bookIntroduction"}}),e._v(" "),a("p",[a("span",{staticClass:"fr"},[e._v("字数"+e._s(e.bookDetail.bookIntroduction.length)+"/400")])])],1)],1),e._v(" "),a("el-row",{staticClass:"el-row",attrs:{gutter:24}},[a("el-col",{attrs:{span:2,offset:1}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("保存提交")])],1)],1)],1),e._v(" "),e.bookData?a("el-tab-pane",{attrs:{name:"extend",label:"扩展信息"}},[a("el-form",{ref:"detailForm2",attrs:{rules:e.rules2,model:e.bookDetail,"label-width":"80px"}},[a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"金椒",prop:"goldenTicket"}},[a("el-input",{staticClass:"mw220",model:{value:e.bookData.goldenTicket,callback:function(t){e.$set(e.bookData,"goldenTicket",t)},expression:"bookData.goldenTicket"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"总收藏",prop:"bookCollection"}},[a("el-input",{staticClass:"mw220",model:{value:e.bookData.bookCollection,callback:function(t){e.$set(e.bookData,"bookCollection",t)},expression:"bookData.bookCollection"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"打赏",prop:"areward"}},[a("el-input",{staticClass:"mw220",model:{value:e.bookData.areward,callback:function(t){e.$set(e.bookData,"areward",t)},expression:"bookData.areward"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"总点击",prop:"bookClickCount"}},[a("el-input",{staticClass:"mw220",model:{value:e.bookData.bookClickCount,callback:function(t){e.$set(e.bookData,"bookClickCount",t)},expression:"bookData.bookClickCount"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"小米椒",prop:"bookRecommend"}},[a("el-input",{staticClass:"mw220",model:{value:e.bookData.bookRecommend,callback:function(t){e.$set(e.bookData,"bookRecommend",t)},expression:"bookData.bookRecommend"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"月点击",prop:"monthChick"}},[a("el-input",{staticClass:"mw220",model:{value:e.bookData.monthChick,callback:function(t){e.$set(e.bookData,"monthChick",t)},expression:"bookData.monthChick"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"订阅",prop:"shareds"}},[a("el-input",{staticClass:"mw220",model:{value:e.bookData.shareds,callback:function(t){e.$set(e.bookData,"shareds",t)},expression:"bookData.shareds"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"周点击",prop:"weekChick"}},[a("el-input",{staticClass:"mw220",model:{value:e.bookData.weekChick,callback:function(t){e.$set(e.bookData,"weekChick",t)},expression:"bookData.weekChick"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"第三方",prop:"threePartyIncome"}},[a("el-input",{staticClass:"mw220",model:{value:e.bookData.threePartyIncome,callback:function(t){e.$set(e.bookData,"threePartyIncome",t)},expression:"bookData.threePartyIncome"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"分享次数",prop:"shareds"}},[a("el-input",{staticClass:"mw220",model:{value:e.bookData.shareds,callback:function(t){e.$set(e.bookData,"shareds",t)},expression:"bookData.shareds"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"月报",prop:"monthlyAttendance"}},[a("el-input",{staticClass:"mw220",model:{value:e.bookData.monthlyAttendance,callback:function(t){e.$set(e.bookData,"monthlyAttendance",t)},expression:"bookData.monthlyAttendance"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"回访次数",prop:"bookVisit"}},[a("el-input",{staticClass:"mw220",model:{value:e.bookData.bookVisit,callback:function(t){e.$set(e.bookData,"bookVisit",t)},expression:"bookData.bookVisit"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"评分",prop:"bookIntegrals"}},[a("el-input",{staticClass:"mw220",model:{value:e.bookData.bookIntegrals,callback:function(t){e.$set(e.bookData,"bookIntegrals",t)},expression:"bookData.bookIntegrals"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"吐槽次数",prop:"tucaoIndex"}},[a("el-input",{staticClass:"mw220",model:{value:e.bookData.tucaoIndex,callback:function(t){e.$set(e.bookData,"tucaoIndex",t)},expression:"bookData.tucaoIndex"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"订阅",prop:"shareds"}},[a("el-input",{staticClass:"mw220",model:{value:e.bookData.shareds,callback:function(t){e.$set(e.bookData,"shareds",t)},expression:"bookData.shareds"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"评分次数",prop:"integralnum"}},[a("el-input",{staticClass:"mw220",model:{value:e.bookData.integralnum,callback:function(t){e.$set(e.bookData,"integralnum",t)},expression:"bookData.integralnum"}})],1)],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onSubmit("detailForm2")}}},[e._v("保存提交")])],1)],1)],1):e._e()],1)],1)},l=[],c=a("18Nq"),u=o,d=Object(c.a)(n,i,l,!1,u,null,null);t.default=d.exports},"5fh2":function(e,t,a){"use strict";function o(e){a("/JMq")}Object.defineProperty(t,"__esModule",{value:!0});var s=a("3cXf"),r=a.n(s),n={data:function(){return{dialogType:"edit",currentType:"label",baseInfo:{},load:{max:!0,min:!0},dialogVisible:!1,subData:{bookColor:"",bookLableName:""},rules:{bookColor:[{required:!0,message:"请选取颜色",trigger:"blur"}],bookLableName:[{required:!0,message:"内容不能为空",trigger:"blur"}],classificationName:[{required:!0,message:"请输入分类名",trigger:"blur"}]}}},methods:{getBookBaseInfo:function(){var e=this;this.$ajax("/book-EditBookEcho","",function(t){200===t.returnCode&&(e.baseInfo=t.data)},"get")},handleEdit:function(e,t){var a=this;this.dialogVisible=!0,this.currentType=e,this.$nextTick(function(){t?(a.dialogType="edit",a.subData=JSON.parse(r()(t))):(a.dialogType="add",a.subData="label"===e?{bookColor:"",bookLableName:""}:{classificationName:"",classificationmaxlco:"",classificationIco:"",orders:a.baseInfo.classificationList.length+1})})},handleDel:function(e){var t=this,a=function(a,o){t.$refs.propertyForm.validate(function(s){s&&(t.$myLoad("del"===e?"正在删除中...":"正在更新中..."),t.$ajax(a,o,function(a){t.dialogVisible=!1,t.$loading().close(),200===a.returnCode&&(t.$message({message:"del"===e?"删除成功":"更新成功",type:"success"}),t.getBookBaseInfo())}))})};"label"===this.currentType?"del"===e?a("/admin/deleteAttributeLable",{id:this.subData.id}):"update"===e?a("/admin/updateAttributeLable",this.subData):a("/admin/addAttributeLable",this.subData):"class"===this.currentType&&("del"===e?a("/admin/deleteClassification",{id:this.subData.id}):"update"===e?a("/admin/updateClassificationData",this.subData):a("/admin/addClassification",this.subData))},uploadProgress1:function(e){console.log(e),this.load.max=!1},uploadEnd1:function(e){this.load.max=!0,200===e.returnCode?(this.subData.classificationmaxlco=e.data,this.getBookBaseInfo()):this.$message({message:e.msg,type:"warning"})},uploadProgress2:function(){this.load.min=!1},uploadEnd2:function(e){this.load.min=!0,200===e.returnCode?(this.subData.classificationIco=e.data,this.getBookBaseInfo()):this.$message({message:e.msg,type:"warning"})}},created:function(){this.getBookBaseInfo()}},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"book-property-wrap"},[a("el-alert",{attrs:{title:"操作说明",type:"info","show-icon":""}},[a("div",[a("p",[e._v("\n        您可以通过点击标签名或分类名来修改相关信息，也可以直接删除。\n      ")]),e._v(" "),a("p",[a("span",{staticClass:"red"},[e._v("提示：")]),e._v("删除标签或分类会导致原来书籍标签或分类丢失，请谨慎使用！\n      ")]),e._v(" "),a("p",[a("span",[e._v("注意事项：")]),e._v("1.分类图标上传大图尺寸414X180、小图尺寸70X70，请严格按照尺寸要求操作\n      ")])])]),e._v(" "),a("el-row",{staticClass:"mbt20 book-property-list"},[a("h2",{staticClass:"tab-title"},[e._v("书籍标签")]),e._v(" "),e._l(e.baseInfo.booklablesList,function(t){return a("el-button",{key:t.id,style:{borderColor:t.bookColor,color:t.bookColor},attrs:{size:"small"},on:{click:function(a){e.handleEdit("label",t)}}},[e._v(e._s(t.bookLableName))])}),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(t){e.handleEdit("label")}}},[e._v("+ 新建标签")])],2),e._v(" "),a("el-row",{staticClass:"mbt20 book-property-list"},[a("h2",{staticClass:"tab-title"},[e._v("书籍分类")]),e._v(" "),e._l(e.baseInfo.classificationList,function(t){return a("el-button",{key:t.id,attrs:{size:"small",type:"primary",plain:""},on:{click:function(a){e.handleEdit("class",t)}}},[e._v(e._s(t.classificationName))])}),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(t){e.handleEdit("class")}}},[e._v("+ 新建分类")])],2),e._v(" "),a("el-dialog",{staticClass:"alertDialog",attrs:{title:"编辑标签",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"propertyForm",staticClass:"property-ruleForm",attrs:{model:e.subData,rules:e.rules,"label-width":"66px"}},["label"===e.currentType?[a("el-form-item",{attrs:{label:"颜  色",prop:"bookColor"}},[a("el-color-picker",{model:{value:e.subData.bookColor,callback:function(t){e.$set(e.subData,"bookColor",t)},expression:"subData.bookColor"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"标签名",prop:"bookLableName"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入标签名"},model:{value:e.subData.bookLableName,callback:function(t){e.$set(e.subData,"bookLableName",t)},expression:"subData.bookLableName"}})],1)]:[a("el-form-item",{attrs:{label:"图  标"}},[e.subData.classificationmaxlco?a("img",{staticClass:"class-icon",attrs:{src:e.subData.classificationmaxlco,alt:""}}):e._e(),e._v(" "),"edit"==e.dialogType?a("el-upload",{staticClass:"upload-demo",attrs:{"show-file-list":!1,"on-success":e.uploadEnd1,"on-error":e.uploadEnd1,"on-progress":e.uploadProgress1,action:"/api/admin/updateClassification",data:{id:e.subData.id,type:1}}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e.load.max?a("span",[e._v("上传大图")]):a("span",[a("i",{staticClass:"el-icon-loading"}),e._v(" 正在上传中...")])])],1):e._e(),e._v(" "),e.subData.classificationIco?a("img",{staticClass:"class-icon",attrs:{src:e.subData.classificationIco,alt:""}}):e._e(),e._v(" "),"edit"==e.dialogType?a("el-upload",{staticClass:"upload-demo",attrs:{"show-file-list":!1,"on-success":e.uploadEnd2,"on-error":e.uploadEnd2,"on-progress":e.uploadProgress2,action:"/api/admin/updateClassification",data:{id:e.subData.id,type:2}}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e.load.min?a("span",[e._v("上传小图")]):a("span",[a("i",{staticClass:"el-icon-loading"}),e._v(" 正在上传中...")])])],1):e._e()],1),e._v(" "),a("el-form-item",{attrs:{label:"序列号",prop:"orders"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入序列号"},model:{value:e.subData.orders,callback:function(t){e.$set(e.subData,"orders",t)},expression:"subData.orders"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分类名",prop:"classificationName"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入分类名"},model:{value:e.subData.classificationName,callback:function(t){e.$set(e.subData,"classificationName",t)},expression:"subData.classificationName"}})],1)]],2),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["edit"===e.dialogType?[a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.handleDel("del")}}},[e._v("删 除")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleDel("update")}}},[e._v("更 新")])]:a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleDel("add")}}},[e._v("添 加")])],2)],1)],1)},l=[],c=a("18Nq"),u=o,d=Object(c.a)(n,i,l,!1,u,null,null);t.default=d.exports},"6JdH":function(e,t){},"6rpU":function(e,t){},"7ban":function(e,t){},"9+BI":function(e,t){},"9+Z6":function(e,t){},"9mVh":function(e,t,a){"use strict";function o(e){a("RPHh")}Object.defineProperty(t,"__esModule",{value:!0});var s={},r=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},n=[],i=a("18Nq"),l=o,c=Object(i.a)(s,r,n,!1,l,null,null);t.default=c.exports},"9tLl":function(e,t){},"9ztl":function(e,t,a){"use strict";function o(e){a("9tLl")}Object.defineProperty(t,"__esModule",{value:!0});var s=a("405r"),r=a.n(s),n={components:{draggable:r.a},data:function(){return{checkList:[],centerDialogVisible:!1,draftList:[],cloneList:[],updateData:{},page:1,multipleSelection:[],newDrag:!0,keywords:""}},methods:{getChapterList:function(){var e=this;this.$ajax("/admin/getAdminChapterDraft",{page:this.$route.params.page,searchCondition:this.keywords},function(t){200===t.returnCode&&(e.draftList=t.data)})},toggleRowSelection:function(){var e=this;this.multipleSelection.length?this.$confirm("此操作将永久删除所选章节, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.getChapterList(),e.$message({type:"success",message:"删除成功!"})}).catch(function(){e.$message({type:"info",message:"已取消删除"})}):this.$message({message:"请选取要删除的章节！",type:"warning",showClose:!0})},handleSelectionChange:function(e){this.multipleSelection=e},handleRowClick:function(e){this.$refs.multipleTable.toggleRowSelection(e)},handleClick:function(e,t){"a"===e&&this.$router.push({path:"/edit_chapter/"+t.id})},handleCurrentChange:function(e){this.page=e,this.$router.push({params:{page:e}})},bookChangeState:function(e,t){var a=this,o=t.bookCheckStatus,s=t.bookStatus;"a"===e?o=1:"b"===e?0===t.bookCheckStatus?this.$message({message:"书籍暂未审核，请先审核通过！",type:"warning"}):o=2:"c"===e?t.bookCheckStatus<=1?this.$message({message:"书籍已下架！",type:"warning"}):o=1:"d"===e&&(s=1),this.$ajax("/admin/sysbookupdate",{bookId:t.bookId,bookCheckStatus:o,bookAuthorization:t.bookAuthorization,bookStatus:s},function(e){200===e.returnCode&&(a.$message(e.msg),a.getBookList())})}},created:function(){this.getChapterList()},watch:{$route:function(){this.getChapterList()}},computed:{nowTime:function(){var e=(new Date).getTime();return this.$ajax("/sys-getNetWorkDateTime","",function(t){200===t.returnCode&&(e=t.data.beijing)},"get"),e}}},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin-book-wrap"},[a("el-breadcrumb",{staticClass:"mbt20",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("书籍管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("草稿箱列表")])],1),e._v(" "),a("el-alert",{attrs:{title:"操作说明",type:"info","show-icon":""}},[a("div",[a("p",[e._v("\n        此表是本站全部草稿章节，您可通过ID进行批量管理\n      ")])])]),e._v(" "),a("el-row",{staticClass:"mbt20"},[a("el-button",{attrs:{type:"danger",plain:""},on:{click:e.toggleRowSelection}},[e._v("批量删除")])],1),e._v(" "),a("el-row",{staticClass:"mbt20"},[a("el-col",{attrs:{xs:20,sm:16,md:12,lg:9,xl:6}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入书籍id或者书籍名称"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.getChapterList(t):null}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getChapterList},slot:"append"})],1)],1)],1),e._v(" "),a("el-row",[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"",data:e.draftList.list,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"章节ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bookTitle",label:"书名"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            (id:"+e._s(t.row.bookId)+")"+e._s(t.row.bookTitle)+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"chapterTitle",label:"章节名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"chapterIsvip",label:"VIP状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.chapterIsvip?a("span",{staticClass:"red"},[e._v("VIP")]):a("span",{staticClass:"green"},[e._v("普通")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"chapterState",label:"审核状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.chapterState?a("span",{staticClass:"red"},[e._v("未审核")]):a("span",{staticClass:"green"},[e._v("已审核")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"发布时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n           "+e._s(e._f("time")(t.row.releaseTime,"long"))+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"chapterLength",align:"center",label:"字数"}}),e._v(" "),e.$store.state.userInfo&&e.$store.state.userInfo.adminRolemenuanduserrole.updates?a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",{attrs:{size:"medium",trigger:"click",placement:"bottom"},on:{command:function(a){e.handleClick(a,t.row)}}},[a("a",{attrs:{href:"javascript:0;"}},[e._v("更多")]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"a"}},[e._v("编辑")]),e._v(" "),a("el-dropdown-item",{attrs:{command:"b"}},[e._v("审核")]),e._v(" "),a("el-dropdown-item",{staticClass:"danger",attrs:{command:"c"}},[e._v("删除")])],1)],1)]}}])}):e._e()],1),e._v(" "),e.draftList.list&&e.draftList.total>e.draftList.pageSize?a("el-pagination",{staticClass:"mbt20",attrs:{"current-page":Number(e.$route.params.page),"page-size":e.draftList.pageSize,layout:"total, prev, pager, next, jumper",total:e.draftList.total},on:{"current-change":e.handleCurrentChange}}):e._e()],1)],1)},l=[],c=a("18Nq"),u=o,d=Object(c.a)(n,i,l,!1,u,null,null);t.default=d.exports},AC9z:function(e,t){},AKa3:function(e,t,a){"use strict";function o(e){a("QkZZ")}Object.defineProperty(t,"__esModule",{value:!0});var s={data:function(){var e=this;return{dialogType:"add",bookInfo:{},centerDialogVisible:!1,volumeList:[],subData:{volumeName:"",bookName:"",bookid:""},page:1,multipleSelection:[],rules:{volumeName:[{validator:function(t,a,o){return e.$http.trim(a).length?o():o(new Error("请填写分卷名"))},trigger:"blur"}],volumeOrder:[{required:!0,type:"number",message:"卷序列号不能为空"},{type:"number",message:"序列号必须为数字"}]}}},methods:{getBookInfo:function(){var e=this;this.$ajax("/book-showBookInfo",{bookid:this.$route.params.bid},function(t){200===t.returnCode&&(e.bookInfo=t.data,e.getVolumeList())})},getVolumeList:function(){var e=this;this.$ajax("/books-getvolume",{bookId:this.$route.params.bid},function(t){200===t.returnCode&&(e.volumeList=t.data)})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){return t.subData.volumeName=t.$http.trim(t.subData.volumeName),Math.floor(t.subData.volumeOrder)<1||t.subData.volumeOrder!==Math.floor(t.subData.volumeOrder)?(t.$message({message:"序列号必须用大于0的正整数！",type:"error"}),!1):e?void("edit"===t.dialogType?t.$ajax("/books-updatevolume",t.subData,function(e){t.centerDialogVisible=!1,200===e.returnCode&&(t.getVolumeList(),t.$message({message:"修改成功",type:"success"}))}):t.$ajax("/books-getCheckVolume",{bookid:t.subData.bookid,volumeName:t.subData.volumeName},function(e){200===e.returnCode?t.$ajax("/books-addvolume",t.subData,function(e){t.centerDialogVisible=!1,200===e.returnCode&&(t.getVolumeList(),t.$message({message:"创建成功！",type:"success"}))}):t.centerDialogVisible=!1})):(t.$message({message:"请完善信息后提交！",type:"warning"}),!1)})},handleVolume:function(e,t){this.dialogType=e,this.centerDialogVisible=!0,this.subData=t||{volumeName:"",bookName:this.bookInfo.bookName,bookid:this.bookInfo.bookId,volumeOrder:this.maxOrder+1}},handleDelete:function(e){var t=this;this.$ajax("/books-deletevolume",{volumeId:e.id},function(e){200===e.returnCode&&(t.getVolumeList(),t.$message({message:"删除成功",type:"success"}))})}},created:function(){this.getBookInfo()},watch:{$route:function(){this.getVolumeList()}},computed:{maxOrder:function(){var e=[];return this.volumeList.forEach(function(t){e.push(t.volumeOrder)}),Math.max.apply(null,e)}}},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"book-volume-list-wrap"},[a("el-alert",{attrs:{title:"操作说明",type:"info",description:"分卷顺序默认按照序列号的大小依次排列，修改卷序列号时请使用连续的数字","show-icon":""}}),e._v(" "),a("el-row",{staticClass:"mbt20"},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){e.handleVolume("add")}}},[e._v("新建分卷")])],1),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.volumeList,border:""}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"40"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"id",label:"ID",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bookName","show-overflow-tooltip":!0,label:"书名",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"volumeName","show-overflow-tooltip":!0,label:"分卷名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"volumeOrder",align:"center",label:"序列号",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.handleVolume("edit",t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-dialog",{staticClass:"alertDialog",attrs:{title:"add"==e.dialogType?"新建分卷":"编辑分卷",visible:e.centerDialogVisible,top:"45vh",width:"30%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.subData,rules:e.rules}},[a("el-form-item",{attrs:{prop:"volumeName"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入分卷名"},model:{value:e.subData.volumeName,callback:function(t){e.$set(e.subData,"volumeName",t)},expression:"subData.volumeName"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"volumeOrder"}},[a("el-input",{attrs:{type:"text",disabled:"add"==e.dialogType,placeholder:"请输卷序列"},model:{value:e.subData.volumeOrder,callback:function(t){e.$set(e.subData,"volumeOrder",e._n(t))},expression:"subData.volumeOrder"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)],1)},n=[],i=a("18Nq"),l=o,c=Object(i.a)(s,r,n,!1,l,null,null);t.default=c.exports},D9hl:function(e,t){},EeEo:function(e,t,a){"use strict";function o(e){a("4Nzc")}Object.defineProperty(t,"__esModule",{value:!0});var s={data:function(){return{loading:!1,currentType:"",typeList:[],searchValue:"",tableList:[],dialogFormVisible:!1,formValue:{},completeValue:"",restaurant:[],timeout:null,dialogImageUrl:"",dialogVisible:!1,bookclassid:"",bookClassList:""}},methods:{getRecommendList:function(){var e=this;this.$ajax("/sys-getRecommendedPosition",{},function(t){200===t.returnCode&&(e.typeList=t.data,e.searchValue=0,e.search())})},getBookClass:function(){var e=this;this.$ajax("/ranking-classification",{},function(t){200===t.returnCode&&(e.bookClassList=t.data)},"get")},search:function(){var e=this;this.$ajax("/sys-getRecommendedPositionByType",{RecommendpositionTypeid:this.typeList[this.searchValue].recommendType},function(t){200===t.returnCode&&(e.tableList=7===e.typeList[e.searchValue].recommendType?t.data.reverse():t.data)})},remoteMethod:function(e){var t=this,a=this.$http.trim(e);if(a.length>0){this.loading=!0;var o={keyWord:a,isHotWorld:1,startPage:1};this.typeList[this.searchValue].recommendName.indexOf("分类推荐")>-1&&(o.bookClassificationId=this.typeList[this.searchValue].bookClassificationId),this.$ajax("/stacks-search",o,function(a){t.loading=!1,200===a.returnCode&&(a.data.list.forEach(function(e){e.value=e.bookName+" ("+e.bookId+")"}),t.restaurant=a.data.list.filter(function(t){return t.bookName.toLowerCase().indexOf(e.toLowerCase())>-1}))})}else this.restaurant=[]},handleClick:function(e,t){this.typeList[this.searchValue].bookClassificationId;this.formValue={},this.$set(this.formValue,"type",t),this.$set(this.formValue,"bookImage",e.bookImage),this.$set(this.formValue,"id",e.id),this.dialogImageUrl="",this.dialogFormVisible=!0},handleSelect:function(e){this.formValue.bookimg=e.bookImage,this.formValue.bookWriterId=e.bookWriterId,this.formValue.bookId=e.bookId},editRecommend:function(){var e=this;this.formValue.bookId?this.$ajax("/admin/updateActivityRecommendedPosition",this.formValue,function(t){e.dialogFormVisible=!1,200===t.returnCode&&(e.completeValue="",e.formValue={},e.search())}):console.log(this.formValue)},handlePictureCard:function(e){this.formValue.bookImage=e.url},submitUpload:function(){this.$refs.upload.submit()},successBack:function(e,t){this.$message(e.msg),this.search(),this.dialogFormVisible=!1}},created:function(){this.getBookClass(),this.getRecommendList()}},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"book-recommend"},[a("el-alert",{attrs:{title:"操作说明",type:"info","show-icon":""}},[a("p",[e._v("\n      请选取推荐位类型，按类型搜索需要修改的推荐位。图片轮播和右侧小图推荐位需要单独上传图片，请编辑完成后点击换图进行图片更换\n    ")]),e._v(" "),a("p",[a("span",{staticClass:"red"},[e._v("特别提示：")]),e._v("更换网站分类推荐时请添加当前分类下的书籍，否则将无法添加成功\n    ")])]),e._v(" "),a("el-row",{staticClass:"mbt20",attrs:{gutter:10}},[a("el-col",{attrs:{xs:18,sm:12,md:9,lg:6,xl:3}},[a("el-select",{attrs:{placeholder:"请选择","filter-method":e.search},on:{change:e.search},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}},e._l(e.typeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.recommendName,value:t}})}))],1),e._v(" "),a("el-button",{staticClass:"fr",on:{click:function(t){e.$clearCache()}}},[e._v("清除缓存")])],1),e._v(" "),a("el-row",[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableList,border:"",select:"row","tooltip-effect":"dark"}},[a("el-table-column",{attrs:{type:"selection",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"recommendOrder",label:"序列号",width:"60",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bookId",label:"书ID",width:"60",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bookName",label:"书名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"writerName",label:"作者"}}),e._v(" "),a("el-table-column",{attrs:{prop:"recommendName",label:"推荐类型"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"书籍封面"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticClass:"bookCover",class:5==e.row.recommendType||4==e.row.recommendType||3==e.row.recommendType?"mw-auto":"",attrs:{src:e.row.bookImage,alt:e.row.bookName}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[3==e.typeList[e.searchValue].recommendType||4==e.typeList[e.searchValue].recommendType||5==e.typeList[e.searchValue].recommendType?a("el-row",{staticClass:"mb10"},[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.handleClick(t.row,"pic")}}},[e._v("换图")])],1):e._e(),e._v(" "),a("el-row",[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.handleClick(t.row,"edit")}}},[e._v("编辑")])],1)]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"edit"==e.formValue.type?"修改推荐位":"上传图片",width:"420px","close-on-press-escape":!1,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")]),e._v(" "),"pic"==e.formValue.type?a("div",{staticClass:"cover-wrap"},[a("div",{staticClass:"cover-preview"},[a("img",{attrs:{src:e.formValue.bookImage,alt:""}})]),e._v(" "),a("el-upload",{ref:"upload",staticClass:"upload-recommend",attrs:{name:"file",data:{recommendid:e.formValue.id},"show-file-list":!1,"on-change":e.handlePictureCard,"on-success":e.successBack,action:"/api/admin/updateimgUpload","auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("上传图片")])],1)],1):a("el-form",{attrs:{"label-width":"70px"}},[a("el-form-item",{attrs:{label:"书籍名称"}},[a("el-select",{attrs:{filterable:"",remote:"",clearable:"","remote-method":e.remoteMethod,placeholder:"请输入书名",loading:e.loading},on:{change:e.handleSelect},model:{value:e.completeValue,callback:function(t){e.completeValue=t},expression:"completeValue"}},e._l(e.restaurant,function(e,t){return a("el-option",{key:e.id,attrs:{label:e.bookName,value:e}})}))],1),e._v(" "),e.formValue.recommendName&&e.formValue.recommendName.indexOf("分类推荐")>-1?a("el-form-item",{attrs:{label:"分类名称",prop:"recommendName"}},[a("el-input",{model:{value:e.formValue.recommendName,callback:function(t){e.$set(e.formValue,"recommendName",t)},expression:"formValue.recommendName"}})],1):e._e()],1),e._v(" "),"edit"==e.formValue.type?a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.editRecommend}},[e._v("确 定")])],1):e._e()],1)],1)},n=[],i=a("18Nq"),l=o,c=Object(i.a)(s,r,n,!1,l,null,null);t.default=c.exports},EqLA:function(e,t){},FdU6:function(e,t){},GTMg:function(e,t,a){"use strict";function o(e){a("FdU6")}Object.defineProperty(t,"__esModule",{value:!0});var s={},r=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},n=[],i=a("18Nq"),l=o,c=Object(i.a)(s,r,n,!1,l,null,null);t.default=c.exports},GhL6:function(e,t,a){"use strict";function o(e){a("4zb5")}Object.defineProperty(t,"__esModule",{value:!0});var s=a("405r"),r=a.n(s),n={components:{draggable:r.a},data:function(){return{checkList:[],centerDialogVisible:!1,timerList:[],cloneList:[],updateData:{},page:1,multipleSelection:[],newDrag:!0,keywords:""}},methods:{getTimerList:function(){var e=this;this.$ajax("/admin/getAdminChapterTimingRelease",{page:this.$route.params.page,searchCondition:this.keywords},function(t){200===t.returnCode&&(e.timerList=t.data)})},toggleRowSelection:function(){var e=this;this.multipleSelection.length?this.$confirm("此操作将永久删除所选章节, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.getChapterList(),e.$message({type:"success",message:"删除成功!"})}).catch(function(){e.$message({type:"info",message:"已取消删除"})}):this.$message({message:"请选取要删除的章节！",type:"warning",showClose:!0})},handleSelectionChange:function(e){this.multipleSelection=e},handleRowClick:function(e){this.$refs.multipleTable.toggleRowSelection(e)},handleClick:function(e,t){"a"===e&&this.$router.push({path:"/edit_chapter/"+t.id})},handleCurrentChange:function(e){this.page=e,this.$router.push({params:{page:e}})},bookChangeState:function(e,t){var a=this,o=t.bookCheckStatus,s=t.bookStatus;"a"===e?o=1:"b"===e?0===t.bookCheckStatus?this.$message({message:"书籍暂未审核，请先审核通过！",type:"warning"}):o=2:"c"===e?t.bookCheckStatus<=1?this.$message({message:"书籍已下架！",type:"warning"}):o=1:"d"===e&&(s=1),this.$ajax("/admin/sysbookupdate",{bookId:t.bookId,bookCheckStatus:o,bookAuthorization:t.bookAuthorization,bookStatus:s},function(e){200===e.returnCode&&(a.$message(e.msg),a.getBookList())})}},created:function(){this.getTimerList()},watch:{$route:function(){this.getTimerList()}},computed:{nowTime:function(){var e=(new Date).getTime();return this.$ajax("/sys-getNetWorkDateTime","",function(t){200===t.returnCode&&(e=t.data.beijing)},"get"),e}}},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin-book-wrap"},[a("el-breadcrumb",{staticClass:"mbt20",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("书籍管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("草稿箱列表")])],1),e._v(" "),a("el-alert",{attrs:{title:"操作说明",type:"info","show-icon":""}},[a("div",[a("p",[e._v("\n        此表是本站全部定时章节，您可通过ID进行批量管理\n      ")])])]),e._v(" "),a("el-row",{staticClass:"mbt20"},[a("el-button",{attrs:{type:"danger",plain:""},on:{click:e.toggleRowSelection}},[e._v("批量删除")])],1),e._v(" "),a("el-row",{staticClass:"mbt20"},[a("el-col",{attrs:{xs:20,sm:16,md:12,lg:9,xl:6}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入书籍id或者书籍名称"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.getTimerList(t):null}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getTimerList},slot:"append"})],1)],1)],1),e._v(" "),a("el-row",[a("div",{staticClass:"table-wrap"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.timerList.list,"tooltip-effect":"dark",border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",width:"100",label:"章节ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bookTitle",label:"书名"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            (id:"+e._s(t.row.bookId)+")"+e._s(t.row.bookTitle)+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"chapterTitle",label:"章节名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"chapterIsvip",label:"VIP状态",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.chapterIsvip?a("span",{staticClass:"red"},[e._v("VIP")]):a("span",{staticClass:"green"},[e._v("普通")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"chapterState",width:"80",label:"审核状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.chapterState?a("span",{staticClass:"red"},[e._v("未审核")]):a("span",{staticClass:"green"},[e._v("已审核")])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"140",label:"发布时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("time")(t.row.releaseTime,"long"))+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"chapterLength",width:"100",align:"center",label:"字数"}}),e._v(" "),a("el-table-column",{attrs:{width:"80",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",{attrs:{trigger:"click",placement:"bottom"},on:{command:function(a){e.handleClick(a,t.row)}}},[a("a",{attrs:{href:"javascript:0;"}},[e._v("更多菜单")]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"a"}},[e._v("编辑")]),e._v(" "),a("el-dropdown-item",{attrs:{command:"b"}},[e._v("审核")]),e._v(" "),a("el-dropdown-item",{staticClass:"danger",attrs:{command:"c"}},[e._v("删除")])],1)],1)]}}])})],1)],1),e._v(" "),e.timerList.list&&e.timerList.total>e.timerList.pageSize?a("el-pagination",{staticClass:"mbt20",attrs:{"current-page":Number(e.$route.params.page),"page-size":e.timerList.pageSize,layout:"total, prev, pager, next, jumper",total:e.timerList.total},on:{"current-change":e.handleCurrentChange}}):e._e()],1)],1)},l=[],c=a("18Nq"),u=o,d=Object(c.a)(n,i,l,!1,u,null,null);t.default=d.exports},GwdR:function(e,t,a){"use strict";function o(e){a("SAqg")}Object.defineProperty(t,"__esModule",{value:!0});var s=a("3cXf"),r=a.n(s),n={data:function(){var e=this;return{fullLoading:!1,activeName:"base",reloading:!0,baseData:{},userList:[],selectValue:{},bookDetail:{bookName:"",writerName:"",bookWriterId:"",bookClassificationId:null,bookLabId:[],bookAuthorization:null,bookIntroduction:""},rules1:{bookName:[{required:!0,validator:function(t,a,o){var s=e.$http.trim(a);return s.length<1?o(new Error("作品名称不能为空")):/^[a-zA-Z0-9\u4e00-\u9fa5:：]{1,20}$/.test(s)?void e.$ajax("/book-checkName",{bookName:s},function(e){200!==e.returnCode?o(new Error("作品名称已存在，请重新填写")):o()}):(o(new Error("书籍名称只能包含中文、数字、字母和冒号")),!1)},message:"请输入书名",trigger:"blur"}],writerName:[{required:!0,message:"请填写作者",trigger:"blur"}],bookClassificationId:[{required:!0,type:"number",message:"请选择作品分类",trigger:"change"}],bookLabId:[{type:"array",required:!0,message:"至少选取2个标签",trigger:"change"},{type:"array",min:2,max:5,message:"请选择2-5个标签",trigger:"change"}],bookAuthorization:[{required:!0,type:"number",message:"请选择发布状态",trigger:"change"}],bookIntroduction:[{required:!0,message:"请填写作品简介",trigger:"blur"},{min:1,max:400,message:"长度在 1 到 400 个字符",trigger:"blur"}]}}},methods:{onSubmit:function(e){var t=this;this.fullLoading=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});var a=JSON.parse(r()(this.bookDetail));a.bookLabId=a.bookLabId.toString(),a.bookIntroduction=this.$http.trim(a.bookIntroduction).replace(/\s*\n+\s*/g,"\n"),this.$refs[e].validate(function(e){e?t.$ajax("/admin/addBookInfo",a,function(e){t.$nextTick(function(){t.fullLoading.close()}),200===e.returnCode&&t.$confirm("创建成功, 可直接发布章节！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$router.push({path:"/add_new_chapter/"+e.data})})}):(t.$nextTick(function(){t.fullLoading.close()}),t.$message({message:"请完善信息后提交！",type:"warning"}))})},remoteMethod:function(e){var t=this;""!==e?(this.reloading=!0,this.$ajax("/getAuthorIdByAuthorName",{key:this.$http.trim(e)},function(a){200===a.returnCode&&(t.reloading=!1,t.userList=a.data.filter(function(t){return t.pseudonym.toLowerCase().indexOf(e.toLowerCase())>-1}))})):this.userList=[]},getBaseInfo:function(){var e=this;this.$ajax("/book-EditBookEcho","",function(t){200===t.returnCode&&(e.baseData=t.data)},"get")},getBookDetail:function(){var e=this;this.$ajax("/book-showBookInfo",{bookid:this.$route.params.bid},function(t){200===t.returnCode&&(t.data.bookLabId=function(){var e=[];return t.data.bookLabId.split(",").forEach(function(t){e.push(parseInt(t))}),e}(),t.data.bookClassificationId=parseInt(t.data.bookClassificationId),e.bookDetail=t.data)})}},created:function(){this.getBaseInfo()},watch:{"bookDetail.bookIntroduction":function(e){this.bookDetail.bookIntroduction=e.replace(/\s*\n+\s*/g,"\n\n")},selectValue:function(e){e.name&&(this.bookDetail.writerName=e.name,this.bookDetail.bookWriterId=e.id)}}},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add-new-book-wrap"},[a("el-breadcrumb",{staticClass:"mbt20",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("书籍管理")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:"/book/list"}},[e._v("书籍列表")]),e._v(" "),a("el-breadcrumb-item",[e._v("新建书籍")])],1),e._v(" "),a("el-alert",{attrs:{title:"操作说明",type:"info","show-icon":""}},[a("div",[e._v("\n      新建书籍的作者必需已经存在，否则无法创建新书；书籍标签至少2个，最多不超过5个;且书籍简介不可超过字数上限\n    ")])]),e._v(" "),a("el-form",{ref:"detailForm1",staticClass:"mbt20",attrs:{rules:e.rules1,model:e.bookDetail,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"书籍名称",prop:"bookName"}},[a("el-col",{attrs:{xs:20,sm:16,md:12,lg:9,xl:4}},[a("el-input",{model:{value:e.bookDetail.bookName,callback:function(t){e.$set(e.bookDetail,"bookName",t)},expression:"bookDetail.bookName"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"作者笔名",prop:"writerName"}},[a("el-col",{attrs:{xs:20,sm:16,md:12,lg:9,xl:4}},[a("el-select",{attrs:{filterable:"",remote:"",loading:e.reloading,"remote-method":e.remoteMethod,placeholder:"请选择"},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}},e._l(e.userList,function(t){return a("el-option",{key:t.userId,attrs:{label:t.pseudonym,value:{id:t.userId,name:t.pseudonym}}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.pseudonym)+"("+e._s(t.userId)+")")])])}))],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"作品分类",prop:"bookClassificationId"}},[a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.bookDetail.bookClassificationId,callback:function(t){e.$set(e.bookDetail,"bookClassificationId",t)},expression:"bookDetail.bookClassificationId"}},e._l(e.baseData.classificationList,function(e,t){return a("el-option",{key:t,attrs:{label:e.classificationName,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"书籍标签",prop:"bookLabId"}},[a("el-checkbox-group",{model:{value:e.bookDetail.bookLabId,callback:function(t){e.$set(e.bookDetail,"bookLabId",t)},expression:"bookDetail.bookLabId"}},e._l(e.baseData.booklablesList,function(t,o){return a("el-checkbox",{key:o,attrs:{label:t.id,name:"bookLabId"}},[e._v(e._s(t.bookLableName))])}))],1),e._v(" "),a("el-form-item",{attrs:{label:"发布状态",prop:"bookAuthorization"}},[a("el-radio-group",{model:{value:e.bookDetail.bookAuthorization,callback:function(t){e.$set(e.bookDetail,"bookAuthorization",t)},expression:"bookDetail.bookAuthorization"}},[a("el-radio",{attrs:{label:0}},[e._v("网站首发")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("授权发布")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"作品简介",prop:"bookIntroduction"}},[a("el-input",{staticClass:"book-intro",attrs:{type:"textarea"},model:{value:e.bookDetail.bookIntroduction,callback:function(t){e.$set(e.bookDetail,"bookIntroduction",t)},expression:"bookDetail.bookIntroduction"}}),e._v(" "),a("span",{staticClass:"fr"},[e._v(e._s(e.bookDetail.bookIntroduction.length)+"/400")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onSubmit("detailForm1")}}},[e._v("\n        保存提交\n      ")])],1)],1)],1)},l=[],c=a("18Nq"),u=o,d=Object(c.a)(n,i,l,!1,u,null,null);t.default=d.exports},HlXq:function(e,t,a){"use strict";function o(e){a("VkQR")}Object.defineProperty(t,"__esModule",{value:!0});var s={data:function(){return{ruleForm:{adminName:"",title:"",menuId:"",delivery:!1,type:[],order:1,content:""},editorOption:{modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],[{color:[]},{background:[]}],[{align:[]}],["clean"],["link","image"]]},keyboard:{bindings:{tab:{key:9,handler:function(e){}},custom:{key:"B",shiftKey:!0,handler:function(e,t){}}}}},editKey:null,layedit:null,rules:{menuId:{required:!0,message:"请选取类型",trigger:"blur"},title:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:3,message:"长度不可少于3个字符",trigger:"blur"}],adminName:[{required:!0,message:"请填写发布人",trigger:"blur"}],type:[{type:"array",required:!0,message:"请至少选择一个活动性质",trigger:"change"}],content:[{required:!0,message:"请填写活动形式",trigger:"blur"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){var a="/admin/addPublishanotice";if("sysEditNotice"===t.$route.name&&(a="/admin/updatePublishanotice"),!e)return t.$message({message:"请完善信息后提交！",type:"warning"}),!1;t.$ajax(a,t.ruleForm,function(e){200===e.returnCode&&(t.$message({message:e.msg,type:"success"}),"sysEditNotice"===t.$route.name&&t.getNoticeById())})})},getNoticeById:function(){var e=this;this.$ajax("/admin/sys-getNoticeById",{noticeid:this.$route.params.id},function(t){200===t.returnCode&&(delete t.data.releaseDate,e.ruleForm=t.data)},"get")},resetForm:function(){this.getNoticeById()},onEditorChange:function(e,t,a){},onEditorReady:function(e){}},created:function(){"sysEditNotice"===this.$route.name&&this.getNoticeById()}},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sys-notice-wrap"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:"/system/notice"}},[e._v("新闻公告")]),e._v(" "),a("el-breadcrumb-item",[e._v(e._s("sysEditNotice"==e.$route.name?"编辑公告":"新增公告"))])],1),e._v(" "),a("el-alert",{attrs:{title:"操作说明",type:"info","show-icon":""}},[a("div",[e._v("\n      可根据需求添加相应类型的公告通知\n    ")])]),e._v(" "),a("el-row",{staticClass:"mbt20"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"所属类型",prop:"region"}},[a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.ruleForm.menuId,callback:function(t){e.$set(e.ruleForm,"menuId",t)},expression:"ruleForm.menuId"}},[a("el-option",{attrs:{label:"首页公告",value:1}}),e._v(" "),a("el-option",{attrs:{label:"滚动公告",value:2}}),e._v(" "),a("el-option",{attrs:{label:"福利公告",value:3}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"标    题",prop:"title"}},[a("el-input",{model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"发布人",prop:"adminName"}},[a("el-input",{model:{value:e.ruleForm.adminName,callback:function(t){e.$set(e.ruleForm,"adminName",t)},expression:"ruleForm.adminName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"内容详情",prop:"content"}},[a("pre",[e._v("         "),a("quill-editor",{ref:"myTextEditor",attrs:{options:e.editorOption},on:{change:function(t){e.onEditorChange(t)},ready:function(t){e.onEditorReady(t)}},model:{value:e.ruleForm.content,callback:function(t){e.$set(e.ruleForm,"content",t)},expression:"ruleForm.content"}},[e._v("\n         ")]),e._v("\n       ")],1)]),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("立即创建")])],1)],1)],1)],1)},n=[],i=a("18Nq"),l=o,c=Object(i.a)(s,r,n,!1,l,null,null);t.default=c.exports},"I/+l":function(e,t,a){"use strict";function o(e){a("kdLm")}Object.defineProperty(t,"__esModule",{value:!0});var s={},r=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},n=[],i=a("18Nq"),l=o,c=Object(i.a)(s,r,n,!1,l,null,null);t.default=c.exports},I3pU:function(e,t){},I6C7:function(e,t,a){"use strict";function o(e){a("awcr")}Object.defineProperty(t,"__esModule",{value:!0});var s={},r=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},n=[],i=a("18Nq"),l=o,c=Object(i.a)(s,r,n,!1,l,null,null);t.default=c.exports},IPyH:function(e,t){},"Is/Q":function(e,t){},IznL:function(e,t,a){"use strict";function o(e){a("YSag")}Object.defineProperty(t,"__esModule",{value:!0});var s={data:function(){return{searchForm:{},bookCommentList:{},keywords:"",selectType:"",multipleSelection:[]}},methods:{getBookCommentList:function(){var e=this;if(this.searchForm={},this.searchForm.page=this.$route.params.page,this.selectType){if(("bookId"===this.selectType||"userId"===this.selectType)&&!Number(this.keywords))return this.$message({message:"ID必需为数字",type:"warning"}),!1;this.searchForm[this.selectType]=this.keywords}this.$ajax("/admin/bookCommentList",this.searchForm,function(t){200===t.returnCode?e.bookCommentList=t.data:t.data||(e.bookCommentList={})})},searchBookCom:function(){1===Number(this.$route.params.page)?this.getBookCommentList():this.$router.push({params:{page:1}})},handleCurrentChange:function(e){this.$router.push({params:{page:e}})},handleRowClick:function(e){this.$refs.multipleTable.toggleRowSelection(e)},toggleSelection:function(e,t){var a=this,o=[];if(t)"book"===e?o.push(t.bookId):o.push(t.userId);else{if(!this.multipleSelection.length)return this.$message({message:"请选取要删除的内容",type:"warning"}),!1;this.multipleSelection.forEach(function(e){o.push(e.id)})}!function(){var s=0,r=void 0;"book"===e?(s=2,r='此操作将永久删除书籍<span class="red">'+t.bookName+"</span>的全部评论, 是否继续?"):"user"===e?(s=3,r='此操作将永久删除用户<span class="red">'+t.userName+"</span>的全部评论, 是否继续?"):(r="此操作将永久删除"+o.length+"条评论, 是否继续?",s=o.length>1?1:0),a.$confirm(r,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",dangerouslyUseHTMLString:!0,type:"warning"}).then(function(){a.$ajax("/comm-delcomminfo",{id:o.toString(),type:s},function(e){200===e.returnCode&&(a.$message({message:"删除成功",type:"success"}),a.getBookCommentList())})})}()},handleSelectionChange:function(e){this.multipleSelection=e}},created:function(){this.getBookCommentList()},watch:{$route:function(){this.getBookCommentList()}}},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"reply-comment-wrap"},[a("el-alert",{attrs:{title:"操作说明",type:"info","show-icon":""}},[a("div",[a("p",[e._v("此表为本站全部书籍评论，您可以通过相应评论ID来批量管理；通过内容可以模糊搜索，其他类型均为精确搜索")])])]),e._v(" "),a("el-row",{staticClass:"mbt20"},[e.$store.state.userInfo&&e.$store.state.userInfo.adminRolemenuanduserrole.deletes?a("el-button",{attrs:{type:"danger",plain:""},on:{click:function(t){e.toggleSelection()}}},[e._v("批量删除")]):e._e()],1),e._v(" "),a("el-row",{staticClass:"mbt20"},[a("el-col",{attrs:{xs:20,sm:16,md:12,lg:9,xl:6}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchBookCom(t):null}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}},[a("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.selectType,callback:function(t){e.selectType=t},expression:"selectType"}},[a("el-option",{attrs:{label:"内  容",value:"commentContext"}}),e._v(" "),a("el-option",{attrs:{label:"书  名",value:"bookName"}}),e._v(" "),a("el-option",{attrs:{label:"昵  称",value:"userName"}}),e._v(" "),a("el-option",{attrs:{label:"用户ID",value:"userId"}}),e._v(" "),a("el-option",{attrs:{label:"书籍ID",value:"bookId"}}),e._v(" "),a("el-option",{attrs:{label:"用户IP",value:"userAddressIP"}})],1),e._v(" "),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchBookCom},slot:"append"})],1)],1)],1),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.bookCommentList.list,border:""},on:{"row-click":e.handleRowClick,"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{multiplition:"",type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",width:"80",align:"center",label:"ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bookName",minWidth:"100",label:"书名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bookId",width:"80",align:"center",label:"书籍ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userId",width:"80",align:"center",label:"用户ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"用户昵称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userAddressIP",label:"用户IP"}}),e._v(" "),a("el-table-column",{attrs:{label:"时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("time")(t.row.commentDateTime,"long")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"commentContext",minWidth:"280",label:"内容"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"context",domProps:{innerHTML:e._s(t.row.commentContext)}})]}}])}),e._v(" "),e.$store.state.userInfo&&e.$store.state.userInfo.adminRolemenuanduserrole.updates?a("el-table-column",{attrs:{label:"删除评论"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{staticClass:"red",attrs:{href:"javascript:0;"},on:{click:function(a){e.toggleSelection("book",t.row)}}},[e._v("全书")]),e._v(" "),a("a",{staticClass:"red",attrs:{href:"javascript:0;"},on:{click:function(a){e.toggleSelection("user",t.row)}}},[e._v("用户")])]}}])}):e._e()],1),e._v(" "),a("el-pagination",{staticClass:"mbt20",attrs:{background:"","current-page":e.bookCommentList.pageNum,"page-size":e.bookCommentList.pageSize,layout:"total, prev, pager, next, jumper",total:e.bookCommentList.total},on:{"current-change":e.handleCurrentChange}})],1)},n=[],i=a("18Nq"),l=o,c=Object(i.a)(s,r,n,!1,l,null,null);t.default=c.exports},J373:function(e,t){},JVWg:function(e,t){},K31e:function(e,t,a){"use strict";function o(e){a("dl53")}Object.defineProperty(t,"__esModule",{value:!0});var s=a("3cXf"),r=a.n(s),n={data:function(){var e=this,t=function(e,t,a){return t?a():a(new Error("用户名不能为空"))},a=function(t,a,o){e.$http.trim(a).length?o():o(new Error("请输入密码"))};return{whaleHeight:document.documentElement.clientHeight||document.body.clientHeight,visible:!0,ruleForm2:{adminPassword:"",adminName:""},rules2:{adminPassword:[{validator:a,trigger:"blur"}],adminName:[{validator:t,trigger:"blur"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message({message:"请完善用户名和密码",type:"warning"}),!1;t.$loading({lock:!0,text:"正在登陆中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});t.$ajax("/admin-Logins",t.ruleForm2,function(e){t.$loading().close(),200===e.returnCode&&(t.$message({message:"登录成功",type:"success"}),t.$store.state.userInfo=e.data,t.$cookie("login_key",e.data.adminInfo.userId),sessionStorage.setItem("user_info",r()(e.data)),t.$router.push("/index"))},"post","json")})},resetForm:function(e){this.$refs[e].resetFields()}}},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-wrap"},[a("div",{style:{height:e.whaleHeight+"px"},attrs:{id:"whale"}}),e._v(" "),a("el-dialog",{attrs:{"custom-class":"login-dialog",title:"登录","close-on-click-modal":!1,"show-close":!1,modal:!1,visible:e.visible,width:"380px"},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{ref:"ruleForm2",staticClass:"login-ruleForm",attrs:{model:e.ruleForm2,"status-icon":"",rules:e.rules2,"label-width":"60px"}},[a("el-form-item",{staticClass:"border",attrs:{label:"用户名",prop:"adminName"}},[a("el-input",{attrs:{type:"text","auto-complete":"off"},model:{value:e.ruleForm2.adminName,callback:function(t){e.$set(e.ruleForm2,"adminName",t)},expression:"ruleForm2.adminName"}})],1),e._v(" "),a("el-form-item",{staticClass:"border",attrs:{label:"密  码",prop:"adminPassword"}},[a("el-input",{attrs:{type:"password","auto-complete":"off"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.submitForm("ruleForm2")}},model:{value:e.ruleForm2.adminPassword,callback:function(t){e.$set(e.ruleForm2,"adminPassword",t)},expression:"ruleForm2.adminPassword"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm2")}}},[e._v("登陆")])],1)],1)],1)},l=[],c=a("18Nq"),u=o,d=Object(c.a)(n,i,l,!1,u,null,null);t.default=d.exports},K7Ud:function(e,t){},KjuX:function(e,t){},LTh0:function(e,t){},Lz4X:function(e,t,a){"use strict";function o(e){a("T4Ha")}Object.defineProperty(t,"__esModule",{value:!0});var s={data:function(){return{noticeType:[{name:"首页公告",value:1},{name:"滚动公告",value:2},{name:"福利公告",value:3}],currentType:1,tableList:{}}},methods:{getNotice:function(){var e=this;this.$ajax("/admin/sys-getNotice",{menuId:this.currentType,page:this.$route.params.page},function(t){200===t.returnCode&&(e.tableList=t.data)},"get")},delNotice:function(e){var t=this;this.$confirm("此操作将永久删除该公告, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$ajax("/admin/sys-deleteNotice",{id:e},function(e){200===e.returnCode&&(t.$message({message:"删除成功",type:"success"}),t.getNotice())})})},handleClick:function(e){this.$router.push({path:"/system/edit_notice/"+e.id})}},created:function(){this.getNotice()},mounted:function(){},watch:{currentType:function(e){this.getNotice()}}},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sys-notice-wrap"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:"/system/notice"}},[e._v("新闻公告")]),e._v(" "),a("el-breadcrumb-item",[e._v("公告列表")])],1),e._v(" "),a("el-alert",{attrs:{title:"操作说明",type:"info",description:"请选取推荐位类型，按类型搜索需要修改的推荐位。图片轮播和右侧小图推荐位需要单独上传图片，请编辑完成后点击换图进行图片更换","show-icon":""}},[a("div",[a("p",[e._v("\n        此表包括网站、APP所有公告通知，当新增完所有公告后请使用\n        "),a("a",{attrs:{href:"javascript:0;"},on:{click:function(t){e.$clearCache()}}},[e._v("清除缓存")]),e._v("\n        使网站首页公告列表立即更新\n      ")])])]),e._v(" "),a("el-row",{staticClass:"mbt20"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.$router.push({path:"/system/add_notice"})}}},[e._v("添加")]),e._v(" "),a("el-button",{staticClass:"fr",attrs:{type:"primary"},on:{click:function(t){e.$clearCache()}}},[e._v("清除缓存")])],1),e._v(" "),a("el-row",{staticClass:"mbt20",attrs:{gutter:10}},[a("el-col",{attrs:{xs:18,sm:12,md:9,lg:6,xl:3}},[a("el-select",{attrs:{placeholder:"请选择类型"},model:{value:e.currentType,callback:function(t){e.currentType=t},expression:"currentType"}},e._l(e.noticeType,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.value}})}))],1)],1),e._v(" "),a("el-row",{staticClass:"mbt20"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableList.list,border:"",select:"row","tooltip-effect":"dark"}},[a("el-table-column",{attrs:{type:"selection",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"60",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"menuName",label:"类型",width:"82",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"标题"}}),e._v(" "),a("el-table-column",{attrs:{prop:"adminName",label:"发布者"}}),e._v(" "),a("el-table-column",{attrs:{label:"时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(e._f("time")(t.row.releaseDate,"long")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"60",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{attrs:{href:"javascript:0;"},on:{click:function(a){e.handleClick(t.row,"edit")}}},[e._v("编辑")]),e._v(" "),a("a",{staticClass:"red",attrs:{href:"javascript:0;"},on:{click:function(a){e.delNotice(t.row.id)}}},[e._v("删除")])]}}])})],1)],1)],1)},n=[],i=a("18Nq"),l=o,c=Object(i.a)(s,r,n,!1,l,null,null);t.default=c.exports},N8tl:function(e,t,a){"use strict";function o(e){a("Rq2q")}Object.defineProperty(t,"__esModule",{value:!0});var s=a("3cXf"),r=a.n(s),n=a("405r"),i=a.n(n),l={components:{draggable:i.a},data:function(){return{checkList:[],centerDialogVisible:!1,chapterList:[],cloneList:[],updateData:{},page:1,multipleSelection:[],newDrag:!0,bookInfo:{},$routeParams:""}},methods:{getChapterList:function(){var e=this;this.$ajax("/books-adminChapterList/"+this.$route.params.bid,"",function(t){var a=[];200===t.returnCode&&(t.data.reverse().forEach(function(e){e.resultList.length>0&&(a=a.concat(e.resultList))}),e.chapterList=a)},"get")},getBookInfo:function(){var e=this;this.$ajax("/book-showBookInfo",{bookid:this.$route.params.bid},function(t){200===t.returnCode&&(e.bookInfo=t.data)})},dragState:function(e){var t=e.draggedContext,a=this.cloneList[t.index].volumeId===this.cloneList[t.futureIndex].volumeId&&!this.cloneList[t.index].whetherPublic;return a||this.newDrag&&(this.cloneList[t.index].whetherPublic||this.$message({message:"不同分卷不可调整顺序！",type:"warning",showClose:!0}),this.newDrag=!1),a},dragStart:function(e){if(this.cloneList=JSON.parse(r()(this.chapterList)),this.newDrag=!0,this.cloneList[e.oldIndex].whetherPublic)return this.$message({message:"草稿箱内容不可调序",type:"warning",showClose:!0}),!1},dragEnd:function(e){var t=this,a=this.cloneList[e.oldIndex],o=this.cloneList[e.newIndex];this.$myLoad(),this.$ajax("/sys-chapteOrderUpdate",{startNum:a.chapterOrder,endNum:o.chapterOrder,bookid:a.bookId,volumeid:a.volumeId,startChapterid:a.id},function(e){t.$loading().close(),200===e.returnCode&&(t.getChapterList(),t.$message({message:"调整成功",type:"success",duration:2e3,showClose:!0}))})},toggleRowSelection:function(){var e=this,t=[];this.chapterList.forEach(function(e){e.check&&t.push(e.id)}),t.length?this.$confirm("此操作将永久删除所选的 "+t.length+" 个章节, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$ajax("/admin/deletechapter",{chapterid:t.toString()},function(t){200===t.returnCode&&(e.$message({message:"删除成功",type:"success"}),e.getChapterList())})}).catch(function(){e.$message({type:"info",message:"已取消删除"})}):this.$message({message:"请选取要删除的章节！",type:"warning",showClose:!0})},selected:function(e){var t=this.chapterList[e];t.check?this.$set(t,"check",!1):this.$set(t,"check",!0)},selectAll:function(e){var t=this;e?this.chapterList.forEach(function(e){t.$set(e,"check",!0)}):this.chapterList.forEach(function(e){t.$set(e,"check",!1)})},handleSelectionChange:function(e){this.multipleSelection=e},handleRowClick:function(e){this.$refs.multipleTable.toggleRowSelection(e)},handleClick:function(e,t){"a"===e&&this.$router.push({path:"/edit_chapter/"+t.id})},handleCurrentChange:function(e){this.page=e,this.$router.push({params:{page:e}})},bookChangeState:function(e,t){var a=this,o=t.bookCheckStatus,s=t.bookStatus;"a"===e?o=1:"b"===e?0===t.bookCheckStatus?this.$message({message:"书籍暂未审核，请先审核通过！",type:"warning"}):o=2:"c"===e?t.bookCheckStatus<=1?this.$message({message:"书籍已下架！",type:"warning"}):o=1:"d"===e&&(s=1),this.$ajax("/admin/sysbookupdate",{bookId:t.bookId,bookCheckStatus:o,bookAuthorization:t.bookAuthorization,bookStatus:s},function(e){200===e.returnCode&&(a.$message(e.msg),a.getBookList())})}},created:function(){this.getBookInfo(),this.getChapterList()},watch:{$route:function(){this.getChapterList()}},computed:{nowTime:function(){var e=(new Date).getTime();return this.$ajax("/sys-getNetWorkDateTime","",function(t){200===t.returnCode&&(e=t.data.beijing)},"get"),e},authority:function(){return this.$store.state.userInfo.adminRolemenuanduserrole?this.$store.state.userInfo.adminRolemenuanduserrole:{}}},filters:{checkState:function(e){}}},c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin-book-wrap"},[a("el-breadcrumb",{staticClass:"mbt20",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("书籍管理")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:"/book/list"}},[e._v("书籍列表")]),e._v(" "),a("el-breadcrumb-item",[e._v("章节列表")])],1),e._v(" "),a("el-alert",{attrs:{title:"操作说明",type:"info","show-icon":""}},[a("div",[a("p",[e._v("此表为 "),a("span",{staticClass:"blue"},[e._v("《"+e._s(e.bookInfo.bookName)+"》")]),e._v("的全部章节列表")]),e._v(" "),a("p",[e._v("\n                操作：通过拖拽可以直接进行卷内章节调序，不同分卷之间章节不可调序；需要修改分卷名或调整分卷顺序请进入\n                "),e.authority.adds?a("router-link",{staticClass:"red",attrs:{to:{name:"bookVolumeList"}}},[e._v("分卷管理")]):e._e()],1),e._v(" "),a("p",[a("span",{staticClass:"red"},[e._v("注意事项：")]),e._v(" "),a("i",{staticClass:"el-icon-edit danger"}),e._v("表示草稿,草稿箱内容不可调序；\n                "),a("i",{staticClass:"el-icon-time danger"}),e._v("表示定时发布，超过当前服务器时间的章节内容会被自动发布；也可以直接\n                "),e.authority.adds?a("router-link",{staticClass:"red",attrs:{to:"/add_new_chapter/"+e.$route.params.bid}},[e._v("新建章节")]):e._e()],1)])]),e._v(" "),a("el-row",{staticClass:"mbt20"},[e.authority.deletes?a("el-button",{attrs:{type:"danger",plain:""},on:{click:e.toggleRowSelection}},[e._v("批量删除")]):e._e()],1),e._v(" "),a("el-row",[a("div",{staticClass:"table-wrap"},[a("table",{staticClass:"chapter-list",attrs:{border:"0",cellspacing:"10",cellpadding:"0",width:"100%"}},[a("thead",[a("tr",[a("th",[a("el-checkbox",{on:{change:e.selectAll}})],1),e._v(" "),a("th",[e._v("ID")]),e._v(" "),a("th",[e._v("分卷")]),e._v(" "),a("th",{attrs:{align:"left"}},[e._v("章节名")]),e._v(" "),a("th",[e._v("VIP状态")]),e._v(" "),a("th",[e._v("全部")]),e._v(" "),a("th",[e._v("发布时间")]),e._v(" "),a("th",[e._v("字数")]),e._v(" "),a("th",[e._v("操作")])])]),e._v(" "),a("draggable",{attrs:{options:{draggable:".drag-item"},element:"tbody",move:e.dragState},on:{start:e.dragStart,update:e.dragEnd},model:{value:e.chapterList,callback:function(t){e.chapterList=t},expression:"chapterList"}},e._l(e.chapterList,function(t,o){return a("tr",{key:t.id,staticClass:"drag-item",on:{click:function(t){e.selected(o)}}},[a("td",[a("el-checkbox",{model:{value:t.check,callback:function(a){e.$set(t,"check",a)},expression:"item.check"}})],1),e._v(" "),a("td",[e._v(e._s(t.id))]),e._v(" "),a("td",[e._v(e._s(t.volumeName))]),e._v(" "),a("td",{attrs:{align:"left"}},[e._v("\n                            "+e._s(t.chapterTitle)+"\n                            "),t.whetherPublic?a("i",{staticClass:"el-icon-edit danger"}):e.nowTime<t.releaseTime?a("i",{staticClass:"el-icon-time danger"}):e._e()]),e._v(" "),a("td",[t.chapterIsvip?a("span",{staticClass:"danger"},[e._v("VIP")]):a("span",{staticClass:"safe"},[e._v("普通")])]),e._v(" "),a("td",[t.chapterState?a("span",{staticClass:"danger"},[e._v("未审核")]):a("span",{staticClass:"safe"},[e._v("已审核")])]),e._v(" "),a("td",[e._v("\n                            "+e._s(e._f("time")(t.releaseTime,"long"))+"\n                        ")]),e._v(" "),a("td",[e._v(e._s(t.chapterLength))]),e._v(" "),a("td",[a("router-link",{staticClass:"blue",attrs:{target:"_blank",to:"/edit_chapter/"+t.id}},[e._v("编辑")])],1)])}))],1)]),e._v(" "),e.chapterList.length?a("el-pagination",{staticClass:"mbt20",attrs:{"current-page":e.page,"page-size":100,layout:"total, prev, pager, next, jumper",total:e.chapterList.length},on:{"current-change":e.handleCurrentChange}}):e._e()],1)],1)},u=[],d=a("18Nq"),m=o,p=Object(d.a)(l,c,u,!1,m,null,null);t.default=p.exports},NHnr:function(e,t,a){"use strict";function o(e){a("3en8")}function s(){return Y.get("/admin/getSensitiveWords").then(function(e){return e.data})}function r(e){return Y.get("/admin/addSensitiveWords",{params:e}).then(function(e){return e.data})}function n(){return Y.get("/admin/getChapterSensitiveWords").then(function(e){return e.data})}function i(e){return Y.get("/book-EditBookEcho",e).then(function(e){return e.data})}function l(e){return Y.post("/book-showBookInfo",e).then(function(e){return e.data})}function c(e){return Y.post("/admin/getBookDataView",e).then(function(e){return e.data})}function u(e){return Y.post("/admin/sysbookupdate",e).then(function(e){return e.data})}function d(){return Y.get("/sys-getDataPosition").then(function(e){return e.data})}function m(e){return Y.post("/generateMonthlyreport",e).then(function(e){return e.data})}function p(){return Y.get("/person-message").then(function(e){return e})}function h(e){return Y.post("/admin-isLogin",e).then(function(e){return e.data})}function f(){return Y.post("/admin/getControlPanel").then(function(e){return e.data})}function b(){return Y.get("/admin/getSiteaccessrecordsInfo").then(function(e){return e.data})}function g(e){return Y.post("/admin/getUserList",e).then(function(e){return e.data})}function v(e){return Y.post("/stacks-search",e).then(function(e){return e.data})}function k(e){return Y.post("/admin/getBookInfoList",e).then(function(e){return e.data})}function y(e){return Y.post("/ChapterZipDownload",e).then(function(e){return e.data})}function _(e){return Y.post("/admin/chapterContentImport",e).then(function(e){return e.data})}Object.defineProperty(t,"__esModule",{value:!0});var w={};a.d(w,"getSensitiveWords",function(){return s}),a.d(w,"changeSensitiveWords",function(){return r}),a.d(w,"getChapterSensitiveWords",function(){return n}),a.d(w,"book_EditBookEcho",function(){return i}),a.d(w,"book_showBookInfo",function(){return l}),a.d(w,"getBookDataView",function(){return c}),a.d(w,"sysBookUpdate",function(){return u}),a.d(w,"getDataPosition",function(){return d}),a.d(w,"generateMonthlyreport",function(){return m}),a.d(w,"getPersonMmessage",function(){return p}),a.d(w,"isLogin",function(){return h}),a.d(w,"getControlPanel",function(){return f}),a.d(w,"getSiteaccessrecordsInfo",function(){return b}),a.d(w,"getUserList",function(){return g}),a.d(w,"stacksSearch",function(){return v}),a.d(w,"getbookInfoList",function(){return k}),a.d(w,"chapterZipDownload",function(){return y}),a.d(w,"chapterContentImport",function(){return _});var C=a("MVMM"),x=a("3cXf"),I=a.n(x),$=(a("J373"),a("Z7az"),{name:"App",data:function(){return{sideNavList:[]}},methods:{getNavList:function(){var e=this,t=function(){var t=JSON.parse(sessionStorage.getItem("user_info")),a=JSON.parse(I()(t.roleMenuList)),o=[];e.$store.state.userInfo=t,a.forEach(function(e,t){0===e.pid&&(a[t].show=!1,o.push(e))}),o.forEach(function(e){a.forEach(function(t){e.id===t.pid&&(e.ChildMenu||(e.ChildMenu=[]),e.ChildMenu.push(t))})}),e.sideNavList=o};sessionStorage.getItem("user_info")?t():this.$ajax("/admin-RefreshRoleMenu","",function(a){200===a.returnCode?(sessionStorage.setItem("user_info",I()(a.data)),t()):(e.$cookie("login_key","",-1),e.$router.push("/login"))})},exit:function(){this.$cookie("login_key","",-1),sessionStorage.removeItem("user_info"),this.$router.push("/login")}},created:function(){this.getNavList()},computed:{currentUrl:function(){var e=this.$route.path;return this.$route.params.page&&(e=e.substring(0,e.lastIndexOf("/"))),e}}}),L=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},["login"!=e.$route.name?o("header",[o("div",{staticClass:"index-title"},[e._v("辣鸡小说 后台管理")]),e._v(" "),o("ul",{staticClass:"user-box"},[o("li",{},[o("span",{attrs:{href:"javascript:;"}},[o("img",{attrs:{src:a("YMjq")}}),e._v("\n                    "+e._s(e.$store.state.userInfo.userName)+"\n                ")]),e._v(" "),o("span",[e._v("基本资料")]),e._v(" "),o("span",[e._v("安全设置")])]),e._v(" "),o("li",{staticClass:"exit-btn"},[o("span",{on:{click:e.exit}},[e._v("退出")])])]),e._v(" "),o("router-link",{staticClass:"notice-box",attrs:{to:"/sensitiveWord"}},[o("img",{directives:[{name:"show",rawName:"v-show",value:this.$store.state.hasNotice,expression:"this.$store.state.hasNotice"}],attrs:{src:a("mV4/"),alt:""}}),e._v(" "),o("img",{directives:[{name:"show",rawName:"v-show",value:!this.$store.state.hasNotice,expression:"!this.$store.state.hasNotice"}],attrs:{src:a("kedr"),alt:""}})])],1):e._e(),e._v(" "),"login"!=e.$route.name?o("nav",[o("el-menu",{staticClass:"main-nav",attrs:{"default-active":e.currentUrl,"unique-opened":!0,router:""}},[e._l(e.sideNavList,function(t,a){return[t.ChildMenu&&t.ChildMenu.length>0?o("el-submenu",{key:a,attrs:{index:"0"+a}},[o("template",{slot:"title"},[o("img",{attrs:{src:t.icoURL,alt:""}}),e._v(" "),o("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.menuName))])]),e._v(" "),e._l(t.ChildMenu,function(t,a){return o("el-menu-item",{key:a,attrs:{index:t.menuURL,route:{path:t.menuURL}}},[e._v("\n                        "+e._s(t.menuName)+"\n                    ")])})],2):o("el-menu-item",{key:a,attrs:{index:t.menuURL,route:{path:t.menuURL}}},[o("img",{attrs:{src:t.icoURL,alt:""}}),e._v(" "),o("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.menuName))])])]})],2)],1):e._e(),e._v(" "),o("section",{class:{"main-contain":"login"!=e.$route.name}},[o("transition",{attrs:{name:"fade"}},[o("router-view")],1)],1)])},S=[],D=a("18Nq"),T=o,N=Object(D.a)($,L,S,!1,T,null,null),A=N.exports,F=a("zO6J"),j=a("Q7wM"),O=a.n(j),R=a("BMa3"),P=a.n(R);C.default.use(F.a);var V=new F.a({base:"/dominate",mode:"history",scrollBehavior:function(){return{y:0}},linkActiveClass:"",routes:[{path:"/",redirect:"/login"},{path:"/login",name:"login",components:a("K31e")},{path:"/index",redirect:"book/list/1"},{path:"/board",name:"Board",components:a("hFTU")},{path:"/sensitiveWord",name:"SensitiveWord",components:a("pc8C")},{path:"/book/list",redirect:"book/list/1"},{path:"/book/list/:page",name:"bookList",meta:{keepAlive:!0},components:a("qsEH")},{path:"/book/info/:bid",name:"bookInfo",meta:{keepAlive:!0},components:a("qsEH")},{path:"/book_detail/:bid",name:"bookDetail",components:a("5LdX")},{path:"/book_chapter_list/:bid",name:"bookChapterList",components:a("N8tl")},{path:"/edit_chapter/:cid",name:"editChapter",components:a("Tfte")},{path:"/add_new_chapter/:bid",name:"addNewChapter",components:a("zCU7")},{path:"/book_volume_list/:bid",name:"bookVolumeList",components:a("AKa3")},{path:"/add_new_book",name:"addNewBook",components:a("GwdR")},{path:"/book/timer",redirect:"book/timer/1"},{path:"/book/timer/:page",name:"bookTimer",components:a("GhL6")},{path:"/book/draft",redirect:"book/draft/1"},{path:"/book/draft/:page",name:"bookDraft",components:a("9ztl")},{path:"/property",name:"bookProperty",components:a("5fh2")},{path:"/user/list",redirect:"user/list/1"},{path:"/user/list/:page",name:"userList",components:a("jFLA")},{path:"/user/info/:uid",name:"userInfo",components:a("jFLA")},{path:"/author/list",redirect:"author/list/1"},{path:"/author/list/:page",name:"authorList",components:a("jFLA")},{path:"/author/monthly/:aid",redirect:"author/monthly/:aid/1"},{path:"/author/monthly/:aid/:page",name:"authorMonReport",components:a("XGY8")},{path:"/author/add_monthly/:aid",name:"authorAddMonReport",components:a("vtXg")},{path:"/author/edit_monthly/:bid",name:"authorEditMonReport",components:a("vtXg")},{path:"/user/detail/:rid",name:"userDetail",components:a("bLU8")},{path:"/comment/b_comment",redirect:"comment/b_comment/1"},{path:"/comment/b_comment/:page",name:"bookComment",components:a("IznL")},{path:"/comment/reply",redirect:"comment/reply/1"},{path:"/comment/reply/:page",name:"bookReply",components:a("Qd+a")},{path:"/barrage",redirect:"barrage/1"},{path:"/barrage/:page",name:"adminBarrage",components:a("lfjY")},{path:"/chapter",redirect:"chapter/1"},{path:"/chapter/:page",name:"allChapter",components:a("cW/P")},{path:"/message/system",redirect:"message/system/1"},{path:"/message/system/:page",name:"mesSystem",components:a("pUza")},{path:"/message/edit_message/:mid",name:"mesEditMessage",components:a("gTSq")},{path:"/message/add_message",name:"mesAddMessage",components:a("gTSq")},{path:"/message/person",redirect:"message/person/1"},{path:"/message/person/:page",name:"mesPerson",components:a("129x")},{path:"/statistics/reward",redirect:"statistics/reward/1"},{path:"/statistics/reward/:page",name:"staReward",components:a("S6IR")},{path:"/statistics/reward/:uid/:page",name:"staUserReward",components:a("S6IR")},{path:"/statistics/subscribe",redirect:"statistics/subscribe/1"},{path:"/statistics/subscribe/:page",name:"staSubscribe",components:a("c4/Y")},{path:"/statistics/subscribe/:uid/:page",name:"staUserSubscribe",components:a("c4/Y")},{path:"/statistics/recommend",redirect:"statistics/recommend/1"},{path:"/statistics/recommend/:page",name:"staRecommend",components:a("/Ue+")},{path:"/statistics/recommend/:uid/:page",name:"staUserRecommend",components:a("/Ue+")},{path:"/statistics/pepper",redirect:"statistics/pepper/1"},{path:"/statistics/pepper/:page",name:"staPepper",components:a("jWDc")},{path:"/statistics/pepper/:uid/:page",name:"staUserPepper",components:a("jWDc")},{path:"/statistics/charge",redirect:"statistics/charge/1"},{path:"/statistics/charge/:page",name:"staCharge",components:a("2sKd")},{path:"/statistics/charge/:uid/:page",name:"staUserCharge",components:a("2sKd")},{path:"/statistics/detail",redirect:"statistics/detail/1"},{path:"/statistics/detail/:page",name:"staDetail",components:a("lvjh")},{path:"/statistics/monthly",redirect:"statistics/monthly/1"},{path:"/statistics/monthly/:page",name:"staBookMonthly",components:a("XGY8")},{path:"/authority/administrator",redirect:"authority/administrator/1"},{path:"/authority/administrator/:page",name:"autAdministrator",components:a("rwQE")},{path:"/authority/role",redirect:"authority/role/1"},{path:"/authority/role/:page",name:"autRole",components:a("3Inj")},{path:"/authority/resource",name:"autResource",components:a("4azy")},{path:"/system/recommend",redirect:"system/recommend/1"},{path:"/system/recommend/:page",name:"sysRecommend",components:a("EeEo")},{path:"/system/notice",redirect:"system/notice/1"},{path:"/system/notice/:page",name:"sysNotice",components:a("Lz4X")},{path:"/system/edit_notice/:id",name:"sysEditNotice",components:a("HlXq")},{path:"/system/add_notice",name:"sysAddNotice",components:a("HlXq")},{path:"/system/email",redirect:"system/email/1"},{path:"/system/email/:page",name:"sysEmail",components:a("kVw+")},{path:"/system/deadline",redirect:"system/deadline/1"},{path:"/system/deadline/:page",name:"sysDeadline",components:a("PcA9")},{path:"/system/actives",name:"sysActives",components:a("wk1I")},{path:"/system/export",name:"sysExport",components:a("gp6M")},{path:"/system/dictionary",name:"sysDictionary",components:a("ycWR")},{path:"/system/backups",name:"sysBackups",components:a("fBqn")},{path:"/system/cache",name:"sysCache",components:a("mdwM")},{path:"/system/shield",redirect:"system/shield/1"},{path:"/system/shield/:page",name:"sysShield",components:a("3ems")},{path:"/system/blogroll",redirect:"system/blogroll/1"},{path:"/system/blogroll/:page",name:"sysBlogroll",components:a("9mVh")},{path:"/system/version",redirect:"system/version/1"},{path:"/system/version/:page",name:"sysVersion",components:a("I6C7")},{path:"/record/login",redirect:"record/login/1"},{path:"/record/login/:page",name:"recLogin",components:a("l/s2")},{path:"/record/operate",redirect:"record/operate/1"},{path:"/record/operate/:page",name:"recOperate",components:a("XOnO")},{path:"/monitor/tomcat",name:"monTomcat",components:a("2gC3")},{path:"/monitor/nginx",name:"monNginx",components:a("GTMg")},{path:"/monitor/system",name:"monSystem",components:a("UU5r")},{path:"/monitor/druid",name:"monDruid",components:a("W7OG")},{path:"/monitor/mysql",name:"monMyspl",components:a("I/+l")},{path:"/monitor/redis",name:"monRedis",components:a("YjLT")},{path:"/image/avatar",redirect:"image/avatar/1"},{path:"/image/avatar/:page",name:"imgAvatar",components:a("Q60y")},{path:"/image/cover",redirect:"image/cover/1"},{path:"/image/cover/:page",name:"imgCover",components:a("wUqf")},{path:"/task",name:"adminTask",components:a("3CP6")}]});V.beforeEach(function(e,t,a){Number(V.app.$cookie("login_key"))?P()({url:"https://www.lajixs.com/api/admin-isLogin",method:"post",withCredentials:!0}).then(function(t){200===t.data.returnCode?"login"===e.name?a({path:"/index"}):a():503===t.returnCode?window.location.reload():(V.app.$cookie("login_key","",-1),sessionStorage.removeItem("user_info"),a({path:"/login"}))}):"login"===e.name?a():a({path:"/login"})}),V.afterEach(function(){window.scrollTo(0,0)});var B=V,M=a("YTJj"),E=a.n(M),U=a("lC5x"),W=a.n(U),z=a("J0Oq"),H=a.n(z),q=a("9rMa"),Q=a("rVsN"),J=a.n(Q),G=a("Umb+"),X=a.n(G),K=P.a.create({baseURL:"https://www.lajixs.com/api",headers:{"content-type":"application/x-www-form-urlencoded"},withCredentials:!0});K.interceptors.request.use(function(e){return"post"===e.method&&(e.data=X.a.stringify(e.data)),e},function(e){return J.a.reject(e)}),K.interceptors.response.use(function(e){return e},function(e){return J.a.reject(e)});var Y=K,Z=w,ee={},te={},ae={isLogin:function(e){var t=this;return H()(W.a.mark(function e(){return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",res);case 1:case"end":return e.stop()}},e,t)}))()}},oe={namespaced:!0,state:ee,mutations:te,actions:ae},se={},re={},ne={},ie={namespaced:!0,state:se,mutations:re,actions:ne},le={str:"lushiyu"},ce={},ue={getPersonMmessage:function(){var e=this;return H()(W.a.mark(function t(){var a;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.getPersonMmessage().catch(function(e){return console.error(e)});case 2:a=e.sent,console.log(a);case 4:case"end":return e.stop()}},t,e)}))()}},de={namespaced:!0,state:le,mutations:ce,actions:ue};C.default.use(q.a);var me={userInfo:{},message:{},count:0,hasNotice:!1,bookAuthorization:null,date:""},pe={keep_bookAuthorization:function(e,t){e.bookAuthorization=t}},he={updateUserInfo:function(e){return(0,e.commit)("updateUserInfo")},getSensitiveWords:function(){var e=this;return H()(W.a.mark(function t(){var a;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.getSensitiveWords().catch(function(e){return console.error(e)});case 2:if(a=e.sent,200!==a.returnCode){e.next=5;break}return e.abrupt("return",a.data);case 5:case"end":return e.stop()}},t,e)}))()},changeSensitiveWords:function(e,t){var a=this;return E()(e),H()(W.a.mark(function e(){var o;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.changeSensitiveWords(t).catch(function(e){return console.error(e)});case 2:if(o=e.sent,200!==o.returnCode){e.next=5;break}return e.abrupt("return",o);case 5:case"end":return e.stop()}},e,a)}))()},getChapterSensitiveWords:function(e){var t=this;return E()(e),H()(W.a.mark(function e(){var a;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.getChapterSensitiveWords().catch(function(e){return console.error(e)});case 2:if(a=e.sent,console.log(a.data),200!==a.returnCode){e.next=6;break}return e.abrupt("return",a.data);case 6:case"end":return e.stop()}},e,t)}))()},book_EditBookEcho:function(e,t){var a=this;return E()(e),H()(W.a.mark(function e(){var o;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.book_EditBookEcho(t).catch(function(e){return console.error(e)});case 2:if(o=e.sent,200!==o.returnCode){e.next=5;break}return e.abrupt("return",o.data);case 5:case"end":return e.stop()}},e,a)}))()},book_showBookInfo:function(e,t){var a=this,o=e.commit;return H()(W.a.mark(function e(){var s;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.book_showBookInfo(t).catch(function(e){return console.error(e)});case 2:if(s=e.sent,200!==s.returnCode){e.next=6;break}return o("keep_bookAuthorization",s.data.bookAuthorization),e.abrupt("return",s.data);case 6:case"end":return e.stop()}},e,a)}))()},getBookDataView:function(e,t){var a=this;return E()(e),H()(W.a.mark(function e(){var o;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.getBookDataView(t).catch(function(e){return console.error(e)});case 2:if(o=e.sent,200!==o.returnCode){e.next=5;break}return e.abrupt("return",o.data);case 5:case"end":return e.stop()}},e,a)}))()},sysBookUpdate:function(e,t){var a=this;return E()(e),H()(W.a.mark(function e(){var o;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.sysBookUpdate(t).catch(function(e){return console.error(e)});case 2:if(o=e.sent,200!==o.returnCode){e.next=5;break}return e.abrupt("return",o.data);case 5:case"end":return e.stop()}},e,a)}))()},getDataPosition:function(e){var t=this;return E()(e),H()(W.a.mark(function e(){var a;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.getDataPosition().catch(function(e){return console.error(e)});case 2:if(a=e.sent,200!==a.returnCode){e.next=5;break}return e.abrupt("return",a.data);case 5:case"end":return e.stop()}},e,t)}))()},generateMonthlyreport:function(e,t){var a=this;return E()(e),H()(W.a.mark(function e(){var o;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.generateMonthlyreport(t).catch(function(e){return console.error(e)});case 2:if(o=e.sent,200!==o.returnCode){e.next=5;break}return e.abrupt("return",o.data);case 5:case"end":return e.stop()}},e,a)}))()},getControlPanel:function(){var e=this;return H()(W.a.mark(function t(){var a;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.getControlPanel().catch(function(e){return console.error(e)});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},t,e)}))()},getSiteaccessrecordsInfo:function(){var e=this;return H()(W.a.mark(function t(){var a;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.getSiteaccessrecordsInfo().catch(function(e){return console.error(e)});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},t,e)}))()},getUserList:function(e,t){var a=this;return E()(e),H()(W.a.mark(function e(){var o;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.getUserList(t).catch(function(e){return console.error(e)});case 2:return o=e.sent,e.abrupt("return",o);case 4:case"end":return e.stop()}},e,a)}))()},stacksSearch:function(e,t){var a=this;return E()(e),H()(W.a.mark(function e(){var o;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.stacksSearch(t).catch(function(e){return console.error(e)});case 2:return o=e.sent,e.abrupt("return",o);case 4:case"end":return e.stop()}},e,a)}))()},getBookInfoList:function(e,t){var a=this;return E()(e),H()(W.a.mark(function e(){var o;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.getBookInfoList(t).catch(function(e){return console.error(e)});case 2:return o=e.sent,e.abrupt("return",o);case 4:case"end":return e.stop()}},e,a)}))()},chapterContentImport:function(e,t){var a=this;return E()(e),H()(W.a.mark(function e(){var o;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.chapterContentImport(t).catch(function(e){return console.error(e)});case 2:return o=e.sent,e.abrupt("return",o);case 4:case"end":return e.stop()}},e,a)}))()},chapterZipDownload:function(e,t){var a=this;return E()(e),H()(W.a.mark(function e(){var o;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.chapterZipDownload(t).catch(function(e){return console.error(e)});case 2:return o=e.sent,e.abrupt("return",o);case 4:case"end":return e.stop()}},e,a)}))()}},fe={userInfo:function(e){return e.userInfo}},be=new q.a.Store({state:me,mutations:pe,actions:he,getters:fe,modules:{admin:oe,book:ie,system:de}});C.default.filter("number",function(e){var t=parseInt(e);return t>1e3&&t<1e4?t=(t/1e3).toFixed(1)+" k":t>=1e4&&(t=(t/1e4).toFixed(1)+"万"),t}),C.default.filter("time",function(e,t,a){var o=void 0,s=void 0;void 0===a&&(a="/"),o=void 0===e||""===e?new Date:new Date(e);var r=o.getFullYear(),n=String(r).slice(2),i=o.getMonth()+1<10?"0"+(o.getMonth()+1):o.getMonth()+1,l=o.getDate()<10?"0"+o.getDate():o.getDate(),c=o.getHours()<10?"0"+o.getHours():o.getHours(),u=o.getMinutes()<10?"0"+o.getMinutes():o.getMinutes(),d=o.getSeconds()<10?"0"+o.getSeconds():o.getSeconds();return"long"===t&&(s=n+a+i+a+l+" "+c+":"+u+":"+d),"middle"===t&&(s=n+a+i+a+l+" "+c+":"+u),"special"===t&&(s=n+a+i+a+l),"sort"!==t&&void 0!==t||(s=n+a+i+a+l),s}),C.default.filter("times",function(e){}),C.default.filter("words",function(e){var t=0,a=e;try{a=a.replace(/(\r\n+|\s+| )+/g,"龘"),a=a.replace(/[\x00-\xff]/g,"m"),a=a.replace(/m+/g,"*"),a=a.replace(/龘+/g,""),t+=a.length}catch(e){}return t});var ge={},ve=a("xYCT"),ke=a.n(ve),ye=(a("x1Tb"),a("aiqZ")),_e=a.n(ye),we=(a("lMgl"),a("D9hl"),a("3ntp"),a("8BQd")),Ce=a.n(we);a("dfv/");C.default.component("file-upload",Ce.a),C.default.use(Ce.a),C.default.prototype.$http=O.a,C.default.use(a("T7XK")),C.default.use(ke.a),C.default.use(_e.a),C.default.config.productionTip=!1,new C.default({el:"#app",router:B,filter:ge,store:be,components:{App:A},template:"<App/>"})},O8XD:function(e,t){},OnDw:function(e,t){},P1B2:function(e,t){},PcA9:function(e,t,a){"use strict";function o(e){a("QPca")}Object.defineProperty(t,"__esModule",{value:!0});var s=a("3cXf"),r=a.n(s),n={data:function(){return{deadLineList:[],dialogFormVisible:!1,selectValue:"",formValue:{list:[]},options:[],loading:!1}},methods:{getDeadLine:function(e){var t=this;this.$ajax("/admin/sys-getFreetimelimit",{page:e||this.$route.params.page},function(e){200===e.returnCode&&(e.data.list=e.data.list.reverse(),t.deadLineList=e.data)})},editDeadLine:function(){var e=this,t=0,a=void 0;this.formValue.time?8!==this.formValue.list.length?this.$message({message:"请添加满8本书籍后提交",type:"warning"}):(this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),a=JSON.parse(r()(this.formValue.list)),function o(s){e.$ajax("/admin/sys-addfreetimelimit",{bookId:s[0],bookName:s[1],batchNumber:e.deadLineList.list?e.deadLineList.list[0].batchNumber+1:1,refreshtime:e.formValue.time},function(s){if(200===s.returnCode){if(7===t)return e.dialogFormVisible=!1,e.$loading().close(),e.getDeadLine(),e.$message({message:"添加成功",type:"success"}),!1;t++,t<=7&&o(a[t].split(","))}})}(a[0].split(","))):this.$message({message:"请先选取时间",type:"warning"})},delDeadLine:function(e){var t=this;if(!e){for(var a=[],o=0,s=this.deadLineList.list.length;o<s;o++){if(this.deadLineList.list[0].batchNumber!==this.deadLineList.list[o].batchNumber)return this.$message({message:"不同批次，不可一次删除",type:"warning"}),!1;a.push(this.deadLineList.list[o].id)}e=a.toString()}this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$ajax("/admin/sys-deltefreetimelimit",{freeTimeLimitid:e},function(e){200===e.returnCode&&(t.$message({message:"删除成功",type:"success"}),t.getDeadLine(1))})})},remoteMethod:function(e){var t=this;""!==e?(this.loading=!0,this.$ajax("/stacks-search",{keyWord:e,isHotWorld:1,startPage:1},function(a){200===a.returnCode&&(t.loading=!1,t.options=a.data.list.filter(function(t){return t.bookName.toLowerCase().indexOf(e.toLowerCase())>-1}))})):this.options=[]},addDeadLine:function(){1!==this.$route.params.page&&this.$router.push({params:{page:1}}),this.dialogFormVisible=!0},search:function(){},pageChange:function(e){this.$router.push({params:{page:e}})}},created:function(){this.getDeadLine()},watch:{$route:function(){this.getDeadLine()}},computed:{time:function(){var e=new Date;return e.setFullYear(e.getFullYear()+10)+"  -   "+e}}},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-alert",{attrs:{title:"操作说明",type:"info","show-icon":""}},[a("div",[a("p",[e._v("\n        限时免费按照批次更新，每批固定8本书籍，每批次的限免时长为上一批次截止时间到本批次截止时间；设置当前批次截止时间时必须大于上一批次的截止时间\n      ")])])]),e._v(" "),a("el-row",{staticClass:"mbt20"},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.addDeadLine}},[e._v("添加")]),e._v(" "),a("el-button",{attrs:{type:"danger",plain:""},on:{click:function(t){e.delDeadLine()}}},[e._v("删除本批")]),e._v(" "),a("el-button",{staticClass:"fr",on:{click:function(t){e.$clearCache()}}},[e._v("清除缓存")])],1),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.deadLineList.list,border:"",select:"row","tooltip-effect":"dark"}},[a("el-table-column",{attrs:{type:"selection",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"批次",width:"60",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("第"+e._s(t.row.batchNumber+1)+"批")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"bookId",label:"书ID",width:"60",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bookName",label:"书名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"writerName",label:"作者"}}),e._v(" "),a("el-table-column",{attrs:{label:"截止时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("time")(t.row.refreshtime,"long")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"书籍封面"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticClass:"bookCover",attrs:{src:e.row.bookImage,alt:e.row.bookName}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",[a("a",{attrs:{href:"javascript:0;"}},[e._v("编辑")]),e._v(" "),a("a",{staticClass:"red",attrs:{href:"javascript:0;"},on:{click:function(a){e.delDeadLine(t.row.id)}}},[e._v("删除")])])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{background:"","current-page":e.deadLineList.pageNum,"page-size":e.deadLineList.pageSize,layout:"prev, pager, next",total:e.deadLineList.total},on:{"current-change":e.pageChange,"update:currentPage":function(t){e.$set(e.deadLineList,"pageNum",t)}}}),e._v(" "),a("el-dialog",{staticClass:"alertDialog",attrs:{title:"修改限时免费",width:"420px","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{labelWidth:"80px"}},[a("el-form-item",{attrs:{label:"截止时间",prop:"time"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:00:00",type:"datetime",placeholder:"选择日期时间"},model:{value:e.formValue.time,callback:function(t){e.$set(e.formValue,"time",t)},expression:"formValue.time"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"书籍名称"}},[a("el-select",{attrs:{multiple:"","multiple-limit":8,filterable:"",remote:"",placeholder:"请输入关键词","filter-method":e.search,"remote-method":e.remoteMethod,loading:e.loading},model:{value:e.formValue.list,callback:function(t){e.$set(e.formValue,"list",t)},expression:"formValue.list"}},e._l(e.options,function(e,t){return a("el-option",{key:t,attrs:{label:e.bookName,value:e.bookId+","+e.bookName}})}))],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.editDeadLine}},[e._v("确 定")])],1)],1)],1)},l=[],c=a("18Nq"),u=o,d=Object(c.a)(n,i,l,!1,u,null,null);t.default=d.exports},PsVy:function(e,t,a){"use strict";function o(e){a("4xxa")}Object.defineProperty(t,"__esModule",{value:!0});var s=a("hRKE"),r=a.n(s);!function(e){e.Jcrop=function(t,a){function o(e){return Math.round(e)+"px"}function s(e){return R.baseClass+"-"+e}function n(){return e.fx.step.hasOwnProperty("backgroundColor")}function i(t){var a=e(t).offset();return[a.left,a.top]}function l(e){return[e.pageX-O[0],e.pageY-O[1]]}function c(t){"object"!==(void 0===t?"undefined":r()(t))&&(t={}),R=e.extend(R,t),e.each(["onChange","onSelect","onRelease","onDblClick"],function(e,t){"function"!=typeof R[t]&&(R[t]=function(){})})}function u(e,t,a){if(O=i(z),fe.setCursor("move"===e?e:e+"-resize"),"move"===e)return fe.activateHandlers(m(t),g,a);var o=me.getFixed(),s=p(e),r=me.getCorner(p(s));me.setPressed(me.getCorner(s)),me.setCurrent(r),fe.activateHandlers(d(e,o),g,a)}function d(e,t){return function(a){if(R.aspectRatio)switch(e){case"e":case"w":a[1]=t.y+1;break;case"n":case"s":a[0]=t.x+1}else switch(e){case"e":case"w":a[1]=t.y2;break;case"n":case"s":a[0]=t.x2}me.setCurrent(a),he.update()}}function m(e){var t=e;return be.watchKeys(),function(e){me.moveOffset([e[0]-t[0],e[1]-t[1]]),t=e,he.update()}}function p(e){switch(e){case"n":return"sw";case"s":case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function h(e){return function(t){return!R.disabled&&(!("move"===e&&!R.allowMove)&&(O=i(z),se=!0,u(e,l(t)),t.stopPropagation(),t.preventDefault(),!1))}}function f(e,t,a){var o=e.width(),s=e.height();o>t&&t>0&&(o=t,s=t/e.width()*e.height()),s>a&&a>0&&(s=a,o=a/e.height()*e.width()),ae=e.width()/o,oe=e.height()/s,e.width(o).height(s)}function b(e){return{x:e.x*ae,y:e.y*oe,x2:e.x2*ae,y2:e.y2*oe,w:e.w*ae,h:e.h*oe}}function g(e){var t=me.getFixed();t.w>R.minSelect[0]&&t.h>R.minSelect[1]?(he.enableHandles(),he.done()):he.release(),fe.setCursor(R.allowSelect?"crosshair":"default")}function v(e){if(!R.disabled&&R.allowSelect){se=!0,O=i(z),he.disableHandles(),fe.setCursor("crosshair");var t=l(e);return me.setPressed(t),he.update(),fe.activateHandlers(k,g,"touch"===e.type.substring(0,5)),be.watchKeys(),e.stopPropagation(),e.preventDefault(),!1}}function k(e){me.setCurrent(e),he.update()}function y(){var t=e("<div></div>").addClass(s("tracker"));return V&&t.css({opacity:0,backgroundColor:"white"}),t}function _(e){Q.removeClass().addClass(s("holder")).addClass(e)}function w(e,t){function a(){window.setTimeout(v,d)}var o=e[0]/ae,s=e[1]/oe,r=e[2]/ae,n=e[3]/oe;if(!re){var i=me.flipCoords(o,s,r,n),l=me.getFixed(),c=[l.x,l.y,l.x2,l.y2],u=c,d=R.animationDelay,m=i[0]-c[0],p=i[1]-c[1],h=i[2]-c[2],f=i[3]-c[3],b=0,g=R.swingSpeed;o=u[0],s=u[1],r=u[2],n=u[3],he.animMode(!0);var v=function(){return function(){b+=(100-b)/g,u[0]=Math.round(o+b/100*m),u[1]=Math.round(s+b/100*p),u[2]=Math.round(r+b/100*h),u[3]=Math.round(n+b/100*f),b>=99.8&&(b=100),b<100?(x(u),a()):(he.done(),he.animMode(!1),"function"==typeof t&&t.call(ge))}}();a()}}function C(e){x([e[0]/ae,e[1]/oe,e[2]/ae,e[3]/oe]),R.onSelect.call(ge,b(me.getFixed())),he.enableHandles()}function x(e){me.setPressed([e[0],e[1]]),me.setCurrent([e[2],e[3]]),he.update()}function I(){return b(me.getFixed())}function $(){return me.getFixed()}function L(e){c(e),j()}function S(){R.disabled=!0,he.disableHandles(),he.setCursor("default"),fe.setCursor("default")}function D(){R.disabled=!1,j()}function T(){he.done(),fe.activateHandlers(null,null)}function N(){Q.remove(),E.show(),E.css("visibility","visible"),e(t).removeData("Jcrop")}function A(e,t){he.release(),S();var a=new Image;a.onload=function(){var o=a.width,s=a.height,r=R.boxWidth,n=R.boxHeight;z.width(o).height(s),z.attr("src",e),J.attr("src",e),f(z,r,n),H=z.width(),q=z.height(),J.width(H).height(q),J.css({background:"#0f0"}),le.width(H+2*ie).height(q+2*ie),Q.width(H).height(q),pe.resize(H,q),D(),"function"==typeof t&&t.call(ge)},a.src=e}function F(e,t,a){var o=t||R.bgColor;R.bgFade&&n()&&R.fadeTime&&!a?e.animate({backgroundColor:o},{queue:!1,duration:R.fadeTime}):e.css("backgroundColor",o)}function j(e){R.allowResize?e?he.enableOnly():he.enableHandles():he.disableHandles(),fe.setCursor(R.allowSelect?"crosshair":"default"),he.setCursor(R.allowMove?"move":"default"),R.hasOwnProperty("trueSize")&&(ae=R.trueSize[0]/H,oe=R.trueSize[1]/q),R.hasOwnProperty("setSelect")&&(C(R.setSelect),he.done(),delete R.setSelect),pe.refresh(),R.bgColor!=ce&&(F(R.shade?pe.getShades():Q,R.shade?R.shadeColor||R.bgColor:R.bgColor),ce=R.bgColor),ue!=R.bgOpacity&&(ue=R.bgOpacity,R.shade?pe.refresh():he.setBgOpacity(ue)),Y=R.maxSize[0]||0,Z=R.maxSize[1]||0,ee=R.minSize[0]||0,te=R.minSize[1]||0,R.hasOwnProperty("outerImage")&&(z.attr("src",R.outerImage),delete R.outerImage),he.refresh()}var O,R=e.extend({},e.Jcrop.defaults),P=navigator.userAgent.toLowerCase(),V=/msie/.test(P),B=/msie [1-6]\./.test(P);"object"!==(void 0===t?"undefined":r()(t))&&(t=e(t)[0]),"object"!==(void 0===a?"undefined":r()(a))&&(a={}),c(a);var M={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},E=e(t),U=!0;if("IMG"==t.tagName){if(0!=E[0].width&&0!=E[0].height)E.width(E[0].width),E.height(E[0].height);else{var W=new Image;W.src=E[0].src,E.width(W.width),E.height(W.height)}var z=E.clone().removeAttr("id").css(M).show();z.width(E.width()),z.height(E.height()),E.after(z).hide()}else z=E.css(M).show(),U=!1,null===R.shade&&(R.shade=!0);f(z,R.boxWidth,R.boxHeight);var H=z.width(),q=z.height(),Q=e("<div />").width(H).height(q).addClass(s("holder")).css({position:"relative",backgroundColor:R.bgColor}).insertAfter(E).append(z);R.addClass&&Q.addClass(R.addClass);var J=e("<div />"),G=e("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),X=e("<div />").width("100%").height("100%").css("zIndex",320),K=e("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var e=me.getFixed();R.onDblClick.call(ge,e)}).insertBefore(z).append(G,X);U&&(J=e("<img />").attr("src",z.attr("src")).css(M).width(H).height(q),G.append(J)),B&&K.css({overflowY:"hidden"});var Y,Z,ee,te,ae,oe,se,re,ne,ie=R.boundary,le=y().width(H+2*ie).height(q+2*ie).css({position:"absolute",top:o(-ie),left:o(-ie),zIndex:290}).mousedown(v),ce=R.bgColor,ue=R.bgOpacity;O=i(z);var de=function(){function e(){var e,t={},a=["touchstart","touchmove","touchend"],o=document.createElement("div");try{for(e=0;e<a.length;e++){var s=a[e];s="on"+s;var r=s in o;r||(o.setAttribute(s,"return;"),r="function"==typeof o[s]),t[a[e]]=r}return t.touchstart&&t.touchend&&t.touchmove}catch(e){return!1}}return{createDragger:function(e){return function(t){return!R.disabled&&(!("move"===e&&!R.allowMove)&&(O=i(z),se=!0,u(e,l(de.cfilter(t)),!0),t.stopPropagation(),t.preventDefault(),!1))}},newSelection:function(e){return v(de.cfilter(e))},cfilter:function(e){return e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,e},isSupported:e,support:function(){return!0===R.touchSupport||!1===R.touchSupport?R.touchSupport:e()}()}}(),me=function(){function e(e){e=n(e),h=m=e[0],f=p=e[1]}function t(e){e=n(e),u=e[0]-h,d=e[1]-f,h=e[0],f=e[1]}function a(){return[u,d]}function o(e){var t=e[0],a=e[1];0>m+t&&(t-=t+m),0>p+a&&(a-=a+p),q<f+a&&(a+=q-(f+a)),H<h+t&&(t+=H-(h+t)),m+=t,h+=t,p+=a,f+=a}function s(e){var t=r();switch(e){case"ne":return[t.x2,t.y];case"nw":return[t.x,t.y];case"se":return[t.x2,t.y2];case"sw":return[t.x,t.y2]}}function r(){if(!R.aspectRatio)return l();var e,t,a,o,s=R.aspectRatio,r=R.minSize[0]/ae,n=R.maxSize[0]/ae,u=R.maxSize[1]/oe,d=h-m,b=f-p,g=Math.abs(d),v=Math.abs(b),k=g/v;return 0===n&&(n=10*H),0===u&&(u=10*q),k<s?(t=f,a=v*s,e=d<0?m-a:a+m,e<0?(e=0,o=Math.abs((e-m)/s),t=b<0?p-o:o+p):e>H&&(e=H,o=Math.abs((e-m)/s),t=b<0?p-o:o+p)):(e=h,o=g/s,t=b<0?p-o:p+o,t<0?(t=0,a=Math.abs((t-p)*s),e=d<0?m-a:a+m):t>q&&(t=q,a=Math.abs(t-p)*s,e=d<0?m-a:a+m)),e>m?(e-m<r?e=m+r:e-m>n&&(e=m+n),t=t>p?p+(e-m)/s:p-(e-m)/s):e<m&&(m-e<r?e=m-r:m-e>n&&(e=m-n),t=t>p?p+(m-e)/s:p-(m-e)/s),e<0?(m-=e,e=0):e>H&&(m-=e-H,e=H),t<0?(p-=t,t=0):t>q&&(p-=t-q,t=q),c(i(m,p,e,t))}function n(e){return e[0]<0&&(e[0]=0),e[1]<0&&(e[1]=0),e[0]>H&&(e[0]=H),e[1]>q&&(e[1]=q),[Math.round(e[0]),Math.round(e[1])]}function i(e,t,a,o){var s=e,r=a,n=t,i=o;return a<e&&(s=a,r=e),o<t&&(n=o,i=t),[s,n,r,i]}function l(){var e,t=h-m,a=f-p;return Y&&Math.abs(t)>Y&&(h=t>0?m+Y:m-Y),Z&&Math.abs(a)>Z&&(f=a>0?p+Z:p-Z),te/oe&&Math.abs(a)<te/oe&&(f=a>0?p+te/oe:p-te/oe),ee/ae&&Math.abs(t)<ee/ae&&(h=t>0?m+ee/ae:m-ee/ae),m<0&&(h-=m,m-=m),p<0&&(f-=p,p-=p),h<0&&(m-=h,h-=h),f<0&&(p-=f,f-=f),h>H&&(e=h-H,m-=e,h-=e),f>q&&(e=f-q,p-=e,f-=e),m>H&&(e=m-q,f-=e,p-=e),p>q&&(e=p-q,f-=e,p-=e),c(i(m,p,h,f))}function c(e){return{x:e[0],y:e[1],x2:e[2],y2:e[3],w:e[2]-e[0],h:e[3]-e[1]}}var u,d,m=0,p=0,h=0,f=0;return{flipCoords:i,setPressed:e,setCurrent:t,getOffset:a,moveOffset:o,getCorner:s,getFixed:r}}(),pe=function(){function t(e,t){h.left.css({height:o(t)}),h.right.css({height:o(t)})}function a(){return s(me.getFixed())}function s(e){h.top.css({left:o(e.x),width:o(e.w),height:o(e.y)}),h.bottom.css({top:o(e.y2),left:o(e.x),width:o(e.w),height:o(q-e.y2)}),h.right.css({left:o(e.x2),width:o(H-e.x2)}),h.left.css({width:o(e.x)})}function r(){return e("<div />").css({position:"absolute",backgroundColor:R.shadeColor||R.bgColor}).appendTo(p)}function n(){m||(m=!0,p.insertBefore(z),a(),he.setBgOpacity(1,0,1),J.hide(),i(R.shadeColor||R.bgColor,1),he.isAwake()?c(R.bgOpacity,1):c(1,1))}function i(e,t){F(d(),e,t)}function l(){m&&(p.remove(),J.show(),m=!1,he.isAwake()?he.setBgOpacity(R.bgOpacity,1,1):(he.setBgOpacity(1,1,1),he.disableHandles()),F(Q,0,1))}function c(e,t){m&&(R.bgFade&&!t?p.animate({opacity:1-e},{queue:!1,duration:R.fadeTime}):p.css({opacity:1-e}))}function u(){R.shade?n():l(),he.isAwake()&&c(R.bgOpacity)}function d(){return p.children()}var m=!1,p=e("<div />").css({position:"absolute",zIndex:240,opacity:0}),h={top:r(),left:r().height(q),right:r().height(q),bottom:r()};return{update:a,updateRaw:s,getShades:d,setBgColor:i,enable:n,disable:l,resize:t,refresh:u,opacity:c}}(),he=function(){function t(t){var a=e("<div />").css({position:"absolute",opacity:R.borderOpacity}).addClass(s(t));return G.append(a),a}function a(t,a){var o=e("<div />").mousedown(h(t)).css({cursor:t+"-resize",position:"absolute",zIndex:a}).addClass("ord-"+t);return de.support&&o.bind("touchstart.jcrop",de.createDragger(t)),X.append(o),o}function r(e){var t=R.handleSize,o=a(e,x++).css({opacity:R.handleOpacity}).addClass(s("handle"));return t&&o.width(t).height(t),o}function n(e){return a(e,x++).addClass("jcrop-dragbar")}function i(e,t){R.shade||J.css({top:o(-t),left:o(-e)}),K.css({top:o(t),left:o(e)})}function l(e,t){K.width(Math.round(e)).height(Math.round(t))}function c(){var e=me.getFixed();me.setPressed([e.x,e.y]),me.setCurrent([e.x2,e.y2]),u()}function u(e){if(C)return d(e)}function d(e){var t=me.getFixed();l(t.w,t.h),i(t.x,t.y),R.shade&&pe.updateRaw(t),C||p(),e?R.onSelect.call(ge,b(t)):R.onChange.call(ge,b(t))}function m(e,t,a){(C||t)&&(R.bgFade&&!a?z.animate({opacity:e},{queue:!1,duration:R.fadeTime}):z.css("opacity",e))}function p(){K.show(),R.shade?pe.opacity(ue):m(ue,!0),C=!0}function f(){k(),K.hide(),R.shade?pe.opacity(1):m(1),C=!1,R.onRelease.call(ge)}function g(){S&&X.show()}function v(){if(S=!0,R.allowResize)return X.show(),!0}function k(){S=!1,X.hide()}function _(e){e?(re=!0,k()):(re=!1,v())}function w(){_(!1),c()}var C,x=370,I={},$={},L={},S=!1;R.dragEdges&&e.isArray(R.createDragbars)&&function(e){var t;for(t=0;t<e.length;t++)L[e[t]]=n(e[t])}(R.createDragbars),e.isArray(R.createHandles)&&function(e){var t;for(t=0;t<e.length;t++)$[e[t]]=r(e[t])}(R.createHandles),R.drawBorders&&e.isArray(R.createBorders)&&function(e){var a,o;for(o=0;o<e.length;o++){switch(e[o]){case"n":a="hline";break;case"s":a="hline bottom";break;case"e":a="vline right";break;case"w":a="vline"}I[e[o]]=t(a)}}(R.createBorders),e(document).bind("touchstart.jcrop-ios",function(t){e(t.currentTarget).hasClass("jcrop-tracker")&&t.stopPropagation()});var D=y().mousedown(h("move")).css({cursor:"move",position:"absolute",zIndex:360});return de.support&&D.bind("touchstart.jcrop",de.createDragger("move")),G.append(D),k(),{updateVisible:u,update:d,release:f,refresh:c,isAwake:function(){return C},setCursor:function(e){D.css("cursor",e)},enableHandles:v,enableOnly:function(){S=!0},showHandles:g,disableHandles:k,animMode:_,setBgOpacity:m,done:w}}(),fe=function(){function t(t){le.css({zIndex:450}),t?e(document).bind("touchmove.jcrop",n).bind("touchend.jcrop",i):m&&e(document).bind("mousemove.jcrop",o).bind("mouseup.jcrop",s)}function a(){le.css({zIndex:290}),e(document).unbind(".jcrop")}function o(e){return u(l(e)),!1}function s(e){return e.preventDefault(),e.stopPropagation(),se&&(se=!1,d(l(e)),he.isAwake()&&R.onSelect.call(ge,b(me.getFixed())),a(),u=function(){},d=function(){}),!1}function r(e,a,o){return se=!0,u=e,d=a,t(o),!1}function n(e){return u(l(de.cfilter(e))),!1}function i(e){return s(de.cfilter(e))}function c(e){le.css("cursor",e)}var u=function(){},d=function(){},m=R.trackDocument;return m||le.mousemove(o).mouseup(s).mouseout(s),z.before(le),{activateHandlers:r,setCursor:c}}(),be=function(){function t(){R.keySupport&&(r.show(),r.focus())}function a(e){r.hide()}function o(e,t,a){R.allowMove&&(me.moveOffset([t,a]),he.updateVisible(!0)),e.preventDefault(),e.stopPropagation()}function s(e){if(e.ctrlKey||e.metaKey)return!0;ne=!!e.shiftKey;var t=ne?10:1;switch(e.keyCode){case 37:o(e,-t,0);break;case 39:o(e,t,0);break;case 38:o(e,0,-t);break;case 40:o(e,0,t);break;case 27:R.allowSelect&&he.release();break;case 9:return!0}return!1}var r=e('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),n=e("<div />").css({position:"absolute",overflow:"hidden"}).append(r);return R.keySupport&&(r.keydown(s).blur(a),B||!R.fixedSupport?(r.css({position:"absolute",left:"-20px"}),n.append(r).insertBefore(z)):r.insertBefore(z)),{watchKeys:t}}();de.support&&le.bind("touchstart.jcrop",de.newSelection),X.hide(),j(!0);var ge={setImage:A,animateTo:w,setSelect:C,setOptions:L,tellSelect:I,tellScaled:$,setClass:_,disable:S,enable:D,cancel:T,release:he.release,destroy:N,focus:be.watchKeys,getBounds:function(){return[H*ae,q*oe]},getWidgetSize:function(){return[H,q]},getScaleFactor:function(){return[ae,oe]},getOptions:function(){return R},ui:{holder:Q,selection:K}};return V&&Q.bind("selectstart",function(){return!1}),E.data("Jcrop",ge),ge},e.fn.Jcrop=function(t,a){var o;return this.each(function(){if(e(this).data("Jcrop")){if("api"===t)return e(this).data("Jcrop");e(this).data("Jcrop").setOptions(t)}else"IMG"==this.tagName?e.Jcrop.Loader(this,function(){e(this).css({display:"block",visibility:"hidden"}),o=e.Jcrop(this,t),e.isFunction(a)&&a.call(o)}):(e(this).css({display:"block",visibility:"hidden"}),o=e.Jcrop(this,t),e.isFunction(a)&&a.call(o))}),this},e.Jcrop.Loader=function(t,a,o){function s(){n.complete?(r.unbind(".jcloader"),e.isFunction(a)&&a.call(n)):window.setTimeout(s,50)}var r=e(t),n=r[0];r.bind("load.jcloader",s).bind("error.jcloader",function(t){r.unbind(".jcloader"),e.isFunction(o)&&o.call(n)}),n.complete&&e.isFunction(a)&&(r.unbind(".jcloader"),a.call(n))},e.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:null,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}}(jQuery);var n=(a("rxrk"),{props:{action:{default:""},aspectRatio:{default:1},width:{default:200},url:{default:""},maxSize:{default:2},acceptType:{default:"jpeg,jpg,png"},data:{},sync:{default:!1},maxWidth:{default:600},title:{default:"图片上传"},visible:{default:!1}},data:function(){return{img_url:this.url,jcrop_api:"",boundx:"",boundy:"",widget:[0,0],$preview:void 0,$pcnt:void 0,$pimg:void 0,canvasOption:{},icon_url:"",pre_width:0,zoom:1}},methods:{testMaxSize:function(e){var t=this,a=new Image;if(e.files&&e.files[0]){var o=e.files[0],s=o.size,r=new FileReader;r.onload=function(o){var r=o.target.result;a.src=r,a.onload=function(){if(t.boundy=a.height,t.boundx=a.width,a.width>5e3||a.height>5e3)return $("#inputImage").val(""),t.$message({message:"图片尺寸太大，请重新选择！",type:"warning"}),!1;s?t.maxSize<s/1048576?(t.$message({message:"所选图片不可超过"+t.maxSize+"M",type:"warning"}),$("#inputImage").val("")):t.acceptType.indexOf(e.files[0].type.split("/")[1].toLowerCase())<0?(t.$message({message:"只能上传"+t.acceptType+"格式图片",type:"warning"}),$("#inputImage").val("")):(t.jcrop_api.setImage(r,function(){t.widget=this.getWidgetSize(),this.setSelect([0,0,300,300]),$("#pre-picture").parent().css({position:"absolute",width:t.widget[0]+"px",marginLeft:"-"+t.widget[0]/2+"px",marginTop:"-"+t.widget[1]/2+"px"})}),t.img_url=r,t.resetCrop()):t.$message({message:"请选取图片",type:"warning"})},a.onerror=function(e){return t.$message({message:"非法图片格式，请重新选择",type:"error"}),$("#inputImage").val(""),!1}},r.readAsDataURL(o)}else this.isIE()},subForm:function(){if(this.setCanvas(this.canvasOption)){if(this.syncUrl(this.icon_url),this.sync)return this.cancel(),!1;this.submitImageFile()}else this.$message({message:"无法剪裁，请更换浏览器重新尝试！",type:"warning"})},submitImageFile:function(e){var t=this;if("error"!==this.icon_url){if(""===this.icon_url)return e({returnCode:200});var a=new FormData,o=this.dataURLtoBlob(this.icon_url);a.append("file",o,"avatar-image.png");for(var s in this.data)a.append(s,this.data[s]);this.sync||this.$myLoad("正在上传中..."),$.ajax({url:this.action,type:"post",data:a,dataType:"text",processData:!1,contentType:!1,success:function(a){t.$emit("success",JSON.parse(a)),t.sync?e(JSON.parse(a)):(t.cancel(),t.$loading().close(),t.$message({message:JSON.parse(a).msg,type:"success"}))},error:function(e){console.log(e),t.$loading().close()},xhr:function(){var e=new XMLHttpRequest;return e.upload.addEventListener("progress",function(e){e.lengthComputable},!1),e}})}else this.$message({message:"无法获取剪切数据，请重新尝试！",type:"warning"})},dataURLtoBlob:function(e){for(var t=e.split(","),a=t[0].match(/:(.*?);/)[1],o=atob(t[1]),s=o.length,r=new Uint8Array(s);s--;)r[s]=o.charCodeAt(s);return new Blob([r],{type:a,filename:"image.png"})},resetCrop:function(){var e=this;this.$preview=$("#preview-pane"),this.$pimg=$("#preview-pane .preview-container img"),$("#pre-picture").Jcrop({bgFade:!0,boxHeight:400,boxWidth:400,onChange:this.updatePreview,onSelect:this.updatePreview,aspectRatio:this.aspectRatio},function(){e.jcrop_api=this;var t=this.getBounds();e.widget=this.getWidgetSize(),e.boundx=t[0],e.boundy=t[1],this.setSelect([0,0,300,200]),$("#pre-picture").parent().css({position:"absolute",width:e.widget[0]+"px",marginLeft:"-"+e.widget[0]/2+"px",marginTop:"-"+e.widget[1]/2+"px"})})},setCanvas:function(e){var t=$("#preview-pane .preview-container img")[0],a=document.createElement("img"),o=1;a.src=t.src;var s=document.createElement("canvas");this.zoom=a.width/this.boundx,e.w*this.zoom>this.maxWidth&&(o=this.maxWidth/(e.w*this.zoom)),s.width=e.w*this.zoom*o,s.height=e.h*this.zoom*o;try{s.getContext("2d").drawImage(t,e.x*this.zoom,e.y*this.zoom,e.w*this.zoom,e.h*this.zoom,0,0,e.w*this.zoom*o,e.h*this.zoom*o),this.icon_url=s.toDataURL()}catch(e){return this.icon_url="error"}return this.icon_url},changeImg:function(e){this.testMaxSize(e.target)},updatePreview:function(e){if(parseInt(e.w)>0){var t=this.width/e.w,a=this.width/this.aspectRatio/e.h;this.canvasOption=e,this.$pimg.css({width:Math.round(t*this.boundx)+"px",height:Math.round(a*this.boundy)+"px",marginLeft:"-"+Math.round(t*e.x)+"px",marginTop:"-"+Math.round(a*e.y)+"px"})}},isIE:function(){var e=navigator.userAgent;if(e.indexOf("compatible")>-1&&e.indexOf("MSIE")>-1&&(new RegExp("MSIE (\\d+\\.\\d+);").test(e),10!==parseFloat(RegExp.$1)))return this.$message({message:"您的计算机当前ie版本过低，无法使用图片上传，请您更换浏览器重新尝试！",type:"warning"}),!1},cancel:function(){this.$emit("close",!0)},syncUrl:function(e){this.$emit("syncUrl",e)}},mounted:function(){},watch:{visible:function(e){var t=this;e&&this.$nextTick(function(){t.resetCrop(t.img_url)})}}}),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.visible?a("div",{staticClass:"picture-cropper-mode"},[a("div",{staticClass:"picture-cropper-wrap"},[a("div",{staticClass:"pc-inner-header"},[a("span",{staticClass:"pc-header-title"},[e._v(e._s(e.title))]),e._v(" "),a("i",{staticClass:"el-icon-close",on:{click:e.cancel}})]),e._v(" "),a("div",{staticClass:"pc-wrap-inner clear"},[a("div",{staticClass:"wrap-container"},[a("div",{staticClass:"pic-wrapper"},[a("img",{ref:"pre-picture",attrs:{src:e.img_url,id:"pre-picture",alt:""}})])]),e._v(" "),a("div",{staticClass:"pc-wrap-inner-right",style:{width:e.width+20+"px"}},[a("div",{style:{height:e.width/e.aspectRatio+"px",width:e.width+"px"},attrs:{id:"preview-pane"}},[a("div",{staticClass:"preview-container",style:{height:e.width/e.aspectRatio+"px",width:e.width+"px"}},[a("img",{staticClass:"jcrop-preview",attrs:{src:e.img_url,alt:"Preview"}})])]),e._v(" "),e._m(0)])]),e._v(" "),a("div",{staticClass:"pc-handle-wrap"},[a("form",{attrs:{id:"picture-form",action:"",enctype:"multipart/form-data"}},[a("label",{staticClass:"btn-check-file",attrs:{for:"inputImage"}},[a("input",{staticClass:"btn-file",attrs:{name:"file",type:"file",id:"inputImage"},on:{change:e.changeImg}}),e._v(" "),a("span",[e._v("选取图片")])])]),e._v(" "),a("button",{staticClass:"el-button el-button--primary",on:{click:e.subForm}},[e._v(e._s(e.sync?"确定":"上传"))])])])]):e._e()},l=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tip-msg"},[a("p",[a("span",{staticClass:"red"},[e._v("提示：")]),e._v("请勿使用360兼容模式以及ie10以下版本，可能导致无法使用剪裁上传功能\n          ")])])}],c=a("18Nq"),u=o,d=Object(c.a)(n,i,l,!1,u,null,null);t.default=d.exports},Q60y:function(e,t,a){"use strict";function o(e){a("wuGX")}Object.defineProperty(t,"__esModule",{value:!0});var s={data:function(){return{bookCoverList:{}}},methods:{getCoverList:function(){var e=this;this.$ajax("/admin/getUserList",{page:this.$route.params.page,orderParemeter:"userId",img:"avatar",paramType:"query",pageSize:"120"},function(t){200===t.returnCode&&(e.bookCoverList=t.data)})},handleCurrentChange:function(e){this.$router.push({params:{page:e}})}},created:function(){this.getCoverList()},watch:{$route:function(e){this.getCoverList()}}},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wba-wrapper clear"},[a("el-alert",{staticClass:"mbt20",attrs:{title:"操作说明",type:"info","show-icon":""}},[a("div",[a("p",[e._v("\n        此表为本站全部用户头像，您可以直接预览审核\n      ")])])]),e._v(" "),a("div",{staticClass:"wbcw-contain clearfix"},e._l(e.bookCoverList.list,function(t,o){return e.bookCoverList.list?a("el-card",{key:t.bookId,attrs:{"body-style":{padding:"0px"}}},[a("router-link",{attrs:{to:"/user/info/"+t.userId}},[a("img",{staticClass:"image",attrs:{src:t.userHeadPortraitURL}}),e._v(" "),a("div",{staticClass:"mask"},[a("p",{staticClass:"tit"},[e._v(e._s(t.pseudonym))])])])],1):e._e()})),e._v(" "),a("el-pagination",{staticClass:"mbt20",attrs:{background:"","current-page":e.bookCoverList.pageNum,"page-size":e.bookCoverList.pageSize,layout:"total, prev, pager, next, jumper",total:e.bookCoverList.total},on:{"current-change":e.handleCurrentChange}})],1)},n=[],i=a("18Nq"),l=o,c=Object(i.a)(s,r,n,!1,l,null,null);t.default=c.exports},QPca:function(e,t){},QYRi:function(e,t){},"Qd+a":function(e,t,a){"use strict";function o(e){a("ni+X")}Object.defineProperty(t,"__esModule",{value:!0});var s={data:function(){return{searchForm:{},replyCommentList:{},keywords:"",selectType:"",multipleSelection:[]}},methods:{getReplyCommentList:function(){var e=this;if(this.searchForm={},this.searchForm.page=this.$route.params.page,this.selectType){if(("bookId"===this.selectType||"userId"===this.selectType||"commentId"===this.selectType)&&!Number(this.keywords))return this.$message({message:"ID必需为数字",type:"warning"}),!1;this.searchForm[this.selectType]=this.keywords}this.$ajax("/admin/bookCommentReplyList",this.searchForm,function(t){200===t.returnCode?e.replyCommentList=t.data:t.data||(e.replyCommentList={})})},searchReplyCom:function(){1==this.$route.params.page?this.getReplyCommentList():this.$router.push({params:{page:1}})},handleCurrentChange:function(e){this.$router.push({params:{page:e}})},handleRowClick:function(e){this.$refs.multipleTable.toggleRowSelection(e)},toggleSelection:function(e,t){var a=this,o=[];if(t)"book"===e?o.push(t.bookid):o.push(t.userId);else{if(!this.multipleSelection.length)return this.$message({message:"请选取要删除的内容",type:"warning"}),!1;this.multipleSelection.forEach(function(e){o.push(e.id)})}!function(){var s=0,r=void 0;"book"===e?(s=2,r='此操作将永久删除书籍<span class="red">'+t.bookName+"</span>的全部书评回复, 是否继续?"):"user"===e?(s=4,r='此操作将永久删除用户<span class="red">'+t.userName+"</span>的全部书评回复, 是否继续?"):(r="此操作将永久删除"+o.length+"条书评回复, 是否继续?",s=o.length>1?1:0),a.$confirm(r,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",dangerouslyUseHTMLString:!0,type:"warning"}).then(function(){a.$ajax("/comm-deletereplyInfo",{commentid:o.toString(),type:s},function(e){200===e.returnCode&&(a.$message({message:"删除成功",type:"success"}),a.getReplyCommentList())})})}()},handleSelectionChange:function(e){this.multipleSelection=e}},created:function(){this.getReplyCommentList()},watch:{$route:function(e){this.getReplyCommentList()}}},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"reply-comment-wrap"},[a("el-alert",{attrs:{title:"操作说明",type:"info","show-icon":""}},[a("div",[a("p",[e._v("此表为本站全部书籍书评回复，您可以通过相应评论ID来批量管理；通过内容可以模糊搜索，其他类型均为精确搜索")])])]),e._v(" "),a("el-row",{staticClass:"mbt20"},[e.$store.state.userInfo&&e.$store.state.userInfo.adminRolemenuanduserrole.deletes?a("el-button",{attrs:{type:"danger",plain:""},on:{click:function(t){e.toggleSelection()}}},[e._v("批量删除")]):e._e()],1),e._v(" "),a("el-row",{staticClass:"mbt20"},[a("el-col",{attrs:{xs:20,sm:16,md:12,lg:9,xl:6}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchReplyCom(t):null}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}},[a("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.selectType,callback:function(t){e.selectType=t},expression:"selectType"}},[a("el-option",{attrs:{label:"内  容",value:"replyCommentsContent"}}),e._v(" "),a("el-option",{attrs:{label:"书  名",value:"bookName"}}),e._v(" "),a("el-option",{attrs:{label:"昵  称",value:"userName"}}),e._v(" "),a("el-option",{attrs:{label:"书籍ID",value:"bookId"}}),e._v(" "),a("el-option",{attrs:{label:"用户ID",value:"userId"}}),e._v(" "),a("el-option",{attrs:{label:"评论ID",value:"commentId"}}),e._v(" "),a("el-option",{attrs:{label:"用户IP",value:"userAddressIP"}})],1),e._v(" "),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchReplyCom},slot:"append"})],1)],1)],1),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.replyCommentList.list,border:""},on:{"row-click":e.handleRowClick,"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bookName",label:"书名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bookid",label:"书籍ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"commentId",label:"父评论ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"puserId",label:"父评论用户ID"}}),e._v(" "),a("el-table-column",{attrs:{label:"时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("time")(t.row.commentDateTime,"long")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"用户昵称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userId",label:"评论用户ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"replyCommentsContent",minWidth:"240",label:"内容"}})],1),e._v(" "),a("el-pagination",{staticClass:"mbt20",attrs:{background:"","current-page":e.replyCommentList.pageNum,"page-size":e.replyCommentList.pageSize,layout:"total, prev, pager, next, jumper",total:e.replyCommentList.total},on:{"current-change":e.handleCurrentChange}})],1)},n=[],i=a("18Nq"),l=o,c=Object(i.a)(s,r,n,!1,l,null,null);t.default=c.exports},QhRe:function(e,t){},QkZZ:function(e,t){},RPHh:function(e,t){},Rq2q:function(e,t){},S6IR:function(e,t,a){"use strict";function o(e){a("hNby")}Object.defineProperty(t,"__esModule",{value:!0});var s={data:function(){return{searchForm:{},defaultValue:null,pickerOptions:{shortcuts:[{text:"本月",onClick:function(e){var t=new Date,a=new Date;a.setDate(1),e.$emit("pick",[a,t])}}],disabledDate:function(e){return e.getTime()>Date.now()}},rewardCommentList:{},keywords:"",selectType:"bookName",multipleSelection:[],userInfo:{},date:""}},methods:{getRewardStatisticList:function(){var e=this;if(this.searchForm={},this.searchForm.page=this.$route.params.page,this.$route.params.uid&&(this.searchForm.userId=this.$route.params.uid),this.selectType&&this.keywords){if(("bookId"===this.selectType||"userId"===this.selectType)&&!Number(this.keywords))return this.$message({message:"ID必需为数字",type:"warning"}),!1;this.searchForm[this.selectType]=this.keywords}this.date&&(this.searchForm.startdate=this.date[0]+" 00:00:00",this.searchForm.enddate=this.date[1]+" 23:59:59"),this.$ajax("/admin/getAdminSpicyirewardticketList",this.searchForm,function(t){200===t.returnCode?e.rewardCommentList=t.data:t.data||(e.rewardCommentList={})})},searchReplyCom:function(){1==this.$route.params.page?this.getRewardStatisticList():this.$router.push({params:{page:1}})},handleCurrentChange:function(e){this.$router.push({params:{page:e}})},getUserInfo:function(){var e=this;this.$route.params.uid&&this.$ajax("/person-SimplifyUserInfo",{puserid:this.$route.params.uid},function(t){200===t.returnCode&&(e.userInfo=t.data)})}},created:function(){"staUserReward"===this.$route.name&&(this.date=[this.$formTime(new Date((new Date).setDate(1)),"sort"),this.$formTime(new Date,"sort")]),this.getRewardStatisticList(),this.getUserInfo()},watch:{$route:function(){this.getRewardStatisticList()},date:function(e,t){""!==t&&this.getRewardStatisticList()}}},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"reply-comment-wrap"},[a("el-alert",{attrs:{title:"操作说明",type:"info","show-icon":""}},[a("div",[a("p",[e._v("\n        此表为\n        "),a("span",{staticClass:"red"},[e._v(e._s("staUserReward"==e.$route.name?e.userInfo.pseudonym:"全站"))]),e._v("\n        的辣椒打赏统计，您可以通过相应类型进行精确搜索\n      ")])])]),e._v(" "),a("el-row",{staticClass:"mbt20"},[a("el-col",[a("el-date-picker",{attrs:{type:"daterange","picker-options":e.pickerOptions,"value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)],1),e._v(" "),a("el-row",{staticClass:"mbt20"},[a("el-col",{attrs:{xs:20,sm:16,md:12,lg:9,xl:6}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchReplyCom(t):null}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}},["staUserReward"==e.$route.name?a("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.selectType,callback:function(t){e.selectType=t},expression:"selectType"}},[a("el-option",{attrs:{label:"书  名",value:"bookName"}}),e._v(" "),a("el-option",{attrs:{label:"书籍ID",value:"bookid"}})],1):a("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.selectType,callback:function(t){e.selectType=t},expression:"selectType"}},[a("el-option",{attrs:{label:"书  名",value:"bookName"}}),e._v(" "),a("el-option",{attrs:{label:"用户名",value:"userName"}}),e._v(" "),a("el-option",{attrs:{label:"用户ID",value:"userId"}}),e._v(" "),a("el-option",{attrs:{label:"书籍ID",value:"bookid"}})],1),e._v(" "),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchReplyCom},slot:"append"})],1)],1)],1),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.rewardCommentList.list,border:""}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bookid",width:"70",align:"center",label:"书籍ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bookName",label:"书名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userId",label:"用户ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"spicyiTicketCount",width:"70",align:"center",label:"辣椒"}}),e._v(" "),a("el-table-column",{attrs:{prop:"replyCommentsContent",label:"时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("time")(t.row.giveDateTime,"long")))])]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"mbt20",attrs:{background:"","current-page":e.rewardCommentList.pageNum,"page-size":e.rewardCommentList.pageSize,layout:"total, prev, pager, next, jumper",total:e.rewardCommentList.total},on:{"current-change":e.handleCurrentChange}})],1)},n=[],i=a("18Nq"),l=o,c=Object(i.a)(s,r,n,!1,l,null,null);t.default=c.exports},SAqg:function(e,t){},SdPR:function(e,t){},T4Ha:function(e,t){},T7XK:function(e,t){t.install=function(e,t){e.prototype.$ajax=function(e,t,a,o,s,r,n){var i=this;this.$http.isFunction(t)&&(a=t);for(var l=["/admin/updateAdminInfo","/admin/addPublishanotice","/admin/updatePublishanotice"],c=["/admin/getChapterCount"],u=!1,d=!0,m=0,p=l.length;m<p;m++)if(e.indexOf(l[m])>-1){u=!0;break}for(var h=0,f=c.length;h<f;h++)if(e.indexOf(c[h])>-1){d=!1;break}u&&this.$myLoad("正在加载中..."),this.$http.ajax({type:o||"post",url:"https://www.lajixs.com/api"+e,data:t,dataType:s||"json",xhrFields:{withCredentials:!0},crossDomain:!0,success:function(e){u&&i.$loading().close(),a&&(i.$http.isFunction(a)?a(e):console.log("callBack is not a function")),400===e.returnCode?i.$router.push("/login"):200!==e.returnCode&&e.msg.indexOf("暂无数据")<0&&d&&i.$message({message:e.msg,type:"warning"})},error:function(e){a(e),u&&i.$loading().close(),404===e.status?i.$message({message:"请求失败，请求方法不存在！",type:"error"}):503===e.status?i.$message({message:"请求失败，服务器内部错误！",type:"error"}):i.$message({message:"请求失败，网络请求超时！",type:"error"})}})},e.prototype.$formTime=function(e,t,a){a=void 0===a?"-":a;var o=new Date(e)||new Date,s=(new Date(e).getFullYear()||(new Date).getFullYear(),void 0),r=void 0;r=o;var n=r.getFullYear(),i=r.getMonth()+1<10?"0"+(r.getMonth()+1):r.getMonth()+1,l=r.getDate()<10?"0"+r.getDate():r.getDate(),c=r.getHours()<10?"0"+r.getHours():r.getHours(),u=r.getMinutes()<10?"0"+r.getMinutes():r.getMinutes(),d=r.getSeconds()<10?"0"+r.getSeconds():r.getSeconds();return"long"===t&&(s=n+a+i+a+l+" "+c+":"+u+":"+d),"middle"===t&&(s=n+a+i+a+l+" "+c+":"+u),"sort"!==t&&void 0!==t||(s=n+a+i+a+l),"mon"===t&&(s=n+a+i),s},e.prototype.$freshen=function(){var e=this;this.$ajax("/person-info",{token:localStorage.login_token},!1,function(t){200===t.returnCode?e.$store.state.userInfo=t.data:400===t.returnCode&&e.$router.push("/login")})},e.prototype.$updateCount=function(){var e=this;this.$ajax("/person-messageCount","",!1,function(t){200===t.returnCode&&(t.data.total=t.data.userMessageCount+t.data.userCommentReplyCount+t.data.userCommentCount,t.data.total=t.data.total>99?"99+":t.data.total,e.$store.state.message=t.data)})},e.prototype.$exit=function(e){var t=this;this.$ajax("/person-ClearUserInfo",{token:localStorage.login_token},!e,function(a){200===a.returnCode?(t.$cookie("login_key","",-1),t.$store.state.userInfo={},e||("modifyPage"===t.$route.name||"findPage"===t.$route.name?(t.$message("修改成功！"),t.$router.push("/login?redirect=/index")):(t.$message("退出成功！"),t.$router.push("/")))):t.$message(a.msg)})},e.prototype.$cookie=function(e,t,a){if(void 0===t){if(document.cookie.length>0){var o=document.cookie.indexOf(e+"=");if(-1!==o){o=o+e.length+1;var s=document.cookie.indexOf(";",o);return-1===s&&(s=document.cookie.length),unescape(document.cookie.substring(o,s))}}return null}var r=new Date;r.setDate(r.getDate()+a),document.cookie=e+"="+escape(t)+";path=/;"+(a?";expires="+r.toGMTString():"")},e.prototype.$myLoad=function(e){this.$loading({lock:!0,text:e||"数据提交中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"})},e.prototype.$isLogin=function(){var e=void 0;this.$ajax("/person-checkLoginState","",!1,function(t){e=t}),setTimeout(function(){console.log(e)},2e3)},e.prototype.$send=function(e,t){var a=this;console.log(this.$route.name),this.$consume({type:e,closeOnClickModal:!1,value:t,beforeClose:function(o,s,r){if("confirm"===o&&"letter"===e){var n=a.$http.trim(s.messageContent).length;n<200&&n>0&&a.$ajax("/person-sendmessage",{userName:a.$store.state.userInfo.pseudonym,sendName:t.name,sendUserId:t.id,messageContent:s.messageContent},function(e){r(),200===e.returnCode&&(a.$message({message:"操作成功"}),"messageHarvest"===a.$route.name&&a.$ajax("/sys-updateArewardmessageState",{arewardId:t.aid},!1,function(e){200===e.returnCode&&a.harvest(a.harvestList.pageNum)}))})}else r()}})},e.prototype.$isIE=function(){return!!(window.ActiveXObject||"ActiveXObject"in window)},e.prototype.$enableCookie=function(){window.navigator.cookieEnabled?console.log("可用"):console.log("不可用")},e.prototype.$checkCardId=function(e){var t={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江 ",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北 ",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏 ",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外 "},a={pass:!0,msg:"验证成功"};if(e&&/^\d{6}(18|19|20)?\d{2}(0[1-9]|1[012])(0[1-9]|[12]\d|3[01])\d{3}(\d|[xX])$/.test(e))if(t[e.substr(0,2)]){if(18===e.length){e=e.split("");for(var o=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],s=[1,0,"X",9,8,7,6,5,4,3,2],r=0,n=0,i=0,l=0;l<17;l++)n=e[l],i=o[l],r+=n*i;s[r%11].toString()!==e[17].toUpperCase()&&(a={pass:!1,msg:"身份证号校验位错误"})}}else a={pass:!1,msg:"身份证号地址编码错误"};else a={pass:!1,msg:"身份证号格式错误"};return a},e.prototype.$clearCache=function(){var e=this;this.$ajax("/admin/deleteCache","",function(t){200===t.returnCode&&e.$message({message:t.msg,type:"success"})},"get")}}},Tfte:function(e,t,a){"use strict";function o(e){a("6JdH")}Object.defineProperty(t,"__esModule",{value:!0});var s=a("3cXf"),r=a.n(s),n={data:function(){var e=this,t=function(t,a,o){!a||e.$http.trim(a).length<1?(e.volumeForm.volumeName="",o(new Error("卷名不能为空"))):e.$ajax("/books-getCheckVolume",{volumeName:a,bookid:e.ruleForm.bookId},function(e){200===e.returnCode?o():o(new Error(e.msg))})},a=function(t,a,o){a=e.$http.trim(a),!a||e.$http.trim(a).length<1?(e.ruleForm.chapterTitle="",o(new Error("请输入章节名称"))):e.$http.trim(a)===e.oldChapterName?o():e.$ajax("/chapter-checkName",{chapterName:a,bookId:e.ruleForm.bookId},function(t){200===t.returnCode?o():(e.$message("章节名重复，请重新填写！"),o(new Error("章节名重复，请重新填写！")))})};return{pickerOptions:{disabledDate:function(e){return e.getTime()<Date.now()-864e5}},isLoading:void 0,isRload:!0,iframeShow:"hidden",dialogSize:"tiny",original:{},volumeList:[],isAutoPublish:!1,labelWidth:"136px",dialogFormVisible:!1,editContent:"",initial:[],cidList:[],volumeForm:{volumeName:""},oldChapterName:"",ruleForm:{bookTitle:"",chapterTitle:"",volumeId:null,releaseTime:null,chapterContent:"",whetherPublic:0,chapterLength:0,chapterIsvip:0,authorWords:"",issue:!1,update:!1},rule:{volumeName:[{required:!0,validator:t,trigger:"blur"}]},rules:{chapterTitle:[{required:!0,validator:a,trigger:"blur"}],volumeId:[{required:!0,type:"number",message:"请选择分卷",trigger:"change"}],bookTitle:[{required:!0,message:"请输入书籍名称",trigger:"blur"}],chapterContent:[{required:!0,message:"请添加章节内容",trigger:"blur"}],releaseTime:[{required:!0,type:"date",message:"请选取时间",trigger:"blur"}]}}},methods:{submitForm:function(e){var t=this;this.isLoading=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),this.$refs.editChapterForm.validate(function(a){if(!a)return t.$nextTick(function(){t.isLoading.close()}),t.$message({message:"请完善信息后提交！",type:"warning"}),!1;"draft"===e&&(t.ruleForm.whetherPublic=1),t.editChapter()})},editChapter:function(){var e=this;if(this.ruleForm.chapterLength>2e4)return this.isLoading.close(),this.$confirm("文章内容超出字数长度限制，请保证字数长度在20000以内！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),!1;var t=JSON.parse(r()(this.ruleForm)),a=function(){e.$ajax("/admin/updateChapterInfo",t,function(a){e.isLoading.close(),200===a.returnCode&&e.$confirm(t.whetherPublic?1===t.whetherPublic?"保存草稿成功":"发布成功":"编辑成功","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.getChapterInfo()}).catch(function(){e.getChapterInfo()})})};if(1===this.ruleForm.whetherPublic)t.chapterContent=this.$http.trim(t.chapterContent).replace(/\n+\s+/g,"<H><LG>")+"<H><LG>",t.whetherPublic=t.issue?2:1,this.$ajax("/sys-getNetWorkDateTime","",function(o){200===o.returnCode?(t.releaseTime=e.$formTime(o.data.beijing,"long"),a()):e.isLoading.close()},"get");else{var o=document.getElementById("content_edit_sole").childNodes;t.chapterContent="";for(var s=0,n=o.length;s<n;s++)this.$http.trim(o[s].innerText).length>0&&(t.chapterContent+=this.$http.trim(o[s].innerText)+o[s].getAttribute("uuid"));t.releaseTime=this.$formTime(t.releaseTime,"long"),a()}},addNewVolume:function(e){var t=this;this.$refs[e].validate(function(e){e?t.$ajax("/books-addvolume",{volumeName:t.volumeForm.volumeName,bookName:t.ruleForm.bookTitle,bookid:t.$route.params.bid},function(e){200===e.returnCode&&(t.dialogFormVisible=!1,t.$message("添加成功"),t.getChapterInfo())}):t.$message({message:"请填写卷名！",type:"warning"})})},getChapterInfo:function(){var e=this,t=/<LG>[0-9a-z]{8}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{12}<\/?LG ?\/?>/,a=/<LG>[0-9a-z]{8}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{12}<\/?LG ?\/?>/g;this.$ajax("/sys-getNetWorkDateTime","",function(o){if(200===o.returnCode){e.$ajax("/admin/getChapterInfoShow",{chapterid:e.$route.params.cid},function(o){if(e.update=!1,200===o.returnCode){if(e.isRload=!1,e.original=JSON.parse(r()(o.data)),e.initial=[],delete o.data.createChapterTime,o.data.releaseTime=new Date(o.data.releaseTime),e.oldChapterName=o.data.chapterTitle,1===o.data.whetherPublic)o.data.chapterContent=o.data.chapterContent.replace(/<H><LG>/g,"\n\n  ");else{var s=o.data.chapterContent.match(a),n=o.data.chapterContent.split(t);o.data.chapterContent=o.data.chapterContent.replace(a,"\n"),s.forEach(function(t,a){e.initial.push({uuid:t,content:e.$http.trim(n[a])})})}e.ruleForm=o.data,e.getVolume(),setTimeout(function(){e.isRload=!0},100)}});var s=0;setInterval(function(){s++,e.$set(e.original,"nowTime",o.data.beijing+1e3*s)},1e3)}},"get")},getVolume:function(){var e=this;this.$ajax("/books-getvolume",{bookId:this.ruleForm.bookId},function(t){200===t.returnCode&&(e.volumeList=t.data,e.update=!0)})},checkChapterName:function(e){e.target.value.length},editChange:function(e){var t=document.getElementById("content_edit_sole"),a=t.childNodes;if(this.ruleForm.chapterContent=this.$http.trim(t.innerText),a.length>0)for(var o=0,s=a.length;o<s;o++)a[o].style=null,this.$http.trim(a[o].innerText).length?(a[o].getAttribute("uuid")?o>0&&a[o].getAttribute("uuid").length>7&&a[o-1].getAttribute("uuid")===a[o].getAttribute("uuid")&&a[o].setAttribute("uuid","<H><LG>"):a[o].setAttribute("uuid","<H><LG>"),a[o].childNodes.length>1&&(a[o].innerHTML=a[o].innerText)):a[o].setAttribute("uuid","<H><LG>");if(e.target.innerHTML.length<1){var r=document.createElement("p");r.innerHTML="<br>",r.style=null,t.insertBefore(r,t.childNodes[0])}},changeVolume:function(e){var t=this;this.volumeList.length&&e&&this.update&&this.$confirm("确认调整本章分卷?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$ajax("/chapterToVolume",{chapterid:t.ruleForm.id,volumeid:e,bookid:t.ruleForm.bookId},function(e){200===e.returnCode&&t.$message({type:"success",message:"调整成功!"})})}).catch(function(){t.$message({message:"已取消调整"}),t.getChapterInfo()})},preventCopy:function(e){if(17===e.keyCode&&72===e.keyCode)return e.returnValue=!1,!1}},created:function(){var e=document.body.clientWidth;this.dialogSize=e<1024?"small":"tiny",this.getChapterInfo()},watch:{"ruleForm.chapterContent":function(e){1===this.ruleForm.whetherPublic&&(this.ruleForm.chapterContent=e.replace(/^\s*\n+\s*/,"").replace(/\s*\n+\s*/g,"\n\n　　"))},editContent:function(e){var t=document.getElementById("content_edit_sole"),a=t.childNodes;if(this.ruleForm.chapterContent=this.$http.trim(t.innerText),a.length>0&&this.isUpDate)for(var o=0,s=a.length;o<s;o++)a[o].style=null,this.$http.trim(a[o].innerText).length?(a[o].innerHTML=this.$http.trim(a[o].innerHTML),a[o].childNodes.length>1&&(a[o].innerHTML=a[o].innerText)):a[o].setAttribute("uuid","<H><LG>")},"ruleForm.authorWords":function(e){this.$http.trim(e).length>100&&(e=e.substr(0,100)),this.ruleForm.authorWords=e.replace(/^\s*\n+\s*/,"").replace(/\s*\n+\s*/g,"\n\n　　")}},computed:{length:function(){var e=0,t=this.ruleForm.chapterContent;try{t=t.replace(/(\r\n+|\s+| )+/g,"龘"),t=t.replace(/龘+/g,""),e+=t.length}catch(e){console.log(e)}return this.ruleForm.chapterLength=e,e>2e4&&this.$message({message:"字数长度不可超过20000！",type:"error"}),e},isChange:function(){var e=!1;return this.original&&(e=!!this.original.whetherPublic||!(this.original.releaseTime&&this.original.releaseTime>this.original.nowTime)),e},authority:function(){return this.$store.state.userInfo.adminRolemenuanduserrole?this.$store.state.userInfo.adminRolemenuanduserrole:{}}},mounted:function(){var e=this;window.onresize=function(){var t=document.body.clientWidth;e.dialogSize=t<1020?"small":"tiny"}}},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("el-breadcrumb",{staticClass:"mbt20",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("书籍管理")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:"/book/list"}},[e._v("书籍列表")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:"/book_chapter_list/"+e.original.bookId}},[e._v("章节列表")]),e._v(" "),a("el-breadcrumb-item",[e._v("编辑章节")])],1),e._v(" "),a("el-alert",{staticClass:"mbt20",attrs:{title:"操作说明",type:"info","show-icon":""}},[a("div",{attrs:{slot:""},slot:"default"},[e._v("\n      文字说明文字说明文字说明文字说明文字说明文字说明\n    ")])]),e._v(" "),a("div",{staticClass:"form-wrapper"},[a("el-form",{ref:"editChapterForm",staticClass:"chapter-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":e.labelWidth,labelPosition:"left"}},[a("el-form-item",{attrs:{label:"书籍名称",prop:"bookTitle"}},[a("el-input",{staticStyle:{width:"260px"},attrs:{readonly:""},model:{value:e.ruleForm.bookTitle,callback:function(t){e.$set(e.ruleForm,"bookTitle",t)},expression:"ruleForm.bookTitle"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分卷名称",prop:"volumeId"}},[a("el-select",{staticStyle:{width:"260px"},attrs:{disabled:!e.authority.updates,placeholder:"请选择分卷"},on:{change:e.changeVolume},model:{value:e.ruleForm.volumeId,callback:function(t){e.$set(e.ruleForm,"volumeId",t)},expression:"ruleForm.volumeId"}},[[e._l(e.volumeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.volumeName,value:e.id}})}),e._v(" "),a("el-option",{attrs:{label:"",value:""},nativeOn:{click:function(t){e.dialogFormVisible=!0}}},[e._v("+新增分卷")])]],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"章节名称",prop:"chapterTitle"}},[a("el-input",{staticStyle:{width:"260px"},model:{value:e.ruleForm.chapterTitle,callback:function(t){e.$set(e.ruleForm,"chapterTitle",t)},expression:"ruleForm.chapterTitle"}})],1),e._v(" "),a("el-form-item",{staticClass:"contentBox",attrs:{label:"章节内容",prop:"chapterContent"}},[a("el-input",{directives:[{name:"show",rawName:"v-show",value:1==e.ruleForm.whetherPublic,expression:"ruleForm.whetherPublic==1"}],staticClass:"context",attrs:{type:"textarea"},model:{value:e.ruleForm.chapterContent,callback:function(t){e.$set(e.ruleForm,"chapterContent",t)},expression:"ruleForm.chapterContent"}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1!=e.ruleForm.whetherPublic,expression:"ruleForm.whetherPublic!=1"}],staticClass:"iframe-wrap"},[e.isRload?a("div",{attrs:{id:"content_edit_sole",unselectable:"on",contenteditable:!0},on:{input:e.editChange},nativeOn:{keydown:function(t){return e.preventCopy(t)}},model:{value:e.editContent,callback:function(t){e.editContent=t},expression:"editContent"}},[e._l(e.initial,function(t,o){return[a("p",{attrs:{uuid:t.uuid}},[e._v("\n                "+e._s(t.content)+"\n              ")])]})],2):e._e()]),e._v(" "),a("el-input",{staticClass:"authorSay-wrap",attrs:{type:"textarea",placeholder:"作者的话（不超过100字）"},model:{value:e.ruleForm.authorWords,callback:function(t){e.$set(e.ruleForm,"authorWords",t)},expression:"ruleForm.authorWords"}}),e._v(" "),a("span",{staticClass:"words"},[e._v("共 "+e._s(e.length)+" 字")])],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"50px"},attrs:{"label-width":e.labelWidth,label:"发布时间",prop:"releaseTime"}},[a("el-col",{attrs:{span:8}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择时间","picker-options":e.pickerOptions},model:{value:e.ruleForm.releaseTime,callback:function(t){e.$set(e.ruleForm,"releaseTime",t)},expression:"ruleForm.releaseTime"}})],1),e._v(" "),a("el-col",{attrs:{span:12}},[e.ruleForm.whetherPublic?a("el-form-item",{attrs:{"label-width":"0px",prop:"issue"}},[a("el-checkbox",{model:{value:e.ruleForm.issue,callback:function(t){e.$set(e.ruleForm,"issue",t)},expression:"ruleForm.issue"}},[e._v("立即发布")])],1):e._e()],1)],1),e._v(" "),a("el-form-item",{attrs:{"label-width":e.labelWidth,label:"是否VIP"}},[a("el-radio",{staticClass:"radio",attrs:{label:0},model:{value:e.ruleForm.chapterIsvip,callback:function(t){e.$set(e.ruleForm,"chapterIsvip",t)},expression:"ruleForm.chapterIsvip"}},[e._v("普通")]),e._v(" "),a("el-radio",{staticClass:"radio",attrs:{label:1},model:{value:e.ruleForm.chapterIsvip,callback:function(t){e.$set(e.ruleForm,"chapterIsvip",t)},expression:"ruleForm.chapterIsvip"}},[e._v("VIP")])],1),e._v(" "),e.authority.updates?a("el-form-item",{staticClass:"tc",staticStyle:{width:"820px"},attrs:{"label-width":e.labelWidth}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("create")}}},[e._v("确认编辑")])],1):e._e()],1)],1),e._v(" "),a("el-dialog",{staticClass:"alertDialog",attrs:{top:"45%",title:"新增分卷",visible:e.dialogFormVisible},on:{open:function(t){e.volumeForm.volumeName=""},"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"volumeForm",attrs:{model:e.volumeForm,rules:e.rule,"label-position":"left"}},[a("el-form-item",{attrs:{label:"分卷名称",prop:"volumeName","label-width":"80px"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.volumeForm.volumeName,callback:function(t){e.$set(e.volumeForm,"volumeName",t)},expression:"volumeForm.volumeName"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addNewVolume("volumeForm")}}},[e._v("确 定")])],1)],1)],1)},l=[],c=a("18Nq"),u=o,d=Object(c.a)(n,i,l,!1,u,null,null);t.default=d.exports},UU5r:function(e,t,a){"use strict";function o(e){a("AC9z")}Object.defineProperty(t,"__esModule",{value:!0});var s={},r=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},n=[],i=a("18Nq"),l=o,c=Object(i.a)(s,r,n,!1,l,null,null);t.default=c.exports},VkQR:function(e,t){},W7OG:function(e,t,a){"use strict";function o(e){a("JVWg")}Object.defineProperty(t,"__esModule",{value:!0});var s={},r=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},n=[],i=a("18Nq"),l=o,c=Object(i.a)(s,r,n,!1,l,null,null);t.default=c.exports},XGY8:function(e,t,a){"use strict";function o(e){a("bFsG")}function s(e){a("3InB")}Object.defineProperty(t,"__esModule",{value:!0});var r=a("3cXf"),n=a.n(r),i=(a("Umb+"),a("BMa3"),{title:"表格编辑器",data:function(){return{rowNum:6,colNum:6,tableArr:[],tableTitle:["书籍编号","书籍名称","作者编号","作者名称","第三方","考勤"],copyContent:"",date:""}},created:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth();this.date=t+"-"+a},methods:{sendFather:function(e){"close"===e?this.$emit("fromChild",!1,"close"):this.$emit("fromChild",!1,"succ"),this.tableArr=[],this.copyContent=""},repeat:function(){this.rowNum=6,this.colNum=6,this.tableArr=[],this.copyContent=""},createTable:function(){for(var e=new Array,t=0;t<this.rowNum;t++){e[t]=new Array;for(var a=0;a<this.colNum;a++)e[t][a]=""}this.tableArr=e},submitData:function(){var e=this;if(""!==this.date)if(0!=this.tableArr.length){for(var t=this.tableArr,a={},o=[],s=0;s<t.length;s++){var r=new Object;r.bookid=t[s][0]?t[s][0]:"",r.bookName=t[s][1]?t[s][1]:"",r.authorid=t[s][2]?t[s][2]:"",r.authorName=t[s][3]?t[s][3]:"",r.thirdPart=t[s][4]?t[s][4]:0,r.checkworkattendance=t[s][5]?t[s][5]:0,o[s]=r}a.data=new Object,a.data.list=o,a.data=n()(a.data),a.startdate=this.date+"-01 00:00:00",a.enddate=this.date+"-31 23:59:59",this.$store.dispatch("generateMonthlyreport",a).then(function(t){e.$message({message:"操作成功",type:"success"}),e.sendFather("succ")})}else this.$message({message:"请编辑表格",type:"warning"});else this.$message({message:"请选择时间",type:"warning"})}},watch:{copyContent:function(e){var t=e.replace(/(^\s*)|(\s*$)/g,"");t=t.split("\n");for(var a=0;a<t.length;a++)t[a]=t[a].replace(/\s+/g," "),t[a]=t[a].replace(/(^\s*)|(\s*$)/g,""),t[a]=t[a].split(" ");"书籍编号"===t[0][0]&&t.shift(),this.tableArr=t}}}),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mounth-component"},[a("div",{staticClass:"mounth-header"},[a("el-row",[a("h2",[e._v("表格编辑器")]),e._v(" "),a("i",{staticClass:"el-icon-close",on:{click:function(t){e.sendFather("close")}}})]),e._v(" "),a("el-row",{staticClass:"header-row"},[a("el-date-picker",{staticClass:"fl",staticStyle:{width:"200px"},attrs:{type:"month","value-format":"yyyy-MM",placeholder:"选择月"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),e._v(" "),a("span",[e._v("行数")]),e._v(" "),a("el-input-number",{staticClass:"row-num",attrs:{size:"small"},model:{value:e.rowNum,callback:function(t){e.rowNum=t},expression:"rowNum"}}),e._v(" "),a("span",[e._v("列数")]),e._v(" "),a("el-input-number",{staticClass:"col-num",attrs:{size:"small",disabled:!0},model:{value:e.colNum,callback:function(t){e.colNum=t},expression:"colNum"}}),e._v(" "),a("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:function(t){e.createTable()}}},[e._v("生成表格")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh",circle:""},on:{click:function(t){e.repeat()}}}),e._v(" "),a("el-button",{staticClass:"submit-btn",attrs:{type:"primary",round:""},on:{click:function(t){e.submitData()}}},[e._v("提 交")])],1),e._v(" "),a("el-row",[a("el-input",{attrs:{type:"textarea",resize:"none",placeholder:"复制区域"},model:{value:e.copyContent,callback:function(t){e.copyContent=t},expression:"copyContent"}})],1)],1),e._v(" "),a("div",{staticClass:"mounth-section"},[a("el-row",{staticClass:"table-row"},e._l(e.tableTitle,function(t,o){return a("el-input",{key:o,staticClass:"table-col",attrs:{disabled:!0},model:{value:e.tableTitle[o],callback:function(t){e.$set(e.tableTitle,o,t)},expression:"tableTitle[index]"}})})),e._v(" "),e._l(e.tableArr,function(t,o){return a("el-row",{key:o,staticClass:"table-row"},e._l(t,function(t,s){return a("el-input",{key:s,staticClass:"table-col",model:{value:e.tableArr[o][s],callback:function(t){e.$set(e.tableArr[o],s,t)},expression:"tableArr[rowIndex][colIndex]"}})}))})],2)])},c=[],u=a("18Nq"),d=o,m=Object(u.a)(i,l,c,!1,d,null,null),p=m.exports,h={components:{MounthComponent:p},data:function(){return{dialogVisible:!1,searchForm:{},defaultValue:null,pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()}},reportCommentList:{},keywords:"",selectType:"bookName",multipleSelection:[],userInfo:{},date:"",setTime:"",isOpenEdit:!1,dateObj:{starttime:"",endtime:""}}},created:function(){this.getPublishTime(),this.getUserInfo()},methods:{sendFather:function(e,t){"succ"===t&&(this.getPublishTime(),this.getUserInfo()),this.isOpenEdit=e},getReportStatisticList:function(){var e=this,t="/admin/getAuthorMonthlyreportAdminList";if(this.searchForm={},this.searchForm.page=this.$route.params.page,this.$route.params.aid&&(this.searchForm.authorid=this.$route.params.aid),this.selectType&&this.keywords){if(("bookId"===this.selectType||"userId"===this.selectType)&&!Number(this.keywords))return this.$message({message:"ID必需为数字",type:"warning"}),!1;this.searchForm[this.selectType]=this.keywords}this.date&&(this.searchForm.year=this.date.split("-")[0],this.searchForm.month=this.date.split("-")[1]),"authorMonReport"===this.$route.name&&(t="/admin/getAuthorMonthlyreportByAuthormon"),this.$ajax(t,this.searchForm,function(t){200===t.returnCode?"authorMonReport"===e.$route.name?e.$set(e.reportCommentList,"list",[t.data]):e.reportCommentList=t.data:t.data||(e.reportCommentList={})})},searchReplyCom:function(){1===Number(this.$route.params.page)?this.getReportStatisticList():this.$router.push({params:{page:1}})},handleCurrentChange:function(e){this.$router.push({params:{page:e}})},getUserInfo:function(){var e=this;this.$route.params.aid&&this.$ajax("/person-SimplifyUserInfo",{puserid:this.$route.params.aid},function(t){200===t.returnCode&&(e.userInfo=t.data)})},excelProgress:function(e){this.$myLoad("正在上传中...")},progressEnd:function(e,t){200===e.returnCode&&this.$message({message:e.msg,type:"success"}),this.$loading().close()},getPublishTime:function(){var e=this;this.$store.dispatch("getDataPosition").then(function(t){e.setTime=t;var a=new Date,o=a.getFullYear(),s=a.getMonth();e.date=o+"-"+s,e.getReportStatisticList()})},setPublishTime:function(){var e=this;this.setTime?this.$ajax("/sys-setDataPosition",{date:this.setTime},function(t){200===t.returnCode&&(e.$message({message:t.msg,type:"success"}),e.getPublishTime())},"get"):this.$message({message:"请选取月份",type:"warning"})},oneKeyMonthly:function(){var e=this;if(this.date){var t=this.date.split("-"),a=this.date+"-"+new Date(t[0],t[1],0).getDate()+" 23:59:59",o=this.date+"-01 00:00:00";this.$ajax("/generateMonthlyreport",{startdate:o,enddate:a},function(t){200===t.returnCode&&(e.$message({message:t.msg,type:"success"}),e.getReportStatisticList())},"get")}else this.$message({message:"请选取时间",type:"warning"})},editMonthly:function(e){this.date?this.$router.push({name:"authorEditMonReport",params:{bid:e.bookid,time:this.date}}):this.$message({message:"请选取时间",type:"warning"})}},computed:{isAuthor:function(){return"authorMonReport"!==this.$route.name}},watch:{$route:function(){this.getReportStatisticList()},date:function(e,t){""!==t&&this.getReportStatisticList(),this.$store.state.date=e}}},f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"reply-comment-wrap"},[a("el-alert",{attrs:{title:"",type:"info","show-icon":""}},[a("div",[a("p",[e._v("\n                此表为\n                "),a("span",{staticClass:"red"},[e._v(e._s(e.$route.params.aid?e.userInfo.pseudonym:"全站"))]),e._v("\n                的月报列表，您可以通过相应类型进行精确搜索\n                "),e.$route.params.aid?a("span",[e._v(",您也可以直接"),a("router-link",{attrs:{to:"/author/add_monthly/"+e.userInfo.userId}},[e._v("添加月报")])],1):e._e()]),e._v(" "),a("p",[a("span",{staticClass:"red"},[e._v("说明：")]),e._v("每月15号后台会自动生成上一个月的月报，如果出现异常管理员可以进行手动生成；月报会根据最新上传的excel表格里的书单进行生成，请及时更新模板及时更新excel表单")]),e._v(" "),a("p",[a("span",{staticClass:"red"},[e._v("ps：")]),e._v("发布时间是指全站可以让作者查看最新月报的时间")])])]),e._v(" "),e.isAuthor?a("el-row",{staticClass:"mbt20"},[e._v("\n        发布时间：\n        "),a("el-date-picker",{staticClass:"input-with-select",staticStyle:{width:"140px"},attrs:{placeholder:"选择月",type:"month","value-format":"yyyy-MM"},model:{value:e.setTime,callback:function(t){e.setTime=t},expression:"setTime"}}),e._v(" "),a("el-button",{on:{click:e.setPublishTime}},[e._v("更新")]),e._v(" "),e.isAuthor?a("el-button",{staticClass:"fr",attrs:{size:"medium"},on:{click:e.oneKeyMonthly}},[e._v("一键月报")]):e._e()],1):e._e(),e._v(" "),a("el-row",{staticClass:"mbt20"},[a("el-date-picker",{staticClass:"fl",staticStyle:{width:"120px"},attrs:{type:"month","value-format":"yyyy-MM",placeholder:"选择月"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),e._v(" "),e.isAuthor?a("el-col",{attrs:{xs:20,sm:16,md:12,lg:9,xl:6}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchReplyCom(t):null}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}},["authorMonReport"==e.$route.name?a("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.selectType,callback:function(t){e.selectType=t},expression:"selectType"}},[a("el-option",{attrs:{label:"书  名",value:"bookName"}}),e._v(" "),a("el-option",{attrs:{label:"书籍ID",value:"bookid"}})],1):a("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.selectType,callback:function(t){e.selectType=t},expression:"selectType"}},[a("el-option",{attrs:{label:"书  名",value:"bookName"}}),e._v(" "),a("el-option",{attrs:{label:"作者名",value:"authorName"}}),e._v(" "),a("el-option",{attrs:{label:"作者ID",value:"authorid"}}),e._v(" "),a("el-option",{attrs:{label:"书籍ID",value:"bookid"}})],1),e._v(" "),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchReplyCom},slot:"append"})],1)],1):e._e(),e._v(" "),e.isAuthor?a("el-upload",{staticClass:"upload-demo fr",staticStyle:{display:"inline-block"},attrs:{"show-file-list":!1,"on-progress":e.excelProgress,"on-success":e.progressEnd,"on-error":e.progressEnd,action:"https://www.lajixs.com/api/uploadExcel"}}):e._e(),e._v(" "),a("el-button",{staticClass:"edit-btn fr",attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(t){e.isOpenEdit=!0}}})],1),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.reportCommentList.list,border:""}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bookid",label:"书籍ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bookName",label:"书名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bookName",label:"作者"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.authorName)+"(id:"+e._s(t.row.authorid)+")")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"thirdPart",label:"第三方"}}),e._v(" "),a("el-table-column",{attrs:{prop:"checkworkattendance",label:"考勤"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bubscribe",label:"订阅"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pepper",label:"打赏"}}),e._v(" "),a("el-table-column",{attrs:{prop:"millet",label:"小米椒"}}),e._v(" "),e.isAuthor?a("el-table-column",{attrs:{prop:"replyCommentsContent",label:"时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("time")(t.row.dataTime,"sort")))])]}}])}):e._e(),e._v(" "),e.isAuthor?a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{attrs:{href:"javascript:0;"},on:{click:function(a){e.editMonthly(t.row)}}},[e._v("编辑")])]}}])}):e._e()],1),e._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.reportCommentList.total>e.reportCommentList.pageSize,expression:"reportCommentList.total>reportCommentList.pageSize"}],staticClass:"mbt20",attrs:{background:"","current-page":e.reportCommentList.pageNum,"page-size":e.reportCommentList.pageSize,layout:"total, prev, pager, next, jumper",total:e.reportCommentList.total},on:{"current-change":e.handleCurrentChange}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isOpenEdit,expression:"isOpenEdit"}],staticClass:"shadeFloor"}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isOpenEdit,expression:"isOpenEdit"}],staticClass:"edit-box"},[a("mounth-component",{attrs:{dateObj:e.dateObj},on:{fromChild:e.sendFather}})],1)],1)},b=[],g=s,v=Object(u.a)(h,f,b,!1,g,null,null);t.default=v.exports},XOnO:function(e,t,a){"use strict";function o(e){a("I3pU")}Object.defineProperty(t,"__esModule",{value:!0});var s={},r=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},n=[],i=a("18Nq"),l=o,c=Object(i.a)(s,r,n,!1,l,null,null);t.default=c.exports},YMjq:function(e,t){e.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAUDBAQEAwUEBAQFBQUGBwwIBwcHBw8LCwkMEQ8SEhEPERETFhwXExQaFRERGCEYGh0dHx8fExciJCIeJBweHx7/2wBDAQUFBQcGBw4ICA4eFBEUHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh7/wAARCAB2AHYDAREAAhEBAxEB/8QAHAAAAAcBAQAAAAAAAAAAAAAAAQIDBAUGBwAI/8QAPhAAAQIEBAMGBAIIBgMAAAAAAQIDAAQFEQYSITETQVEHCBQiYZEycYGhI0IVGDNSpbHB4zZWZnN00YOywv/EABoBAAIDAQEAAAAAAAAAAAAAAAECAAMFBAb/xAAwEQACAgEDAgUCBQQDAAAAAAAAAQIRAwQSIQUxExRBUYFhwSIyQlKhI2KR8HGx4f/aAAwDAQACEQMRAD8A8py7anDkSLk8o4pSS5ZowjZKOUebQWiUhQWbC3WObzCaL/BaJqlUEuuobcQtJtdYMc8sllm1RQpX6QinvJTL5rEXJVy9IilfckeURSNV2O14axhwZMqQpxLqAM1glRsTC7g0O10gCkKnEzGZ1J0bA3HOApcgdo33vVSS5x7DCUJKsvi7gdPwY79c62/JwaFpbvg8/wBXpvgnAhSzmIvtHApHf3Ix0qToUkQ65FdiFydrw4tEzSZgolXEkXz+X6RVLhlkVaGYY4bylLHlJ0vB3WuCbeQrzbOfMg2TzvE3E2ocy62QjKRcwr5HRWpFeR5KuhjRyK40cON0zQqI83NSCL5cyDfXr6RlSTTO7urH79Ul5bzq+MaEDnAXIrx+5HTk4zPupz3CSM2/KCNGKSKxOPFDqkIyJAVsIvityElKh3TJZ+ccSsqTkQRmBMLJqI0U5FimnZdbbaJdKUqtZWXQRTZYoM3nvFECYw6DzMyL9P2UaXUP0/P2MrRK1L4+5lczQZeYWXXLrBTYJOwjP7HSsr7FSrlEmmkvBLQyN+a4G46xFKmdCakuCGk5TMspBBRa94ZzGjjHD0n4ZAVxAm/w+sLusbZRHPvOJ8pvaLIpFbY38yzokn5Q3CFpirINoDGSE8CYXrWMsUSWG8PyviKhOLytgmyUgC6lqPJIAJJ9I06t0Z7koq2bjiLu+4swjhSarUhX6VXlSCVPTsnJ5wtDY3WjMPOANTt6XirUaCaW4Gm6linLYmYpMz6n3lL2vyjijjpGg52zXOyvsRxHjXDbWIX6rT6DS31lEs5NhSnJgC4KkIT+UK0uSOf16cOhnm5Rx6jqGLT8SZnPazgmv9nuLDRK+llRW2HpaZYUVNTLRJAWgkDoRY6giHeB4+CRzLKtyI6nTzDMspxN85uMt944Z45OVHfjnHbZvvdu7IaXi7Dz2NcYvzTNHbfLMrLM+QzRT8RKt8t/LpYkhWotHZpdD4z5M/WdRWnXBvOOsD4Z7RZVpmRfmaZVJNDhlM5u2skC4UNdPKNjcamxjv1uglONv0MrRdSg5OK9TyrUKo5T52bpU03wJqVeWw+2s6oWlRSpP0IMeanKUXtZ6OOnUqlYSlSNTxBUm5WUOd55SWWGGtS4omwG/rCqTk0l3LJKOJcmjVPu6VpqnTD0pWKVOVdtu5pzSlBS7C6kpURYq30203jTfTNRHHvOGHV9PLJ4Zhk9JkOZAhxPBJC0LG2u3pGbHJXc1XCyEq5bEzlZJy5RcesdGJtrk58i5NlwF3eMTVzDUnWqjW6VQRPNcaUl5oLU6tBtkUoAWQlW97k2tpHfj0GTLHcjOy9Sw4J7ZMy/GmGKvhLEs5QK5LCXnZVWVQBulQIuFJPNJBBB9Y45xcJbZHfjlHJHdE3DB3eopjWIZdus4Sekqc/dqYmWZ/jLZQoWzhHDTmt0vt7RsRzc9jGnpbi1ZomIO2ns0wdRXq5I4pksQzimFCRp8kVZ3VKFhxCU/hDrm16AnQ9ufWRnCkZel6XPHl3NmQ/rSD/I38W/sxxeN9DX8t/cahgHt2wJjihMitVWUwlVJJKkLlp98qacb3CkO5QCeqbA32vHXptVGCdmZrunTytOLKr2jd57DtOq7NHwtRXMQ0+SZyGoKmjLB1wklWVCm1HKNLE2vrpaxNGXPum2dWn0jx41Fsq/603+hf4t/ZivxfodHlvqbt2I9pVL7XsDvyUmyimVumPFblPcmAsqbJNlpNk3T5rE20Oh3BPTpcyjK2Z/UNJKUKRdJGUThsO4hxHNS9Kp0iguOvzDyUpGltTe25+psBvHVqNRBwpGdo9HlWRSkqo8y13vTSz1bnnJLBa3pZUwssuLqWRS0ZjlUU8I5SRY2ubdYynnr0PRLS8dw1D71DUrV5WYfwQtLKHRxCip5lBOxIHCFza+lx84HmPoHyn1Nbc7XOyumyYxUnGcvNsi7zMgyhRnFr3DZbt5TfS5sPWO+fUIPHRj4+k5Vn3ehkbnebL7y3TgnKpaioj9KbXP+1GX5z6G4tDf6v4AHeUN/wDBX8U/tQPPfT+SeQ/u/g1nD/a5gHGNGZrU/iGUw9OtspROSE6olaCnS7ZA/EB5W16gRoabqWKMKkZOs6PmyZbgUrF/eLprlefaouHHZ+nS4SzLzLk5wVPJSLZigtm1ze1ze1r22jMy9TSk2o2bOHpTUFulX+/8nj5SHBrlPtFiaGphSlR3BH0g7kCjghV9jEclQaBU0oHUH2gRkiOIGQjkfpB3AUAQyo8j7QrnQ20fUl+p02ebnaXOTUlNNn8N6XdU24n5KTYiFeVIPh2j0p3152qTcvhaWXPzTjCjNqcaU6rIojg2JF7Ei59zF+pnto5NHG7PNiJNXMxwvKaCx8CiZax1hXksbaLIl/T2hHMZRHDcs5a4QbRXLIixQfoOESbqj5W1H6RW8i9x9jHDMk+d2lX+UVvKvctUGSEtTnyn9mr2iqU7LVEsNXwGJRlTsvdzKf3d4aOdt0zgW2XYrD1NLSihbYSrmkptF24WqBbpyVDVtN/lEcxoxsdJonFSLNBQ+UV+LRZ4SYu5hlCUhSWRe1z5YHjsLxpjB2SaTdKW9R6QybZW6RIYTwfWMVVxmj0GnOTU49eyU2ASBupROiQOpizHGc5bY9xZyjCO6Rufe6wpV10qgVRMrx5KWW+2+80oLS0pfCyhVtr5T6aRqdRUkoszunSjJySZ54RR3CbZYx3lSNdYwzlFUE3sbCB4w3hjXweRVk+a0MpNoD/CPGGHDYW0iqVeg6kyVp8utwhtV7ctYpfBZGRNSlOsnz/eK2M2kTUlTGS3dSrfOCUTyNPgvbEqi54qb3GgIi9RXqZUp+xX8W4UZqkwH0K4KkNgXA0JvzguWx8FuLJa5IeSwE+4EqTNNKuDe6CLHlAU3LhFrzRh3FF0OZpiU8dmyeqdQPQxVK0y+GWM+wZRl8tiBCFnJHTErT03IbSfpDb2FKzRO73WaLRq9VJCcfakFVSVDDE04cqErCr5FK/KFddtBGt0nUww5vxmZ1bTZM2BqBp/aMWKHgGsyVUdYW/U5fw8tKBYUVquDxLDYJ3v1+kbfWdXi8Bx9WYPRNHlhn3S7I87ooACcznTQR4tSbPYeKiJxBTFNS6Q2ki51Ii7G1fIJStEG1TCd0/aLtzKbHjFOA0tAH3EhJyobcvaElRPEHrxs2bDlyhNpFPkjH6k+15CSkgwdpdwzbUNW2Gkde1GBKQWbl0KRc/beFyRVEhJ2NWELNuGw9k11ItFMU74Rc2vVhp+nKmGLAeYjUKJsfnaGnjbXAMeVRZSq3RlSzuQHU62B2jmcWmaeLOpKyM/R5UL3P1ESy3ch3L0vOE+h6QBZZKNW7UmeKqmkD4eL/8AEbnWf0fP2MbQut3x9yluS4yakxipHdvISpy6nBlOUgHQw0eGNuI5MiBsn7RZZLDJkyDomCyWKJkzf4dflCE3HOSqifh+0FcA3DGp0jxSE5EpzA725QxZGbRsSUEi8dFWY9s62U3icInLDpWVjeHUrA1TBeSpbZSh3hqOxteJLn1AnzyiuTtLnn3VOLQXD1B0t6RyvHNnXHNFDFynuN24jZTfUXG8VuDRcsyY6plPemJpuWlJdx59w2QhCSVKPoBEjjlJ0kSWTjkvfalITsm1T3JiVdbQriAKUnS/l0v19I2OrJvb8/Y4dLVsoLiCs6q9ox6Z27hm7LKKrZb9DBoO4L4MndI94NAckcJL0gk3HeDtyEQm44yeuoET1JuCmTA/LBDuLwpaWkXVF7lSOBJtkZMTb61lLLenWOeU2+x0RhFLkMhc4EXKE6jkdYn46A1AELeG5PvDLeTgUZmX29CYeMpoVwixKbUXykLTdIN99YErbDFJIuHZKZdqpVFplSW59+VKJNSyAb38yUnkSP5Ro9JcI5vxnLrVOWJ7O5Y682/K4Mq6a2FpZdbCGG3j5lPXFikHpufSNrq0sLw/Uy+lwzRyPd2Mi4AjylJHoLBLAItEaBYHh09BEaJYBlxeBtDuO8MIO1E3AGXAMDaTcF4A6RNodxJOlTh125QWr7lapAISlPmP3ibUTcKEkwwoFvSJTJdhSkZgOZ2iKLIdk1iUQ4AJOa9iDcG9rRNobLPjxxx5UmXXFOEZ7FSif3Y1OpL8vz9ijA6srHDEZm0vsKsJSgqOwgbSWw2QbRHEls7IPrEoNhVhKbFVtSE/WJRAwQjW4iUC2FKB0iBtijalHMCFXSop1G8MhG6AdKkAHhqNyAbD1icATsSkWlpYuc6jmUNb2AzHQREgylyKoUouLRkUMttx1ggdUJuoc8U04C5cBfl5Eacv6xCJqqFGllbSF5SCRexG0QkvYd06nz9UnW5KnShmHnDbKNABzUSdABDQhKbqINyXctePaNPS0rKzam0uMJKkrcaUFBBNrA222jT6jCVRdFGKafZlLWVpcbSG1kKJuQNtIyi9VQlUWyqTeTdSBkJOXQ+/KIGMuQw4iXUtKSSMpOc76cvvEDfFiiUlRsEkk9BBFcmMK04UsFkJcTmPmIFiLa6H6QrTHgOUrSjQh0A3sVgn7xKD3CuuPAAtSzi0nmRaJQUYkpusLGROOKyAkAKs/wDEeu8ca1zX6Ea70cPYREpMqfTxcaVhbqb2AmiSknnoreJ52f7ETysBQSK5h/TGlZKwkEhE6Ra2l7BW55/WC9dkSvav8C+Wh7BjKTpZSgY1rigE2BE2oX+t7kQPPZL/ACr/AATymP2DMSFVQgqbxrWrnUFU2f6k6QXr5t/lQPLY16Cyf022qxxXVlk7ZJuwEJ5ufsP4GL2NO7uuIUUrEFVpuIa/NBdVlAzKvzj9221hV8pOycw0vtpGp0rXwhn/AKnYzuqaN5MDWJcmmdq00zhrs4rknUJ9DU5VpYyskyw7dwquLuix0CL3v1sOYvudY12KGGu7fYxOjaHKs1vseV25asNpVw8WVo2Gn45015ax5Dzj/aj1vl4B1sYiWtCkYxq2VWgDjoIUem+sFav3h/LB5ePp/wBDaYlsTpSAvFtSFzqSSSPZW0RayH7P5GWnX+oK0xXFEZcZVAE7qStVv5wPNxT/ACfyHy6r/wAFPDV7PdWLKjNC40U6pQ/9oL1q/YDy0RmikYh0JxRVBrpeaVt13ix9QX7BfKQ9RVNMxElP4eMqsU/8lVh94j6j/YieTgTIkGnUkraSPmSkRnxtHQ8jDM0SRU2QpKSlY1DYI+9/6w26V3ZXLN6C7dKoTXkEs3rqUAk3+djDOUm+WV+JP0F3WqcyyVuSss02kfEvYe0LtbYFOT4sTUiQWlC/DNlI1CQ1a/vr7wOwy3DOZfkioNmQZUoHkg6X62MFRbHqvUIywwHS8/KtN2TmykK8vS+umkNTrgG5s1nvEIbU7QFLQhQHiB5v/F/1G51z9Hz9jL6Y63/H3Mr4SWwrwjUqhyxUM4JBPrrsfSMFU3yajbBDk2qQATTksLuFOM2Sob3I9QddR6GGaSl3sF2O3i9NM2kw2hxBByLSmxHNJHLTnrYwiST5I3QXKhSrPSYYcGxWhP2IgNNDKQi7TnlZlqKDp8TW4hR/FQ0RKVJoKbef8Sj8p+BdvWGltbtKgxmhPw9RQSWHnLE2yupzW+RBht0fVDWPEzaVPENy6FrA+J1Ri3YcN+7FUomXTleW2QSBkSCEj+pibRd6Qs2EtJOVtAJ55Ym0ltgKXxdD+XbT2gbSXQznVFIUASk7aQKLYuxlIMrcbZeDhTZZJublXziyl7EnLmh+VnirbISUqTcgjff/AKgUqsRWat3hFWNCSUpUFeIBvy/Z2IjZ61zs+fscHTv1fH3MvS6tCkIcIVfQG3SMCjSTHGyjl5deXygUhd1oM0w278aQCTuBrBXYLk4sMEWAImHNb6FIIg7CW67CUwWktqcDd1J1uPLfTXaAyRbboLTptiabUQl4ZTYpUoERGkNNOPdhw5LElCm13TzBiBqS9T//2Q=="},YSag:function(e,t){},YjLT:function(e,t,a){"use strict";function o(e){a("9+Z6")}Object.defineProperty(t,"__esModule",{value:!0});var s={},r=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},n=[],i=a("18Nq"),l=o,c=Object(i.a)(s,r,n,!1,l,null,null);t.default=c.exports},Z7az:function(e,t){},ZYSf:function(e,t){},Zl42:function(e,t){},awcr:function(e,t){},bFsG:function(e,t){},bLU8:function(e,t,a){"use strict";function o(e){a("SdPR")}Object.defineProperty(t,"__esModule",{value:!0});var s=a("3cXf"),r=a.n(s),n=(a("4Xi4"),{data:function(){var e=this,t=function(e,t,a){t&&t.length>20?a(new Error("总长度不可超过20个字符")):a()},a=function(t,a,o){if(a){var s=e.$checkCardId(a);s.pass?o():o(new Error(s.msg))}else o()};return{rules:{userAutograph:[{validator:t,trigger:"blur"}],userIdentityCard:[{validator:a,trigger:"blur"}]},userDetailInfo:{userAutograph:"",userIdentityCard:""}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message({message:"请检查信息是否完整",type:"warning"}),!1;var a=JSON.parse(r()(t.userDetailInfo));a.userBorndate=a.userBorndate+" 00:00:00",t.$ajax("/admin/updateUserInfo",a,function(e){200===e.returnCode&&(t.$message({message:"更新成功",type:"success"}),t.getUserInfo())})})},resetForm:function(e){this.$refs[e].resetFields()},getUserInfo:function(){var e=this;this.$ajax("/admin/showUserInfo",{userid:this.$route.params.rid},function(t){200===t.returnCode&&(delete t.data.userPassword,t.data.originGrade=JSON.parse(r()(t.data.integration)),t.data.integration="",t.data.lastLogTime=e.$formTime(t.data.lastLogTime,"long"),t.data.nowLoginTime=e.$formTime(t.data.nowLoginTime,"long"),t.data.userBorndate=e.$formTime(t.data.userBorndate),t.data.userCreateDate=e.$formTime(t.data.userCreateDate,"long"),e.userDetailInfo=t.data)})}},created:function(){this.getUserInfo()}}),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-detail-info"},[a("el-alert",{attrs:{title:"操作说明",type:"info",description:"请选取推荐位类型，按类型搜索需要修改的推荐位。图片轮播和右侧小图推荐位需要单独上传图片，请编辑完成后点击换图进行图片更换","show-icon":""}},[a("div",[a("p",[a("span",{staticClass:"red"},[e._v("注意：")]),e._v("修改个人积分时请填写需添加的积分，此值可以是负数，负数即表示减少当前用户的积分")])])]),e._v(" "),a("el-row",{staticClass:"mbt20"}),e._v(" "),a("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm",attrs:{model:e.userDetailInfo,"status-icon":"",rules:e.rules,"label-width":"100px"}},[a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"笔名",prop:"pseudonym"}},[a("el-input",{staticClass:"mw220",model:{value:e.userDetailInfo.pseudonym,callback:function(t){e.$set(e.userDetailInfo,"pseudonym",t)},expression:"userDetailInfo.pseudonym"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"真名",prop:"realName"}},[a("el-input",{staticClass:"mw220",model:{value:e.userDetailInfo.realName,callback:function(t){e.$set(e.userDetailInfo,"realName",t)},expression:"userDetailInfo.realName"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"联系地址",prop:"userAddress"}},[a("el-input",{staticClass:"mw220",model:{value:e.userDetailInfo.userAddress,callback:function(t){e.$set(e.userDetailInfo,"userAddress",t)},expression:"userDetailInfo.userAddress"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"邮箱",prop:"userEmail"}},[a("el-input",{staticClass:"mw220",model:{value:e.userDetailInfo.userEmail,callback:function(t){e.$set(e.userDetailInfo,"userEmail",t)},expression:"userDetailInfo.userEmail"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"联系电话",prop:"userPhone"}},[a("el-input",{staticClass:"mw220",model:{value:e.userDetailInfo.userPhone,callback:function(t){e.$set(e.userDetailInfo,"userPhone",t)},expression:"userDetailInfo.userPhone"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"QQ号码",prop:"userQQ"}},[a("el-input",{staticClass:"mw220",model:{value:e.userDetailInfo.userQQ,callback:function(t){e.$set(e.userDetailInfo,"userQQ",t)},expression:"userDetailInfo.userQQ"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"身份证号",prop:"userIdentityCard"}},[a("el-input",{staticClass:"mw220",model:{value:e.userDetailInfo.userIdentityCard,callback:function(t){e.$set(e.userDetailInfo,"userIdentityCard",t)},expression:"userDetailInfo.userIdentityCard"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"是否锁定",prop:"userState"}},[a("el-select",{staticClass:"mw220",attrs:{placeholder:"请选择"},model:{value:e.userDetailInfo.userState,callback:function(t){e.$set(e.userDetailInfo,"userState",t)},expression:"userDetailInfo.userState"}},[a("el-option",{attrs:{label:"是",value:1}}),e._v(" "),a("el-option",{attrs:{label:"否",value:0}})],1)],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"性别",prop:"userSex"}},[a("el-select",{staticClass:"mw220",attrs:{placeholder:"请选择"},model:{value:e.userDetailInfo.userSex,callback:function(t){e.$set(e.userDetailInfo,"userSex",t)},expression:"userDetailInfo.userSex"}},[a("el-option",{attrs:{label:"男",value:0}}),e._v(" "),a("el-option",{attrs:{label:"女",value:1}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"邮箱",prop:"userEmail"}},[a("el-input",{staticClass:"mw220",model:{value:e.userDetailInfo.userEmail,callback:function(t){e.$set(e.userDetailInfo,"userEmail",t)},expression:"userDetailInfo.userEmail"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"新浪",prop:"userSina"}},[a("el-input",{staticClass:"mw220",model:{value:e.userDetailInfo.userSina,callback:function(t){e.$set(e.userDetailInfo,"userSina",t)},expression:"userDetailInfo.userSina"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"微信",prop:"userWeChat"}},[a("el-input",{staticClass:"mw220",model:{value:e.userDetailInfo.userWeChat,callback:function(t){e.$set(e.userDetailInfo,"userWeChat",t)},expression:"userDetailInfo.userWeChat"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"积分",prop:"integration"}},[a("el-input",{staticClass:"mw220",attrs:{placeholder:"当前积分："+e.userDetailInfo.originGrade},model:{value:e.userDetailInfo.integration,callback:function(t){e.$set(e.userDetailInfo,"integration",t)},expression:"userDetailInfo.integration"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"等级",prop:"userGrade"}},[a("el-input",{staticClass:"mw220",model:{value:e.userDetailInfo.userGrade,callback:function(t){e.$set(e.userDetailInfo,"userGrade",t)},expression:"userDetailInfo.userGrade"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"辣椒",prop:"userMoney"}},[a("el-input",{staticClass:"mw220",model:{value:e.userDetailInfo.userMoney,callback:function(t){e.$set(e.userDetailInfo,"userMoney",t)},expression:"userDetailInfo.userMoney"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"金椒",prop:"userGoldenTicket"}},[a("el-input",{staticClass:"mw220",model:{value:e.userDetailInfo.userGoldenTicket,callback:function(t){e.$set(e.userDetailInfo,"userGoldenTicket",t)},expression:"userDetailInfo.userGoldenTicket"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"阅读券",prop:"userReadTicket"}},[a("el-input",{staticClass:"mw220",model:{value:e.userDetailInfo.userReadTicket,callback:function(t){e.$set(e.userDetailInfo,"userReadTicket",t)},expression:"userDetailInfo.userReadTicket"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"小米椒",prop:"userRecommendTicket"}},[a("el-input",{staticClass:"mw220",model:{value:e.userDetailInfo.userRecommendTicket,callback:function(t){e.$set(e.userDetailInfo,"userRecommendTicket",t)},expression:"userDetailInfo.userRecommendTicket"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"VIP等级",prop:"vipGrade"}},[a("el-input",{staticClass:"mw220",model:{value:e.userDetailInfo.vipGrade,callback:function(t){e.$set(e.userDetailInfo,"vipGrade",t)},expression:"userDetailInfo.vipGrade"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"是否作者",prop:"isAuthor"}},[a("el-select",{staticClass:"mw220",attrs:{placeholder:"请选择"},model:{value:e.userDetailInfo.isAuthor,callback:function(t){e.$set(e.userDetailInfo,"isAuthor",t)},expression:"userDetailInfo.isAuthor"}},[a("el-option",{attrs:{label:"是",value:1}}),e._v(" "),a("el-option",{attrs:{label:"否",value:0}})],1)],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"登录次数",prop:"loginCount"}},[a("el-input",{staticClass:"mw220",model:{value:e.userDetailInfo.loginCount,callback:function(t){e.$set(e.userDetailInfo,"loginCount",t)},expression:"userDetailInfo.loginCount"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"最近登录IP",prop:"userIpAddress"}},[a("el-input",{staticClass:"mw220",model:{value:e.userDetailInfo.userIpAddress,callback:function(t){e.$set(e.userDetailInfo,"userIpAddress",t)},expression:"userDetailInfo.userIpAddress"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"出生时间",prop:"userBorndate"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd",placeholder:"选择日期时间"},model:{value:e.userDetailInfo.userBorndate,callback:function(t){e.$set(e.userDetailInfo,"userBorndate",t)},expression:"userDetailInfo.userBorndate"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"注册时间",prop:"userCreateDate"}},[a("el-date-picker",{attrs:{type:"datetime",readonly:"","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间"},model:{value:e.userDetailInfo.userCreateDate,callback:function(t){e.$set(e.userDetailInfo,"userCreateDate",t)},expression:"userDetailInfo.userCreateDate"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"上次登录时间",prop:"lastLogTime"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间"},model:{value:e.userDetailInfo.lastLogTime,callback:function(t){e.$set(e.userDetailInfo,"lastLogTime",t)},expression:"userDetailInfo.lastLogTime"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"最新登录时间",prop:"nowLoginTime"}},[a("el-date-picker",{attrs:{type:"datetime",readonly:"","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间"},model:{value:e.userDetailInfo.nowLoginTime,callback:function(t){e.$set(e.userDetailInfo,"nowLoginTime",t)},expression:"userDetailInfo.nowLoginTime"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"银行名称",prop:"bankName"}},[a("el-input",{staticClass:"mw220",model:{value:e.userDetailInfo.bankName,callback:function(t){e.$set(e.userDetailInfo,"bankName",t)},expression:"userDetailInfo.bankName"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"银行账号",prop:"bankCardAccount"}},[a("el-input",{staticClass:"mw220",model:{value:e.userDetailInfo.bankCardAccount,callback:function(t){e.$set(e.userDetailInfo,"bankCardAccount",t)},expression:"userDetailInfo.bankCardAccount"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"个性签名",prop:"userAutograph"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.userDetailInfo.userAutograph,callback:function(t){e.$set(e.userDetailInfo,"userAutograph",t)},expression:"userDetailInfo.userAutograph"}}),e._v(" "),a("p",[a("span",{staticClass:"fr"},[e._v(e._s(e.userDetailInfo.userAutograph?e.userDetailInfo.userAutograph.length:0)+"/20")])])],1)],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm2")}}},[e._v("提交")])],1)],1)],1)},l=[],c=a("18Nq"),u=o,d=Object(c.a)(n,i,l,!1,u,null,null);t.default=d.exports},"c4/Y":function(e,t,a){"use strict";function o(e){a("Is/Q")}Object.defineProperty(t,"__esModule",{value:!0});var s={data:function(){return{searchForm:{},defaultValue:null,pickerOptions:{shortcuts:[{text:"本月",onClick:function(e){var t=new Date,a=new Date;a.setDate(1),e.$emit("pick",[a,t])}}],disabledDate:function(e){return e.getTime()>Date.now()}},subscribeCommentList:{},keywords:"",selectType:"bookName",multipleSelection:[],userInfo:{},date:""}},methods:{getSubscribeStatisticList:function(){var e=this;if(this.searchForm={},this.searchForm.page=this.$route.params.page,this.$route.params.uid&&(this.searchForm.userId=this.$route.params.uid),this.selectType&&this.keywords){if(("bookId"===this.selectType||"userId"===this.selectType)&&!Number(this.keywords))return this.$message({message:"ID必需为数字",type:"warning"}),!1;this.searchForm[this.selectType]=this.keywords}this.date&&(this.searchForm.startdate=this.date[0]+" 00:00:00",this.searchForm.enddate=this.date[1]+" 23:59:59"),this.$ajax("/admin/getAdminSubscriptionList",this.searchForm,function(t){200===t.returnCode?e.subscribeCommentList=t.data:t.data||(e.subscribeCommentList={})})},searchReplyCom:function(){1==this.$route.params.page?this.getSubscribeStatisticList():this.$router.push({params:{page:1}})},handleCurrentChange:function(e){this.$router.push({params:{page:e}})},getUserInfo:function(){var e=this;this.$route.params.uid&&this.$ajax("/person-SimplifyUserInfo",{puserid:this.$route.params.uid},function(t){200===t.returnCode&&(e.userInfo=t.data)})}},created:function(){"staUserSubscribe"===this.$route.name&&(this.date=[this.$formTime(new Date((new Date).setDate(1)),"sort"),this.$formTime(new Date,"sort")]),this.getSubscribeStatisticList(),this.getUserInfo()},watch:{$route:function(){this.getSubscribeStatisticList()},date:function(e,t){""!==t&&this.getSubscribeStatisticList()}}},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"reply-comment-wrap"},[a("el-alert",{attrs:{title:"操作说明",type:"info","show-icon":""}},[a("div",[a("p",[e._v("\n        此表为\n        "),a("span",{staticClass:"red"},[e._v(e._s("staUserReward"==e.$route.name?e.userInfo.pseudonym:"全站"))]),e._v("\n        的订阅统计，您可以通过相应类型进行精确搜索\n      ")])])]),e._v(" "),a("el-row",{staticClass:"mbt20"},[a("el-col",[a("el-date-picker",{attrs:{type:"daterange","picker-options":e.pickerOptions,"value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)],1),e._v(" "),a("el-row",{staticClass:"mbt20"},[a("el-col",{attrs:{xs:20,sm:16,md:12,lg:9,xl:6}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchReplyCom(t):null}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}},["staUserSubscribe"==e.$route.name?a("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.selectType,callback:function(t){e.selectType=t},expression:"selectType"}},[a("el-option",{attrs:{label:"书  名",value:"bookName"}}),e._v(" "),a("el-option",{attrs:{label:"书籍ID",value:"bookid"}})],1):a("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.selectType,callback:function(t){e.selectType=t},expression:"selectType"}},[a("el-option",{attrs:{label:"书  名",value:"bookName"}}),e._v(" "),a("el-option",{attrs:{label:"用户名",value:"userName"}}),e._v(" "),a("el-option",{attrs:{label:"用户ID",value:"userId"}}),e._v(" "),a("el-option",{attrs:{label:"书籍ID",value:"bookid"}})],1),e._v(" "),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchReplyCom},slot:"append"})],1)],1)],1),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.subscribeCommentList.list,border:""}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bookId",width:"70",align:"center",label:"书籍ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bookName",label:"书名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bookChapterName",label:"章节名"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n         "+e._s(t.row.bookChapterName)+"(id:"+e._s(t.row.bookChapterId)+")\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"userId",label:"用户"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.userName)+"(id:"+e._s(t.row.userId)+")\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"subscriptionPrice",width:"70",align:"center",label:"辣椒"}}),e._v(" "),a("el-table-column",{attrs:{label:"时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("time")(t.row.subscriptionDateTime,"long")))])]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"mbt20",attrs:{background:"","current-page":e.subscribeCommentList.pageNum,"page-size":e.subscribeCommentList.pageSize,layout:"total, prev, pager, next, jumper",total:e.subscribeCommentList.total},on:{"current-change":e.handleCurrentChange}})],1)},n=[],i=a("18Nq"),l=o,c=Object(i.a)(s,r,n,!1,l,null,null);t.default=c.exports},"cW/P":function(e,t,a){"use strict";function o(e){a("4qUY")}Object.defineProperty(t,"__esModule",{value:!0});var s={data:function(){return{checkList:[],centerDialogVisible:!1,draftList:[],cloneList:[],updateData:{},page:1,multipleSelection:[],newDrag:!0,keywords:""}},methods:{getAllChapterList:function(){var e=this;this.$ajax("/admin/getAdminChapterList",{page:this.$route.params.page,searchCondition:this.keywords},function(t){200===t.returnCode&&(e.draftList=t.data)})},toggleRowSelection:function(){var e=this;if(this.multipleSelection.length){var t=[];this.multipleSelection.forEach(function(e){t.push(e.id)}),this.$confirm("此操作将永久删除所选"+t.length+"个章节, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$ajax("/chapter-deletechapter",{chapterid:t.toString()},function(t){200===t.returnCode&&(e.getAllChapterList(),e.$message({type:"success",message:"删除成功!"}))})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})}else this.$message({message:"请选取要删除的章节！",type:"warning",showClose:!0})},handleSelectionChange:function(e){this.multipleSelection=e},handleRowClick:function(e){this.$refs.multipleTable.toggleRowSelection(e)},handleClick:function(e,t){"a"===e&&this.$router.push({path:"/edit_chapter/"+t.id})},handleCurrentChange:function(e){this.page=e,this.$router.push({params:{page:e}})}},created:function(){this.getAllChapterList()},watch:{$route:function(){this.getAllChapterList()}},computed:{nowTime:function(){var e=(new Date).getTime();return this.$ajax("/sys-getNetWorkDateTime","",function(t){200===t.returnCode&&(e=t.data.beijing)},"get"),e}}},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin-book-wrap"},[a("el-breadcrumb",{staticClass:"mbt20",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("书籍管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("全站章节列表")])],1),e._v(" "),a("el-alert",{attrs:{title:"操作说明",type:"info","show-icon":""}},[a("div",[a("p",[e._v("\n        此表是本站全部发布章节，您可通过ID进行批量管理\n      ")])])]),e._v(" "),a("el-row",{staticClass:"mbt20"},[a("el-button",{attrs:{type:"danger",plain:""},on:{click:e.toggleRowSelection}},[e._v("批量删除")])],1),e._v(" "),a("el-row",{staticClass:"mbt20"},[a("el-col",{attrs:{xs:20,sm:16,md:12,lg:9,xl:6}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入书籍id、书名或章节名"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.getAllChapterList(t):null}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getAllChapterList},slot:"append"})],1)],1)],1),e._v(" "),a("el-row",[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"",data:e.draftList.list,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"章节ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bookTitle",label:"书名"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          (id:"+e._s(t.row.bookId)+")"+e._s(t.row.bookTitle)+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"chapterTitle",label:"章节名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"chapterIsvip",label:"VIP状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.chapterIsvip?a("span",{staticClass:"red"},[e._v("VIP")]):a("span",{staticClass:"green"},[e._v("普通")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"chapterState",label:"审核状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.chapterState?a("span",{staticClass:"red"},[e._v("未审核")]):a("span",{staticClass:"green"},[e._v("已审核")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"发布时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("time")(t.row.releaseTime,"long"))+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"chapterLength",align:"center",label:"字数"}}),e._v(" "),e.$store.state.userInfo&&e.$store.state.userInfo.adminRolemenuanduserrole.updates?a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",{attrs:{trigger:"click",placement:"bottom"},on:{command:function(a){e.handleClick(a,t.row)}}},[a("a",{attrs:{href:"javascript:0;"}},[e._v("更多")]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"a"}},[e._v("编辑")]),e._v(" "),a("el-dropdown-item",{attrs:{command:"b"}},[e._v("审核")])],1)],1)]}}])}):e._e()],1),e._v(" "),e.draftList.list&&e.draftList.total>e.draftList.pageSize?a("el-pagination",{staticClass:"mbt20",attrs:{"current-page":Number(e.$route.params.page),"page-size":e.draftList.pageSize,layout:"total, prev, pager, next, jumper",total:e.draftList.total},on:{"current-change":e.handleCurrentChange}}):e._e()],1)],1)},n=[],i=a("18Nq"),l=o,c=Object(i.a)(s,r,n,!1,l,null,null);t.default=c.exports},"dfv/":function(e,t){},dl53:function(e,t){},fBqn:function(e,t,a){"use strict";function o(e){a("4tNu")}Object.defineProperty(t,"__esModule",{value:!0});var s={},r=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},n=[],i=a("18Nq"),l=o,c=Object(i.a)(s,r,n,!1,l,null,null);t.default=c.exports},gNik:function(e,t){},gTSq:function(e,t,a){"use strict";function o(e){a("O8XD")}Object.defineProperty(t,"__esModule",{value:!0});var s=a("3cXf"),r=a.n(s),n={data:function(){return{ruleForm:{userId:"",userName:"",title:"",messageContent:""},rules:{title:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:3,message:"长度不可少于3个字符",trigger:"blur"}],userName:[{required:!0,message:"请填写发布人",trigger:"blur"}],messageContent:[{required:!0,message:"请填写内容",trigger:"blur"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){var a="/admin/sys-addsMessage";if("mesEditMessage"===t.$route.name&&(a="/admin/updatePublishanotice"),!e)return t.$message({message:"请完善信息后提交！",type:"warning"}),!1;var o=JSON.parse(r()(t.ruleForm));o.messageContent=o.messageContent.replace(/ +|　+/g,""),t.$ajax(a,o,function(e){200===e.returnCode&&(t.$message({message:e.msg,type:"success"}),"mesEditMessage"===t.$route.name&&t.getMessageById())})})},getMessageById:function(){var e=this;this.$ajax("/admin/sys-getMessageById",{noticeid:this.$route.params.id},function(t){200===t.returnCode&&(delete t.data.releaseDate,e.ruleForm=t.data)},"get")},resetForm:function(){this.getMessageById()}},created:function(){this.ruleForm.userId=this.$store.state.userInfo.adminInfo.userId,"mesEditMessage"===this.$route.name&&this.getMessageById()},watch:{"ruleForm.messageContent":function(e){this.ruleForm.messageContent=e.replace(/\s*\n\s*/g,"\n　　")}}},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sys-notice-wrap"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:"/message/system"}},[e._v("消息管理")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:"/message/system"}},[e._v("系统消息")]),e._v(" "),a("el-breadcrumb-item",[e._v(e._s("mesEditMessage"==e.$route.name?"编辑消息":"新增消息"))])],1),e._v(" "),a("el-alert",{attrs:{title:"操作说明",type:"info","show-icon":""}},[a("div",[e._v("\n      可根据需求添加相应类型的公告通知\n    ")])]),e._v(" "),a("el-row",{staticClass:"mbt20"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"标    题",prop:"title"}},[a("el-input",{model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"发布人",prop:"userName"}},[a("el-input",{model:{value:e.ruleForm.userName,callback:function(t){e.$set(e.ruleForm,"userName",t)},expression:"ruleForm.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"内容详情",prop:"messageContent"}},[a("el-input",{staticClass:"mc-wrap",attrs:{type:"textarea",rows:5},model:{value:e.ruleForm.messageContent,callback:function(t){e.$set(e.ruleForm,"messageContent",t)},expression:"ruleForm.messageContent"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("立即创建")])],1)],1)],1)],1)},l=[],c=a("18Nq"),u=o,d=Object(c.a)(n,i,l,!1,u,null,null);t.default=d.exports},gp6M:function(e,t,a){"use strict";function o(e){a("OnDw")}Object.defineProperty(t,"__esModule",{value:!0});var s={data:function(){return{searchArr:"",timeout:null,bookList:[],exportIds:[]}},methods:{querySearchAsync:function(e,t){var a=this;this.$store.dispatch("stacksSearch",{keyWord:e,isHotWorld:0,startPage:1}).then(function(o){if(200===o.returnCode){for(var s=o.data.list,r=[],n=0,i=s.length;n<i;n++)a.$set(r,r.length,{value:s[n].bookName,id:s[n].bookId,writerName:s[n].writerName,bookWorldCount:s[n].bookWorldCount,lastUpdateTime:s[n].lastUpdateTime,bookImage:s[n].bookImage});var l=e?r.filter(a.createStateFilter(e)):r;clearTimeout(a.timeout),a.timeout=setTimeout(function(){t(l)},3e3*Math.random())}})},createStateFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},handleSelect:function(e){this.bookList.length<=10?(this.bookList.push(e),this.exportIds.push(e.id)):this.$message({message:"最多一次性导出十本书籍！",type:"warning"})},handleClick:function(e){0!==e.length?this.$store.dispatch("chapterContentImport",{bookIds:e}).then(function(t){if(500===t.returnCode){var a=document.createElement("a");a.href="https://www.lajixs.com/api/ChapterZipDownload?bookId="+e,a.click()}}):this.$message({message:"至少需要一本书籍！",type:"warning"})},deleteRow:function(e){this.bookList.splice(e,1),this.exportIds.splice(e,1)}}},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-alert",{attrs:{title:"操作说明",type:"info","show-icon":""}},[a("div",[a("p",[e._v("此功能可实现一键 导出/下载 书籍相关信息")]),e._v(" "),a("p",{staticClass:"tip"},[a("span",{staticClass:"red"},[e._v("操作提示：")]),e._v("搜索书籍，单独导出或一键导出\n            ")])])]),e._v(" "),a("div",{staticClass:"tool-area"},[a("el-autocomplete",{staticClass:"search-btn",attrs:{"fetch-suggestions":e.querySearchAsync,placeholder:"请输入内容"},on:{select:e.handleSelect},model:{value:e.searchArr,callback:function(t){e.searchArr=t},expression:"searchArr"}}),e._v(" "),a("el-button",{staticClass:"export-btn",attrs:{type:"primary",icon:"el-icon-download"},on:{click:function(t){e.handleClick(e.exportIds)}}},[e._v("一键导出")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.bookList,border:""}},[a("el-table-column",{attrs:{prop:"id",label:"书ID"}}),e._v(" "),a("el-table-column",{attrs:{label:"封面"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{attrs:{src:e.row.bookImage}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"value",label:"书名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"writerName",label:"作者"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bookWorldCount",label:"字数"}}),e._v(" "),a("el-table-column",{attrs:{label:"更新时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("time")(t.row.lastUpdateTime,"long")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.handleClick(t.row.id)}}},[e._v("导出")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.deleteRow(t.$index)}}},[e._v("删除")])]}}])})],1)],1)},n=[],i=a("18Nq"),l=o,c=Object(i.a)(s,r,n,!1,l,null,null);t.default=c.exports},hFTU:function(e,t,a){"use strict";function o(e){a("y4ve")}Object.defineProperty(t,"__esModule",{value:!0});var s=a("5YEj"),r={data:function(){return{matchTitle:function(e){var t="";switch(e){case"AndroidClickCount":t="安卓点击";break;case"ExceptionRecordCount":t="异常数量";break;case"IosClickCount":t="IOS点击";break;case"LoginCount":t="登录";break;case"MessageRecordCount":t="私信条数";break;case"NewSaveRecordCount":t="收藏";break;case"ReadRecordCount":t="阅读记录";break;case"signCount":t="签到人数";break;case"androidLoginCount":t="安卓登录次数";break;case"iosLoginCount":t="IOS登录次数";break;case"pcLoginCount":t="PC端登录次数";break;case"wapLoginCount":t="wap站登录次数";break;case"nowRersionNum":t="登录人次";break;case"IllegalIpAddressList":t="独立IP";break;case"laJiao":t="总打赏";break;case"dinYue":t="总订阅";break;case"tuiJianPiao":t="总推荐";break;case"pingLun":t="总评论";break;case"jinPiao":t="总金票";break;case"jianTie":t="总间帖";break;case"pingLunHuiFu":t="评论回复";break;case"AndroidDownLoadCount":t="安卓下载次数";break;case"IosDownLoadCount":t="IOS下载次数";break;case"NewBookRecordCount":t="新增小说";break;case"NewChapterRecordCount":t="新增章节";break;case"NewUserRecordCount":t="新增用户";break;case"NewAuthorRecordCount":t="新增作者";break;case"updateBookCount":t="更新书籍数量";break;case"iosClickCount":t="当日IOS点击数量";break;case"dataTimes":t="当日日期";break;case"androidAppLoginCount":t="当日安卓登录数量";break;case"appClickCount":t="当日APP点击数量";break;case"appDownLoad":t="当日APP下载数量";break;case"bugCount":t="当日BUG数量";break;case"independentIPAddress":t="当日独立IP登录数量";break;case"iosAppDownLoad":t="当日IOS下载数量";break;case"iosAppLoginCount":t="当日IOS登录数量";break;case"longCount":t="当日总登录数量";break;case"messageCount":t="当天消息数量";break;case"newAuthorCount":t="当天新增作者数量";break;case"newBookCount":t="当天新增书籍数量";break;case"newChapterCount":t="当天新增章节数量";break;case"newUserCount":t="当天新增用户数量";break;case"readCount":t="当天阅读数量";break;case"tatalGoldenTicket":t="当天金椒数量";break;case"totalClicks":t="当天点击总数量";break;case"totalComment":t="当天评论数量";break;case"totalMakeComplaints":t="当天投诉数量";break;case"totalRecommend":t="当天推荐数量";break;case"totalReply":t="当天回复数量";break;case"totalReward":t="当天奖金数量";break;case"totalSave":t="当天收藏数量";break;case"totalSubscriptions":t="当天订阅数量";break;case"wapAppLoginCount":t="移动设备登录数量";break;case"webLoginCount":t="PC登录数量";break;default:t="未知"}return t},randomData:function(){return now=new Date(+now+oneDay),value=value+21*Math.random()-10,{name:now.toString(),value:[[now.getFullYear(),now.getMonth()+1,now.getDate()].join("/"),Math.round(value)]}},todayWidth:0,todayOption:{title:{text:"当日数据统计"},color:["#3398DB"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0,y2:140},xAxis:[{type:"category",data:[],axisTick:{alignWithLabel:!0},axisLabel:{interval:0,rotate:-30}}],yAxis:[{type:"value"}],series:[{name:"number",type:"bar",barWidth:"60%",data:[]}]},tswkOption:{title:{text:"本周数据统计图"},tooltip:{trigger:"axis"},legend:{data:[]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:["周一","周二","周三","周四","周五","周六","周日"]},yAxis:{type:"value"},series:[]},watchOption:{title:{text:"动态数据 + 时间坐标轴"},tooltip:{trigger:"axis",formatter:function(e){e=e[0];var t=new Date(e.name);return t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()+" : "+e.value[1]},axisPointer:{animation:!1}},xAxis:{type:"time",splitLine:{show:!1}},yAxis:{type:"value",boundaryGap:[0,"100%"],splitLine:{show:!1}},series:[{name:"模拟数据",type:"line",showSymbol:!1,hoverAnimation:!1,data:[]}]}}},mounted:function(){var e=this;this.$store.dispatch("getControlPanel").then(function(t){if(200===t.returnCode){delete t.data.TotalClick,t.data.AndroidClickCount=t.data.clickIPINFo.androidV,t.data.IosClickCount=t.data.clickIPINFo.iosV,t.data.pcClickCount=t.data.clickIPINFo.pcV,t.data.TotalClick=t.data.clickIPINFo.totalIP;var a=0;for(var o in t.data)e.todayOption.xAxis[0].data.push(e.matchTitle(o)),e.todayOption.series[0].data.push(Number(t.data[o])),a++;e.todayWidth=2*a;s.init(document.getElementById("todayCartogram")).setOption(e.todayOption)}})}},n=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin-index-wrap"},[a("div",{staticStyle:{width:"50%",height:"300px"},attrs:{id:"todayCartogram"}}),e._v(" "),a("div",{staticStyle:{width:"100%",height:"800px"},attrs:{id:"tswkCartogram"}}),e._v(" "),a("div",{staticStyle:{width:"100%",height:"800px"},attrs:{id:"watchCartogram"}})])}],l=a("18Nq"),c=o,u=Object(l.a)(r,n,i,!1,c,null,null);t.default=u.exports},hNby:function(e,t){},i2nn:function(e,t){},jFLA:function(e,t,a){"use strict";function o(e){a("ZYSf")}Object.defineProperty(t,"__esModule",{value:!0});var s=a("rVsN"),r=a.n(s),n={components:{"pic-cropper":function(){return a("PsVy")}},data:function(){return{dialogTableVisible:!1,userList:{},keywords:"",selectType:"pseudonym",centerDialogVisible:!1,fileList:[],file:[],uploadData:{}}},methods:{IPCity:function(e){for(var t=this,a=0,o=e.list.length;a<o;a++){var s;!function(t,a){s=new r.a(function(a,o){$.getScript("https://int.dpool.sina.com.cn/iplookup/iplookup.php?format=js&ip="+e.list[t].userIpAddress,function(){e.list[t].city=remote_ip_info.province+" "+remote_ip_info.city,a()})})}(a)}s.then(function(){t.userList=e})},getUserList:function(){var e=this,t={page:this.$route.params.page,isAuthor:0};"userInfo"===this.$route.name&&(t={page:1},this.keywords=this.$route.params.uid,this.selectType="userId");var a=this.$http.trim(this.keywords);if(this.selectType&&a){if("userId"===this.selectType&&""===this.selectType&&Number(a))return this.$message({message:"ID必需为数字",type:"warning"}),!1;t[this.selectType]=a}"authorList"===this.$route.name&&(t.isAuthor=1),t.orderParemeter="userId",this.$store.dispatch("getUserList",t).then(function(t){200===t.returnCode?e.IPCity(t.data):800===t.returnCode&&(e.userList={})})},searchUser:function(){1!=this.$route.params.page?this.$router.push({params:{page:1}}):this.getUserList()},pageChange:function(e){this.$router.push({params:{page:e}})},handleClick:function(e,t){var a=this;if("f"!==e){var o="",s={userId:t.userId},r=function(e){a.$ajax("/admin/updateUserInfo",e,function(e){200===e.returnCode&&(a.$message({message:"更新成功",type:"success"}),a.getUserList())})};switch(e){case"a":o="辣椒";break;case"b":o="小米椒";break;case"c":o="金椒";break;case"d":o="阅读券";break;case"e":o="积分";break;case"f":o="等级"}"g"!==e?this.$prompt("请输入修改后"+o,"修改"+o,{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/[0-9]/,inputErrorMessage:"请输入数字"}).then(function(t){var a=t.value;if("g"!==e){switch(e){case"a":s.userMoney=a;break;case"b":s.userRecommendTicket=a;break;case"c":s.userGoldenTicket=a;break;case"d":s.userReadTicket=a;break;case"e":s.integration=a}r(s)}}):(s.userState=Number(!t.userState),r(s))}else this.$router.push("/user/detail/"+t.userId)},isShow:function(e){this.centerDialogVisible=!e},dialogShow:function(e){this.dialogTableVisible=!0,this.$set(this.uploadData,"userId",e.userId),this.$set(this.uploadData,"userAvatar",e.userHeadPortraitURL)},submitUpload:function(){this.$refs.upload.uploadFiles=this.$refs.upload.uploadFiles.slice(-1),this.$myLoad("正在上传中..."),this.$refs.upload.submit()},successBack:function(e){200===e.returnCode&&this.getUserList()},fileError:function(e){this.$loading().close(),this.centerDialogVisible=!1,this.$message({message:e,type:"error"})},handlePictureCard:function(e,t){this.uploadData.userAvatar=e.url},closeIt:function(){this.dialogTableVisible=!1},handleCommand:function(e,t){switch(e){case"a":this.$router.push({path:"/statistics/charge/"+t.userId+"/1"});break;case"b":this.$router.push({path:"/statistics/reward/"+t.userId+"/1"});break;case"c":this.$router.push({path:"/statistics/subscribe/"+t.userId+"/1"});break;case"d":this.$router.push({path:"/statistics/recommend/"+t.userId+"/1"});break;case"e":this.$router.push({path:"/statistics/pepper/"+t.userId+"/1"});break;case"f":this.$router.push({path:"/author/monthly/"+t.userId})}}},created:function(){this.getUserList()},watch:{$route:function(){this.getUserList()}}},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin-user-wrap"},[a("el-alert",{attrs:{title:" ",type:"info","show-icon":""}},[a("div",[a("p",[a("span",[e._v("说明：")]),e._v(" 此表展示的是本站全部"+e._s("authorList"===e.$route.name?"作者":"普通用户"))])])]),e._v(" "),a("el-row",{staticClass:"mbt20"},[a("el-col",{attrs:{xs:20,sm:16,md:12,lg:9,xl:6}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchUser(t):null}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}},[a("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.selectType,callback:function(t){e.selectType=t},expression:"selectType"}},[a("el-option",{attrs:{label:"笔  名",value:"pseudonym"}}),e._v(" "),a("el-option",{attrs:{label:"用户名",value:"userName"}}),e._v(" "),a("el-option",{attrs:{label:"真  名",value:"realName"}}),e._v(" "),a("el-option",{attrs:{label:"用户ID",value:"userId"}}),e._v(" "),a("el-option",{attrs:{label:"手机号",value:"userPhone"}})],1),e._v(" "),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchUser},slot:"append"})],1)],1)],1),e._v(" "),a("el-row",{staticClass:"mbt20"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.userList.list,border:"",select:"row","tooltip-effect":"dark"}},[a("el-table-column",{attrs:{type:"selection",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userId",label:"ID",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"用户名",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pseudonym",label:"笔名"}}),e._v(" "),a("el-table-column",{attrs:{label:"性别"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(0===t.row.userSex?"男":"女"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"userMoney",label:"辣椒"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userRecommendTicket",label:"小米椒"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userGoldenTicket",label:"金椒"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userReadTicket",label:"阅读券"}}),e._v(" "),a("el-table-column",{attrs:{prop:"integration",label:"积分"}}),e._v(" "),a("el-table-column",{attrs:{prop:"lastLogTime",label:"最近登录"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("time")(t.row.lastLogTime,"long")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"userIpAddress",label:"最新登录IP"}}),e._v(" "),a("el-table-column",{attrs:{prop:"city",label:"登录地址"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.userState?a("span",{staticClass:"red"},[e._v("锁定")]):a("span",{staticClass:"green"},[e._v("正常")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"userQQ",label:"QQ号码"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s("0"===t.row.userQQ?"无":t.row.userQQ))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"头像"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"cover-wrap",on:{click:function(a){e.dialogShow(t.row)}}},[a("a",{attrs:{href:"javascipt:;"}},[a("img",{staticClass:"avatar",attrs:{src:t.row.userHeadPortraitURL,alt:""}})])])]}}])}),e._v(" "),e.$store.state.userInfo&&e.$store.state.userInfo.adminRolemenuanduserrole.updates?a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{staticClass:"btn",attrs:{to:"/user/detail/"+t.row.userId}},[e._v("编辑")]),e._v(" "),a("el-dropdown",{attrs:{size:"medium",trigger:"click"},on:{command:function(a){e.handleCommand(a,t.row)}}},[a("a",{staticClass:"btn",attrs:{href:"javascript:0;"}},[e._v("更多")]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"a"}},[e._v("充值记录")]),e._v(" "),a("el-dropdown-item",{attrs:{command:"b"}},[e._v("打赏记录")]),e._v(" "),a("el-dropdown-item",{attrs:{command:"c"}},[e._v("订阅记录")]),e._v(" "),a("el-dropdown-item",{attrs:{command:"d"}},[e._v("小米椒记录")]),e._v(" "),"authorList"===e.$route.name?[a("el-dropdown-item",{attrs:{command:"e"}},[e._v("金椒记录")]),e._v(" "),a("el-dropdown-item",{attrs:{command:"f"}},[e._v("月报")])]:e._e()],2)],1)]}}])}):e._e()],1),e._v(" "),a("el-pagination",{staticClass:"mbt20",attrs:{background:"",pageSize:e.userList.pageSize,layout:"prev, pager, next, jumper",total:e.userList.total},on:{"current-change":e.pageChange}})],1),e._v(" "),a("pic-cropper",{ref:"avatarUpdate",attrs:{action:"/api/admin/updateUserAvatarimgUpload",visible:e.dialogTableVisible,maxWidth:400,data:{puserid:e.uploadData.userId},url:"/static/img/defaultavatarimg.jpg",aspectRatio:1},on:{"update:visible":function(t){e.dialogTableVisible=t},close:e.closeIt,success:e.successBack}})],1)},l=[],c=a("18Nq"),u=o,d=Object(c.a)(n,i,l,!1,u,null,null);t.default=d.exports},jWDc:function(e,t,a){"use strict";function o(e){a("ojw1")}Object.defineProperty(t,"__esModule",{value:!0});var s={data:function(){return{searchForm:{},defaultValue:null,pickerOptions:{shortcuts:[{text:"本月",onClick:function(e){var t=new Date,a=new Date;a.setDate(1),e.$emit("pick",[a,t])}}],disabledDate:function(e){return e.getTime()>Date.now()}},pepperCommentList:{},keywords:"",selectType:"bookName",multipleSelection:[],userInfo:{},date:""}},methods:{getPepperStatisticList:function(){var e=this;if(this.searchForm={},this.searchForm.page=this.$route.params.page,this.$route.params.uid&&(this.searchForm.userId=this.$route.params.uid),this.selectType&&this.keywords){if(("bookId"===this.selectType||"userId"===this.selectType)&&!Number(this.keywords))return this.$message({message:"ID必需为数字",type:"warning"}),!1;this.searchForm[this.selectType]=this.keywords}this.date&&(this.searchForm.startdate=this.date[0]+" 00:00:00",this.searchForm.enddate=this.date[1]+" 23:59:59"),this.$ajax("/admin/getAdminGoldenticketlogList",this.searchForm,function(t){200===t.returnCode?e.pepperCommentList=t.data:t.data||(e.pepperCommentList={})})},searchReplyCom:function(){1==this.$route.params.page?this.getPepperStatisticList():this.$router.push({params:{page:1}})},handleCurrentChange:function(e){this.$router.push({params:{page:e}})},getUserInfo:function(){var e=this;this.$route.params.uid&&this.$ajax("/person-SimplifyUserInfo",{puserid:this.$route.params.uid},function(t){200===t.returnCode&&(e.userInfo=t.data)})}},created:function(){"staUserPepper"===this.$route.name&&(this.date=[this.$formTime(new Date((new Date).setDate(1)),"sort"),this.$formTime(new Date,"sort")]),this.getPepperStatisticList(),this.getUserInfo()},watch:{$route:function(){this.getPepperStatisticList()},date:function(e,t){""!==t&&this.getPepperStatisticList()}}},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"reply-comment-wrap"},[a("el-alert",{attrs:{title:"操作说明",type:"info","show-icon":""}},[a("div",[a("p",[e._v("\n        此表为\n        "),a("span",{staticClass:"red"},[e._v(e._s("staUserReward"==e.$route.name?e.userInfo.pseudonym:"全站"))]),e._v("\n        的金椒打赏统计，您可以通过相应类型进行精确搜索\n      ")])])]),e._v(" "),a("el-row",{staticClass:"mbt20"},[a("el-col",[a("el-date-picker",{attrs:{type:"daterange","picker-options":e.pickerOptions,"value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)],1),e._v(" "),a("el-row",{staticClass:"mbt20"},[a("el-col",{attrs:{xs:20,sm:16,md:12,lg:9,xl:6}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchReplyCom(t):null}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}},["staUserPepper"==e.$route.name?a("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.selectType,callback:function(t){e.selectType=t},expression:"selectType"}},[a("el-option",{attrs:{label:"书  名",value:"bookName"}}),e._v(" "),a("el-option",{attrs:{label:"书籍ID",value:"bookid"}})],1):a("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.selectType,callback:function(t){e.selectType=t},expression:"selectType"}},[a("el-option",{attrs:{label:"书  名",value:"bookName"}}),e._v(" "),a("el-option",{attrs:{label:"用户名",value:"userName"}}),e._v(" "),a("el-option",{attrs:{label:"用户ID",value:"userId"}}),e._v(" "),a("el-option",{attrs:{label:"书籍ID",value:"bookid"}})],1),e._v(" "),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchReplyCom},slot:"append"})],1)],1)],1),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.pepperCommentList.list,border:""}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bookid",width:"70",align:"center",label:"书籍ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bookName",label:"书名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userId",label:"用户ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goldenTicketCount",width:"70",align:"center",label:"金椒"}}),e._v(" "),a("el-table-column",{attrs:{prop:"replyCommentsContent",label:"时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("time")(t.row.giveDateTime,"long")))])]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"mbt20",attrs:{background:"","current-page":e.pepperCommentList.pageNum,"page-size":e.pepperCommentList.pageSize,layout:"total, prev, pager, next, jumper",total:e.pepperCommentList.total},on:{"current-change":e.handleCurrentChange}})],1)},n=[],i=a("18Nq"),l=o,c=Object(i.a)(s,r,n,!1,l,null,null);t.default=c.exports},"kVw+":function(e,t,a){"use strict";function o(e){a("QYRi")}Object.defineProperty(t,"__esModule",{value:!0});var s={},r=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},n=[],i=a("18Nq"),l=o,c=Object(i.a)(s,r,n,!1,l,null,null);t.default=c.exports},kdLm:function(e,t){},kedr:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAAoCAYAAAEeZ02XAAAAAXNSR0IArs4c6QAABsFJREFUaAXtWntsU1UYv88+1m1MFlAeghGiATREBSNKDCT8QUDZOlghCoMNxBcsDsbLYGgIOkbXbiubWNjY2k1i7tZ23dyAGMJ8E0X/Ef1LCJGoGN4be/X23uP57jjdpbRbgc5hcs+yfuf7zve6v95z7nfOLUX9J63M3YQiAzGRAuB5nS6aeMRl2YKgJPaJcBw5PS3ByITCF7Pg2jXlSmVJplie413rT/ORyg8Y76jxrVCnVOZufkXNl1R4J6t50qdJR00dNf6vOnrRsunpoesWiyVY7gkg3CiO46kNry+OaqO2j9q31/iy1QNW4dhoNf+hyztOzWv9EUaguN47MVYK4amiVhAEgbXVehcTGSwY6kXDICJj5H1KdIe8pxwHm2cwevkMGLy3OpN2HPZlII4RN+dkthEnaho1w3nWk1ypx78KFJNHJ53hdXq8WukpZ12gc1NeVuDvf4xfllfdPpPUTqP28cyImb3T5Z8S1UgTagj87xAgU8O5sU0fmXyhzWbaX99yFp4V+z3N30WO22r880BmrW9LjWYfqX/XfOnhpgVgRJ7y0CfTr7gu8CQkRlYkoBVHWsPljN0dmA/6ZZ6A8oza4xYmAB9Pi7rQRDOUGfwIxU3IzhbxUqmUIldDYhfITD1SOBnglaaWSJIJZLIoK2sNz7Ix15x+43v8dFT7LYOZltc0LsLoHSv69POHIvWsLS1JILNWHRvtcrke9JIpMn2N1xDQENAQ0BBICALV1YGUklr/c7Gc7cE70o1O5x2FBNG3V/tySD/xFG9VyEPeVuV7KjJAuTtghYIB06C91r9UPQ71PlQ7ICObCfX4YP24i4XSbt6yc7Xlz6ID/se2rMtStj3EcanbvxtRaBdsyfEfj4uBxpL65tlknKZpNHns1JeBL8gx1zsKBCMZG4rGnWBXF/0NOOOT6FlAbdW+OUCh4cJlW3+v/1OW8TmKJNmAgwsCunG1+eitKgjJz3JzQRZPizvBne9mXuh3iJQSi2Hp8SQAg+g7yieEGA7Gd7xtPk8K1N+ucGkgYyVqJ9B4WtwJkiMZJkSlgGOGknsHC0DTslIROg+3jcnfv6gPSqxdb5kvgY1M0bsHs1WPxZ0gm8y8CIYXUsQWqO0K1ixtBd7h8W3XGfT4mA92zzrlH/pGo2muw+1/Pj9vkZLUTcPY5XAvYhOG/0mv3C5gn7AGM5HcT9CP5rjys9Yvytz+lmhjRGZ3+1eSfsJpgSAY99V6X4rpGC9FMcfwQFld0zCug4NF1sY0BDQENAQ0BDQENAQ0BDQERgABqGsrK5sexaGj1rfDkZLVajXYD3mXW0v9yvZnOGIQn8N2UVvx+cM4Xs7s6qTbB/aCJOzQ1OUSRnUb+KPJyalzum50fPBtnljUQFmkoS0HNAptx00THu7OCorMiW1rM/4aGElcb1gAdB7yvgAp5r+x9BRJ1VHT9GpQDJ3bvn7Zr0QWSa3CyeS03o4Gvd6wMCQGKUnqxwtvAymW4yg4shAlsXBTjtkeaUv4orrAVJ0kz9y8xuwlMhz7aZpC6QW55nYiSxSNez8cb8Bij29aL8fyavDs1d4lHXr2+wHwEA1vo9U+4cQstef6GZZhFvb19oTBAx0ALiSKlBQKUUadsaS81v+x2rayUkgmp2k7VmX8rr+J2h3uJjPR2ZSb+Yss0kH8Cu+Owy6ic6804QDqELXO8LPuB5LQjgpfOsNykvW1Vy+DDNZER3VT9jvTL90W+4ZET8JHO+PhvGmwBndlCFEz1TpjxlA9j6dNXAy+Qb5hQ9YVJMliBY5N9E6lBU8jHZNH+ETR2y4iIU5puu9qujG8NEhGNkixcviNXENDA4N4hPCPe8R7jUfTjPoFJYV9KbMdfBOfDE9zf0DsW+2RixdpDGqYJ/L7peGA9+uI2PO9qNY04bqyBoJs39qMTgmhy/Y6n3LXwMUmn+Nb8eGOgdgAZQzSCo7nOJiugzVACk/zaSW1XuWYFnThgRUyhU6Ab+D3HmycIUnyVYgNPLTJaRNnB1nK3c8l7jN8pyTOJUUVexpn0RIybs3N/pr4/eig7wldEjeqcOWSH4mMUPyTngLeoJstimIYPXxQixhZVgChGfw9I8SpJzfP6+iePvHA1tzMcAzwZzvkn8dy9BVY94h/e1XgGaSTTIU5WQk/ixwWACFxl7UlqXuKaGa76VP5b5rPkouJl8JrlpRU7gjHcdOCwaA7cD5tS7t1fihee9DbKwij+E5dRl+K7uj7lv7D3buxf2B093qESTiZhC8XsS4Qfuxi9/iyoQ6MpaPJNQQ0BDQENAQ0BEYcgX8Bu6mJQD6Q14oAAAAASUVORK5CYII="},kufp:function(e,t){},"l/s2":function(e,t,a){"use strict";function o(e){a("whH9")}Object.defineProperty(t,"__esModule",{value:!0});var s={},r=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},n=[],i=a("18Nq"),l=o,c=Object(i.a)(s,r,n,!1,l,null,null);t.default=c.exports},lMgl:function(e,t){},lfjY:function(e,t,a){"use strict";function o(e){a("3ZnX")}Object.defineProperty(t,"__esModule",{value:!0});var s={data:function(){return{searchForm:{},pcommentList:{},keywords:"",selectType:"",multipleSelection:[]}},methods:{getPcommentList:function(){var e=this;if(this.searchForm.page=this.$route.params.page,this.selectType){if(("bookId"===this.selectType||"userId"===this.selectType)&&!Number(this.keywords))return this.$message({message:"ID必需为数字",type:"warning"}),!1;this.searchForm[this.selectType]=this.keywords}this.$ajax("/admin/BookParagraphCommentInfoList",this.searchForm,function(t){200===t.returnCode?e.pcommentList=t.data:t.data||(e.pcommentList={})})},searchChapterCom:function(){1===Number(this.$route.params.page)?this.getPcommentList():this.$router.push({params:{page:1}})},handleCurrentChange:function(e){this.$router.push({params:{page:e}})},handleRowClick:function(e){this.$refs.multipleTable.toggleRowSelection(e)},toggleSelection:function(e,t){var a=this,o=[];if(t?"book"===e?o.push(t.bookId):"user"===e?o.push(t.userId):"cid"===e?o.push(t.chapterId):o.push(t.pid):this.multipleSelection.length&&this.multipleSelection.forEach(function(e){o.push(e.id)}),!o.length)return this.$message({message:"请选取要删除的内容",type:"warning"}),!1;!function(){var s=void 0,r=void 0,n=void 0;"book"===e?(s="/pcomm-delParagraphcommentBookId",r='此操作将永久删除书籍<span class="red">'+t.bookName+"</span>的全部吐槽, 是否继续?",n={bookid:o.toString()}):"user"===e?(s="/pcomm-delParagraphcommentUser",r='此操作将永久删除用户<span class="red">'+t.userName+"</span>的全部吐槽, 是否继续?",n={userid:o.toString()}):"cid"===e?(s="/pcomm-delParagraphcommentChapter",r='此操作将永久删除本章节<span class="red">'+t.chapterName+"</span>的全部吐槽, 是否继续?",n={chapterid:o.toString()}):"pid"===e?(s="/pcomm-delParagraphcommentPid",r="此操作将永久删除本段落的全部吐槽, 是否继续?",n={pid:o.toString()}):(r="此操作将永久删除"+o.length+"条吐槽, 是否继续?",s="/pcomm-delParagraphcomment",n={id:o.toString()}),a.$confirm(r,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",dangerouslyUseHTMLString:!0,type:"warning"}).then(function(){a.$ajax(s,n,function(e){200===e.returnCode&&(a.$message({message:"删除成功",type:"success"}),a.getPcommentList())})})}()},handleSelectionChange:function(e){this.multipleSelection=e}},created:function(){this.getPcommentList()},watch:{$route:function(e){this.getPcommentList()}}},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"para-comment-wrap"},[a("el-alert",{attrs:{title:"操作说明",type:"info","show-icon":""}},[a("div",[a("p",[e._v("\n        此表为本站全部书籍章节吐槽，您可以通过相应评论ID来批量管理；通过内容可以模糊搜索，其他类型均为精确搜索\n      ")]),e._v(" "),a("p",[a("span",{staticClass:"red"},[e._v("注意：")]),e._v("删除吐槽时\n      ")])])]),e._v(" "),a("el-row",{staticClass:"mbt20"},[e.$store.state.userInfo&&e.$store.state.userInfo.adminRolemenuanduserrole.deletes?a("el-button",{attrs:{type:"danger",plain:""},on:{click:function(t){e.toggleSelection()}}},[e._v("批量删除")]):e._e()],1),e._v(" "),a("el-row",{staticClass:"mbt20"},[a("el-col",{attrs:{xs:20,sm:16,md:12,lg:9,xl:6}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchChapterCom(t):null}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}},[a("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.selectType,callback:function(t){e.selectType=t},expression:"selectType"}},[a("el-option",{attrs:{label:"内 容",value:"commentContext"}}),e._v(" "),a("el-option",{attrs:{label:"书  名",value:"bookName"}}),e._v(" "),a("el-option",{attrs:{label:"昵 称",value:"userName"}}),e._v(" "),a("el-option",{attrs:{label:"章节名",value:"chapterName"}}),e._v(" "),a("el-option",{attrs:{label:"书籍ID",value:"bookId"}}),e._v(" "),a("el-option",{attrs:{label:"章节ID",value:"chapterId"}}),e._v(" "),a("el-option",{attrs:{label:"用户IP",value:"userAddressIP"}})],1),e._v(" "),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchChapterCom},slot:"append"})],1)],1)],1),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.pcommentList.list,border:""},on:{"row-click":e.handleRowClick,"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bookName",label:"书名",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bookId",label:"书籍ID",width:"70"}}),e._v(" "),a("el-table-column",{attrs:{prop:"chapterName",label:"章节名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"chapterId",label:"章ID",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"commentContext",label:"内容"}}),e._v(" "),a("el-table-column",{attrs:{label:"更多",type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"用户IP："}},[a("span",[e._v(e._s(t.row.userAddressIP))])]),e._v(" "),a("el-form-item",{attrs:{label:"时间"}},[a("span",[e._v(e._s(e._f("time")(t.row.commentDateTime,"long")))])]),e._v(" "),a("el-form-item",{attrs:{label:"段落ID："}},[a("span",[e._v(e._s(t.row.pid))])])],1)]}}])}),e._v(" "),e.$store.state.userInfo&&e.$store.state.userInfo.adminRolemenuanduserrole.updates?a("el-table-column",{attrs:{label:"删除评论",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"red",on:{click:function(a){e.toggleSelection("book",t.row)}}},[e._v("全书")]),e._v(" "),a("span",{staticClass:"red",on:{click:function(a){e.toggleSelection("user",t.row)}}},[e._v("用户")]),e._v(" "),a("span",{staticClass:"red",on:{click:function(a){e.toggleSelection("cid",t.row)}}},[e._v("章节")]),e._v(" "),a("span",{staticClass:"red",on:{click:function(a){e.toggleSelection("pid",t.row)}}},[e._v("段落")])]}}])}):e._e()],1),e._v(" "),a("el-pagination",{staticClass:"mbt20",attrs:{background:"","current-page":e.pcommentList.pageNum,"page-size":e.pcommentList.pageSize,layout:"total, prev, pager, next, jumper",total:e.pcommentList.total},on:{"current-change":e.handleCurrentChange}})],1)},n=[],i=a("18Nq"),l=o,c=Object(i.a)(s,r,n,!1,l,null,null);t.default=c.exports},lvjh:function(e,t,a){"use strict";function o(e){a("6rpU")}Object.defineProperty(t,"__esModule",{value:!0});var s={components:{"pic-cropper":function(){return a("PsVy")}},data:function(){return{dialogTableVisible:!1,bookList:{},updateData:{},multipleSelection:[],keywords:"",selectType:"bookName"}},methods:{getBookList:function(){var e=this,t={page:this.$route.params.page,orderParemeter:"bookId"},a=this.$http.trim(this.keywords);if(this.selectType&&a){if(("bookId"===this.selectType||"bookWriterId"===this.selectType)&&!Number(a))return this.$message({message:"ID必需为数字",type:"warning"}),!1;t[this.selectType]=a,this.bookList={}}this.$ajax("/admin/getBookInfoList",t,function(t){200===t.returnCode&&(e.bookList=t.data)})},searchBook:function(){1!==Number(this.$route.params.page)?this.$router.push({params:{page:1}}):this.getBookList()},toggleSelection:function(){var e=this;if(this.multipleSelection.length){var t=[];this.multipleSelection.forEach(function(e){t.push(e.bookId)}),this.$confirm("此操作将永久删除所选的"+t.length+"书籍, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$ajax("/admin/bookBatchDelete",{bookid:t.toString()},function(t){200===t.returnCode&&(e.$message({message:"删除成功！",type:"success"}),e.getBookList())})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})}else this.$message({message:" 请选择要删除的书籍！",type:"warning"})},handleRowClick:function(e,t,a){"操作"!==a.label&&this.$refs.multipleTable.toggleRowSelection(e)},handleSelectionChange:function(e){this.multipleSelection=e},handleClick:function(e,t){"a"===e?this.$router.push({path:"/book_chapter_list/"+t.bookId}):"b"===e?this.$router.push({path:"/book_detail/"+t.bookId}):"c"===e?this.$router.push({path:"/add_new_chapter/"+t.bookId}):"d"===e&&this.toggleSelection()},handleCurrentChange:function(e){this.$router.push({params:{page:e}})},bookChangeState:function(e,t){var a=this,o=t.bookCheckStatus,s=t.bookStatus;if("a"===e)o=1;else if("b"===e){if(0===t.bookCheckStatus)return this.$message({message:"书籍暂未审核，请先审核通过！",type:"warning"}),!1;o=2}else if("c"===e){if(t.bookCheckStatus<=1)return this.$message({message:"书籍已下架！",type:"warning"}),!1;o=1}else"d"===e?s=1:"e"===e?s=0:"f"===e&&(o=0);this.$ajax("/admin/sysbookupdate",{bookId:t.bookId,bookCheckStatus:o,bookAuthorization:t.bookAuthorization,bookStatus:s},function(e){200===e.returnCode&&(a.$message(e.msg),a.getBookList())})}},created:function(){this.getBookList()},watch:{$route:function(){this.getBookList()}}},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin-book-wrap"},[a("el-alert",{attrs:{title:"操作说明",type:"info","show-icon":""}},[a("div",[a("p",[e._v("\n        此表为本站全部书籍列表，您可以通过相应书籍ID来批量管理，也可以通过\n        "),a("router-link",{staticClass:"red",attrs:{to:{name:"addNewBook"}}},[e._v("新建书籍")]),e._v("来添加新书\n      ")],1)])]),e._v(" "),a("el-row",{staticClass:"mbt20"},[a("el-col",{attrs:{xs:20,sm:16,md:12,lg:9,xl:6}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchBook(t):null}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}},[a("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.selectType,callback:function(t){e.selectType=t},expression:"selectType"}},[a("el-option",{attrs:{label:"书  名",value:"bookName"}}),e._v(" "),a("el-option",{attrs:{label:"作 者",value:"writerName"}}),e._v(" "),a("el-option",{attrs:{label:"书籍ID",value:"bookId"}}),e._v(" "),a("el-option",{attrs:{label:"作者ID",value:"bookWriterId"}}),e._v(" "),a("el-option",{attrs:{label:"手机号",value:"userPhone"}})],1),e._v(" "),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchBook},slot:"append"})],1)],1)],1),e._v(" "),a("el-row",[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.bookList.list,border:""},on:{"row-click":e.handleRowClick,"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",aligin:"center"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"bookId",label:"ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bookName",label:"书名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"writerName",label:"作者"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"bookStatus",label:"连载"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"el-dropdown-link",class:t.row.bookStatus?"primary":"success"},[e._v("\n            "+e._s(t.row.bookStatus?"已完结":"连载中")+"\n          ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"bookCheckStatus",label:"审核"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"el-dropdown-link",class:t.row.bookCheckStatus?"success":"primary"},[e._v("\n            "+e._s(t.row.bookCheckStatus?"已审核":"未审核")+"\n          ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"bookStatus",label:"上架"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"el-dropdown-link",class:2===t.row.bookCheckStatus?"success":"primary"},[e._v("\n            "+e._s(2==t.row.bookCheckStatus?"已上架":"未上架")+"\n          ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("time")(t.row.bookCreatedTime,"long")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"更新时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("time")(t.row.lastUpdateTime,"long")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"bookWorldCount",label:"字数",align:"center"}}),e._v(" "),e.$store.state.userInfo&&e.$store.state.userInfo.adminRolemenuanduserrole.updates?a("el-table-column",{staticClass:"last-column",attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{attrs:{href:"javascript:0;"}},[e._v("详情")])]}}])}):e._e()],1),e._v(" "),a("el-pagination",{staticClass:"mbt20",attrs:{background:"","current-page":e.bookList.pageNum,"page-size":e.bookList.pageSize,layout:"total, prev, pager, next, jumper",total:e.bookList.total},on:{"current-change":e.handleCurrentChange}})],1)],1)},n=[],i=a("18Nq"),l=o,c=Object(i.a)(s,r,n,!1,l,null,null);t.default=c.exports},"mV4/":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAAoCAYAAAEeZ02XAAAAAXNSR0IArs4c6QAABEpJREFUaAXtmklP1DEUwDssKiCiKCYuLAkGQ9AY4xJcg4keBJcYxSUKB+MXMF48cDD4Abzpd/DqQRMvxoWDevNsYuLFRPGgcQEE/b3Sju9fZmeAIWkzb/r29/qm/U/bGWMWpf01hleyVSXJyqbIfoVkKAMBJsNs9WD0SGshakPlCqNJ8bJOCfpUQLdrOieO8XNgI6ALJkXjVWLDclCbQjcH9CZNR3yJK8AHtDVbCnqppHUwqAYGPAM8MWUmjKmDl5inXjdvj2GPdgh+FujPa6gVMKgBhoRHb7Nz/XfHa4AuLkMMUjqIxpF1ajrisQLLtwJ+adCvDEcBT5bOe0CW1VgGeZ/wkK0B5tiH+kXTOD3uAtgvLYfb5YdsO6DXe+LJhOyY07ffUdBbCk0g46MwizF+bZsCsUn+MIaXbV7myDldg+P4Z43v5yjOi0EWF3M5QN4PPAHWhXrw6oVH3wxU+pYpTD/SsQKxArECsQJlqQDfAI3AnmzOfhnTjjzrRgDZcDbbefMfzh5V7Jc8x5IdoUOC3wFkkzAJnNdy6NQndjvCA7eHCS0vC47jKy5AR+gQ2SgQ7mb2aT3kJ519CrxOy8qC/zSm1QW4IP2UMQe8YwJOZEjwmcjhd0gvDdzfL5yY5eR/L3i7xVbko3Nnt1g1xmxW7jNtn1CxZ7kPJObn5VpnM6Jsc6IFJygLwHlqdP3vnJ5twexbC9lLhWWL9dnZjOaxLV5MAD8H5dxu93biBfw2EM4/T+/3kdC55vSrwH1FvXj+PU5lcne4IJk+Ukn2KfAoVzTkNtFcOiXLcF7H4jiUzQHy6mwy4SNfuOdgrsBRFisQKxArECsQKxArECsQK7AUFWD7J3vcVukXKz6xVgGXAH/8WazQ5YtD8nL/MATYg2qxnrFrAsYAOdmMyJVBCT7kRxHJQZ89i3Wz+Pr8N6KXpHt1ZOjT3JX0aF6Io7MaeAz442Cm/lZop2kOwduwD+9cdsLr03oVi1Okbk58R3SCJH8G2OB54LKs7Y2D4smMlduHTEULefe9nfTYSOHTZ2zw9cA5rUNOB8ltzmWX1ikFL/jGo1DnXArdoDKvvf43BgM+zQPwi/AYmDwLB4Ewdhu8QpfaLnR140LGDDjfEmAcWn6pk9i2kdNbcrvu6XL14SDK4ZcP+v8XBgQrOvGLnMRkbHJvV3IT+3SjYNOO0OORGS6xfUvNJGnPr6yekXVRmT6dFfRh+OlZA14PJK5Woe8CM0C4XDPR4/g86mNwkSfLv8nT4D1aLnyXQ7fXKVcvy6nsjY99L47ruKV84Z3zcO/iIdUE/43n+Z4B3wSXe2zQdBPczyxhJp6Z0Kk/xjzQMUSJQvWhOE6cd0JLw9FuugZ4Ly1jObyRtMyyqxSus5R83c8sr/DxFbgHhAXM6xYb2QoNAy15lStZgQG0Afr5tKDpEkv+7DIINCxooOg8ViBWIFYgViBWYD4V+AcAJ3/9BCdveAAAAABJRU5ErkJggg=="},mdwM:function(e,t,a){"use strict";function o(e){a("K7Ud")}Object.defineProperty(t,"__esModule",{value:!0});var s={},r=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},n=[],i=a("18Nq"),l=o,c=Object(i.a)(s,r,n,!1,l,null,null);t.default=c.exports},nS0L:function(e,t){},"ni+X":function(e,t){},ojw1:function(e,t){},pUR1:function(e,t){},pUza:function(e,t,a){"use strict";function o(e){a("i2nn")}Object.defineProperty(t,"__esModule",{value:!0});var s={data:function(){return{noticeType:[{name:"系统公告",value:1},{name:"滚动公告",value:2},{name:"福利公告",value:3}],currentType:1,tableList:{}}},methods:{getSysMessage:function(){var e=this;this.$ajax("/admin/getsystemmsg",{startpage:this.$route.params.page},function(t){200===t.returnCode&&(e.tableList=t.data)})},delMessage:function(e){var t=this;this.$confirm("此操作将永久删除该系统消息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$ajax("/admin/sys-deletesystemmsg",{messageid:e},function(e){200===e.returnCode&&(t.$message({message:"删除成功",type:"success"}),t.getSysMessage())})})}},created:function(){this.getSysMessage()},mounted:function(){},watch:{currentType:function(e){this.getSysMessage()}}},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sys-notice-wrap"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:"/message/system"}},[e._v("消息管理")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:"/message/system"}},[e._v("系统消息")]),e._v(" "),a("el-breadcrumb-item",[e._v("消息列表")])],1),e._v(" "),a("el-alert",{attrs:{title:"操作说明",type:"info","show-icon":""}},[a("div",[a("p",[e._v("\n        此表包括网站、APP所有消息通知\n      ")])])]),e._v(" "),a("el-row",{staticClass:"mbt20"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.$router.push({path:"/message/add_message"})}}},[e._v("添加")])],1),e._v(" "),a("el-row",{staticClass:"mbt20"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableList.list,border:"",select:"row","tooltip-effect":"dark"}},[a("el-table-column",{attrs:{type:"selection",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"60",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"标题"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"发布者"}}),e._v(" "),a("el-table-column",{attrs:{label:"时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(e._f("time")(t.row.releaseDate,"long")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"60",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:"/message/edit_message/"+t.row.id}},[e._v("编辑")]),e._v(" "),a("a",{staticClass:"red",attrs:{href:"javascript:0;"},on:{click:function(a){e.delMessage(t.row.id)}}},[e._v("删除")])]}}])})],1)],1)],1)},n=[],i=a("18Nq"),l=o,c=Object(i.a)(s,r,n,!1,l,null,null);t.default=c.exports},pc8C:function(e,t,a){"use strict";function o(e){a("LTh0")}Object.defineProperty(t,"__esModule",{value:!0});var s={data:function(){return{chapterSensitiveWords:[]}},created:function(){var e=this;this.$store.dispatch("getChapterSensitiveWords").then(function(t){e.chapterSensitiveWords=t.ChapterSensitiveWords})}},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v("\r\n    "+e._s(e.chapterSensitiveWords)+"\r\n    "),a("h2",[e._v("章节敏感词列表")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.chapterSensitiveWords}},[a("el-table-column",{attrs:{prop:"chapterSensitiveWords",label:"书籍名称",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"章节ID",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"敏感字"}})],1)],1)},n=[],i=a("18Nq"),l=o,c=Object(i.a)(s,r,n,!1,l,null,null);t.default=c.exports},qsEH:function(e,t,a){"use strict";function o(e){a("Zl42")}Object.defineProperty(t,"__esModule",{value:!0});var s=a("PsVy"),r={components:{"pic-cropper":s.default},data:function(){return{currentTitle:"",dialogTableVisible:!1,bookList:{},updateData:{},multipleSelection:[],keywords:"",selectType:"bookName",fold:!1,filterList:{orderParemeter:-1,bookCheckStatus:-1,bookStatus:-1},$routeParams:"",keepAlive:!1,firstOne:!0,editTitle:!1}},methods:{getBookList:function(){var e=this,t={page:this.$routeParams.page,orderParemeter:"bookId"};"bookInfo"===this.$route.name&&(t={page:1,orderParemeter:"bookId"},this.selectType="bookId",this.keywords=this.$route.params.bid);var a=this.$http.trim(this.keywords);if(this.selectType&&a){if(("bookId"===this.selectType||"bookWriterId"===this.selectType)&&!Number(a))return this.$message({message:"ID必需为数字",type:"warning"}),!1;t[this.selectType]=a,this.bookList={}}for(var o in this.filterList)("number"==typeof this.filterList[o]&&this.filterList[o]>-1||"string"==typeof this.filterList[o])&&(t[o]=this.filterList[o]);"bookList"!==this.$route.name&&"bookInfo"!==this.$route.name||this.$ajax("/admin/getBookInfoList",t,function(t){200===t.returnCode?e.bookList=t.data:t.data||(e.bookList={})})},searchBook:function(){1!==Number(this.$route.params.page)?this.$router.push({params:{page:1}}):this.getBookList()},toggleSelection:function(){var e=this;if(this.multipleSelection.length){var t=[];this.multipleSelection.forEach(function(e){t.push(e.bookId)}),this.$confirm("此操作将永久删除所选的"+t.length+"书籍, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$ajax("/admin/bookBatchDelete",{bookid:t.toString()},function(t){200===t.returnCode&&(e.$message({message:"删除成功！",type:"success"}),e.getBookList())})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})}else this.$message({message:" 请选择要删除的书籍！",type:"warning"})},handleRowClick:function(e,t,a){"操作"!==a.label&&"书名"!==a.label&&this.$refs.multipleTable.toggleRowSelection(e)},handleSelectionChange:function(e){this.multipleSelection=e},handleClick:function(e,t){"a"===e?this.$router.push({path:"/book_chapter_list/"+t.bookId}):"b"===e?this.$router.push({path:"/book_detail/"+t.bookId}):"c"===e?this.$router.push({path:"/add_new_chapter/"+t.bookId}):"d"===e&&this.toggleSelection()},handleCurrentChange:function(e){this.$router.push({params:{page:e}})},dblClick:function(e,t,a){var o=this;"el-table_1_column_3"===t.id&&!this.editTitle&&this.authority.updates&&(this.bookList.list.forEach(function(e,t){e.edit&&o.$set(o.bookList.list[t],"edit",!1)}),this.currentTitle=e.bookName,this.$set(e,"edit",!0),this.$nextTick(function(){a.childNodes[0].childNodes[0].focus()}),this.editTitle=!0)},updateBookTitle:function(e){var t=this;this.editTitle&&this.bookList.list.forEach(function(e,a){e.edit&&t.$set(t.bookList.list[a],"edit",!1)}),this.currentTitle!==e.bookName?(this.$myLoad(),this.$ajax("/admin/updateBookName",{bookId:e.bookId,bookName:e.bookName},function(e){t.editTitle=!1,t.$nextTick(function(){t.$loading().close()}),t.getBookList(),200===e.returnCode&&t.$message({message:e.msg,type:"success"})})):this.editTitle=!1},bookChangeState:function(e,t){var a=this,o=t.bookCheckStatus,s=t.bookStatus;if("a"===e)o=1;else if("b"===e){if(0===t.bookCheckStatus)return this.$message({message:"书籍暂未审核，请先审核通过！",type:"warning"}),!1;o=2}else if("c"===e){if(t.bookCheckStatus<=1)return this.$message({message:"书籍已下架！",type:"warning"}),!1;o=1}else"d"===e?s=1:"e"===e?s=0:"f"===e&&(o=0);var r=function(){a.$ajax("/admin/sysbookupdate",{bookId:t.bookId,bookCheckStatus:o,bookAuthorization:t.bookAuthorization,bookStatus:s},function(e){200===e.returnCode&&(a.$message(e.msg),a.getBookList())})};"a"!==e?r():this.$ajax("/admin/getChapterCount",{bookId:t.bookId},function(e){200===e.returnCode&&e.data>1?r():a.$message({message:"已发布章节不足两章，不可通过审核！",type:"warning"})},"post","json",!0)},dialogShow:function(e){this.dialogTableVisible=!0,this.$set(this.updateData,"bookId",e.bookId),this.$set(this.updateData,"bookImage",e.bookImage)},closeIt:function(){this.dialogTableVisible=!1},successBack:function(e){200===e.returnCode&&this.getBookList()}},created:function(){this.firstOne&&(this.$routeParams=this.$route.params,this.getBookList(),this.firstOne=!1)},activated:function(e){this.firstOne||(this.$routeParams=this.$route.params,this.getBookList())},watch:{$route:function(e){this.$routeParams=e.params,this.getBookList()},filterList:{handler:function(){this.getBookList()},deep:!0}},computed:{authority:function(){return this.$store.state.userInfo.adminRolemenuanduserrole?this.$store.state.userInfo.adminRolemenuanduserrole:{}}}},n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"admin-book-wrap"},[o("el-alert",{attrs:{title:"操作说明",type:"info","show-icon":""}},[o("div",[o("p",[e._v("\n                此表为本站全部书籍列表，您可以通过相应书籍ID来批量管理，也可以通过\n                "),e.authority.adds?o("router-link",{staticClass:"red",attrs:{to:{name:"addNewBook"}}},[e._v("新建书籍")]):e._e(),e._v("来添加新书\n            ")],1),e._v(" "),o("p",[o("span",{staticClass:"red"},[e._v("提示：")]),e._v("需要更多详细筛选条件请直接点击 "),o("a",{attrs:{href:"javascript:0;"},on:{click:function(t){e.fold?e.fold=!1:e.fold=!0}}},[e._v("展开")]),e._v("；双击书名可进行修改\n            ")])])]),e._v(" "),o("el-row",{directives:[{name:"show",rawName:"v-show",value:e.fold,expression:"fold"}],staticClass:"mbt20 fitler-search"},[o("div",[e._v("\n            排序类型：\n            "),o("el-radio-group",{model:{value:e.filterList.orderParemeter,callback:function(t){e.$set(e.filterList,"orderParemeter",t)},expression:"filterList.orderParemeter"}},[o("el-radio-button",{attrs:{label:-1}},[e._v("全部")]),e._v(" "),o("el-radio-button",{attrs:{label:"bookCreatedTime"}},[e._v("创建时间")]),e._v(" "),o("el-radio-button",{attrs:{label:"bookWorldCount"}},[e._v("字数")]),e._v(" "),o("el-radio-button",{attrs:{label:"lastUpdateTime"}},[e._v("更新时间")])],1)],1),e._v(" "),o("div",[e._v("\n            书籍状态：\n            "),o("el-radio-group",{model:{value:e.filterList.bookCheckStatus,callback:function(t){e.$set(e.filterList,"bookCheckStatus",t)},expression:"filterList.bookCheckStatus"}},[o("el-radio-button",{attrs:{label:-1}},[e._v("全部")]),e._v(" "),o("el-radio-button",{attrs:{label:0}},[e._v("未审核")]),e._v(" "),o("el-radio-button",{attrs:{label:1}},[e._v("已审核")]),e._v(" "),o("el-radio-button",{attrs:{label:2}},[e._v("已上架")])],1)],1),e._v(" "),o("div",[e._v("\n            连载状态：\n            "),o("el-radio-group",{model:{value:e.filterList.bookStatus,callback:function(t){e.$set(e.filterList,"bookStatus",t)},expression:"filterList.bookStatus"}},[o("el-radio-button",{attrs:{label:-1}},[e._v("全部")]),e._v(" "),o("el-radio-button",{attrs:{label:0}},[e._v("连载中")]),e._v(" "),o("el-radio-button",{attrs:{label:1}},[e._v("已完结")])],1)],1)]),e._v(" "),o("el-row",{staticClass:"mbt20"},[e.authority.deletes?o("el-button",{attrs:{type:"danger",plain:""},on:{click:function(t){e.toggleSelection()}}},[e._v("批量删除")]):e._e()],1),e._v(" "),o("el-row",{staticClass:"mbt20"},[o("el-col",{attrs:{xs:20,sm:16,md:12,lg:9,xl:6}},[o("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchBook(t):null}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}},[o("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.selectType,callback:function(t){e.selectType=t},expression:"selectType"}},[o("el-option",{attrs:{label:"书  名",value:"bookName"}}),e._v(" "),o("el-option",{attrs:{label:"作 者",value:"writerName"}}),e._v(" "),o("el-option",{attrs:{label:"书籍ID",value:"bookId"}}),e._v(" "),o("el-option",{attrs:{label:"作者ID",value:"bookWriterId"}}),e._v(" "),o("el-option",{attrs:{label:"手机号",value:"userPhone"}})],1),e._v(" "),o("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchBook},slot:"append"})],1)],1)],1),e._v(" "),o("el-row",[o("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.bookList.list,border:""},on:{"row-click":e.handleRowClick,"selection-change":e.handleSelectionChange,"cell-dblclick":e.dblClick}},[o("el-table-column",{attrs:{type:"selection",width:"30",aligin:"center"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",prop:"bookId",width:"80",label:"ID"}}),e._v(" "),o("el-table-column",{attrs:{prop:"bookName",label:"书名"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.row.bookName,expression:"scope.row.bookName"}],class:t.row.edit?"":"edit",attrs:{disabled:!t.row.edit},domProps:{value:t.row.bookName},on:{blur:function(a){e.updateBookTitle(t.row)},input:function(a){a.target.composing||e.$set(t.row,"bookName",a.target.value)}}})]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"writerName",label:"作者"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(t.row.writerName)+"(id:"+e._s(t.row.bookWriterId)+")\n                ")]}}])}),e._v(" "),o("el-table-column",{attrs:{align:"center",prop:"bookStatus",label:"连载"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.authority.updates?o("el-dropdown",{attrs:{size:"medium",trigger:"click",placement:"bottom"},on:{command:function(a){e.bookChangeState(a,t.row)}}},[o("span",{staticClass:"el-dropdown-link",class:t.row.bookStatus?"primary":"success"},[e._v("\n                            "+e._s(t.row.bookStatus?"已完结":"连载中")+"\n                        ")]),e._v(" "),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t.row.bookStatus?o("el-dropdown-item",{attrs:{command:"e"}},[e._v("设置连载")]):o("el-dropdown-item",{attrs:{command:"d"}},[e._v("设置完结")])],1)],1):o("span",{staticClass:"el-dropdown-link",class:t.row.bookStatus?"primary":"success"},[e._v("\n                        "+e._s(t.row.bookStatus?"已完结":"连载中")+"\n                    ")])]}}])}),e._v(" "),o("el-table-column",{attrs:{align:"center",prop:"bookCheckStatus",label:"审核"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.authority.toExamine?o("el-dropdown",{attrs:{size:"medium",trigger:"click",placement:"bottom"},on:{command:function(a){e.bookChangeState(a,t.row)}}},[o("span",{staticClass:"el-dropdown-link",class:t.row.bookCheckStatus?"success":"primary"},[e._v("\n                            "+e._s(t.row.bookCheckStatus?"已审核":"未审核")+"\n                        ")]),e._v(" "),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t.row.bookCheckStatus?o("el-dropdown-item",{attrs:{command:"f"}},[e._v("设置未审核")]):o("el-dropdown-item",{attrs:{command:"a"}},[e._v("设置已审核")])],1)],1):o("span",{staticClass:"el-dropdown-link",class:t.row.bookCheckStatus?"success":"primary"},[e._v("\n                        "+e._s(t.row.bookCheckStatus?"已审核":"未审核")+"\n                    ")])]}}])}),e._v(" "),o("el-table-column",{attrs:{align:"center",prop:"bookStatus",label:"上架"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.authority.updates?o("el-dropdown",{attrs:{size:"medium",trigger:"click",placement:"bottom"},on:{command:function(a){e.bookChangeState(a,t.row)}}},[o("span",{staticClass:"el-dropdown-link",class:2===t.row.bookCheckStatus?"success":"primary"},[e._v("\n                            "+e._s(2==t.row.bookCheckStatus?"已上架":"未上架")+"\n                        ")]),e._v(" "),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[2!==t.row.bookCheckStatus?o("el-dropdown-item",{attrs:{command:"b"}},[e._v("上架")]):o("el-dropdown-item",{attrs:{command:"c"}},[e._v("下架")])],1)],1):o("span",{staticClass:"el-dropdown-link",class:2===t.row.bookCheckStatus?"success":"primary"},[e._v("\n                        "+e._s(2==t.row.bookCheckStatus?"已上架":"未上架")+"\n                    ")])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(e._f("time")(t.row.bookCreatedTime,"long")))])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"更新时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(e._f("time")(t.row.lastUpdateTime,"long")))])]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"bookWorldCount",label:"字数",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{width:"80",label:"封面"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticClass:"cover-wrap",on:{click:function(a){e.dialogShow(t.row)}}},[t.row.bookRemarks?o("img",{staticClass:"icon",attrs:{src:a("1+Xl")}}):e._e(),e._v(" "),o("img",{staticClass:"cover",attrs:{src:t.row.bookImage,alt:""}})])]}}])}),e._v(" "),o("el-table-column",{staticClass:"last-column",attrs:{label:"操作",width:"70",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-dropdown",{attrs:{trigger:"click",size:"medium",placement:"bottom"},on:{command:function(a){e.handleClick(a,t.row)}}},[o("a",{staticClass:"btn",attrs:{href:"javascript:0;"}},[e._v("更多")]),e._v(" "),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e.authority.shows?o("el-dropdown-item",{attrs:{command:"a"}},[e._v("章节列表")]):e._e(),e._v(" "),e.authority.updates?o("el-dropdown-item",{attrs:{command:"b"}},[e._v("编辑详情")]):e._e(),e._v(" "),e.authority.adds?o("el-dropdown-item",{attrs:{command:"c"}},[e._v("添加章节")]):e._e(),e._v(" "),e.authority.deletes?o("el-dropdown-item",{staticClass:"danger",attrs:{command:"d"}},[e._v("删除书籍")]):e._e()],1)],1)]}}])})],1),e._v(" "),o("el-pagination",{staticClass:"mbt20",attrs:{background:"","current-page":e.bookList.pageNum,"page-size":e.bookList.pageSize,layout:"total, prev, pager, next, jumper",total:e.bookList.total},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),o("pic-cropper",{ref:"avatarUpdate",attrs:{action:"https://www.lajixs.com/api/admin/updateBookCoverAvatarimgUpload",visible:e.dialogTableVisible,maxWidth:400,data:{bookid:e.updateData.bookId},url:"/static/img/defaultcoverimg.jpg",aspectRatio:.75},on:{"update:visible":function(t){e.dialogTableVisible=t},close:e.closeIt,success:e.successBack}})],1)},i=[],l=a("18Nq"),c=o,u=Object(l.a)(r,n,i,!1,c,null,null);t.default=u.exports},rwQE:function(e,t,a){"use strict";function o(e){a("EqLA")}Object.defineProperty(t,"__esModule",{value:!0});var s=a("3cXf"),r=a.n(s),n={data:function(){return{dialogType:"add",dialogVisible:!1,adminMemberList:{},keywords:"",selectType:"",centerDialogVisible:!1,fileList:[],file:[],uploadData:{},memberInfo:{userName:"",userPassword:""},droitInfo:{shows:1,deletes:0,updates:0,adds:0,toExamine:1,menuList:[]},typeList:[],droitList:[]}},methods:{getMemberList:function(){var e=this,t={page:this.$route.params.page};this.$ajax("/admin/getAdminInfoList",t,function(t){200===t.returnCode?e.adminMemberList=t.data:t.data||(e.adminMemberList={})})},delMember:function(e){var t=this;this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$ajax("/admin/deleteAdminInfo",{id:e.userId},function(e){t.dialogVisible=!1,200===e.returnCode&&(t.getMemberList(),t.$message({message:e.msg,type:"success"}))})})},addAdminMember:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$ajax("/admin/addAdminInfo",t.memberInfo,function(e){t.dialogVisible=!1,200===e.returnCode&&(t.getMemberList(),t.$message({message:e.msg,type:"success"}))})})},editDroitInfo:function(e,t){var a=this,o=void 0;if("edit"===e){var s=JSON.parse(r()(this.droitInfo));s.menuList=s.menuList.toString(),s.type=2,o=s}else o={userId:t.userId,type:"search"===e?1:3};this.$ajax("/admin/getAdminRolemenuanduserrole",o,function(o){"search"!==e&&(a.dialogVisible=!1),200===o.returnCode?"search"===e?(o.data.menuList=JSON.parse("["+String(o.data.menuList.split(","))+"]"),a.droitInfo=o.data,a.$set(a.droitInfo,"userName",t.userName)):a.$message({message:o.msg,type:"success"}):o.data||"search"!==e||(a.droitInfo.menuList=[])})},editMemberInfo:function(e){var t=this;this.$prompt("请输入新密码","修改密码",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/[a-zA-Z\d_]{6,18}/,inputErrorMessage:"密码只能包含数字、字母和_，长度6-18位"}).then(function(a){var o=a.value;t.$ajax("/admin/updateAdminInfo",{id:e.id,userPassword:o},function(e){200===e.returnCode&&t.$message({type:"success",message:e.msg})})}).catch(function(){})},getDroitList:function(){var e=this;this.$ajax("/admin-RefreshRoleMenu","",function(t){200===t.returnCode&&(e.droitList=JSON.parse(sessionStorage.getItem("user_info")).roleMenuList)})},pageChange:function(e){this.$router.push({params:{page:e}})},dialogSync:function(e,t){this.dialogType=e,this.dialogVisible=!0,"edit"===e&&(this.$set(this.droitInfo,"userName",t.userName),this.$set(this.droitInfo,"userId",t.userId),this.getDroitList(),this.editDroitInfo("search",t))}},created:function(){this.getMemberList()},watch:{$route:function(){this.getMemberList()}}},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin-user-wrap"},[a("el-alert",{attrs:{title:"操作说明",type:"info","show-icon":""}},[a("p",[e._v("\n      此表是本站全部管理员信息\n    ")]),e._v(" "),a("p",[a("span",{staticClass:"red"},[e._v("ps：")]),e._v("添加新用户时第一次设置权限是初始化用户权限，设置用户权限是需要进行第二次操作\n    ")])]),e._v(" "),a("el-row",{staticClass:"mbt20"},[a("el-button",{attrs:{size:"medium"},on:{click:function(t){e.dialogSync("add")}}},[e._v("添加")])],1),e._v(" "),a("el-row",{staticClass:"mbt20"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.adminMemberList.list,border:"",select:"row"}},[a("el-table-column",{attrs:{type:"selection",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userId",label:"ID",width:"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"用户名",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"lastLogTime",label:"最近登录"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("time")(t.row.loginTime,"long")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"loginIP",label:"最新登录IP"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"状态",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.userState?a("span",{staticClass:"red"},[e._v("锁定")]):a("span",{staticClass:"green"},[e._v("正常")])]}}])}),e._v(" "),e.$store.state.userInfo&&e.$store.state.userInfo.adminRolemenuanduserrole.updates?a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{staticClass:"btn",on:{click:function(a){e.editMemberInfo(t.row)}}},[e._v("\n            修改密码\n          ")]),a("br"),e._v(" "),a("a",{staticClass:"btn",on:{click:function(a){e.dialogSync("edit",t.row)}}},[e._v("\n            权限\n          ")]),e._v(" "),a("a",{staticClass:"btn red",attrs:{href:"javascript:0;"},on:{click:function(a){e.delMember(t.row)}}},[e._v("删除")])]}}])}):e._e()],1),e._v(" "),e.adminMemberList.list?a("el-pagination",{staticClass:"mbt20",attrs:{background:"",pageSize:e.adminMemberList.pageSize,layout:"prev, pager, next, jumper",total:e.adminMemberList.total},on:{"current-change":e.pageChange}}):e._e()],1),e._v(" "),a("el-dialog",{staticClass:"dialog-submit-form",attrs:{title:"add"===e.dialogType?"添加新用户":"权限管理",visible:e.dialogVisible,width:"add"===e.dialogType?"380px":"680px"},on:{"update:visible":function(t){e.dialogVisible=t}}},["add"===e.dialogType?a("el-form",{ref:"addMember",attrs:{"label-width":"80px",size:"medium",model:e.memberInfo}},[a("el-form-item",{attrs:{label:"用户名",rules:[{required:!0,message:"请填写用户名"}]}},[a("el-input",{model:{value:e.memberInfo.userName,callback:function(t){e.$set(e.memberInfo,"userName",t)},expression:"memberInfo.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{rules:[{required:!0,message:"请填写密码"}],label:"密  码"}},[a("el-input",{model:{value:e.memberInfo.userPassword,callback:function(t){e.$set(e.memberInfo,"userPassword",t)},expression:"memberInfo.userPassword"}})],1),e._v(" "),a("el-form-item",{staticClass:"submit-item"},[a("el-button",{attrs:{size:"medium"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:function(t){e.addAdminMember("addMember")}}},[e._v("添 加")])],1)],1):e._e(),e._v(" "),"edit"===e.dialogType?a("el-form",{ref:"droitInfoForm",attrs:{"label-width":"50px",size:"medium",model:e.droitInfo}},[a("el-row",{staticClass:"mb20",attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"用 户"}},[a("el-input",{attrs:{readonly:""},model:{value:e.droitInfo.userName,callback:function(t){e.$set(e.droitInfo,"userName",t)},expression:"droitInfo.userName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"审 核"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.droitInfo.toExamine,callback:function(t){e.$set(e.droitInfo,"toExamine",t)},expression:"droitInfo.toExamine"}},[a("el-option",{attrs:{label:"否",value:0}}),e._v(" "),a("el-option",{attrs:{label:"是",value:1}})],1)],1)],1)],1),e._v(" "),a("el-row",{staticClass:"mb20",attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"添 加"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.droitInfo.adds,callback:function(t){e.$set(e.droitInfo,"adds",t)},expression:"droitInfo.adds"}},[a("el-option",{attrs:{label:"否",value:0}}),e._v(" "),a("el-option",{attrs:{label:"是",value:1}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"删 除"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.droitInfo.deletes,callback:function(t){e.$set(e.droitInfo,"deletes",t)},expression:"droitInfo.deletes"}},[a("el-option",{attrs:{label:"否",value:0}}),e._v(" "),a("el-option",{attrs:{label:"是",value:1}})],1)],1)],1)],1),e._v(" "),a("el-row",{staticClass:"mb20",attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"查 看"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.droitInfo.shows,callback:function(t){e.$set(e.droitInfo,"shows",t)},expression:"droitInfo.shows"}},[a("el-option",{attrs:{label:"否",value:0}}),e._v(" "),a("el-option",{attrs:{label:"是",value:1}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"修 改"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.droitInfo.updates,callback:function(t){e.$set(e.droitInfo,"updates",t)},expression:"droitInfo.updates"}},[a("el-option",{attrs:{label:"否",value:0}}),e._v(" "),a("el-option",{attrs:{label:"是",value:1}})],1)],1)],1)],1),e._v(" "),a("el-row",{staticClass:"mb20"},[a("el-form-item",{attrs:{label:"菜 单"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.droitInfo.menuList,callback:function(t){e.$set(e.droitInfo,"menuList",t)},expression:"droitInfo.menuList"}},e._l(e.droitList,function(e){return a("el-option",{key:e.id,attrs:{label:e.menuName,value:e.id}})}))],1)],1),e._v(" "),a("el-form-item",{staticClass:"submit-item"},[a("el-button",{attrs:{size:"medium"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:function(t){e.editDroitInfo("edit")}}},[e._v("更 新")])],1)],1):e._e()],1)],1)},l=[],c=a("18Nq"),u=o,d=Object(c.a)(n,i,l,!1,u,null,null);t.default=d.exports},rxrk:function(e,t){},"s/uD":function(e,t){},vtXg:function(e,t,a){"use strict";function o(e){a("54MD")}Object.defineProperty(t,"__esModule",{value:!0});var s=a("3cXf"),r=a.n(s),n={data:function(){return{rules:{bookName:[{require:!0,message:"请选取书籍",trigger:"blur"}],checkworkattendance:[{required:!0,message:"请添加考勤金额"},{type:"number",message:"金额必需为数字"}],pepper:[{required:!0,message:"请添加打赏金额"},{type:"number",message:"金额必需为数字"}],bubscribe:[{required:!0,message:"请添加订阅金额"},{type:"number",message:"金额必需为数字"}],thirdPart:[{required:!0,message:"请添加第三方金额"},{type:"number",message:"金额必需为数字"}],millet:[{required:!0,message:"请添加小米椒金额"},{type:"number",message:"金额必需为数字"}]},bookInfo:"",authorBook:[],userInfo:{},monthReport:{bookid:"",bookName:"",checkworkattendance:"",pepper:"",bubscribe:"",thirdPart:"",millet:""}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message({message:"请核对信息是否完整",type:"warning"}),!1;var a=JSON.parse(r()(t.monthReport));"authorEditMonReport"===t.$route.name?t.$ajax("/admin/updateAuthorMonthlyreportByAuthormon",a,function(e){200===e.returnCode&&(t.$message({message:e.msg,type:"success"}),t.getBookMonthly())}):t.$ajax("/admin/addAuthorMonthlyreportByAuthormon",a,function(e){200===e.returnCode&&(t.$message({message:"更新成功",type:"success"}),t.getAuthorBook())})})},getAuthorBook:function(){var e=this;this.$ajax("/admin/agetAuthorBookLists",{authorId:this.$route.params.aid},function(t){if(200===t.returnCode){var a=[];t.data.forEach(function(e){e.bookCheckStatus&&a.push(e)}),e.authorBook=a}})},getUserInfo:function(){var e=this;this.$ajax("/person-SimplifyUserInfo",{puserid:this.$route.params.aid},function(t){200===t.returnCode&&(e.userInfo=t.data,e.$set(e.monthReport,"authorid",t.data.userId),e.$set(e.monthReport,"authorName",t.data.pseudonym))})},getBookInfo:function(){var e=this;this.$ajax("/book-showBookInfo",{bookid:this.$route.params.bid},function(t){200===t.returnCode&&(e.$set(e.monthReport,"bookid",t.data.bookId),e.$set(e.monthReport,"bookName",t.data.bookName),e.$set(e.monthReport,"authorid",t.data.bookWriterId),e.$set(e.monthReport,"authorName",t.data.writerName))})},getBookMonthly:function(){var e=this,t=[];t=this.$route.params.time?this.$route.params.time.split("-"):sessionStorage.getItem("monthly_date").split("-"),this.$ajax("/admin/getAuthorMonthlyreportById",{bookid:this.$route.params.bid,year:t[0],month:t[1],type:2},function(t){200===t.returnCode&&(delete t.data.dataTime,delete t.data.subTotalCount,e.monthReport=t.data)})}},created:function(){this.$route.params.time&&sessionStorage.setItem("monthly_date",this.$route.params.time),"authorAddMonReport"===this.$route.name?(this.getUserInfo(),this.getAuthorBook()):(this.getBookInfo(),this.getBookMonthly())},watch:{bookInfo:function(e){this.monthReport.bookid=e.split(",")[0],this.monthReport.bookName=e.split(",")[1]}}},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-detail-info"},[a("el-alert",{attrs:{title:"操作说明",type:"info","show-icon":""}},[a("div",[a("p",[e._v("\n        管理员可对已上架书籍定制月报，也可以对已生成的月报重新调整\n      ")])])]),e._v(" "),a("el-row",{staticClass:"mbt20"}),e._v(" "),a("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm",attrs:{model:e.monthReport,"status-icon":"",rules:e.rules,"label-width":"100px"}},[a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"书籍名称",prop:"bookName"}},["authorEditMonReport"===e.$route.name?a("el-input",{staticClass:"mw220",attrs:{readonly:""},model:{value:e.monthReport.bookName,callback:function(t){e.$set(e.monthReport,"bookName",t)},expression:"monthReport.bookName"}}):a("el-select",{staticClass:"mw220",attrs:{placeholder:"请选取书籍"},model:{value:e.bookInfo,callback:function(t){e.bookInfo=t},expression:"bookInfo"}},[e._l(e.authorBook,function(e){return[a("el-option",{attrs:{label:e.bookName,value:e.bookId+","+e.bookName}})]})],2)],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"作  者",prop:"authorName"}},[a("el-input",{staticClass:"mw220",attrs:{readonly:""},model:{value:e.monthReport.authorName,callback:function(t){e.$set(e.monthReport,"authorName",e._n(t))},expression:"monthReport.authorName"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"打  赏",prop:"pepper"}},[a("el-input",{staticClass:"mw220",model:{value:e.monthReport.pepper,callback:function(t){e.$set(e.monthReport,"pepper",e._n(t))},expression:"monthReport.pepper"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"考  勤",prop:"checkworkattendance"}},[a("el-input",{staticClass:"mw220",model:{value:e.monthReport.checkworkattendance,callback:function(t){e.$set(e.monthReport,"checkworkattendance",e._n(t))},expression:"monthReport.checkworkattendance"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"订  阅",prop:"bubscribe"}},[a("el-input",{staticClass:"mw220",model:{value:e.monthReport.bubscribe,callback:function(t){e.$set(e.monthReport,"bubscribe",e._n(t))},expression:"monthReport.bubscribe"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"第三方",prop:"thirdPart"}},[a("el-input",{staticClass:"mw220",model:{value:e.monthReport.thirdPart,callback:function(t){e.$set(e.monthReport,"thirdPart",e._n(t))},expression:"monthReport.thirdPart"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"小米椒",prop:"millet"}},[a("el-input",{staticClass:"mw220",model:{value:e.monthReport.millet,callback:function(t){e.$set(e.monthReport,"millet",e._n(t))},expression:"monthReport.millet"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:12}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm2")}}},[e._v("生成")])],1)],1)],1)},l=[],c=a("18Nq"),u=o,d=Object(c.a)(n,i,l,!1,u,null,null);t.default=d.exports},wUqf:function(e,t,a){"use strict";function o(e){a("P1B2")}Object.defineProperty(t,"__esModule",{value:!0});var s={data:function(){return{bookCoverList:{}}},methods:{getCoverList:function(){var e=this;this.$ajax("/admin/getBookInfoList",{page:this.$route.params.page,orderParemeter:"bookId",paramType:"query",img:"cover",pageSize:"120"},function(t){200===t.returnCode&&(e.bookCoverList=t.data)})},handleCurrentChange:function(e){this.$router.push({params:{page:e}})}},created:function(){this.getCoverList()},watch:{$route:function(e){this.getCoverList()}}},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wbc-wrapper clear"},[a("el-alert",{staticClass:"mbt20",attrs:{title:"操作说明",type:"info","show-icon":""}},[a("div",[a("p",[e._v("\n        此表为本站全部书籍封面，您可以直接预览审核\n      ")])])]),e._v(" "),a("div",{staticClass:"wbcw-contain clearfix"},e._l(e.bookCoverList.list,function(t,o){return e.bookCoverList.list?a("el-card",{key:t.bookId,attrs:{"body-style":{padding:"0px"}}},[a("router-link",{attrs:{to:"/book/info/"+t.bookId}},[a("img",{staticClass:"image",attrs:{src:t.bookImage}}),e._v(" "),a("div",{staticClass:"mask"},[a("p",{staticClass:"tit"},[e._v(e._s(t.bookName))]),e._v(" "),a("p",{staticClass:"author"},[e._v(e._s(t.writerName))])])])],1):e._e()})),e._v(" "),a("el-pagination",{staticClass:"mbt20",attrs:{background:"","current-page":e.bookCoverList.pageNum,"page-size":e.bookCoverList.pageSize,layout:"total, prev, pager, next, jumper",total:e.bookCoverList.total},on:{"current-change":e.handleCurrentChange}})],1)},n=[],i=a("18Nq"),l=o,c=Object(i.a)(s,r,n,!1,l,null,null);t.default=c.exports},whH9:function(e,t){},wk1I:function(e,t,a){"use strict";function o(e){a("kufp")}Object.defineProperty(t,"__esModule",{value:!0});var s=a("Z5Sp"),r={name:"ElForm",componentName:"ElForm",provide:function(){return{elForm:this}},props:{model:Object,rules:Object,labelPosition:String,labelWidth:String,labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},size:String,disabled:Boolean,validateOnRuleChange:{type:Boolean,default:!0}},watch:{rules:function(){this.validateOnRuleChange&&this.validate(function(){})}},data:function(){return{fields:[]}},created:function(){var e=this;this.$on("el.form.addField",function(t){t&&e.fields.push(t)}),this.$on("el.form.removeField",function(t){t.prop&&e.fields.splice(e.fields.indexOf(t),1)})},methods:{resetFields:function(){this.model&&this.fields.forEach(function(e){e.resetField()})},clearValidate:function(){this.fields.forEach(function(e){e.clearValidate()})},validate:function(e){var t=this;if(!this.model)return void console.warn("[Element Warn][Form]model is required for validate to work!");var a=void 0;"function"!=typeof e&&window.Promise&&(a=new window.Promise(function(t,a){e=function(e){e?t(e):a(e)}}));var o=!0,r=0;0===this.fields.length&&e&&e(!0);var n={};return this.fields.forEach(function(a){a.validate("",function(a,i){a&&(o=!1),n=Object(s.a)({},n,i),"function"==typeof e&&++r===t.fields.length&&e(o,n)})}),a||void 0},validateField:function(e,t){var a=this.fields.filter(function(t){return t.prop===e})[0];if(!a)throw new Error("must call validateField with valid prop string!");a.validate("",t)}}},n=function(){var e=this,t=e.$createElement;return(e._self._c||t)("form",{staticClass:"el-form",class:[e.labelPosition?"el-form--label-"+e.labelPosition:"",{"el-form--inline":e.inline}]},[e._t("default")],2)},i=[],l=a("18Nq"),c=Object(l.a)(r,n,i,!1,null,null,null),u=c.exports,d={components:{ElForm:u},data:function(){return{custom:!1,currentType:"",typeList:[],searchValue:"",tableList:[],dialogFormVisible:!1,formValue:{},restaurant:[],timeout:null,dialogImageUrl:"",dialogVisible:!1}},methods:{getRecommendList:function(){var e=this;this.$ajax("/sys-getRecommendedPosition",{},function(t){200===t.returnCode&&(e.typeList=t.data)})},getActivesRecommend:function(){var e=this;this.$ajax("/admin/sys-getActivityRecommendedPosition",function(t){200===t.returnCode&&(e.tableList=t.data.app.concat(t.data.pc))})},handleClick:function(e,t){var a=this;this.formValue={},this.$set(this.formValue,"showHide",e.showHide),this.$set(this.formValue,"id",e.id),this.$set(this.formValue,"diaType",t),"small"===t?this.$set(this.formValue,"activityImgURL",""):this.$set(this.formValue,"detailsImgAndPageURL",""),this.$nextTick(function(){a.dialogFormVisible=!0})},handleCommand:function(e,t){var a=this;this.$ajax("/admin/HDupdateActivityRecommendedPosition",{id:t.id,showHide:t.showHide?0:1},function(e){200===e.returnCode&&(a.$message({message:e.msg,type:"success"}),a.getActivesRecommend())})},editActiveRecommend:function(){var e=this,t=function(){delete e.formValue.diaType,e.$ajax("/admin/HDupdateActivityRecommendedPosition",e.formValue,function(t){e.dialogFormVisible=!1,200===t.returnCode&&(e.$message({message:t.msg,type:"success"}),e.getActivesRecommend())})};if("small"===this.formValue.diaType)this.formValue.activityImgURL?t():this.$message({message:"请先上传图片",type:"warning"});else if(this.custom){if(!this.formValue.bookId)return this.$message({message:"请填写书籍ID",type:"warning"}),!1;t()}else this.formValue.detailsImgAndPageURL?t():this.$message({message:"请先上传图片",type:"warning"})},onUploading:function(){this.$loading({lock:!0,text:"图片上传中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"})},beforeClose:function(){this.custom=!1,this.dialogFormVisible=!1},handlePictureCard:function(e,t){},successBack:function(e,t,a){this.$loading().close(),200===e.returnCode&&("small"===this.formValue.diaType?this.formValue.activityImgURL=e.data:this.formValue.detailsImgAndPageURL=e.data,this.$message({message:"上传成功",type:"success"}))}},created:function(){this.getActivesRecommend()},watch:{searchValue:function(){this.search()}}},m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"book-recommend-actives"},[a("el-alert",{attrs:{title:"操作说明",type:"info","show-icon":""}},[a("div",[a("p",[e._v("此表为本站活动推荐位，通过编辑即可修改相应的推荐位信息")]),e._v(" "),a("p",{staticClass:"tip"},[a("span",{staticClass:"red"},[e._v("操作提示：")]),e._v("\n        推荐小图为App或网站首页展示\n      ")])])]),e._v(" "),a("el-row",{staticClass:"mbt20",attrs:{gutter:10}},[a("el-col",{attrs:{xs:18,sm:12,md:9,lg:6,xl:3}}),e._v(" "),a("el-button",{staticClass:"fr",on:{click:function(t){e.$clearCache()}}},[e._v("清除缓存")])],1),e._v(" "),a("el-row",[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableList,border:"",select:"row","tooltip-effect":"dark"}},[a("el-table-column",{attrs:{type:"selection",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"Id",width:"34",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"终端",width:"50",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.type?"PC":"App")+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"小图",align:"center",minWidth:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("img",{staticClass:"mw-auto",attrs:{src:t.row.activityImgURL,alt:""},on:{click:function(a){e.handleClick(t.row,"small")}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"大图",minWidth:"400",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"img-wrap",on:{click:function(a){e.handleClick(t.row,"big")}}},[t.row.bookId?a("span",[e._v(e._s(t.row.bookId))]):[a("img",{staticClass:"active-big-img mw-auto",attrs:{src:t.row.detailsImgAndPageURL,alt:""}})]],2)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"详情链接",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",{attrs:{size:"medium",trigger:"click"},on:{command:function(a){e.handleCommand(a,t.row)}}},[a("a",{staticClass:"el-dropdown-link",attrs:{href:"javascript:0;"}},[t.row.showHide?a("span",{staticClass:"green"},[e._v("隐藏")]):a("span",{staticClass:"red"},[e._v("显示")])]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[e._v(e._s(t.row.showHide?"显示":"隐藏"))])],1)],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n         "+e._s(e._f("time")(t.row.dateTime,"long"))+"\n        ")]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"修改推荐位",width:"420px","before-close":e.beforeClose,"close-on-press-escape":!1,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")]),e._v(" "),a("el-form",[a("el-form-item",["big"==e.formValue.diaType&&!e.custom||"small"==e.formValue.diaType?a("el-upload",{ref:"upload",attrs:{name:"file",listType:"picture","show-file-list":!1,"on-change":e.handlePictureCard,"on-progress":e.onUploading,"on-success":e.successBack,"on-error":e.successBack,action:"/api/admin/uploadActivityRecommendedPositionImg","auto-upload":!0}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v(e._s("small"===e.formValue.diaType?"上传小图":"上传大图"))]),e._v(" "),"big"!=e.formValue.diaType||e.custom?e._e():a("a",{attrs:{href:"javascript:0;"},on:{click:function(t){e.custom=!0}}},[e._v("添加书籍ID")])],1):e._e()],1),e._v(" "),e.custom?a("el-form-item",{attrs:{labelWidth:"90px",label:"添加书籍ID"}},[a("el-input",{attrs:{type:"text"},model:{value:e.formValue.bookId,callback:function(t){e.$set(e.formValue,"bookId",t)},expression:"formValue.bookId"}})],1):e._e()],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.editActiveRecommend(e.formValue.diaType)}}},[e._v("更新")])],1)],1)],1)},p=[],h=o,f=Object(l.a)(d,m,p,!1,h,null,null);t.default=f.exports},wuGX:function(e,t){},x1Tb:function(e,t){},y4ve:function(e,t){},ycWR:function(e,t,a){"use strict";function o(e){a("pUR1")}Object.defineProperty(t,"__esModule",{value:!0});var s={},r=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div")},n=[],i=a("18Nq"),l=o,c=Object(i.a)(s,r,n,!1,l,null,null);t.default=c.exports},zCU7:function(e,t,a){"use strict";function o(e){a("7ban")}Object.defineProperty(t,"__esModule",{value:!0});var s=a("3cXf"),r=a.n(s),n={data:function(){var e=this,t=function(t,a,o){e.ruleForm.chapterLength?e.ruleForm.chapterLength>2e4?o(new Error("总长度不可超过20000字！")):o():o(new Error("请添加章节内容"))};return{loading:"",isPending:!1,dialogSize:"tiny",volumeList:[],isAutoPublish:!1,labelWidth:"136px",dialogFormVisible:!1,isVip:0,volumeForm:{volumeName:""},ruleForm:{bookTitle:"",chapterTitle:"",volumeId:null,releaseTime:"",chapterContent:"",whetherPublic:0,chapterLength:0,chapterIsvip:0,authorWords:""},rule:{volumeName:[{required:!0,validator:function(t,a,o){!a||e.$http.trim(a).length<1?(e.volumeForm.volumeName="",o(new Error("卷名不能为空"))):e.$ajax("/books-getCheckVolume",{volumeName:a,bookid:e.ruleForm.bookId},function(e){200===e.returnCode?o():o(new Error(e.msg))})},trigger:"blur"}]},rules:{chapterTitle:[{required:!0,validator:function(t,a,o){a=e.$http.trim(a),!a||e.$http.trim(a).length<1?(e.ruleForm.chapterTitle="",o(new Error("请输入章节名称"))):e.$ajax("/chapter-checkName",{chapterName:a,bookId:e.$route.params.bid},function(e){200===e.returnCode?o():o(new Error("章节名重复，请重新填写！"))})},trigger:"blur"}],volumeId:[{required:!0,type:"number",message:"请选择分卷",trigger:"change"}],bookTitle:[{required:!0,message:"请输入书籍名称",trigger:"blur"}],chapterContent:[{required:!0,validator:t,trigger:"change"}]}}},methods:{submitForm:function(e){var t=this;this.loading=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),this.$refs.ChapterForm.validate(function(a){if(!a)return t.$nextTick(function(){t.loading.close()}),t.$message({message:"请完善必填信息！",type:"warning"}),!1;"draft"===e&&(t.ruleForm.whetherPublic=1),t.ruleForm.chapterIsvip?(t.$nextTick(function(){t.$loading().close()}),t.$alert("","确认设置为收费章节？",{confirmButtonText:"是",showCancelButton:!0,customClass:"small confirm-msg-box",cancelButtonText:"否",callback:function(e){"confirm"===e&&(t.loading=t.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),t.createChapter())}})):t.createChapter()})},createChapter:function(){var e=this,t=JSON.parse(r()(this.ruleForm));t.chapterContent=this.$http.trim(t.chapterContent).replace(/\n+\s+/g,"<H><LG>")+"<H><LG>",this.$ajax("/sys-getNetWorkDateTime","",function(a){200===a.returnCode?(t.releaseTime?t.releaseTime=e.$formTime(t.releaseTime,"long"):t.releaseTime=e.$formTime(a.data.beijing,"long"),e.$ajax("/admin/addAdminCreates",t,function(a){e.$nextTick(function(){e.loading.close()}),200===a.returnCode&&e.$confirm(t.whetherPublic?"草稿保存成功":"发布成功","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){window.scrollTo(0,0),e.resetForm("ChapterForm"),e.getChapterInfo()}).catch(function(){window.scrollTo(0,0),e.resetForm("ChapterForm"),e.getChapterInfo()})})):e.$nextTick(function(){e.loading.close()})},"get","json",!0)},addNewVolume:function(e){var t=this;this.$refs[e].validate(function(e){e&&t.$ajax("/books-addvolume",{volumeName:t.volumeForm.volumeName,bookName:t.ruleForm.bookTitle,bookid:t.$route.params.bid},function(e){200===e.returnCode&&(t.dialogFormVisible=!1,t.$message("添加成功"),t.getChapterInfo())})})},resetForm:function(e){this.$refs[e].resetFields()},getChapterInfo:function(){var e=this;this.$ajax("/book-showBookInfo",{bookid:this.$route.params.bid},function(t){200===t.returnCode&&(e.ruleForm.bookTitle=t.data.bookName,e.ruleForm.bookId=t.data.bookId,e.ruleForm.bookWriterId=t.data.bookWriterId,e.isVip=t.data.bookCheckStatus,e.$ajax("/books-getvolume",{bookId:e.$route.params.bid},function(t){200===t.returnCode&&(e.volumeList=t.data)}))})},checkChapterName:function(e){e.target.value.length}},created:function(){var e=document.body.clientWidth;this.dialogSize=e<1020?"small":"tiny",this.getChapterInfo()},watch:{"ruleForm.chapterContent":function(e){this.ruleForm.chapterContent=e.replace(/^\s*\n+\s*/,"").replace(/\s*\n+\s*/g,"\n\n　　")},"ruleForm.authorWords":function(e){this.$http.trim(e).length>100&&(e=e.substr(0,100)),this.ruleForm.authorWords=e.replace(/^\s*\n+\s*/,"").replace(/\s*\n+\s*/g,"\n\n　　")}},computed:{length:function(){var e=0,t=this.ruleForm.chapterContent;try{t=t.replace(/(\r\n+|\s+| )+/g,"龘"),t=t.replace(/龘+/g,""),e+=t.length}catch(e){}return this.ruleForm.chapterLength=e,e>2e4&&this.$message({message:"字数长度不可超过20000！",type:"error"}),e}},mounted:function(){var e=this;window.onresize=function(){var t=document.body.clientWidth;e.dialogSize=t<1020?"small":"tiny"}}},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("el-breadcrumb",{staticClass:"mbt20",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("书籍管理")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:"/book/list"}},[e._v("书籍列表")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:"/book_chapter_list/"+e.$route.params.bid}},[e._v("章节列表")]),e._v(" "),a("el-breadcrumb-item",[e._v("新建章节")])],1),e._v(" "),a("div",{staticClass:"form-wrapper"},[a("el-form",{ref:"ChapterForm",staticClass:"chapter-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":e.labelWidth,labelPosition:"left"}},[a("el-form-item",{attrs:{label:"书籍名称",prop:"bookTitle"}},[a("el-input",{staticStyle:{width:"260px"},attrs:{readonly:""},model:{value:e.ruleForm.bookTitle,callback:function(t){e.$set(e.ruleForm,"bookTitle",t)},expression:"ruleForm.bookTitle"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分卷名称",prop:"volumeId"}},[a("el-select",{staticStyle:{width:"260px"},attrs:{placeholder:"请选择分卷"},model:{value:e.ruleForm.volumeId,callback:function(t){e.$set(e.ruleForm,"volumeId",t)},expression:"ruleForm.volumeId"}},[[e._l(e.volumeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.volumeName,value:e.id}})}),e._v(" "),a("el-option",{attrs:{label:"",value:""},nativeOn:{click:function(t){e.dialogFormVisible=!0}}},[e._v("+新增分卷")])]],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"章节名称",prop:"chapterTitle"}},[a("el-input",{staticStyle:{width:"260px"},on:{blur:function(t){e.checkChapterName(t)}},model:{value:e.ruleForm.chapterTitle,callback:function(t){e.$set(e.ruleForm,"chapterTitle",t)},expression:"ruleForm.chapterTitle"}})],1),e._v(" "),a("el-form-item",{staticClass:"contentBox",attrs:{label:"章节内容",prop:"chapterContent"}},[a("el-form-item",[a("el-input",{staticClass:"context",attrs:{type:"textarea",rows:15},model:{value:e.ruleForm.chapterContent,callback:function(t){e.$set(e.ruleForm,"chapterContent",t)},expression:"ruleForm.chapterContent"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"authorWords"}},[a("el-input",{staticClass:"authorSay-wrap",attrs:{type:"textarea",placeholder:"作者的话（不可超过100字）"},model:{value:e.ruleForm.authorWords,callback:function(t){e.$set(e.ruleForm,"authorWords",t)},expression:"ruleForm.authorWords"}})],1),e._v(" "),a("span",{staticClass:"words"},[e._v("共 "+e._s(e.length)+" 字")])],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"50px"},attrs:{"label-width":e.labelWidth,label:"发布时间",prop:"releaseTime"}},[a("el-col",{attrs:{span:12}},[a("el-date-picker",{attrs:{type:"datetime",disabled:!e.isAutoPublish,placeholder:"选择时间"},model:{value:e.ruleForm.releaseTime,callback:function(t){e.$set(e.ruleForm,"releaseTime",t)},expression:"ruleForm.releaseTime"}}),e._v(" "),a("el-checkbox",{staticClass:"ml20",attrs:{label:"定时发布"},on:{change:function(t){e.ruleForm.releaseTime=e.isAutoPublish?e.ruleForm.releaseTime:""}},model:{value:e.isAutoPublish,callback:function(t){e.isAutoPublish=t},expression:"isAutoPublish"}})],1),e._v(" "),a("el-col",{attrs:{span:12}})],1),e._v(" "),a("el-form-item",{attrs:{"label-width":e.labelWidth,label:"是否VIP",prop:"chapterIsvip"}},[a("el-radio",{staticClass:"radio",attrs:{label:0},model:{value:e.ruleForm.chapterIsvip,callback:function(t){e.$set(e.ruleForm,"chapterIsvip",t)},expression:"ruleForm.chapterIsvip"}},[e._v("普通")]),e._v(" "),2===e.isVip?a("el-radio",{staticClass:"radio",attrs:{label:1},model:{value:e.ruleForm.chapterIsvip,callback:function(t){e.$set(e.ruleForm,"chapterIsvip",t)},expression:"ruleForm.chapterIsvip"}},[e._v("VIP")]):e._e()],1),e._v(" "),a("el-form-item",{staticClass:"tc",staticStyle:{width:"820px"},attrs:{"label-width":e.labelWidth}},[a("el-button",{staticClass:"fl",attrs:{type:"primary"},on:{click:function(t){e.submitForm("create")}}},[e._v("立即创建")]),e._v(" "),a("el-button",{staticClass:"fr save-draft",on:{click:function(t){e.submitForm("draft")}}},[e._v("保存草稿")])],1)],1)],1),e._v(" "),a("el-dialog",{staticClass:"alertDialog",attrs:{top:"45%",title:"新增分卷",visible:e.dialogFormVisible},on:{open:function(t){e.volumeForm.volumeName=""},"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"volumeForm",attrs:{model:e.volumeForm,rules:e.rule,"label-position":"left"}},[a("el-form-item",{attrs:{label:"分卷名称",prop:"volumeName","label-width":"80px"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.volumeForm.volumeName,callback:function(t){e.$set(e.volumeForm,"volumeName",t)},expression:"volumeForm.volumeName"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addNewVolume("volumeForm")}}},[e._v("确 定")])],1)],1)],1)},l=[],c=a("18Nq"),u=o,d=Object(c.a)(n,i,l,!1,u,null,null);t.default=d.exports}},["NHnr"]);
//# sourceMappingURL=app.45cad3f82784675998d7.js.map