webpackJsonp([1],{G5zc:function(e,t){},ZIML:function(e,t,r){"use strict";function a(e){r("G5zc")}Object.defineProperty(t,"__esModule",{value:!0});var s=r("rVsN"),n=r.n(s),o=r("PsVy"),i=r("sv36").Base64,u={components:{PicCropper:o.default},data:function(){return{dialogTableVisible:!1,userList:{},keywords:"",selectType:"pseudonym",centerDialogVisible:!1,fileList:[],file:[],uploadData:{},userParams:{page:this.$route.params.page,isAuthor:0,orderParemeter:"userId"}}},methods:{IPCity:function(e){for(var t=this,r=0,a=e.list.length;r<a;r++){var s;!function(t,r){s=new n.a(function(r,a){$.getScript("https://ip.ws.126.net/ipquery?ip="+e.list[t].userIpAddress,function(){e.list[t].city=localAddress.province+" "+localAddress.city,r()})})}(r)}s.then(function(){t.userList=e})},getUserList:function(){var e=this,t={page:this.$route.params.page,isAuthor:0};"userInfo"===this.$route.name&&(t={page:1},this.keywords=this.$route.params.uid,this.selectType="userId");var r=this.$http.trim(this.keywords);if(this.selectType&&r){if("userId"===this.selectType&&""===this.selectType&&Number(r))return this.$message({message:"ID必需为数字",type:"warning"}),!1;t[this.selectType]=r}"authorList"===this.$route.name&&(t.isAuthor=1),t.orderParemeter="userId",this.$store.dispatch("user/getUserList",{params:t,type:""}).then(function(t){200===t.returnCode?e.IPCity(t.data):800===t.returnCode&&(e.userList={})})},searchUser:function(){1!=this.$route.params.page?this.$router.push({params:{page:1}}):this.getUserList()},pageChange:function(e){this.$router.push({params:{page:e}})},handleClick:function(e,t){var r=this;if("f"!==e){var a="",s={userId:t.userId},n=function(e){r.$ajax("/admin/updateUserInfo",e,function(e){200===e.returnCode&&(r.$message({message:"更新成功",type:"success"}),r.getUserList())})};switch(e){case"a":a="辣椒";break;case"b":a="小米椒";break;case"c":a="金椒";break;case"d":a="阅读券";break;case"e":a="积分";break;case"f":a="等级"}"g"!==e?this.$prompt("请输入修改后"+a,"修改"+a,{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/[0-9]/,inputErrorMessage:"请输入数字"}).then(function(t){var r=t.value;if("g"!==e){switch(e){case"a":s.userMoney=r;break;case"b":s.userRecommendTicket=r;break;case"c":s.userGoldenTicket=r;break;case"d":s.userReadTicket=r;break;case"e":s.integration=r}n(s)}}):(s.userState=Number(!t.userState),n(s))}else this.$router.push("/user/detail/"+t.userId)},isShow:function(e){this.centerDialogVisible=!e},dialogShow:function(e){this.dialogTableVisible=!0,this.$set(this.uploadData,"userId",e.userId),this.$set(this.uploadData,"userAvatar",e.userHeadPortraitURL)},submitUpload:function(){this.$refs.upload.uploadFiles=this.$refs.upload.uploadFiles.slice(-1),this.$myLoad("正在上传中..."),this.$refs.upload.submit()},successBack:function(e){200===e.returnCode&&this.getUserList()},fileError:function(e){this.$loading().close(),this.centerDialogVisible=!1,this.$message({message:e,type:"error"})},handlePictureCard:function(e,t){this.uploadData.userAvatar=e.url},closeIt:function(){this.dialogTableVisible=!1},handleCommand:function(e,t){switch(e){case"a":this.$router.push({path:"/statistics/charge/"+t.userId+"/1"});break;case"b":this.$router.push({path:"/statistics/reward/"+t.userId+"/1"});break;case"c":this.$router.push({path:"/statistics/subscribe/"+t.userId+"/1"});break;case"d":this.$router.push({path:"/statistics/recommend/"+t.userId+"/1"});break;case"e":this.$router.push({path:"/statistics/pepper/"+t.userId+"/1"});break;case"f":this.$router.push({path:"/author/monthly/"+t.userId});break;case"g":this.openLoginBox(t)}},openLoginBox:function(e){var t=this;this.$confirm("确定登录？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$message({type:"success",message:"登陆成功！"}),setTimeout(function(){var t=i.encode(e.userPassword+"_LGADMIN");window.location.href="https://www.lajixs.com/transfer?userName="+e.userName+"&password="+t},500)}).catch(function(){t.$message({type:"info",message:"已取消操作！"})})}},created:function(){this.getUserList()},watch:{$route:function(){this.getUserList()}}},c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"admin-user-wrap"},[r("el-alert",{attrs:{title:" ",type:"info","show-icon":""}},[r("div",[r("p",[r("span",[e._v("说明：")]),e._v(" 此表展示的是本站全部"+e._s("authorList"===e.$route.name?"作者":"普通用户"))])])]),e._v(" "),r("el-row",{staticClass:"mbt20"},[r("el-col",{attrs:{xs:20,sm:16,md:12,lg:9,xl:6}},[r("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchUser(t):null}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}},[r("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.selectType,callback:function(t){e.selectType=t},expression:"selectType"}},[r("el-option",{attrs:{label:"笔  名",value:"pseudonym"}}),e._v(" "),r("el-option",{attrs:{label:"用户名",value:"userName"}}),e._v(" "),r("el-option",{attrs:{label:"真  名",value:"realName"}}),e._v(" "),r("el-option",{attrs:{label:"用户ID",value:"userId"}}),e._v(" "),r("el-option",{attrs:{label:"手机号",value:"userPhone"}})],1),e._v(" "),r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchUser},slot:"append"})],1)],1)],1),e._v(" "),r("el-row",{staticClass:"mbt20"},[r("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.userList.list,border:"",select:"row","tooltip-effect":"dark"}},[r("el-table-column",{attrs:{type:"selection",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"userId",label:"ID",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"userName",label:"用户名",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"pseudonym",label:"笔名"}}),e._v(" "),r("el-table-column",{attrs:{label:"性别"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(0===t.row.userSex?"男":"女"))])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"userMoney",label:"辣椒"}}),e._v(" "),r("el-table-column",{attrs:{prop:"userRecommendTicket",label:"小米椒"}}),e._v(" "),r("el-table-column",{attrs:{prop:"userGoldenTicket",label:"金椒"}}),e._v(" "),r("el-table-column",{attrs:{prop:"userReadTicket",label:"阅读券"}}),e._v(" "),r("el-table-column",{attrs:{prop:"integration",label:"积分"}}),e._v(" "),r("el-table-column",{attrs:{prop:"lastLogTime",label:"最近登录"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("time")(t.row.lastLogTime,"long")))])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"userIpAddress",label:"最新登录IP"}}),e._v(" "),r("el-table-column",{attrs:{prop:"city",label:"登录地址"}}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.userState?r("span",{staticClass:"red"},[e._v("锁定")]):r("span",{staticClass:"green"},[e._v("正常")])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"userQQ",label:"QQ号码"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s("0"===t.row.userQQ?"无":t.row.userQQ))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"头像"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"cover-wrap",on:{click:function(r){e.dialogShow(t.row)}}},[r("a",{attrs:{href:"javascipt:;"}},[r("img",{staticClass:"avatar",attrs:{src:t.row.userHeadPortraitURL,alt:""}})])])]}}])}),e._v(" "),e.$store.state.userInfo&&e.$store.state.userInfo.adminRolemenuanduserrole.updates?r("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("router-link",{staticClass:"btn",attrs:{to:"/user/detail/"+t.row.userId}},[e._v("编辑")]),e._v(" "),r("el-dropdown",{attrs:{size:"medium",trigger:"click"},on:{command:function(r){e.handleCommand(r,t.row)}}},[r("a",{staticClass:"btn",attrs:{href:"javascript:0;"}},[e._v("更多")]),e._v(" "),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",{attrs:{command:"a"}},[e._v("充值记录")]),e._v(" "),r("el-dropdown-item",{attrs:{command:"b"}},[e._v("打赏记录")]),e._v(" "),r("el-dropdown-item",{attrs:{command:"c"}},[e._v("订阅记录")]),e._v(" "),r("el-dropdown-item",{attrs:{command:"d"}},[e._v("小米椒记录")]),e._v(" "),"authorList"===e.$route.name?[r("el-dropdown-item",{attrs:{command:"e"}},[e._v("金椒记录")]),e._v(" "),r("el-dropdown-item",{attrs:{command:"f"}},[e._v("月报")])]:e._e(),e._v(" "),r("el-dropdown-item",{attrs:{command:"g"}},[e._v("一键登录")])],2)],1)]}}])}):e._e()],1),e._v(" "),r("el-pagination",{staticClass:"mbt20",attrs:{pageSize:e.userList.pageSize,layout:"prev, pager, next, jumper",total:e.userList.total},on:{"current-change":e.pageChange}})],1),e._v(" "),r("PicCropper",{ref:"avatarUpdate",attrs:{action:"https://www.lajixs.com/api/admin/updateUserAvatarimgUpload",visible:e.dialogTableVisible,maxWidth:400,data:{puserid:e.uploadData.userId},url:"/static/img/defaultavatarimg.jpg",aspectRatio:1},on:{"update:visible":function(t){e.dialogTableVisible=t},close:e.closeIt,success:e.successBack}})],1)},l=[],p=r("18Nq"),d=a,f=Object(p.a)(u,c,l,!1,d,null,null);t.default=f.exports},sv36:function(e,t,r){(function(a){var s,n;!function(t,r){e.exports=r(t)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==a?a:this,function(a){"use strict";var o,i=a.Base64;if(void 0!==e&&e.exports)try{o=r("7xR8").Buffer}catch(e){}var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=function(e){for(var t={},r=0,a=e.length;r<a;r++)t[e.charAt(r)]=r;return t}(u),l=String.fromCharCode,p=function(e){if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?l(192|t>>>6)+l(128|63&t):l(224|t>>>12&15)+l(128|t>>>6&63)+l(128|63&t)}var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return l(240|t>>>18&7)+l(128|t>>>12&63)+l(128|t>>>6&63)+l(128|63&t)},d=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,f=function(e){return e.replace(d,p)},h=function(e){var t=[0,2,1][e.length%3],r=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[u.charAt(r>>>18),u.charAt(r>>>12&63),t>=2?"=":u.charAt(r>>>6&63),t>=1?"=":u.charAt(63&r)].join("")},m=a.btoa?function(e){return a.btoa(e)}:function(e){return e.replace(/[\s\S]{1,3}/g,h)},b=o?o.from&&Uint8Array&&o.from!==Uint8Array.from?function(e){return(e.constructor===o.constructor?e:o.from(e)).toString("base64")}:function(e){return(e.constructor===o.constructor?e:new o(e)).toString("base64")}:function(e){return m(f(e))},g=function(e,t){return t?b(String(e)).replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}).replace(/=/g,""):b(String(e))},v=function(e){return g(e,!0)},_=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),w=function(e){switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),r=t-65536;return l(55296+(r>>>10))+l(56320+(1023&r));case 3:return l((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return l((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},y=function(e){return e.replace(_,w)},k=function(e){var t=e.length,r=t%4,a=(t>0?c[e.charAt(0)]<<18:0)|(t>1?c[e.charAt(1)]<<12:0)|(t>2?c[e.charAt(2)]<<6:0)|(t>3?c[e.charAt(3)]:0),s=[l(a>>>16),l(a>>>8&255),l(255&a)];return s.length-=[0,0,2,1][r],s.join("")},C=a.atob?function(e){return a.atob(e)}:function(e){return e.replace(/[\s\S]{1,4}/g,k)},A=o?o.from&&Uint8Array&&o.from!==Uint8Array.from?function(e){return(e.constructor===o.constructor?e:o.from(e,"base64")).toString()}:function(e){return(e.constructor===o.constructor?e:new o(e,"base64")).toString()}:function(e){return y(C(e))},I=function(e){return A(String(e).replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},$=function(){var e=a.Base64;return a.Base64=i,e};if(a.Base64={VERSION:"2.4.5",atob:C,btoa:m,fromBase64:I,toBase64:g,utob:f,encode:g,encodeURI:v,btou:y,decode:I,noConflict:$},"function"==typeof Object.defineProperty){var S=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};a.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",S(function(){return I(this)})),Object.defineProperty(String.prototype,"toBase64",S(function(e){return g(this,e)})),Object.defineProperty(String.prototype,"toBase64URI",S(function(){return g(this,!0)}))}}return a.Meteor&&(Base64=a.Base64),void 0!==e&&e.exports?e.exports.Base64=a.Base64:(s=[],void 0!==(n=function(){return a.Base64}.apply(t,s))&&(e.exports=n)),{Base64:a.Base64}})}).call(t,r("9AUj"))}});
//# sourceMappingURL=1.b82d87884589aa845f4d.js.map