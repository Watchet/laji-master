webpackJsonp([12],{O8XD:function(e,t){},gTSq:function(e,t,s){"use strict";function r(e){s("O8XD")}Object.defineProperty(t,"__esModule",{value:!0});var a=s("3cXf"),n=s.n(a),o={data:function(){return{ruleForm:{userId:"",userName:"",title:"",messageContent:""},rules:{title:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:3,message:"长度不可少于3个字符",trigger:"blur"}],userName:[{required:!0,message:"请填写发布人",trigger:"blur"}],messageContent:[{required:!0,message:"请填写内容",trigger:"blur"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){var s="/admin/sys-addsMessage";if("mesEditMessage"===t.$route.name&&(s="/admin/updatePublishanotice"),!e)return t.$message({message:"请完善信息后提交！",type:"warning"}),!1;var r=JSON.parse(n()(t.ruleForm));r.messageContent=r.messageContent.replace(/ +|　+/g,""),t.$ajax(s,r,function(e){200===e.returnCode&&(t.$message({message:e.msg,type:"success"}),"mesEditMessage"===t.$route.name&&t.getMessageById())})})},getMessageById:function(){var e=this;this.$ajax("/admin/sys-getMessageById",{noticeid:this.$route.params.id},function(t){200===t.returnCode&&(delete t.data.releaseDate,e.ruleForm=t.data)},"get")},resetForm:function(){this.getMessageById()}},created:function(){this.ruleForm.userId=this.$store.state.userInfo.adminInfo.userId,"mesEditMessage"===this.$route.name&&this.getMessageById()},watch:{"ruleForm.messageContent":function(e){this.ruleForm.messageContent=e.replace(/\s*\n\s*/g,"\n　　")}}},m=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"sys-notice-wrap"},[s("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[s("el-breadcrumb-item",{attrs:{to:"/message/system"}},[e._v("消息管理")]),e._v(" "),s("el-breadcrumb-item",{attrs:{to:"/message/system"}},[e._v("系统消息")]),e._v(" "),s("el-breadcrumb-item",[e._v(e._s("mesEditMessage"==e.$route.name?"编辑消息":"新增消息"))])],1),e._v(" "),s("el-alert",{attrs:{title:"操作说明",type:"info","show-icon":""}},[s("div",[e._v("\n      可根据需求添加相应类型的公告通知\n    ")])]),e._v(" "),s("el-row",{staticClass:"mbt20"},[s("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"标    题",prop:"title"}},[s("el-input",{model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"发布人",prop:"userName"}},[s("el-input",{model:{value:e.ruleForm.userName,callback:function(t){e.$set(e.ruleForm,"userName",t)},expression:"ruleForm.userName"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"内容详情",prop:"messageContent"}},[s("el-input",{staticClass:"mc-wrap",attrs:{type:"textarea",rows:5},model:{value:e.ruleForm.messageContent,callback:function(t){e.$set(e.ruleForm,"messageContent",t)},expression:"ruleForm.messageContent"}})],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("立即创建")])],1)],1)],1)],1)},l=[],i=s("18Nq"),u=r,c=Object(i.a)(o,m,l,!1,u,null,null);t.default=c.exports}});
//# sourceMappingURL=12.5dc06086179470fa829a.js.map