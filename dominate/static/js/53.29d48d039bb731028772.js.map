{"version":3,"sources":["webpack:///static/js/53.29d48d039bb731028772.js","webpack:///./src/components/book/book_property.vue","webpack:///src/components/book/book_property.vue","webpack:///./src/components/book/book_property.vue?d020"],"names":["webpackJsonp","/JMq","module","exports","5fh2","__webpack_exports__","__webpack_require__","injectStyle","context","Object","defineProperty","value","stringify","stringify_default","n","book_property","data","dialogType","currentType","baseInfo","load","max","min","dialogVisible","subData","bookColor","bookLableName","rules","required","message","trigger","classificationName","methods","getBookBaseInfo","_this","this","$ajax","res","returnCode","handleEdit","type","item","_this2","$nextTick","JSON","parse","classificationmaxlco","classificationIco","orders","classificationList","length","handleDel","_this3","edit","url","id","$refs","validate","valid","$myLoad","$loading","close","$message","uploadProgress1","event","console","log","uploadEnd1","msg","uploadProgress2","uploadEnd2","created","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","title","show-icon","_v","_l","key","style","borderColor","color","size","on","click","$event","_s","plain","visible","update:visible","ref","model","label-width","label","prop","callback","$$v","$set","expression","placeholder","src","alt","_e","show-file-list","on-success","on-error","on-progress","action","slot","staticRenderFns","component_normalizer","__vue_styles__","Component"],"mappings":"AAAAA,cAAc,KAERC,OACA,SAAUC,EAAQC,KAMlBC,OACA,SAAUF,EAAQG,EAAqBC,GAE7C,YCZA,SAAAC,GAAAC,GACAF,EAAA,QDYAG,OAAOC,eAAeL,EAAqB,cAAgBM,OAAO,GAGlE,IAAIC,GAAYN,EAAoB,QAChCO,EAAiCP,EAAoBQ,EAAEF,GEmG3DG,GACAC,KADA,WAEA,OACAC,WAAA,OACAC,YAAA,QACAC,YACAC,MACAC,KAAA,EACAC,KAAA,GAEAC,eAAA,EACAC,SACAC,UAAA,GACAC,cAAA,IAEAC,OACAF,YACAG,UAAA,EAAAC,QAAA,QAAAC,QAAA,SAEAJ,gBACAE,UAAA,EAAAC,QAAA,SAAAC,QAAA,SAEAC,qBACAH,UAAA,EAAAC,QAAA,SAAAC,QAAA,YAKAE,SACAC,gBADA,WACA,GAAAC,GAAAC,IACAA,MAAAC,MAAA,iCAAAC,GACA,MAAAA,EAAAC,aACAJ,EAAAf,SAAAkB,EAAArB,OAEA,QAEAuB,WARA,SAQAC,EAAAC,GAAA,GAAAC,GAAAP,IACAA,MAAAZ,eAAA,EACAY,KAAAjB,YAAAsB,EACAL,KAAAQ,UAAA,WACAF,GACAC,EAAAzB,WAAA,OACAyB,EAAAlB,QAAAoB,KAAAC,MAAAhC,IAAA4B,MAEAC,EAAAzB,WAAA,MAEAyB,EAAAlB,QADA,UAAAgB,GAEAf,UAAA,GACAC,cAAA,KAIAK,mBAAA,GACAe,qBAAA,GACAC,kBAAA,GACAC,OAAAN,EAAAvB,SAAA8B,mBAAAC,OAAA,OAMAC,UAjCA,SAiCAX,GAAA,GAAAY,GAAAjB,KACAkB,EAAA,SAAAC,EAAAC,GACAH,EAAAI,MAAA,aAAAC,SAAA,SAAAC,GACAA,IACAN,EAAAO,QAAA,QAAAnB,EAAA,uBACAY,EAAAhB,MAAAkB,EAAAC,EAAA,SAAAlB,GACAe,EAAA7B,eAAA,EACA6B,EAAAQ,WAAAC,QACA,MAAAxB,EAAAC,aACAc,EAAAU,UAAAjC,QAAA,QAAAW,EAAA,cAAAA,KAAA,YACAY,EAAAnB,wBAOA,WAAAE,KAAAjB,YACA,QAAAsB,EACAa,EAAA,+BAAAE,GAAApB,KAAAX,QAAA+B,KACA,WAAAf,EACAa,EAAA,8BAAAlB,KAAAX,SAEA6B,EAAA,2BAAAlB,KAAAX,SAEA,UAAAW,KAAAjB,cACA,QAAAsB,EACAa,EAAA,+BAAAE,GAAApB,KAAAX,QAAA+B,KACA,WAAAf,EACAa,EAAA,kCAAAlB,KAAAX,SAEA6B,EAAA,2BAAAlB,KAAAX,WAIAuC,gBApEA,SAoEAC,GACAC,QAAAC,IAAAF,GACA7B,KAAAf,KAAAC,KAAA,GAEA8C,WAxEA,SAwEA9B,GACAF,KAAAf,KAAAC,KAAA,EACA,MAAAgB,EAAAC,YACAH,KAAAX,QAAAsB,qBAAAT,EAAArB,KACAmB,KAAAF,mBAEAE,KAAA2B,UAAAjC,QAAAQ,EAAA+B,IAAA5B,KAAA,aAGA6B,gBAjFA,WAkFAlC,KAAAf,KAAAE,KAAA,GAEAgD,WApFA,SAoFAjC,GACAF,KAAAf,KAAAE,KAAA,EACA,MAAAe,EAAAC,YACAH,KAAAX,QAAAuB,kBAAAV,EAAArB,KACAmB,KAAAF,mBAEAE,KAAA2B,UAAAjC,QAAAQ,EAAA+B,IAAA5B,KAAA,cAIA+B,QA1HA,WA2HApC,KAAAF,oBC/OAuC,EAAA,WAA0B,GAAAC,GAAAtC,KAAauC,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CAAwB,OAAAE,GAAA,OAAiBE,YAAA,uBAAiCF,EAAA,YAAiBG,OAAOC,MAAA,OAAAxC,KAAA,OAAAyC,YAAA,MAA6CL,EAAA,OAAAA,EAAA,KAAAH,EAAAS,GAAA,sDAAAT,EAAAS,GAAA,KAAAN,EAAA,KAAAA,EAAA,QAAgHE,YAAA,QAAkBL,EAAAS,GAAA,SAAAT,EAAAS,GAAA,0CAAAT,EAAAS,GAAA,KAAAN,EAAA,KAAAA,EAAA,QAAAH,EAAAS,GAAA,WAAAT,EAAAS,GAAA,2DAAAT,EAAAS,GAAA,KAAAN,EAAA,UAA+ME,YAAA,6BAAuCF,EAAA,MAAWE,YAAA,cAAwBL,EAAAS,GAAA,UAAAT,EAAAS,GAAA,KAAAT,EAAAU,GAAAV,EAAAtD,SAAA,wBAAAsB,GAAmF,MAAAmC,GAAA,aAAuBQ,IAAA3C,EAAAc,GAAA8B,OAAoBC,YAAA7C,EAAAhB,UAAA8D,MAAA9C,EAAAhB,WAAgDsD,OAASS,KAAA,SAAeC,IAAKC,MAAA,SAAAC,GAAyBlB,EAAAlC,WAAA,QAAAE,OAA+BgC,EAAAS,GAAAT,EAAAmB,GAAAnD,EAAAf,oBAAuC+C,EAAAS,GAAA,KAAAN,EAAA,aAA8BG,OAAOS,KAAA,SAAeC,IAAKC,MAAA,SAAAC,GAAyBlB,EAAAlC,WAAA,aAA0BkC,EAAAS,GAAA,gBAAAT,EAAAS,GAAA,KAAAN,EAAA,UAAkDE,YAAA,6BAAuCF,EAAA,MAAWE,YAAA,cAAwBL,EAAAS,GAAA,UAAAT,EAAAS,GAAA,KAAAT,EAAAU,GAAAV,EAAAtD,SAAA,4BAAAsB,GAAuF,MAAAmC,GAAA,aAAuBQ,IAAA3C,EAAAc,GAAAwB,OAAmBS,KAAA,QAAAhD,KAAA,UAAAqD,MAAA,IAA2CJ,IAAKC,MAAA,SAAAC,GAAyBlB,EAAAlC,WAAA,QAAAE,OAA+BgC,EAAAS,GAAAT,EAAAmB,GAAAnD,EAAAV,yBAA4C0C,EAAAS,GAAA,KAAAN,EAAA,aAA8BG,OAAOS,KAAA,SAAeC,IAAKC,MAAA,SAAAC,GAAyBlB,EAAAlC,WAAA,aAA0BkC,EAAAS,GAAA,gBAAAT,EAAAS,GAAA,KAAAN,EAAA,aAAqDE,YAAA,cAAAC,OAAiCC,MAAA,OAAAc,QAAArB,EAAAlD,eAA2CkE,IAAKM,iBAAA,SAAAJ,GAAkClB,EAAAlD,cAAAoE,MAA2Bf,EAAA,WAAgBoB,IAAA,eAAAlB,YAAA,oBAAAC,OAA0DkB,MAAAxB,EAAAjD,QAAAG,MAAA8C,EAAA9C,MAAAuE,cAAA,UAA4D,UAAAzB,EAAAvD,aAAA0D,EAAA,gBAAkDG,OAAOoB,MAAA,OAAAC,KAAA,eAAmCxB,EAAA,mBAAwBqB,OAAOtF,MAAA8D,EAAAjD,QAAA,UAAA6E,SAAA,SAAAC,GAAuD7B,EAAA8B,KAAA9B,EAAAjD,QAAA,YAAA8E,IAAwCE,WAAA,wBAAiC,GAAA/B,EAAAS,GAAA,KAAAN,EAAA,gBAAqCG,OAAOoB,MAAA,MAAAC,KAAA,mBAAsCxB,EAAA,YAAiBG,OAAOvC,KAAA,OAAAiE,YAAA,UAAqCR,OAAQtF,MAAA8D,EAAAjD,QAAA,cAAA6E,SAAA,SAAAC,GAA2D7B,EAAA8B,KAAA9B,EAAAjD,QAAA,gBAAA8E,IAA4CE,WAAA,4BAAqC,KAAA5B,EAAA,gBAA2BG,OAAOoB,MAAA,UAAgB1B,EAAAjD,QAAA,qBAAAoD,EAAA,OAA+CE,YAAA,aAAAC,OAAgC2B,IAAAjC,EAAAjD,QAAAsB,qBAAA6D,IAAA,MAAiDlC,EAAAmC,KAAAnC,EAAAS,GAAA,aAAAT,EAAAxD,WAAA2D,EAAA,aAAgEE,YAAA,cAAAC,OAAiC8B,kBAAA,EAAAC,aAAArC,EAAAN,WAAA4C,WAAAtC,EAAAN,WAAA6C,cAAAvC,EAAAV,gBAAAkD,OAAA,kCAAAjG,MAAkKuC,GAAAkB,EAAAjD,QAAA+B,GAAAf,KAAA,MAA2BoC,EAAA,aAAkBG,OAAOS,KAAA,QAAAhD,KAAA,aAAiCiC,EAAArD,KAAA,IAAAwD,EAAA,QAAAH,EAAAS,GAAA,UAAAN,EAAA,QAAAA,EAAA,KAAgEE,YAAA,oBAA8BL,EAAAS,GAAA,qBAAAT,EAAAmC,KAAAnC,EAAAS,GAAA,KAAAT,EAAAjD,QAAA,kBAAAoD,EAAA,OAA6FE,YAAA,aAAAC,OAAgC2B,IAAAjC,EAAAjD,QAAAuB,kBAAA4D,IAAA,MAA8ClC,EAAAmC,KAAAnC,EAAAS,GAAA,aAAAT,EAAAxD,WAAA2D,EAAA,aAAgEE,YAAA,cAAAC,OAAiC8B,kBAAA,EAAAC,aAAArC,EAAAH,WAAAyC,WAAAtC,EAAAH,WAAA0C,cAAAvC,EAAAJ,gBAAA4C,OAAA,kCAAAjG,MAAkKuC,GAAAkB,EAAAjD,QAAA+B,GAAAf,KAAA,MAA2BoC,EAAA,aAAkBG,OAAOS,KAAA,QAAAhD,KAAA,aAAiCiC,EAAArD,KAAA,IAAAwD,EAAA,QAAAH,EAAAS,GAAA,UAAAN,EAAA,QAAAA,EAAA,KAAgEE,YAAA,oBAA8BL,EAAAS,GAAA,qBAAAT,EAAAmC,MAAA,GAAAnC,EAAAS,GAAA,KAAAN,EAAA,gBAA0EG,OAAOoB,MAAA,MAAAC,KAAA,YAA+BxB,EAAA,YAAiBG,OAAOvC,KAAA,OAAAiE,YAAA,UAAqCR,OAAQtF,MAAA8D,EAAAjD,QAAA,OAAA6E,SAAA,SAAAC,GAAoD7B,EAAA8B,KAAA9B,EAAAjD,QAAA,SAAA8E,IAAqCE,WAAA,qBAA8B,GAAA/B,EAAAS,GAAA,KAAAN,EAAA,gBAAqCG,OAAOoB,MAAA,MAAAC,KAAA,wBAA2CxB,EAAA,YAAiBG,OAAOvC,KAAA,OAAAiE,YAAA,UAAqCR,OAAQtF,MAAA8D,EAAAjD,QAAA,mBAAA6E,SAAA,SAAAC,GAAgE7B,EAAA8B,KAAA9B,EAAAjD,QAAA,qBAAA8E,IAAiDE,WAAA,iCAA0C,QAAA/B,EAAAS,GAAA,KAAAN,EAAA,QAAkCE,YAAA,gBAAAC,OAAmCmC,KAAA,UAAgBA,KAAA,WAAe,SAAAzC,EAAAxD,YAAA2D,EAAA,aAA6CG,OAAOvC,KAAA,UAAgBiD,IAAKC,MAAA,SAAAC,GAAyBlB,EAAAtB,UAAA,WAAuBsB,EAAAS,GAAA,SAAAT,EAAAS,GAAA,KAAAN,EAAA,aAA8CG,OAAOvC,KAAA,WAAiBiD,IAAKC,MAAA,SAAAC,GAAyBlB,EAAAtB,UAAA,cAA0BsB,EAAAS,GAAA,UAAAN,EAAA,aAAmCG,OAAOvC,KAAA,WAAiBiD,IAAKC,MAAA,SAAAC,GAAyBlB,EAAAtB,UAAA,WAAuBsB,EAAAS,GAAA,sBAC5lJiC,KH4QIC,EAAuB9G,EAAoB,QClQ/C+G,EAAA9G,EAMA+G,EAAA7G,OAAA2G,EAAA,GACArG,EACAyD,EACA2C,GAXA,EAaAE,EATA,KAEA,KAYAhH,GAAA,QAAAiH,EAAA","file":"static/js/53.29d48d039bb731028772.js","sourcesContent":["webpackJsonp([53],{\n\n/***/ \"/JMq\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"5fh2\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// EXTERNAL MODULE: ./node_modules/_babel-runtime@6.26.0@babel-runtime/core-js/json/stringify.js\nvar stringify = __webpack_require__(\"3cXf\");\nvar stringify_default = /*#__PURE__*/__webpack_require__.n(stringify);\n\n// CONCATENATED MODULE: ./node_modules/_babel-loader@7.1.4@babel-loader/lib!./node_modules/_vue-loader@14.2.2@vue-loader/lib/selector.js?type=script&index=0!./src/components/book/book_property.vue\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ var book_property = ({\n  data: function data() {\n    return {\n      dialogType: 'edit',\n      currentType: 'label',\n      baseInfo: {},\n      load: {\n        max: true,\n        min: true\n      },\n      dialogVisible: false,\n      subData: {\n        bookColor: '',\n        bookLableName: ''\n      },\n      rules: {\n        bookColor: [{ required: true, message: '请选取颜色', trigger: 'blur' }],\n        bookLableName: [{ required: true, message: '内容不能为空', trigger: 'blur' }],\n        classificationName: [{ required: true, message: '请输入分类名', trigger: 'blur' }]\n      }\n    };\n  },\n\n  methods: {\n    getBookBaseInfo: function getBookBaseInfo() {\n      var _this = this;\n\n      this.$ajax('/book-EditBookEcho', '', function (res) {\n        if (res.returnCode === 200) {\n          _this.baseInfo = res.data;\n        }\n      }, 'get');\n    },\n    handleEdit: function handleEdit(type, item) {\n      var _this2 = this;\n\n      this.dialogVisible = true;\n      this.currentType = type;\n      this.$nextTick(function () {\n        if (item) {\n          _this2.dialogType = 'edit';\n          _this2.subData = JSON.parse(stringify_default()(item));\n        } else {\n          _this2.dialogType = 'add';\n          if (type === 'label') {\n            _this2.subData = {\n              bookColor: '',\n              bookLableName: ''\n            };\n          } else {\n            _this2.subData = {\n              classificationName: '',\n              classificationmaxlco: '',\n              classificationIco: '',\n              orders: _this2.baseInfo.classificationList.length + 1\n            };\n          }\n        }\n      });\n    },\n    handleDel: function handleDel(type) {\n      var _this3 = this;\n\n      var edit = function edit(url, id) {\n        _this3.$refs['propertyForm'].validate(function (valid) {\n          if (valid) {\n            _this3.$myLoad(type === 'del' ? '正在删除中...' : '正在更新中...');\n            _this3.$ajax(url, id, function (res) {\n              _this3.dialogVisible = false;\n              _this3.$loading().close();\n              if (res.returnCode === 200) {\n                _this3.$message({ message: type === 'del' ? '删除成功' : '更新成功', type: 'success' });\n                _this3.getBookBaseInfo();\n              }\n            });\n          }\n        });\n      };\n\n      if (this.currentType === 'label') {\n        if (type === 'del') {\n          edit('/admin/deleteAttributeLable', { id: this.subData.id });\n        } else if (type === 'update') {\n          edit('/admin/updateAttributeLable', this.subData);\n        } else {\n          edit('/admin/addAttributeLable', this.subData);\n        }\n      } else if (this.currentType === 'class') {\n        if (type === 'del') {\n          edit('/admin/deleteClassification', { id: this.subData.id });\n        } else if (type === 'update') {\n          edit('/admin/updateClassificationData', this.subData);\n        } else {\n          edit('/admin/addClassification', this.subData);\n        }\n      }\n    },\n    uploadProgress1: function uploadProgress1(event) {\n      console.log(event);\n      this.load.max = false;\n    },\n    uploadEnd1: function uploadEnd1(res) {\n      this.load.max = true;\n      if (res.returnCode === 200) {\n        this.subData.classificationmaxlco = res.data;\n        this.getBookBaseInfo();\n      } else {\n        this.$message({ message: res.msg, type: 'warning' });\n      }\n    },\n    uploadProgress2: function uploadProgress2() {\n      this.load.min = false;\n    },\n    uploadEnd2: function uploadEnd2(res) {\n      this.load.min = true;\n      if (res.returnCode === 200) {\n        this.subData.classificationIco = res.data;\n        this.getBookBaseInfo();\n      } else {\n        this.$message({ message: res.msg, type: 'warning' });\n      }\n    }\n  },\n  created: function created() {\n    this.getBookBaseInfo();\n  }\n});\n// CONCATENATED MODULE: ./node_modules/_vue-loader@14.2.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-4a3f92c5\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@14.2.2@vue-loader/lib/selector.js?type=template&index=0!./src/components/book/book_property.vue\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"book-property-wrap\"},[_c('el-alert',{attrs:{\"title\":\"操作说明\",\"type\":\"info\",\"show-icon\":\"\"}},[_c('div',[_c('p',[_vm._v(\"\\n        您可以通过点击标签名或分类名来修改相关信息，也可以直接删除。\\n      \")]),_vm._v(\" \"),_c('p',[_c('span',{staticClass:\"red\"},[_vm._v(\"提示：\")]),_vm._v(\"删除标签或分类会导致原来书籍标签或分类丢失，请谨慎使用！\\n      \")]),_vm._v(\" \"),_c('p',[_c('span',[_vm._v(\"注意事项：\")]),_vm._v(\"1.分类图标上传大图尺寸414X180、小图尺寸70X70，请严格按照尺寸要求操作\\n      \")])])]),_vm._v(\" \"),_c('el-row',{staticClass:\"mbt20 book-property-list\"},[_c('h2',{staticClass:\"tab-title\"},[_vm._v(\"书籍标签\")]),_vm._v(\" \"),_vm._l((_vm.baseInfo.booklablesList),function(item){return _c('el-button',{key:item.id,style:({borderColor:item.bookColor,color:item.bookColor}),attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.handleEdit('label',item)}}},[_vm._v(_vm._s(item.bookLableName))])}),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.handleEdit('label')}}},[_vm._v(\"+ 新建标签\")])],2),_vm._v(\" \"),_c('el-row',{staticClass:\"mbt20 book-property-list\"},[_c('h2',{staticClass:\"tab-title\"},[_vm._v(\"书籍分类\")]),_vm._v(\" \"),_vm._l((_vm.baseInfo.classificationList),function(item){return _c('el-button',{key:item.id,attrs:{\"size\":\"small\",\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":function($event){_vm.handleEdit('class',item)}}},[_vm._v(_vm._s(item.classificationName))])}),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.handleEdit('class')}}},[_vm._v(\"+ 新建分类\")])],2),_vm._v(\" \"),_c('el-dialog',{staticClass:\"alertDialog\",attrs:{\"title\":\"编辑标签\",\"visible\":_vm.dialogVisible},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('el-form',{ref:\"propertyForm\",staticClass:\"property-ruleForm\",attrs:{\"model\":_vm.subData,\"rules\":_vm.rules,\"label-width\":\"66px\"}},[(_vm.currentType==='label')?[_c('el-form-item',{attrs:{\"label\":\"颜  色\",\"prop\":\"bookColor\"}},[_c('el-color-picker',{model:{value:(_vm.subData.bookColor),callback:function ($$v) {_vm.$set(_vm.subData, \"bookColor\", $$v)},expression:\"subData.bookColor\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"标签名\",\"prop\":\"bookLableName\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"placeholder\":\"请输入标签名\"},model:{value:(_vm.subData.bookLableName),callback:function ($$v) {_vm.$set(_vm.subData, \"bookLableName\", $$v)},expression:\"subData.bookLableName\"}})],1)]:[_c('el-form-item',{attrs:{\"label\":\"图  标\"}},[(_vm.subData.classificationmaxlco)?_c('img',{staticClass:\"class-icon\",attrs:{\"src\":_vm.subData.classificationmaxlco,\"alt\":\"\"}}):_vm._e(),_vm._v(\" \"),(_vm.dialogType=='edit')?_c('el-upload',{staticClass:\"upload-demo\",attrs:{\"show-file-list\":false,\"on-success\":_vm.uploadEnd1,\"on-error\":_vm.uploadEnd1,\"on-progress\":_vm.uploadProgress1,\"action\":\"/api/admin/updateClassification\",\"data\":{id:_vm.subData.id,type:1}}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[(_vm.load.max)?_c('span',[_vm._v(\"上传大图\")]):_c('span',[_c('i',{staticClass:\"el-icon-loading\"}),_vm._v(\" 正在上传中...\")])])],1):_vm._e(),_vm._v(\" \"),(_vm.subData.classificationIco)?_c('img',{staticClass:\"class-icon\",attrs:{\"src\":_vm.subData.classificationIco,\"alt\":\"\"}}):_vm._e(),_vm._v(\" \"),(_vm.dialogType=='edit')?_c('el-upload',{staticClass:\"upload-demo\",attrs:{\"show-file-list\":false,\"on-success\":_vm.uploadEnd2,\"on-error\":_vm.uploadEnd2,\"on-progress\":_vm.uploadProgress2,\"action\":\"/api/admin/updateClassification\",\"data\":{id:_vm.subData.id,type:2}}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[(_vm.load.min)?_c('span',[_vm._v(\"上传小图\")]):_c('span',[_c('i',{staticClass:\"el-icon-loading\"}),_vm._v(\" 正在上传中...\")])])],1):_vm._e()],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"序列号\",\"prop\":\"orders\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"placeholder\":\"请输入序列号\"},model:{value:(_vm.subData.orders),callback:function ($$v) {_vm.$set(_vm.subData, \"orders\", $$v)},expression:\"subData.orders\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"分类名\",\"prop\":\"classificationName\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"placeholder\":\"请输入分类名\"},model:{value:(_vm.subData.classificationName),callback:function ($$v) {_vm.$set(_vm.subData, \"classificationName\", $$v)},expression:\"subData.classificationName\"}})],1)]],2),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[(_vm.dialogType==='edit')?[_c('el-button',{attrs:{\"type\":\"danger\"},on:{\"click\":function($event){_vm.handleDel('del')}}},[_vm._v(\"删 除\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.handleDel('update')}}},[_vm._v(\"更 新\")])]:_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.handleDel('add')}}},[_vm._v(\"添 加\")])],2)],1)],1)}\nvar staticRenderFns = []\n\n// EXTERNAL MODULE: ./node_modules/_vue-loader@14.2.2@vue-loader/lib/runtime/component-normalizer.js\nvar component_normalizer = __webpack_require__(\"18Nq\");\n\n// CONCATENATED MODULE: ./src/components/book/book_property.vue\nfunction injectStyle (context) {\n  __webpack_require__(\"/JMq\")\n}\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\n\nvar Component = Object(component_normalizer[\"a\" /* default */])(\n  book_property,\n  render,\n  staticRenderFns,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ var book_book_property = __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/53.29d48d039bb731028772.js","function injectStyle (context) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"scoped\\\":false,\\\"sourceMap\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/selector?type=styles&index=0!./book_property.vue\")\n}\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/selector?type=script&index=0!./book_property.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/selector?type=script&index=0!./book_property.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4a3f92c5\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/selector?type=template&index=0!./book_property.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/book/book_property.vue\n// module id = null\n// module chunks = ","<template>\n    <div class=\"book-property-wrap\">\n      <el-alert\n        title=\"操作说明\"\n        type=\"info\"\n        show-icon>\n        <div>\n          <p>\n            您可以通过点击标签名或分类名来修改相关信息，也可以直接删除。\n          </p>\n          <p>\n            <span class=\"red\">提示：</span>删除标签或分类会导致原来书籍标签或分类丢失，请谨慎使用！\n          </p>\n          <p>\n            <span>注意事项：</span>1.分类图标上传大图尺寸414X180、小图尺寸70X70，请严格按照尺寸要求操作\n          </p>\n        </div>\n      </el-alert>\n      \n      <el-row class=\"mbt20 book-property-list\">\n        <h2 class=\"tab-title\">书籍标签</h2>\n        <el-button\n          v-for=\"item in baseInfo.booklablesList\"\n          :key=\"item.id\"\n          :style=\"{borderColor:item.bookColor,color:item.bookColor}\"\n          size=\"small\"\n          @click=\"handleEdit('label',item)\"\n        >{{item.bookLableName}}</el-button>\n        <el-button size=\"small\" @click=\"handleEdit('label')\" >+ 新建标签</el-button>\n      </el-row>\n      \n      <el-row class=\"mbt20 book-property-list\">\n        <h2 class=\"tab-title\">书籍分类</h2>\n        <el-button\n          v-for=\"item in baseInfo.classificationList\"\n          :key=\"item.id\"\n          size=\"small\"\n          type=\"primary\"\n          plain\n          @click=\"handleEdit('class',item)\"\n        >{{item.classificationName}}</el-button>\n        \n        <el-button size=\"small\" @click=\"handleEdit('class')\">+ 新建分类</el-button>\n      </el-row>\n      <!--书籍属性设置管理-->\n      \n      <el-dialog\n        class=\"alertDialog\"\n        title=\"编辑标签\"\n        :visible.sync=\"dialogVisible\">\n        <el-form :model=\"subData\" ref=\"propertyForm\" :rules=\"rules\" label-width=\"66px\" class=\"property-ruleForm\">\n          <template v-if=\"currentType==='label'\">\n            <el-form-item label=\"颜  色\" prop=\"bookColor\">\n              <el-color-picker v-model=\"subData.bookColor\"></el-color-picker>\n            </el-form-item>\n            <el-form-item label=\"标签名\" prop=\"bookLableName\">\n              <el-input type=\"text\" v-model=\"subData.bookLableName\" placeholder=\"请输入标签名\"></el-input>\n            </el-form-item>\n          </template>\n          <template v-else>\n            <el-form-item label=\"图  标\">\n              <img class=\"class-icon\" v-if=\"subData.classificationmaxlco\" :src=\"subData.classificationmaxlco\" alt=\"\">\n              <el-upload\n                v-if=\"dialogType=='edit'\"\n                class=\"upload-demo\"\n                :show-file-list=\"false\"\n                :on-success=\"uploadEnd1\"\n                :on-error=\"uploadEnd1\"\n                :on-progress=\"uploadProgress1\"\n                action=\"/api/admin/updateClassification\"\n                :data=\"{id:subData.id,type:1}\">\n                <el-button size=\"small\" type=\"primary\">\n                  <span v-if=\"load.max\">上传大图</span>\n                  <span v-else><i class=\"el-icon-loading\"></i> 正在上传中...</span>\n                </el-button>\n              </el-upload>\n  \n              <img class=\"class-icon\" v-if=\"subData.classificationIco\" :src=\"subData.classificationIco\" alt=\"\">\n              <el-upload\n                v-if=\"dialogType=='edit'\"\n                class=\"upload-demo\"\n                :show-file-list=\"false\"\n                :on-success=\"uploadEnd2\"\n                :on-error=\"uploadEnd2\"\n                :on-progress=\"uploadProgress2\"\n                action=\"/api/admin/updateClassification\"\n                :data=\"{id:subData.id,type:2}\">\n                <el-button size=\"small\" type=\"primary\">\n                  <span v-if=\"load.min\">上传小图</span>\n                  <span v-else><i class=\"el-icon-loading\"></i> 正在上传中...</span>\n                </el-button>\n              </el-upload>\n              \n            </el-form-item>\n            <el-form-item label=\"序列号\" prop=\"orders\">\n              <el-input type=\"text\" v-model=\"subData.orders\" placeholder=\"请输入序列号\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"分类名\" prop=\"classificationName\">\n              <el-input type=\"text\" v-model=\"subData.classificationName\" placeholder=\"请输入分类名\"></el-input>\n            </el-form-item>\n          </template>\n        </el-form>\n        \n        <span slot=\"footer\" class=\"dialog-footer\">\n          <template v-if=\"dialogType==='edit'\">\n            <el-button type=\"danger\" @click=\"handleDel('del')\">删 除</el-button>\n            <el-button type=\"primary\" @click=\"handleDel('update')\">更 新</el-button>\n          </template>\n          <el-button v-else type=\"primary\" @click=\"handleDel('add')\">添 加</el-button>\n        </span>\n      </el-dialog>\n      \n    </div>\n</template>\n\n<script>\n  export default {\n    data() {\n      return {\n        dialogType: 'edit',\n        currentType: 'label',\n        baseInfo: {},\n        load: {\n          max: true,\n          min: true\n        },\n        dialogVisible: false,\n        subData: {\n          bookColor: '',\n          bookLableName: ''\n        },\n        rules: {\n          bookColor: [\n            { required: true, message: '请选取颜色', trigger: 'blur' }\n          ],\n          bookLableName: [\n            { required: true, message: '内容不能为空', trigger: 'blur' }\n          ],\n          classificationName: [\n            { required: true, message: '请输入分类名', trigger: 'blur' }\n          ]\n        }\n      }\n    },\n    methods: {\n      getBookBaseInfo() {\n        this.$ajax('/book-EditBookEcho', '', res => {\n          if (res.returnCode === 200) {\n            this.baseInfo = res.data\n          }\n        }, 'get')\n      },\n      handleEdit(type, item) {\n        this.dialogVisible = true\n        this.currentType = type\n        this.$nextTick(() => {\n          if (item) {\n            this.dialogType = 'edit'\n            this.subData = JSON.parse(JSON.stringify(item))\n          } else {\n            this.dialogType = 'add'\n            if (type === 'label') {\n              this.subData = {\n                bookColor: '',\n                bookLableName: ''\n              }\n            } else {\n              this.subData = {\n                classificationName: '',\n                classificationmaxlco: '',\n                classificationIco: '',\n                orders: this.baseInfo.classificationList.length + 1\n              }\n            }\n          }\n        })\n      },\n      handleDel(type) {\n        const edit = (url, id) => {\n          this.$refs['propertyForm'].validate((valid) => {\n            if (valid) {\n              this.$myLoad(type === 'del' ? '正在删除中...' : '正在更新中...')\n              this.$ajax(url, id, res => {\n                this.dialogVisible = false\n                this.$loading().close()\n                if (res.returnCode === 200) {\n                  this.$message({ message: type === 'del' ? '删除成功' : '更新成功', type: 'success' })\n                  this.getBookBaseInfo()\n                }\n              })\n            }\n          })\n        }\n\n        if (this.currentType === 'label') {\n          if (type === 'del') {\n            edit('/admin/deleteAttributeLable', { id: this.subData.id })\n          } else if (type === 'update') {\n            edit('/admin/updateAttributeLable', this.subData)\n          } else {\n            edit('/admin/addAttributeLable', this.subData)\n          }\n        } else if (this.currentType === 'class') {\n          if (type === 'del') {\n            edit('/admin/deleteClassification', { id: this.subData.id })\n          } else if (type === 'update') {\n            edit('/admin/updateClassificationData', this.subData)\n          } else {\n            edit('/admin/addClassification', this.subData)\n          }\n        }\n      },\n      uploadProgress1(event) {\n        console.log(event)\n        this.load.max = false\n      },\n      uploadEnd1(res) {\n        this.load.max = true\n        if (res.returnCode === 200) {\n          this.subData.classificationmaxlco = res.data\n          this.getBookBaseInfo()\n        } else {\n          this.$message({ message: res.msg, type: 'warning' })\n        }\n      },\n      uploadProgress2() {\n        this.load.min = false\n      },\n      uploadEnd2(res) {\n        this.load.min = true\n        if (res.returnCode === 200) {\n          this.subData.classificationIco = res.data\n          this.getBookBaseInfo()\n        } else {\n          this.$message({ message: res.msg, type: 'warning' })\n        }\n      }\n    },\n    created() {\n      this.getBookBaseInfo()\n  }\n  }\n</script>\n\n<style lang=\"stylus\" rel=\"stylesheet/stylus\">\n.book-property-wrap\n  .class-icon\n    max-width 100%\n    margin-bottom 15px\n  .book-property-list\n    .el-button\n      margin-left 0!important\n      margin-right: 15px;\n      margin-bottom 15px\n      .el-tag__close:hover\n        background #ff4d51\n        color #fff\n  .property-ruleForm\n     img\n        max-height 100px\n        margin-bottom 0\n.tab-title\n  font-size 22px\n  line-height 40px\n  margin-bottom  20px\n  \n\n.button-new-tag\n  margin-left: 10px;\n  height: 32px;\n  line-height: 30px;\n  padding-top: 0;\n  padding-bottom: 0;\n\n.input-new-tag\n  display inline-block\n  width: 90px;\n  margin-left: 10px;\n  \n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/book/book_property.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"book-property-wrap\"},[_c('el-alert',{attrs:{\"title\":\"操作说明\",\"type\":\"info\",\"show-icon\":\"\"}},[_c('div',[_c('p',[_vm._v(\"\\n        您可以通过点击标签名或分类名来修改相关信息，也可以直接删除。\\n      \")]),_vm._v(\" \"),_c('p',[_c('span',{staticClass:\"red\"},[_vm._v(\"提示：\")]),_vm._v(\"删除标签或分类会导致原来书籍标签或分类丢失，请谨慎使用！\\n      \")]),_vm._v(\" \"),_c('p',[_c('span',[_vm._v(\"注意事项：\")]),_vm._v(\"1.分类图标上传大图尺寸414X180、小图尺寸70X70，请严格按照尺寸要求操作\\n      \")])])]),_vm._v(\" \"),_c('el-row',{staticClass:\"mbt20 book-property-list\"},[_c('h2',{staticClass:\"tab-title\"},[_vm._v(\"书籍标签\")]),_vm._v(\" \"),_vm._l((_vm.baseInfo.booklablesList),function(item){return _c('el-button',{key:item.id,style:({borderColor:item.bookColor,color:item.bookColor}),attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.handleEdit('label',item)}}},[_vm._v(_vm._s(item.bookLableName))])}),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.handleEdit('label')}}},[_vm._v(\"+ 新建标签\")])],2),_vm._v(\" \"),_c('el-row',{staticClass:\"mbt20 book-property-list\"},[_c('h2',{staticClass:\"tab-title\"},[_vm._v(\"书籍分类\")]),_vm._v(\" \"),_vm._l((_vm.baseInfo.classificationList),function(item){return _c('el-button',{key:item.id,attrs:{\"size\":\"small\",\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":function($event){_vm.handleEdit('class',item)}}},[_vm._v(_vm._s(item.classificationName))])}),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.handleEdit('class')}}},[_vm._v(\"+ 新建分类\")])],2),_vm._v(\" \"),_c('el-dialog',{staticClass:\"alertDialog\",attrs:{\"title\":\"编辑标签\",\"visible\":_vm.dialogVisible},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('el-form',{ref:\"propertyForm\",staticClass:\"property-ruleForm\",attrs:{\"model\":_vm.subData,\"rules\":_vm.rules,\"label-width\":\"66px\"}},[(_vm.currentType==='label')?[_c('el-form-item',{attrs:{\"label\":\"颜  色\",\"prop\":\"bookColor\"}},[_c('el-color-picker',{model:{value:(_vm.subData.bookColor),callback:function ($$v) {_vm.$set(_vm.subData, \"bookColor\", $$v)},expression:\"subData.bookColor\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"标签名\",\"prop\":\"bookLableName\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"placeholder\":\"请输入标签名\"},model:{value:(_vm.subData.bookLableName),callback:function ($$v) {_vm.$set(_vm.subData, \"bookLableName\", $$v)},expression:\"subData.bookLableName\"}})],1)]:[_c('el-form-item',{attrs:{\"label\":\"图  标\"}},[(_vm.subData.classificationmaxlco)?_c('img',{staticClass:\"class-icon\",attrs:{\"src\":_vm.subData.classificationmaxlco,\"alt\":\"\"}}):_vm._e(),_vm._v(\" \"),(_vm.dialogType=='edit')?_c('el-upload',{staticClass:\"upload-demo\",attrs:{\"show-file-list\":false,\"on-success\":_vm.uploadEnd1,\"on-error\":_vm.uploadEnd1,\"on-progress\":_vm.uploadProgress1,\"action\":\"/api/admin/updateClassification\",\"data\":{id:_vm.subData.id,type:1}}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[(_vm.load.max)?_c('span',[_vm._v(\"上传大图\")]):_c('span',[_c('i',{staticClass:\"el-icon-loading\"}),_vm._v(\" 正在上传中...\")])])],1):_vm._e(),_vm._v(\" \"),(_vm.subData.classificationIco)?_c('img',{staticClass:\"class-icon\",attrs:{\"src\":_vm.subData.classificationIco,\"alt\":\"\"}}):_vm._e(),_vm._v(\" \"),(_vm.dialogType=='edit')?_c('el-upload',{staticClass:\"upload-demo\",attrs:{\"show-file-list\":false,\"on-success\":_vm.uploadEnd2,\"on-error\":_vm.uploadEnd2,\"on-progress\":_vm.uploadProgress2,\"action\":\"/api/admin/updateClassification\",\"data\":{id:_vm.subData.id,type:2}}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[(_vm.load.min)?_c('span',[_vm._v(\"上传小图\")]):_c('span',[_c('i',{staticClass:\"el-icon-loading\"}),_vm._v(\" 正在上传中...\")])])],1):_vm._e()],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"序列号\",\"prop\":\"orders\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"placeholder\":\"请输入序列号\"},model:{value:(_vm.subData.orders),callback:function ($$v) {_vm.$set(_vm.subData, \"orders\", $$v)},expression:\"subData.orders\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"分类名\",\"prop\":\"classificationName\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"placeholder\":\"请输入分类名\"},model:{value:(_vm.subData.classificationName),callback:function ($$v) {_vm.$set(_vm.subData, \"classificationName\", $$v)},expression:\"subData.classificationName\"}})],1)]],2),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[(_vm.dialogType==='edit')?[_c('el-button',{attrs:{\"type\":\"danger\"},on:{\"click\":function($event){_vm.handleDel('del')}}},[_vm._v(\"删 除\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.handleDel('update')}}},[_vm._v(\"更 新\")])]:_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.handleDel('add')}}},[_vm._v(\"添 加\")])],2)],1)],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@14.2.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-4a3f92c5\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@14.2.2@vue-loader/lib/selector.js?type=template&index=0!./src/components/book/book_property.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}