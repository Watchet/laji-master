webpackJsonp([17],{DFvP:function(e,t,s){"use strict";function i(e){s("sgrD")}Object.defineProperty(t,"__esModule",{value:!0});var a={data:function(){return{versionData:{version:"",versionTerminal:"安卓",versionUpdateDataTime:new Date,versionDescription:"",code:"200"},file:null}},mounted:function(){this.$store.dispatch("system/getVersionList")},methods:{onChange:function(e,t){2===t.length&&t.shift(),this.file=t[0]},handleRemove:function(e,t){this.file=null},beforeRemove:function(e,t){return this.$confirm("确定移除 "+e.name+"？")},versionUpdate:function(){var e=this;if(null===this.file)this.$message({message:"请上传文件！",type:"warning"});else if(-1===this.file.name.indexOf(".apk"))this.$message({message:"请上传apk文件！",type:"warning"});else if(""===this.versionData.version)this.$message({message:"请填写版本号！",type:"warning"});else if(this.file.size>419430400)this.$message({message:"文件过大！请重新选择！",type:"warning"});else if(""===this.versionData.versionUpdateDataTime)this.$message({message:"请选择版本更新时间！",type:"warning"});else if(""===this.versionData.versionDescription)this.$message({message:"请填写版本描述！！",type:"warning"});else{this.FunWeekTime(this.versionData.versionUpdateDataTime.getTime())==this.FunWeekTime((new Date).getTime())?this.versionData.versionUpdateDataTime=this.nowDate(this.versionData.versionUpdateDataTime.getTime()):this.versionData.versionUpdateDataTime=this.dateTiming(this.versionData.versionUpdateDataTime,"start");var t=new FormData;t.append("fileName",this.file.name),t.append("file",this.file.raw),this.$store.dispatch("system/versionUpdate",{file:t,info:this.versionData}).then(function(t){200===t.returnCode&&(e.$message({message:t.msg,type:"success"}),e.$refs.upload.clearFiles(),e.file="",e.versionData={version:"",versionTerminal:"安卓",versionUpdateDataTime:new Date,versionDescription:"",code:"200"})})}}},computed:{versionTimeLine:function(){return this.$store.state.system.versionTimeLine}}},n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"version-update"},[s("el-alert",{attrs:{title:"操作说明",type:"info","show-icon":""}},[s("div",[s("span",[e._v("暂无")])])]),e._v(" "),s("div",{staticClass:"version-contain"},[s("el-row",{staticStyle:{margin:"0"},attrs:{gutter:24}},[s("el-col",{staticClass:"version-info",attrs:{span:8}},[s("el-row",{staticStyle:{margin:"20px 0"},attrs:{gutter:20}},[s("el-col",{attrs:{span:4}},[s("p",{staticStyle:{"text-align":"right"}},[e._v("上传APK文件")])]),e._v(" "),s("el-col",{attrs:{span:18}},[s("el-upload",{ref:"upload",attrs:{action:"",limit:2,"auto-upload":!1,"on-change":e.onChange,"on-remove":e.handleRemove,"before-remove":e.beforeRemove}},[s("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传apk文件")])],1)],1)],1),e._v(" "),s("el-row",{staticStyle:{margin:"20px 0"},attrs:{gutter:20}},[s("el-col",{attrs:{span:4}},[s("p",{staticStyle:{"text-align":"right"}},[e._v("版本号")])]),e._v(" "),s("el-col",{attrs:{span:18}},[s("el-input",{model:{value:e.versionData.version,callback:function(t){e.$set(e.versionData,"version",t)},expression:"versionData.version"}})],1)],1),e._v(" "),s("el-row",{staticStyle:{margin:"20px 0"},attrs:{gutter:20}},[s("el-col",{attrs:{span:4}},[s("p",{staticStyle:{"text-align":"right"}},[e._v("更新时间")])]),e._v(" "),s("el-col",{attrs:{span:18}},[s("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.versionData.versionUpdateDataTime,callback:function(t){e.$set(e.versionData,"versionUpdateDataTime",t)},expression:"versionData.versionUpdateDataTime"}})],1)],1),e._v(" "),s("el-row",{staticStyle:{margin:"20px 0"},attrs:{gutter:20}},[s("el-col",{attrs:{span:4}},[s("p",{staticStyle:{"text-align":"right"}},[e._v("版本号描述")])]),e._v(" "),s("el-col",{attrs:{span:18}},[s("el-input",{attrs:{type:"textarea"},model:{value:e.versionData.versionDescription,callback:function(t){e.$set(e.versionData,"versionDescription",t)},expression:"versionData.versionDescription"}})],1)],1),e._v(" "),s("el-row",{staticStyle:{margin:"20px 0"},attrs:{gutter:20}},[s("el-col",{staticStyle:{"text-align":"right"},attrs:{span:20}},[s("el-button",{staticStyle:{outline:"none"},attrs:{type:"primary",round:""},on:{click:function(t){e.versionUpdate()}}},[e._v("更新版本")])],1)],1)],1),e._v(" "),s("el-col",{attrs:{span:14,offset:1}},[s("div",{staticClass:"version-date",attrs:{id:"version-date"}},e._l(e.versionTimeLine,function(t,i){return s("div",{key:i,staticClass:"timeline-block"},[s("div",{staticClass:"timeline-img"},[s("i",{staticClass:"fa fa-clock-o"})]),e._v(" "),s("div",{staticClass:"timeline-content"},[s("p",[s("span",{staticClass:"title"},[e._v("版本号：")]),s("span",{staticClass:"content"},[e._v(e._s(t.version))])]),e._v(" "),s("p",[s("span",{staticClass:"title"},[e._v("版本号ID：")]),s("span",{staticClass:"content"},[e._v(e._s(t.id))])]),e._v(" "),s("p",[s("span",{staticClass:"title"},[e._v("版本更新描述：")]),s("span",{staticClass:"content"},[e._v(e._s(t.versionDescription))])]),e._v(" "),s("span",{staticClass:"cd-date"},[e._v(e._s(e._f("time")(t.versionUpdateDataTime,"long")))])])])}))])],1)],1)],1)},r=[],o=s("18Nq"),l=i,v=Object(o.a)(a,n,r,!1,l,null,null);t.default=v.exports},sgrD:function(e,t){}});
//# sourceMappingURL=17.ca79bfa089ff15c89ef2.js.map