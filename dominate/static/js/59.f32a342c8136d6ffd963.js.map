{"version":3,"sources":["webpack:///static/js/59.f32a342c8136d6ffd963.js","webpack:///./src/components/barrage/index.vue","webpack:///src/components/barrage/index.vue","webpack:///./src/components/barrage/index.vue?01f2"],"names":["webpackJsonp","3ZnX","module","exports","lfjY","__webpack_exports__","__webpack_require__","injectStyle","context","Object","defineProperty","value","barrage","data","searchForm","pcommentList","keywords","selectType","multipleSelection","methods","getPcommentList","_this","this","page","$route","params","Number","$message","message","type","$ajax","res","returnCode","searchChapterCom","$router","push","handleCurrentChange","handleRowClick","row","$refs","multipleTable","toggleRowSelection","toggleSelection","dType","item","_this2","idList","bookId","userId","chapterId","pid","length","forEach","id","url","tip","subData","bookName","bookid","toString","userName","userid","chapterName","chapterid","$confirm","confirmButtonText","cancelButtonText","dangerouslyUseHTMLString","then","handleSelectionChange","val","created","watch","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","title","show-icon","_v","$store","state","userInfo","adminRolemenuanduserrole","deletes","plain","on","click","$event","_e","xs","sm","md","lg","xl","placeholder","nativeOn","keyup","_k","keyCode","key","model","callback","$$v","expression","slot","label","icon","ref","staticStyle","width","list","border","row-click","selection-change","prop","scopedSlots","_u","fn","props","label-position","inline","_s","userAddressIP","_f","commentDateTime","updates","scope","background","current-page","pageNum","page-size","pageSize","layout","total","current-change","staticRenderFns","component_normalizer","__vue_styles__","Component"],"mappings":"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","file":"static/js/59.f32a342c8136d6ffd963.js","sourcesContent":["webpackJsonp([59],{\n\n/***/ \"3ZnX\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"lfjY\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// CONCATENATED MODULE: ./node_modules/_babel-loader@7.1.4@babel-loader/lib!./node_modules/_vue-loader@14.2.2@vue-loader/lib/selector.js?type=script&index=0!./src/components/barrage/index.vue\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ var barrage = ({\n  data: function data() {\n    return {\n      searchForm: {},\n      pcommentList: {},\n      keywords: '',\n      selectType: '',\n      multipleSelection: []\n    };\n  },\n\n  methods: {\n    getPcommentList: function getPcommentList() {\n      var _this = this;\n\n      this.searchForm.page = this.$route.params.page;\n      if (this.selectType) {\n        if ((this.selectType === 'bookId' || this.selectType === 'userId') && !Number(this.keywords)) {\n          this.$message({ message: 'ID必需为数字', type: 'warning' });\n          return false;\n        }\n        this.searchForm[this.selectType] = this.keywords;\n      }\n      this.$ajax('/admin/getBookParagraphCommentInfoList', this.searchForm, function (res) {\n        if (res.returnCode === 200) {\n          _this.pcommentList = res.data;\n        } else if (!res.data) {\n          _this.pcommentList = {};\n        }\n      });\n    },\n    searchChapterCom: function searchChapterCom() {\n      if (Number(this.$route.params.page) === 1) {\n        this.getPcommentList();\n      } else {\n        this.$router.push({ params: { page: 1 } });\n      }\n    },\n    handleCurrentChange: function handleCurrentChange(page) {\n      this.$router.push({ params: { page: page } });\n    },\n    handleRowClick: function handleRowClick(row) {\n      this.$refs.multipleTable.toggleRowSelection(row);\n    },\n\n    //          批量处理\n    toggleSelection: function toggleSelection(dType, item) {\n      var _this2 = this;\n\n      var idList = [];\n      var delData = function delData() {\n        var url = void 0,\n            tip = void 0,\n            subData = void 0;\n        if (dType === 'book') {\n          url = '/pcomm-delParagraphcommentBookId';\n          tip = '此操作将永久删除书籍<span class=\"red\">' + item.bookName + '</span>的全部吐槽, 是否继续?';\n          subData = {\n            bookid: idList.toString()\n          };\n        } else if (dType === 'user') {\n          url = '/pcomm-delParagraphcommentUser';\n          tip = '此操作将永久删除用户<span class=\"red\">' + item.userName + '</span>的全部吐槽, 是否继续?';\n          subData = {\n            userid: idList.toString()\n          };\n        } else if (dType === 'cid') {\n          url = '/pcomm-delParagraphcommentChapter';\n          tip = '此操作将永久删除本章节<span class=\"red\">' + item.chapterName + '</span>的全部吐槽, 是否继续?';\n          subData = {\n            chapterid: idList.toString()\n          };\n        } else if (dType === 'pid') {\n          url = '/pcomm-delParagraphcommentPid';\n          tip = '此操作将永久删除本段落的全部吐槽, 是否继续?';\n          subData = {\n            pid: idList.toString()\n          };\n        } else {\n          tip = '此操作将永久删除' + idList.length + '条吐槽, 是否继续?';\n          url = '/pcomm-delParagraphcomment';\n          subData = {\n            id: idList.toString()\n          };\n        }\n        _this2.$confirm(tip, '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          dangerouslyUseHTMLString: true,\n          type: 'warning'\n        }).then(function () {\n          _this2.$ajax(url, subData, function (res) {\n            if (res.returnCode === 200) {\n              _this2.$message({ message: '删除成功', type: 'success' });\n              _this2.getPcommentList();\n            }\n          });\n        });\n      };\n\n      if (item) {\n        if (dType === 'book') {\n          idList.push(item.bookId);\n        } else if (dType === 'user') {\n          idList.push(item.userId);\n        } else if (dType === 'cid') {\n          idList.push(item.chapterId);\n        } else {\n          idList.push(item.pid);\n        }\n      } else if (this.multipleSelection.length) {\n        this.multipleSelection.forEach(function (item) {\n          idList.push(item.id);\n        });\n      }\n\n      if (idList.length) {\n        delData();\n      } else {\n        this.$message({ message: '请选取要删除的内容', type: 'warning' });\n        return false;\n      }\n    },\n    handleSelectionChange: function handleSelectionChange(val) {\n      this.multipleSelection = val;\n    }\n  },\n  created: function created() {\n    this.getPcommentList();\n  },\n\n  watch: {\n    '$route': function $route(val) {\n      this.getPcommentList();\n    }\n  }\n});\n// CONCATENATED MODULE: ./node_modules/_vue-loader@14.2.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-0cb7d8d7\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@14.2.2@vue-loader/lib/selector.js?type=template&index=0!./src/components/barrage/index.vue\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"para-comment-wrap\"},[_c('el-alert',{attrs:{\"title\":\"操作说明\",\"type\":\"info\",\"show-icon\":\"\"}},[_c('div',[_c('p',[_vm._v(\"\\n        此表为本站全部书籍章节吐槽，您可以通过相应评论ID来批量管理；通过内容可以模糊搜索，其他类型均为精确搜索\\n      \")]),_vm._v(\" \"),_c('p',[_c('span',{staticClass:\"red\"},[_vm._v(\"注意：\")]),_vm._v(\"删除吐槽时\\n      \")])])]),_vm._v(\" \"),_c('el-row',{staticClass:\"mbt20\"},[(_vm.$store.state.userInfo && _vm.$store.state.userInfo.adminRolemenuanduserrole.deletes)?_c('el-button',{attrs:{\"type\":\"danger\",\"plain\":\"\"},on:{\"click\":function($event){_vm.toggleSelection()}}},[_vm._v(\"批量删除\")]):_vm._e()],1),_vm._v(\" \"),_c('el-row',{staticClass:\"mbt20\"},[_c('el-col',{attrs:{\"xs\":20,\"sm\":16,\"md\":12,\"lg\":9,\"xl\":6}},[_c('el-input',{staticClass:\"input-with-select\",attrs:{\"placeholder\":\"请输入内容\"},nativeOn:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.searchChapterCom($event)}},model:{value:(_vm.keywords),callback:function ($$v) {_vm.keywords=$$v},expression:\"keywords\"}},[_c('el-select',{attrs:{\"slot\":\"prepend\",\"placeholder\":\"请选择\"},slot:\"prepend\",model:{value:(_vm.selectType),callback:function ($$v) {_vm.selectType=$$v},expression:\"selectType\"}},[_c('el-option',{attrs:{\"label\":\"内 容\",\"value\":\"commentContext\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"书  名\",\"value\":\"bookName\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"昵 称\",\"value\":\"userName\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"章节名\",\"value\":\"chapterName\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"书籍ID\",\"value\":\"bookId\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"章节ID\",\"value\":\"chapterId\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"用户IP\",\"value\":\"userAddressIP\"}})],1),_vm._v(\" \"),_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.searchChapterCom},slot:\"append\"})],1)],1)],1),_vm._v(\" \"),_c('el-table',{ref:\"multipleTable\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.pcommentList.list,\"border\":\"\"},on:{\"row-click\":_vm.handleRowClick,\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"55\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"ID\",\"width\":\"80\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"bookName\",\"label\":\"书名\",\"width\":\"180\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"bookId\",\"label\":\"书籍ID\",\"width\":\"70\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"chapterName\",\"label\":\"章节名\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"chapterId\",\"label\":\"章ID\",\"width\":\"80\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"commentContext\",\"label\":\"内容\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"更多\",\"type\":\"expand\"},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_c('el-form',{staticClass:\"demo-table-expand\",attrs:{\"label-position\":\"left\",\"inline\":\"\"}},[_c('el-form-item',{attrs:{\"label\":\"用户IP：\"}},[_c('span',[_vm._v(_vm._s(props.row.userAddressIP))])]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"时间\"}},[_c('span',[_vm._v(_vm._s(_vm._f(\"time\")(props.row.commentDateTime,'long')))])]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"段落ID：\"}},[_c('span',[_vm._v(_vm._s(props.row.pid))])])],1)]}}])}),_vm._v(\" \"),(_vm.$store.state.userInfo && _vm.$store.state.userInfo.adminRolemenuanduserrole.updates)?_c('el-table-column',{attrs:{\"label\":\"删除评论\",\"width\":\"150\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{staticClass:\"red\",on:{\"click\":function($event){_vm.toggleSelection('book', scope.row)}}},[_vm._v(\"全书\")]),_vm._v(\" \"),_c('span',{staticClass:\"red\",on:{\"click\":function($event){_vm.toggleSelection('user', scope.row)}}},[_vm._v(\"用户\")]),_vm._v(\" \"),_c('span',{staticClass:\"red\",on:{\"click\":function($event){_vm.toggleSelection('cid', scope.row)}}},[_vm._v(\"章节\")]),_vm._v(\" \"),_c('span',{staticClass:\"red\",on:{\"click\":function($event){_vm.toggleSelection('pid', scope.row)}}},[_vm._v(\"段落\")])]}}])}):_vm._e()],1),_vm._v(\" \"),_c('el-pagination',{staticClass:\"mbt20\",attrs:{\"background\":\"\",\"current-page\":_vm.pcommentList.pageNum,\"page-size\":_vm.pcommentList.pageSize,\"layout\":\"total, prev, pager, next, jumper\",\"total\":_vm.pcommentList.total},on:{\"current-change\":_vm.handleCurrentChange}})],1)}\nvar staticRenderFns = []\n\n// EXTERNAL MODULE: ./node_modules/_vue-loader@14.2.2@vue-loader/lib/runtime/component-normalizer.js\nvar component_normalizer = __webpack_require__(\"18Nq\");\n\n// CONCATENATED MODULE: ./src/components/barrage/index.vue\nfunction injectStyle (context) {\n  __webpack_require__(\"3ZnX\")\n}\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\n\nvar Component = Object(component_normalizer[\"a\" /* default */])(\n  barrage,\n  render,\n  staticRenderFns,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ var components_barrage = __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/59.f32a342c8136d6ffd963.js","function injectStyle (context) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"scoped\\\":false,\\\"sourceMap\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0cb7d8d7\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/_vue-loader@14.2.2@vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/barrage/index.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"para-comment-wrap\">\n    <el-alert\n      title=\"操作说明\"\n      type=\"info\"\n      show-icon>\n      <div>\n        <p>\n          此表为本站全部书籍章节吐槽，您可以通过相应评论ID来批量管理；通过内容可以模糊搜索，其他类型均为精确搜索\n        </p>\n        <p>\n          <span class=\"red\">注意：</span>删除吐槽时\n        </p>\n      </div>\n    </el-alert>\n    <el-row class=\"mbt20\">\n      <el-button v-if=\"$store.state.userInfo && $store.state.userInfo.adminRolemenuanduserrole.deletes\" type=\"danger\" plain @click=\"toggleSelection()\">批量删除</el-button>\n    </el-row>\n    \n    <el-row class=\"mbt20\">\n      <el-col :xs=\"20\" :sm=\"16\" :md=\"12\" :lg=\"9\" :xl=\"6\">\n        <el-input placeholder=\"请输入内容\" v-model=\"keywords\" class=\"input-with-select\" @keyup.enter.native=\"searchChapterCom\">\n          <el-select v-model=\"selectType\" slot=\"prepend\" placeholder=\"请选择\">\n            <el-option label=\"内 容\" value=\"commentContext\"></el-option>\n            <el-option label=\"书  名\" value=\"bookName\"></el-option>\n            <el-option label=\"昵 称\" value=\"userName\"></el-option>\n            <el-option label=\"章节名\" value=\"chapterName\"></el-option>\n            <el-option label=\"书籍ID\" value=\"bookId\"></el-option>\n            <el-option label=\"章节ID\" value=\"chapterId\"></el-option>\n            <el-option label=\"用户IP\" value=\"userAddressIP\"></el-option>\n          \n          </el-select>\n          <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"searchChapterCom\"></el-button>\n        </el-input>\n      </el-col>\n    </el-row>\n    \n    <el-table\n      ref=\"multipleTable\"\n      :data=\"pcommentList.list\"\n      border\n      @row-click=\"handleRowClick\"\n      @selection-change=\"handleSelectionChange\"\n      style=\"width: 100%\">\n      <el-table-column\n        type=\"selection\"\n        width=\"55\">\n      </el-table-column>\n      <el-table-column\n        prop=\"id\"\n        label=\"ID\"\n        width=\"80\">\n      </el-table-column>\n      \n      <el-table-column\n        prop=\"bookName\"\n        label=\"书名\"\n        width=\"180\">\n      </el-table-column>\n      \n      \n      <el-table-column\n        prop=\"bookId\"\n        label=\"书籍ID\"\n        width=\"70\">\n      </el-table-column>\n      \n      <el-table-column\n        prop=\"chapterName\"\n        label=\"章节名\">\n      </el-table-column>\n      \n      <el-table-column\n        prop=\"chapterId\"\n        label=\"章ID\"\n        width=\"80\">\n      </el-table-column>\n      \n      <el-table-column\n        prop=\"commentContext\"\n        label=\"内容\">\n      </el-table-column>\n      \n      <el-table-column\n        label=\"更多\"\n        type=\"expand\">\n        <template slot-scope=\"props\">\n          <el-form label-position=\"left\" inline class=\"demo-table-expand\">\n            <el-form-item label=\"用户IP：\">\n              <span>{{ props.row.userAddressIP }}</span>\n            </el-form-item>\n            \n            <el-form-item label=\"时间\">\n              <span>{{ props.row.commentDateTime | time('long') }}</span>\n            </el-form-item>\n            \n            <el-form-item label=\"段落ID：\">\n              <span>{{ props.row.pid }}</span>\n            </el-form-item>\n          </el-form>\n        </template>\n      </el-table-column>\n  \n      <el-table-column\n        v-if=\"$store.state.userInfo && $store.state.userInfo.adminRolemenuanduserrole.updates\"\n        label=\"删除评论\"\n        width=\"150\">\n        <template slot-scope=\"scope\">\n          <span class=\"red\" @click=\"toggleSelection('book', scope.row)\">全书</span>\n          <span class=\"red\" @click=\"toggleSelection('user', scope.row)\">用户</span>\n          <span class=\"red\" @click=\"toggleSelection('cid', scope.row)\">章节</span>\n          <span class=\"red\" @click=\"toggleSelection('pid', scope.row)\">段落</span>\n        </template>\n      </el-table-column>\n      \n    </el-table>\n    \n    <el-pagination\n      class=\"mbt20\"\n      background\n      @current-change=\"handleCurrentChange\"\n      :current-page=\"pcommentList.pageNum\"\n      :page-size=\"pcommentList.pageSize\"\n      layout=\"total, prev, pager, next, jumper\"\n      :total=\"pcommentList.total\">\n    </el-pagination>\n  \n  </div>\n</template>\n\n<script type=\"text/ecmascript-6\">\n  export default{\n    data() {\n      return {\n        searchForm: {\n  \n        },\n        pcommentList: {},\n        keywords: '',\n        selectType: '',\n        multipleSelection: []\n      }\n    },\n    methods: {\n      getPcommentList() {\n        this.searchForm.page = this.$route.params.page\n        if (this.selectType) {\n          if ((this.selectType === 'bookId' || this.selectType === 'userId') && !Number(this.keywords)) {\n            this.$message({ message: 'ID必需为数字', type: 'warning' })\n            return false\n          }\n          this.searchForm[this.selectType] = this.keywords\n        }\n        this.$ajax('/admin/getBookParagraphCommentInfoList', this.searchForm, res => {\n          if (res.returnCode === 200) {\n            this.pcommentList = res.data\n          } else if (!res.data) {\n            this.pcommentList = {}\n          }\n        })\n      },\n      searchChapterCom() {\n        if (Number(this.$route.params.page) === 1) {\n          this.getPcommentList()\n        } else {\n          this.$router.push({ params: { page: 1 }})\n        }\n      },\n      handleCurrentChange(page) {\n        this.$router.push({ params: { page: page }})\n      },\n      handleRowClick(row) {\n        this.$refs.multipleTable.toggleRowSelection(row)\n      },\n  //          批量处理\n      toggleSelection(dType, item) {\n        const idList = []\n        const delData = () => {\n          let url, tip, subData\n          if (dType === 'book') {\n            url = '/pcomm-delParagraphcommentBookId'\n            tip = '此操作将永久删除书籍<span class=\"red\">' + item.bookName + '</span>的全部吐槽, 是否继续?'\n            subData = {\n              bookid: idList.toString()\n            }\n          } else if (dType === 'user') {\n            url = '/pcomm-delParagraphcommentUser'\n            tip = '此操作将永久删除用户<span class=\"red\">' + item.userName + '</span>的全部吐槽, 是否继续?'\n            subData = {\n              userid: idList.toString()\n            }\n          } else if (dType === 'cid') {\n            url = '/pcomm-delParagraphcommentChapter'\n            tip = '此操作将永久删除本章节<span class=\"red\">' + item.chapterName + '</span>的全部吐槽, 是否继续?'\n            subData = {\n              chapterid: idList.toString()\n            }\n          } else if (dType === 'pid') {\n            url = '/pcomm-delParagraphcommentPid'\n            tip = '此操作将永久删除本段落的全部吐槽, 是否继续?'\n            subData = {\n              pid: idList.toString()\n            }\n          } else {\n            tip = '此操作将永久删除' + idList.length + '条吐槽, 是否继续?'\n            url = '/pcomm-delParagraphcomment'\n            subData = {\n              id: idList.toString()\n            }\n          }\n          this.$confirm(tip, '提示', {\n            confirmButtonText: '确定',\n            cancelButtonText: '取消',\n            dangerouslyUseHTMLString: true,\n            type: 'warning'\n          }).then(() => {\n            this.$ajax(url, subData, res => {\n              if (res.returnCode === 200) {\n                this.$message({ message: '删除成功', type: 'success' })\n                this.getPcommentList()\n              }\n            })\n          })\n        }\n  \n        if (item) {\n          if (dType === 'book') {\n            idList.push(item.bookId)\n          } else if (dType === 'user') {\n            idList.push(item.userId)\n          } else if (dType === 'cid') {\n            idList.push(item.chapterId)\n          } else {\n            idList.push(item.pid)\n          }\n        } else if (this.multipleSelection.length) {\n          this.multipleSelection.forEach((item) => {\n            idList.push(item.id)\n          })\n        }\n  \n        if (idList.length) {\n          delData()\n        } else {\n          this.$message({ message: '请选取要删除的内容', type: 'warning' })\n          return false\n        }\n      },\n  \n      handleSelectionChange(val) {\n        this.multipleSelection = val\n      }\n\n    },\n    created() {\n      this.getPcommentList()\n    },\n    watch: {\n      '$route': function(val) {\n        this.getPcommentList()\n      }\n    }\n  }\n</script>\n<style lang=\"stylus\" rel=\"stylesheet/stylus\">\nspan.red\n  cursor pointer\n  \n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/barrage/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"para-comment-wrap\"},[_c('el-alert',{attrs:{\"title\":\"操作说明\",\"type\":\"info\",\"show-icon\":\"\"}},[_c('div',[_c('p',[_vm._v(\"\\n        此表为本站全部书籍章节吐槽，您可以通过相应评论ID来批量管理；通过内容可以模糊搜索，其他类型均为精确搜索\\n      \")]),_vm._v(\" \"),_c('p',[_c('span',{staticClass:\"red\"},[_vm._v(\"注意：\")]),_vm._v(\"删除吐槽时\\n      \")])])]),_vm._v(\" \"),_c('el-row',{staticClass:\"mbt20\"},[(_vm.$store.state.userInfo && _vm.$store.state.userInfo.adminRolemenuanduserrole.deletes)?_c('el-button',{attrs:{\"type\":\"danger\",\"plain\":\"\"},on:{\"click\":function($event){_vm.toggleSelection()}}},[_vm._v(\"批量删除\")]):_vm._e()],1),_vm._v(\" \"),_c('el-row',{staticClass:\"mbt20\"},[_c('el-col',{attrs:{\"xs\":20,\"sm\":16,\"md\":12,\"lg\":9,\"xl\":6}},[_c('el-input',{staticClass:\"input-with-select\",attrs:{\"placeholder\":\"请输入内容\"},nativeOn:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.searchChapterCom($event)}},model:{value:(_vm.keywords),callback:function ($$v) {_vm.keywords=$$v},expression:\"keywords\"}},[_c('el-select',{attrs:{\"slot\":\"prepend\",\"placeholder\":\"请选择\"},slot:\"prepend\",model:{value:(_vm.selectType),callback:function ($$v) {_vm.selectType=$$v},expression:\"selectType\"}},[_c('el-option',{attrs:{\"label\":\"内 容\",\"value\":\"commentContext\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"书  名\",\"value\":\"bookName\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"昵 称\",\"value\":\"userName\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"章节名\",\"value\":\"chapterName\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"书籍ID\",\"value\":\"bookId\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"章节ID\",\"value\":\"chapterId\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"用户IP\",\"value\":\"userAddressIP\"}})],1),_vm._v(\" \"),_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.searchChapterCom},slot:\"append\"})],1)],1)],1),_vm._v(\" \"),_c('el-table',{ref:\"multipleTable\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.pcommentList.list,\"border\":\"\"},on:{\"row-click\":_vm.handleRowClick,\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"55\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"ID\",\"width\":\"80\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"bookName\",\"label\":\"书名\",\"width\":\"180\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"bookId\",\"label\":\"书籍ID\",\"width\":\"70\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"chapterName\",\"label\":\"章节名\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"chapterId\",\"label\":\"章ID\",\"width\":\"80\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"commentContext\",\"label\":\"内容\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"更多\",\"type\":\"expand\"},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_c('el-form',{staticClass:\"demo-table-expand\",attrs:{\"label-position\":\"left\",\"inline\":\"\"}},[_c('el-form-item',{attrs:{\"label\":\"用户IP：\"}},[_c('span',[_vm._v(_vm._s(props.row.userAddressIP))])]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"时间\"}},[_c('span',[_vm._v(_vm._s(_vm._f(\"time\")(props.row.commentDateTime,'long')))])]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"段落ID：\"}},[_c('span',[_vm._v(_vm._s(props.row.pid))])])],1)]}}])}),_vm._v(\" \"),(_vm.$store.state.userInfo && _vm.$store.state.userInfo.adminRolemenuanduserrole.updates)?_c('el-table-column',{attrs:{\"label\":\"删除评论\",\"width\":\"150\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{staticClass:\"red\",on:{\"click\":function($event){_vm.toggleSelection('book', scope.row)}}},[_vm._v(\"全书\")]),_vm._v(\" \"),_c('span',{staticClass:\"red\",on:{\"click\":function($event){_vm.toggleSelection('user', scope.row)}}},[_vm._v(\"用户\")]),_vm._v(\" \"),_c('span',{staticClass:\"red\",on:{\"click\":function($event){_vm.toggleSelection('cid', scope.row)}}},[_vm._v(\"章节\")]),_vm._v(\" \"),_c('span',{staticClass:\"red\",on:{\"click\":function($event){_vm.toggleSelection('pid', scope.row)}}},[_vm._v(\"段落\")])]}}])}):_vm._e()],1),_vm._v(\" \"),_c('el-pagination',{staticClass:\"mbt20\",attrs:{\"background\":\"\",\"current-page\":_vm.pcommentList.pageNum,\"page-size\":_vm.pcommentList.pageSize,\"layout\":\"total, prev, pager, next, jumper\",\"total\":_vm.pcommentList.total},on:{\"current-change\":_vm.handleCurrentChange}})],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@14.2.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-0cb7d8d7\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@14.2.2@vue-loader/lib/selector.js?type=template&index=0!./src/components/barrage/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}