webpackJsonp([14,68],{"4xxa":function(e,t){},"6rpU":function(e,t){},PsVy:function(e,t,a){"use strict";function n(e){a("4xxa")}Object.defineProperty(t,"__esModule",{value:!0});var o=a("hRKE"),i=a.n(o);!function(e){e.Jcrop=function(t,a){function n(e){return Math.round(e)+"px"}function o(e){return F.baseClass+"-"+e}function s(){return e.fx.step.hasOwnProperty("backgroundColor")}function r(t){var a=e(t).offset();return[a.left,a.top]}function c(e){return[e.pageX-B[0],e.pageY-B[1]]}function l(t){"object"!==(void 0===t?"undefined":i()(t))&&(t={}),F=e.extend(F,t),e.each(["onChange","onSelect","onRelease","onDblClick"],function(e,t){"function"!=typeof F[t]&&(F[t]=function(){})})}function u(e,t,a){if(B=r(N),ge.setCursor("move"===e?e:e+"-resize"),"move"===e)return ge.activateHandlers(p(t),m,a);var n=pe.getFixed(),o=h(e),i=pe.getCorner(h(o));pe.setPressed(pe.getCorner(o)),pe.setCurrent(i),ge.activateHandlers(d(e,n),m,a)}function d(e,t){return function(a){if(F.aspectRatio)switch(e){case"e":case"w":a[1]=t.y+1;break;case"n":case"s":a[0]=t.x+1}else switch(e){case"e":case"w":a[1]=t.y2;break;case"n":case"s":a[0]=t.x2}pe.setCurrent(a),fe.update()}}function p(e){var t=e;return be.watchKeys(),function(e){pe.moveOffset([e[0]-t[0],e[1]-t[1]]),t=e,fe.update()}}function h(e){switch(e){case"n":return"sw";case"s":case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function f(e){return function(t){return!F.disabled&&(!("move"===e&&!F.allowMove)&&(B=r(N),oe=!0,u(e,c(t)),t.stopPropagation(),t.preventDefault(),!1))}}function g(e,t,a){var n=e.width(),o=e.height();n>t&&t>0&&(n=t,o=t/e.width()*e.height()),o>a&&a>0&&(o=a,n=a/e.height()*e.width()),ae=e.width()/n,ne=e.height()/o,e.width(n).height(o)}function b(e){return{x:e.x*ae,y:e.y*ne,x2:e.x2*ae,y2:e.y2*ne,w:e.w*ae,h:e.h*ne}}function m(e){var t=pe.getFixed();t.w>F.minSelect[0]&&t.h>F.minSelect[1]?(fe.enableHandles(),fe.done()):fe.release(),ge.setCursor(F.allowSelect?"crosshair":"default")}function v(e){if(!F.disabled&&F.allowSelect){oe=!0,B=r(N),fe.disableHandles(),ge.setCursor("crosshair");var t=c(e);return pe.setPressed(t),fe.update(),ge.activateHandlers(w,m,"touch"===e.type.substring(0,5)),be.watchKeys(),e.stopPropagation(),e.preventDefault(),!1}}function w(e){pe.setCurrent(e),fe.update()}function y(){var t=e("<div></div>").addClass(o("tracker"));return P&&t.css({opacity:0,backgroundColor:"white"}),t}function k(e){q.removeClass().addClass(o("holder")).addClass(e)}function C(e,t){function a(){window.setTimeout(v,d)}var n=e[0]/ae,o=e[1]/ne,i=e[2]/ae,s=e[3]/ne;if(!ie){var r=pe.flipCoords(n,o,i,s),c=pe.getFixed(),l=[c.x,c.y,c.x2,c.y2],u=l,d=F.animationDelay,p=r[0]-l[0],h=r[1]-l[1],f=r[2]-l[2],g=r[3]-l[3],b=0,m=F.swingSpeed;n=u[0],o=u[1],i=u[2],s=u[3],fe.animMode(!0);var v=function(){return function(){b+=(100-b)/m,u[0]=Math.round(n+b/100*p),u[1]=Math.round(o+b/100*h),u[2]=Math.round(i+b/100*f),u[3]=Math.round(s+b/100*g),b>=99.8&&(b=100),b<100?(x(u),a()):(fe.done(),fe.animMode(!1),"function"==typeof t&&t.call(me))}}();a()}}function _(e){x([e[0]/ae,e[1]/ne,e[2]/ae,e[3]/ne]),F.onSelect.call(me,b(pe.getFixed())),fe.enableHandles()}function x(e){pe.setPressed([e[0],e[1]]),pe.setCurrent([e[2],e[3]]),fe.update()}function S(){return b(pe.getFixed())}function I(){return pe.getFixed()}function T(e){l(e),j()}function $(){F.disabled=!0,fe.disableHandles(),fe.setCursor("default"),ge.setCursor("default")}function z(){F.disabled=!1,j()}function R(){fe.done(),ge.activateHandlers(null,null)}function D(){q.remove(),A.show(),A.css("visibility","visible"),e(t).removeData("Jcrop")}function M(e,t){fe.release(),$();var a=new Image;a.onload=function(){var n=a.width,o=a.height,i=F.boxWidth,s=F.boxHeight;N.width(n).height(o),N.attr("src",e),K.attr("src",e),g(N,i,s),U=N.width(),V=N.height(),K.width(U).height(V),K.css({background:"#0f0"}),ce.width(U+2*re).height(V+2*re),q.width(U).height(V),he.resize(U,V),z(),"function"==typeof t&&t.call(me)},a.src=e}function O(e,t,a){var n=t||F.bgColor;F.bgFade&&s()&&F.fadeTime&&!a?e.animate({backgroundColor:n},{queue:!1,duration:F.fadeTime}):e.css("backgroundColor",n)}function j(e){F.allowResize?e?fe.enableOnly():fe.enableHandles():fe.disableHandles(),ge.setCursor(F.allowSelect?"crosshair":"default"),fe.setCursor(F.allowMove?"move":"default"),F.hasOwnProperty("trueSize")&&(ae=F.trueSize[0]/U,ne=F.trueSize[1]/V),F.hasOwnProperty("setSelect")&&(_(F.setSelect),fe.done(),delete F.setSelect),he.refresh(),F.bgColor!=le&&(O(F.shade?he.getShades():q,F.shade?F.shadeColor||F.bgColor:F.bgColor),le=F.bgColor),ue!=F.bgOpacity&&(ue=F.bgOpacity,F.shade?he.refresh():fe.setBgOpacity(ue)),Q=F.maxSize[0]||0,Z=F.maxSize[1]||0,ee=F.minSize[0]||0,te=F.minSize[1]||0,F.hasOwnProperty("outerImage")&&(N.attr("src",F.outerImage),delete F.outerImage),fe.refresh()}var B,F=e.extend({},e.Jcrop.defaults),L=navigator.userAgent.toLowerCase(),P=/msie/.test(L),H=/msie [1-6]\./.test(L);"object"!==(void 0===t?"undefined":i()(t))&&(t=e(t)[0]),"object"!==(void 0===a?"undefined":i()(a))&&(a={}),l(a);var E={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},A=e(t),W=!0;if("IMG"==t.tagName){if(0!=A[0].width&&0!=A[0].height)A.width(A[0].width),A.height(A[0].height);else{var J=new Image;J.src=A[0].src,A.width(J.width),A.height(J.height)}var N=A.clone().removeAttr("id").css(E).show();N.width(A.width()),N.height(A.height()),A.after(N).hide()}else N=A.css(E).show(),W=!1,null===F.shade&&(F.shade=!0);g(N,F.boxWidth,F.boxHeight);var U=N.width(),V=N.height(),q=e("<div />").width(U).height(V).addClass(o("holder")).css({position:"relative",backgroundColor:F.bgColor}).insertAfter(A).append(N);F.addClass&&q.addClass(F.addClass);var K=e("<div />"),Y=e("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),X=e("<div />").width("100%").height("100%").css("zIndex",320),G=e("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var e=pe.getFixed();F.onDblClick.call(me,e)}).insertBefore(N).append(Y,X);W&&(K=e("<img />").attr("src",N.attr("src")).css(E).width(U).height(V),Y.append(K)),H&&G.css({overflowY:"hidden"});var Q,Z,ee,te,ae,ne,oe,ie,se,re=F.boundary,ce=y().width(U+2*re).height(V+2*re).css({position:"absolute",top:n(-re),left:n(-re),zIndex:290}).mousedown(v),le=F.bgColor,ue=F.bgOpacity;B=r(N);var de=function(){function e(){var e,t={},a=["touchstart","touchmove","touchend"],n=document.createElement("div");try{for(e=0;e<a.length;e++){var o=a[e];o="on"+o;var i=o in n;i||(n.setAttribute(o,"return;"),i="function"==typeof n[o]),t[a[e]]=i}return t.touchstart&&t.touchend&&t.touchmove}catch(e){return!1}}return{createDragger:function(e){return function(t){return!F.disabled&&(!("move"===e&&!F.allowMove)&&(B=r(N),oe=!0,u(e,c(de.cfilter(t)),!0),t.stopPropagation(),t.preventDefault(),!1))}},newSelection:function(e){return v(de.cfilter(e))},cfilter:function(e){return e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,e},isSupported:e,support:function(){return!0===F.touchSupport||!1===F.touchSupport?F.touchSupport:e()}()}}(),pe=function(){function e(e){e=s(e),f=p=e[0],g=h=e[1]}function t(e){e=s(e),u=e[0]-f,d=e[1]-g,f=e[0],g=e[1]}function a(){return[u,d]}function n(e){var t=e[0],a=e[1];p+t<0&&(t-=t+p),h+a<0&&(a-=a+h),V<g+a&&(a+=V-(g+a)),U<f+t&&(t+=U-(f+t)),p+=t,f+=t,h+=a,g+=a}function o(e){var t=i();switch(e){case"ne":return[t.x2,t.y];case"nw":return[t.x,t.y];case"se":return[t.x2,t.y2];case"sw":return[t.x,t.y2]}}function i(){if(!F.aspectRatio)return c();var e,t,a,n,o=F.aspectRatio,i=F.minSize[0]/ae,s=F.maxSize[0]/ae,u=F.maxSize[1]/ne,d=f-p,b=g-h,m=Math.abs(d),v=Math.abs(b),w=m/v;return 0===s&&(s=10*U),0===u&&(u=10*V),w<o?(t=g,a=v*o,e=d<0?p-a:a+p,e<0?(e=0,n=Math.abs((e-p)/o),t=b<0?h-n:n+h):e>U&&(e=U,n=Math.abs((e-p)/o),t=b<0?h-n:n+h)):(e=f,n=m/o,t=b<0?h-n:h+n,t<0?(t=0,a=Math.abs((t-h)*o),e=d<0?p-a:a+p):t>V&&(t=V,a=Math.abs(t-h)*o,e=d<0?p-a:a+p)),e>p?(e-p<i?e=p+i:e-p>s&&(e=p+s),t=t>h?h+(e-p)/o:h-(e-p)/o):e<p&&(p-e<i?e=p-i:p-e>s&&(e=p-s),t=t>h?h+(p-e)/o:h-(p-e)/o),e<0?(p-=e,e=0):e>U&&(p-=e-U,e=U),t<0?(h-=t,t=0):t>V&&(h-=t-V,t=V),l(r(p,h,e,t))}function s(e){return e[0]<0&&(e[0]=0),e[1]<0&&(e[1]=0),e[0]>U&&(e[0]=U),e[1]>V&&(e[1]=V),[Math.round(e[0]),Math.round(e[1])]}function r(e,t,a,n){var o=e,i=a,s=t,r=n;return a<e&&(o=a,i=e),n<t&&(s=n,r=t),[o,s,i,r]}function c(){var e,t=f-p,a=g-h;return Q&&Math.abs(t)>Q&&(f=t>0?p+Q:p-Q),Z&&Math.abs(a)>Z&&(g=a>0?h+Z:h-Z),te/ne&&Math.abs(a)<te/ne&&(g=a>0?h+te/ne:h-te/ne),ee/ae&&Math.abs(t)<ee/ae&&(f=t>0?p+ee/ae:p-ee/ae),p<0&&(f-=p,p-=p),h<0&&(g-=h,h-=h),f<0&&(p-=f,f-=f),g<0&&(h-=g,g-=g),f>U&&(e=f-U,p-=e,f-=e),g>V&&(e=g-V,h-=e,g-=e),p>U&&(e=p-V,g-=e,h-=e),h>V&&(e=h-V,g-=e,h-=e),l(r(p,h,f,g))}function l(e){return{x:e[0],y:e[1],x2:e[2],y2:e[3],w:e[2]-e[0],h:e[3]-e[1]}}var u,d,p=0,h=0,f=0,g=0;return{flipCoords:r,setPressed:e,setCurrent:t,getOffset:a,moveOffset:n,getCorner:o,getFixed:i}}(),he=function(){function t(e,t){f.left.css({height:n(t)}),f.right.css({height:n(t)})}function a(){return o(pe.getFixed())}function o(e){f.top.css({left:n(e.x),width:n(e.w),height:n(e.y)}),f.bottom.css({top:n(e.y2),left:n(e.x),width:n(e.w),height:n(V-e.y2)}),f.right.css({left:n(e.x2),width:n(U-e.x2)}),f.left.css({width:n(e.x)})}function i(){return e("<div />").css({position:"absolute",backgroundColor:F.shadeColor||F.bgColor}).appendTo(h)}function s(){p||(p=!0,h.insertBefore(N),a(),fe.setBgOpacity(1,0,1),K.hide(),r(F.shadeColor||F.bgColor,1),fe.isAwake()?l(F.bgOpacity,1):l(1,1))}function r(e,t){O(d(),e,t)}function c(){p&&(h.remove(),K.show(),p=!1,fe.isAwake()?fe.setBgOpacity(F.bgOpacity,1,1):(fe.setBgOpacity(1,1,1),fe.disableHandles()),O(q,0,1))}function l(e,t){p&&(F.bgFade&&!t?h.animate({opacity:1-e},{queue:!1,duration:F.fadeTime}):h.css({opacity:1-e}))}function u(){F.shade?s():c(),fe.isAwake()&&l(F.bgOpacity)}function d(){return h.children()}var p=!1,h=e("<div />").css({position:"absolute",zIndex:240,opacity:0}),f={top:i(),left:i().height(V),right:i().height(V),bottom:i()};return{update:a,updateRaw:o,getShades:d,setBgColor:r,enable:s,disable:c,resize:t,refresh:u,opacity:l}}(),fe=function(){function t(t){var a=e("<div />").css({position:"absolute",opacity:F.borderOpacity}).addClass(o(t));return Y.append(a),a}function a(t,a){var n=e("<div />").mousedown(f(t)).css({cursor:t+"-resize",position:"absolute",zIndex:a}).addClass("ord-"+t);return de.support&&n.bind("touchstart.jcrop",de.createDragger(t)),X.append(n),n}function i(e){var t=F.handleSize,n=a(e,x++).css({opacity:F.handleOpacity}).addClass(o("handle"));return t&&n.width(t).height(t),n}function s(e){return a(e,x++).addClass("jcrop-dragbar")}function r(e,t){F.shade||K.css({top:n(-t),left:n(-e)}),G.css({top:n(t),left:n(e)})}function c(e,t){G.width(Math.round(e)).height(Math.round(t))}function l(){var e=pe.getFixed();pe.setPressed([e.x,e.y]),pe.setCurrent([e.x2,e.y2]),u()}function u(e){if(_)return d(e)}function d(e){var t=pe.getFixed();c(t.w,t.h),r(t.x,t.y),F.shade&&he.updateRaw(t),_||h(),e?F.onSelect.call(me,b(t)):F.onChange.call(me,b(t))}function p(e,t,a){(_||t)&&(F.bgFade&&!a?N.animate({opacity:e},{queue:!1,duration:F.fadeTime}):N.css("opacity",e))}function h(){G.show(),F.shade?he.opacity(ue):p(ue,!0),_=!0}function g(){w(),G.hide(),F.shade?he.opacity(1):p(1),_=!1,F.onRelease.call(me)}function m(){$&&X.show()}function v(){if($=!0,F.allowResize)return X.show(),!0}function w(){$=!1,X.hide()}function k(e){e?(ie=!0,w()):(ie=!1,v())}function C(){k(!1),l()}var _,x=370,S={},I={},T={},$=!1;F.dragEdges&&e.isArray(F.createDragbars)&&function(e){var t;for(t=0;t<e.length;t++)T[e[t]]=s(e[t])}(F.createDragbars),e.isArray(F.createHandles)&&function(e){var t;for(t=0;t<e.length;t++)I[e[t]]=i(e[t])}(F.createHandles),F.drawBorders&&e.isArray(F.createBorders)&&function(e){var a,n;for(n=0;n<e.length;n++){switch(e[n]){case"n":a="hline";break;case"s":a="hline bottom";break;case"e":a="vline right";break;case"w":a="vline"}S[e[n]]=t(a)}}(F.createBorders),e(document).bind("touchstart.jcrop-ios",function(t){e(t.currentTarget).hasClass("jcrop-tracker")&&t.stopPropagation()});var z=y().mousedown(f("move")).css({cursor:"move",position:"absolute",zIndex:360});return de.support&&z.bind("touchstart.jcrop",de.createDragger("move")),Y.append(z),w(),{updateVisible:u,update:d,release:g,refresh:l,isAwake:function(){return _},setCursor:function(e){z.css("cursor",e)},enableHandles:v,enableOnly:function(){$=!0},showHandles:m,disableHandles:w,animMode:k,setBgOpacity:p,done:C}}(),ge=function(){function t(t){ce.css({zIndex:450}),t?e(document).bind("touchmove.jcrop",s).bind("touchend.jcrop",r):p&&e(document).bind("mousemove.jcrop",n).bind("mouseup.jcrop",o)}function a(){ce.css({zIndex:290}),e(document).unbind(".jcrop")}function n(e){return u(c(e)),!1}function o(e){return e.preventDefault(),e.stopPropagation(),oe&&(oe=!1,d(c(e)),fe.isAwake()&&F.onSelect.call(me,b(pe.getFixed())),a(),u=function(){},d=function(){}),!1}function i(e,a,n){return oe=!0,u=e,d=a,t(n),!1}function s(e){return u(c(de.cfilter(e))),!1}function r(e){return o(de.cfilter(e))}function l(e){ce.css("cursor",e)}var u=function(){},d=function(){},p=F.trackDocument;return p||ce.mousemove(n).mouseup(o).mouseout(o),N.before(ce),{activateHandlers:i,setCursor:l}}(),be=function(){function t(){F.keySupport&&(i.show(),i.focus())}function a(e){i.hide()}function n(e,t,a){F.allowMove&&(pe.moveOffset([t,a]),fe.updateVisible(!0)),e.preventDefault(),e.stopPropagation()}function o(e){if(e.ctrlKey||e.metaKey)return!0;se=!!e.shiftKey;var t=se?10:1;switch(e.keyCode){case 37:n(e,-t,0);break;case 39:n(e,t,0);break;case 38:n(e,0,-t);break;case 40:n(e,0,t);break;case 27:F.allowSelect&&fe.release();break;case 9:return!0}return!1}var i=e('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),s=e("<div />").css({position:"absolute",overflow:"hidden"}).append(i);return F.keySupport&&(i.keydown(o).blur(a),H||!F.fixedSupport?(i.css({position:"absolute",left:"-20px"}),s.append(i).insertBefore(N)):i.insertBefore(N)),{watchKeys:t}}();de.support&&ce.bind("touchstart.jcrop",de.newSelection),X.hide(),j(!0);var me={setImage:M,animateTo:C,setSelect:_,setOptions:T,tellSelect:S,tellScaled:I,setClass:k,disable:$,enable:z,cancel:R,release:fe.release,destroy:D,focus:be.watchKeys,getBounds:function(){return[U*ae,V*ne]},getWidgetSize:function(){return[U,V]},getScaleFactor:function(){return[ae,ne]},getOptions:function(){return F},ui:{holder:q,selection:G}};return P&&q.bind("selectstart",function(){return!1}),A.data("Jcrop",me),me},e.fn.Jcrop=function(t,a){var n;return this.each(function(){if(e(this).data("Jcrop")){if("api"===t)return e(this).data("Jcrop");e(this).data("Jcrop").setOptions(t)}else"IMG"==this.tagName?e.Jcrop.Loader(this,function(){e(this).css({display:"block",visibility:"hidden"}),n=e.Jcrop(this,t),e.isFunction(a)&&a.call(n)}):(e(this).css({display:"block",visibility:"hidden"}),n=e.Jcrop(this,t),e.isFunction(a)&&a.call(n))}),this},e.Jcrop.Loader=function(t,a,n){function o(){s.complete?(i.unbind(".jcloader"),e.isFunction(a)&&a.call(s)):window.setTimeout(o,50)}var i=e(t),s=i[0];i.bind("load.jcloader",o).bind("error.jcloader",function(t){i.unbind(".jcloader"),e.isFunction(n)&&n.call(s)}),s.complete&&e.isFunction(a)&&(i.unbind(".jcloader"),a.call(s))},e.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:null,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}}(jQuery);var s=(a("rxrk"),{props:{action:{default:""},aspectRatio:{default:1},width:{default:200},url:{default:""},maxSize:{default:2},acceptType:{default:"jpeg,jpg,png"},data:{},sync:{default:!1},maxWidth:{default:600},title:{default:"图片上传"},visible:{default:!1}},data:function(){return{img_url:this.url,jcrop_api:"",boundx:"",boundy:"",widget:[0,0],$preview:void 0,$pcnt:void 0,$pimg:void 0,canvasOption:{},icon_url:"",pre_width:0,zoom:1}},methods:{testMaxSize:function(e){var t=this,a=new Image;if(e.files&&e.files[0]){var n=e.files[0],o=n.size,i=new FileReader;i.onload=function(n){var i=n.target.result;a.src=i,a.onload=function(){if(t.boundy=a.height,t.boundx=a.width,a.width>5e3||a.height>5e3)return $("#inputImage").val(""),t.$message({message:"图片尺寸太大，请重新选择！",type:"warning"}),!1;o?t.maxSize<o/1048576?(t.$message({message:"所选图片不可超过"+t.maxSize+"M",type:"warning"}),$("#inputImage").val("")):t.acceptType.indexOf(e.files[0].type.split("/")[1].toLowerCase())<0?(t.$message({message:"只能上传"+t.acceptType+"格式图片",type:"warning"}),$("#inputImage").val("")):(t.jcrop_api.setImage(i,function(){t.widget=this.getWidgetSize(),this.setSelect([0,0,300,300]),$("#pre-picture").parent().css({position:"absolute",width:t.widget[0]+"px",marginLeft:"-"+t.widget[0]/2+"px",marginTop:"-"+t.widget[1]/2+"px"})}),t.img_url=i,t.resetCrop()):t.$message({message:"请选取图片",type:"warning"})},a.onerror=function(e){return t.$message({message:"非法图片格式，请重新选择",type:"error"}),$("#inputImage").val(""),!1}},i.readAsDataURL(n)}else this.isIE()},subForm:function(){if(this.setCanvas(this.canvasOption)){if(this.syncUrl(this.icon_url),this.sync)return this.cancel(),!1;this.submitImageFile()}else this.$message({message:"无法剪裁，请更换浏览器重新尝试！",type:"warning"})},submitImageFile:function(e){var t=this;if("error"!==this.icon_url){if(""===this.icon_url)return e({returnCode:200});var a=new FormData,n=this.dataURLtoBlob(this.icon_url);a.append("file",n,"avatar-image.png");for(var o in this.data)a.append(o,this.data[o]);this.sync||this.$myLoad("正在上传中..."),$.ajax({url:this.action,type:"post",data:a,dataType:"text",processData:!1,contentType:!1,success:function(a){t.$emit("success",JSON.parse(a)),t.sync?e(JSON.parse(a)):(t.cancel(),t.$loading().close(),t.$message({message:JSON.parse(a).msg,type:"success"}))},error:function(e){t.$loading().close()},xhr:function(){var e=new XMLHttpRequest;return e.upload.addEventListener("progress",function(e){e.lengthComputable},!1),e}})}else this.$message({message:"无法获取剪切数据，请重新尝试！",type:"warning"})},dataURLtoBlob:function(e){for(var t=e.split(","),a=t[0].match(/:(.*?);/)[1],n=atob(t[1]),o=n.length,i=new Uint8Array(o);o--;)i[o]=n.charCodeAt(o);return new Blob([i],{type:a,filename:"image.png"})},resetCrop:function(){var e=this;this.$preview=$("#preview-pane"),this.$pimg=$("#preview-pane .preview-container img"),$("#pre-picture").Jcrop({bgFade:!0,boxHeight:400,boxWidth:400,onChange:this.updatePreview,onSelect:this.updatePreview,aspectRatio:this.aspectRatio},function(){e.jcrop_api=this;var t=this.getBounds();e.widget=this.getWidgetSize(),e.boundx=t[0],e.boundy=t[1],this.setSelect([0,0,300,200]),$("#pre-picture").parent().css({position:"absolute",width:e.widget[0]+"px",marginLeft:"-"+e.widget[0]/2+"px",marginTop:"-"+e.widget[1]/2+"px"})})},setCanvas:function(e){var t=$("#preview-pane .preview-container img")[0],a=document.createElement("img"),n=1;a.src=t.src;var o=document.createElement("canvas");this.zoom=a.width/this.boundx,e.w*this.zoom>this.maxWidth&&(n=this.maxWidth/(e.w*this.zoom)),o.width=e.w*this.zoom*n,o.height=e.h*this.zoom*n;try{o.getContext("2d").drawImage(t,e.x*this.zoom,e.y*this.zoom,e.w*this.zoom,e.h*this.zoom,0,0,e.w*this.zoom*n,e.h*this.zoom*n),this.icon_url=o.toDataURL()}catch(e){return this.icon_url="error"}return this.icon_url},changeImg:function(e){this.testMaxSize(e.target)},updatePreview:function(e){if(parseInt(e.w)>0){var t=this.width/e.w,a=this.width/this.aspectRatio/e.h;this.canvasOption=e,this.$pimg.css({width:Math.round(t*this.boundx)+"px",height:Math.round(a*this.boundy)+"px",marginLeft:"-"+Math.round(t*e.x)+"px",marginTop:"-"+Math.round(a*e.y)+"px"})}},isIE:function(){var e=navigator.userAgent;if(e.indexOf("compatible")>-1&&e.indexOf("MSIE")>-1&&(new RegExp("MSIE (\\d+\\.\\d+);").test(e),10!==parseFloat(RegExp.$1)))return this.$message({message:"您的计算机当前ie版本过低，无法使用图片上传，请您更换浏览器重新尝试！",type:"warning"}),!1},cancel:function(){this.$emit("close",!0)},syncUrl:function(e){this.$emit("syncUrl",e)}},mounted:function(){},watch:{visible:function(e){var t=this;e&&this.$nextTick(function(){t.resetCrop(t.img_url)})}}}),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.visible?a("div",{staticClass:"picture-cropper-mode"},[a("div",{staticClass:"picture-cropper-wrap"},[a("div",{staticClass:"pc-inner-header"},[a("span",{staticClass:"pc-header-title"},[e._v(e._s(e.title))]),e._v(" "),a("i",{staticClass:"el-icon-close",on:{click:e.cancel}})]),e._v(" "),a("div",{staticClass:"pc-wrap-inner clear"},[a("div",{staticClass:"wrap-container"},[a("div",{staticClass:"pic-wrapper"},[a("img",{ref:"pre-picture",attrs:{src:e.img_url,id:"pre-picture",alt:""}})])]),e._v(" "),a("div",{staticClass:"pc-wrap-inner-right",style:{width:e.width+20+"px"}},[a("div",{style:{height:e.width/e.aspectRatio+"px",width:e.width+"px"},attrs:{id:"preview-pane"}},[a("div",{staticClass:"preview-container",style:{height:e.width/e.aspectRatio+"px",width:e.width+"px"}},[a("img",{staticClass:"jcrop-preview",attrs:{src:e.img_url,alt:"Preview"}})])]),e._v(" "),e._m(0)])]),e._v(" "),a("div",{staticClass:"pc-handle-wrap"},[a("form",{attrs:{id:"picture-form",action:"",enctype:"multipart/form-data"}},[a("label",{staticClass:"btn-check-file",attrs:{for:"inputImage"}},[a("input",{staticClass:"btn-file",attrs:{name:"file",type:"file",id:"inputImage"},on:{change:e.changeImg}}),e._v(" "),a("span",[e._v("选取图片")])])]),e._v(" "),a("button",{staticClass:"el-button el-button--primary",on:{click:e.subForm}},[e._v(e._s(e.sync?"确定":"上传"))])])])]):e._e()},c=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tip-msg"},[a("p",[a("span",{staticClass:"red"},[e._v("提示：")]),e._v("请勿使用360兼容模式以及ie10以下版本，可能导致无法使用剪裁上传功能\n          ")])])}],l=a("18Nq"),u=n,d=Object(l.a)(s,r,c,!1,u,null,null);t.default=d.exports},lvjh:function(e,t,a){"use strict";function n(e){a("6rpU")}Object.defineProperty(t,"__esModule",{value:!0});var o={components:{"pic-cropper":function(){return a("PsVy")}},data:function(){return{bookList:{},updateData:{},multipleSelection:[],keywords:"",selectType:"bookName",outerVisible:!1,innerVisible:!1,timeRange:[],bookId:"",performanceReview:[],byTimeData:[]}},methods:{getBookList:function(){var e=this,t={page:this.$route.params.page,orderParemeter:"bookId"},a=this.$http.trim(this.keywords);if(this.selectType&&a){if(("bookId"===this.selectType||"bookWriterId"===this.selectType)&&!Number(a))return this.$message({message:"ID必需为数字",type:"warning"}),!1;t[this.selectType]=a,this.bookList={}}this.$ajax("/admin/getBookInfoList",t,function(t){200===t.returnCode&&(e.bookList=t.data)})},searchBook:function(){1!==Number(this.$route.params.page)?this.$router.push({params:{page:1}}):this.getBookList()},toggleSelection:function(){var e=this;if(this.multipleSelection.length){var t=[];this.multipleSelection.forEach(function(e){t.push(e.bookId)}),this.$confirm("此操作将永久删除所选的"+t.length+"书籍, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$ajax("/admin/bookBatchDelete",{bookid:t.toString()},function(t){200===t.returnCode&&(e.$message({message:"删除成功！",type:"success"}),e.getBookList())})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})}else this.$message({message:" 请选择要删除的书籍！",type:"warning"})},handleRowClick:function(e,t,a){"操作"!==a.label&&this.$refs.multipleTable.toggleRowSelection(e)},handleSelectionChange:function(e){this.multipleSelection=e},handleClick:function(e,t){"a"===e?this.$router.push({path:"/book_chapter_list/"+t.bookId}):"b"===e?this.$router.push({path:"/book_detail/"+t.bookId}):"c"===e?this.$router.push({path:"/add_new_chapter/"+t.bookId}):"d"===e&&this.toggleSelection()},handleCurrentChange:function(e){this.$router.push({params:{page:e}})},bookChangeState:function(e,t){var a=this,n=t.bookCheckStatus,o=t.bookStatus;if("a"===e)n=1;else if("b"===e){if(0===t.bookCheckStatus)return this.$message({message:"书籍暂未审核，请先审核通过！",type:"warning"}),!1;n=2}else if("c"===e){if(t.bookCheckStatus<=1)return this.$message({message:"书籍已下架！",type:"warning"}),!1;n=1}else"d"===e?o=1:"e"===e?o=0:"f"===e&&(n=0);this.$ajax("/admin/sysbookupdate",{bookId:t.bookId,bookCheckStatus:n,bookAuthorization:t.bookAuthorization,bookStatus:o},function(e){200===e.returnCode&&(a.$message(e.msg),a.getBookList())})},openDialog:function(e){this.outerVisible=!0,this.bookId=e.bookId},queryInfo:function(){var e=this;this.performanceReview=[];var t={bookId:this.bookId,startTime:this.format(new Date(this.timeRange-26784e5),"start"),endTime:this.format(this.timeRange,"end")};this.$store.dispatch("getAuthorPerformanceReview",t).then(function(t){if(200===t.returnCode&&0!=t.data[0].counts){var a={};a.bookTitle=t.data[0].bookTitle,a.sumWorld1=t.data[0].sumWorld,a.counts1=t.data[0].counts,a.sumWorld2=t.data[1].sumWorld,a.counts2=t.data[1].counts,a.releaseTime=t.data[2].releaseTime,a.createUpdateCount=t.data[2].createUpdateCount,e.performanceReview.push(a)}})},chapterInfoByTime:function(){var e=this;this.byTimeData=[];var t={bookId:this.bookId,startTime:this.format(new Date(this.timeRange-26784e5),"start"),endTime:this.format(this.timeRange,"end")};this.$store.dispatch("getChapterInfoByTime",t).then(function(t){200===t.returnCode&&(e.byTimeData=t.data,e.innerVisible=!0)})},format:function(e,t){var a=e.getFullYear(),n=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,o=e.getDate()<10?"0"+e.getDate():e.getDate();if("start"===t)var i=a+"-"+n+"-"+o+" 00:00:00";else var i=a+"-"+n+"-"+o+" 23:59:59";return i},defaultTime:function(){var e=new Date;this.timeRange=e}},created:function(){this.getBookList(),this.defaultTime()},watch:{$route:function(){this.getBookList()},outerVisible:function(e){!1===e&&(this.defaultTime(),this.byTimeData=[],this.performanceReview=[])}}},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin-book-wrap"},[a("el-alert",{attrs:{title:"操作说明",type:"info","show-icon":""}},[a("div",[a("p",[e._v("\n                此表为本站全部书籍列表，您可以通过相应书籍ID来批量管理，也可以通过\n                "),a("router-link",{staticClass:"red",attrs:{to:{name:"addNewBook"}}},[e._v("新建书籍")]),e._v("来添加新书\n            ")],1)])]),e._v(" "),a("el-row",{staticClass:"mbt20"},[a("el-col",{attrs:{xs:20,sm:16,md:12,lg:9,xl:6}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchBook(t):null}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}},[a("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.selectType,callback:function(t){e.selectType=t},expression:"selectType"}},[a("el-option",{attrs:{label:"书  名",value:"bookName"}}),e._v(" "),a("el-option",{attrs:{label:"作 者",value:"writerName"}}),e._v(" "),a("el-option",{attrs:{label:"书籍ID",value:"bookId"}}),e._v(" "),a("el-option",{attrs:{label:"作者ID",value:"bookWriterId"}}),e._v(" "),a("el-option",{attrs:{label:"手机号",value:"userPhone"}})],1),e._v(" "),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchBook},slot:"append"})],1)],1)],1),e._v(" "),a("el-row",[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.bookList.list,border:""},on:{"row-click":e.handleRowClick,"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",aligin:"center"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"bookId",label:"ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bookName",label:"书名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"writerName",label:"作者"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"bookStatus",label:"连载"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"el-dropdown-link",class:t.row.bookStatus?"primary":"success"},[e._v("\n                        "+e._s(t.row.bookStatus?"已完结":"连载中")+"\n                    ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"bookCheckStatus",label:"审核"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"el-dropdown-link",class:t.row.bookCheckStatus?"success":"primary"},[e._v("\n                        "+e._s(t.row.bookCheckStatus?"已审核":"未审核")+"\n                    ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"bookStatus",label:"上架"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"el-dropdown-link",class:2===t.row.bookCheckStatus?"success":"primary"},[e._v("\n                        "+e._s(2==t.row.bookCheckStatus?"已上架":"未上架")+"\n                    ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("time")(t.row.bookCreatedTime,"long")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"更新时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("time")(t.row.lastUpdateTime,"long")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"bookWorldCount",label:"字数",align:"center"}}),e._v(" "),e.$store.state.userInfo&&e.$store.state.userInfo.adminRolemenuanduserrole.updates?a("el-table-column",{staticClass:"last-column",attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{attrs:{href:"javascript:0;"}},[e._v("详情")]),e._v(" "),a("i",{staticClass:"fa fa-eye",on:{click:function(a){e.openDialog(t.row)}}})]}}])}):e._e()],1),e._v(" "),a("el-pagination",{staticClass:"mbt20",attrs:{background:"","current-page":e.bookList.pageNum,"page-size":e.bookList.pageSize,layout:"total, prev, pager, next, jumper",total:e.bookList.total},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.outerVisible},on:{"update:visible":function(t){e.outerVisible=t}}},[a("p",{staticClass:"title"},[e._v("请选择时间")]),e._v(" "),a("el-date-picker",{staticStyle:{margin:"20px 0"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.timeRange,callback:function(t){e.timeRange=t},expression:"timeRange"}}),e._v(" "),a("el-button",{staticStyle:{float:"right",margin:"20px"},attrs:{type:"primary",round:""},on:{click:function(t){e.queryInfo()}}},[e._v("查 询")]),e._v(" "),a("el-table",{staticStyle:{width:"100%","margin-bottom":"40px"},attrs:{data:e.performanceReview,border:""}},[a("el-table-column",{attrs:{prop:"bookTitle",label:"书籍名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sumWorld1",label:"发布字数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"counts1",label:"发布数量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sumWorld2",label:"创建字数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"counts2",label:"创建数量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"releaseTime",label:"发布是否过审"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.releaseTime>=7?a("i",{staticClass:"el-icon-success"}):e._e(),e._v(" "),t.row.releaseTime<7?a("i",{staticClass:"el-icon-error"}):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"创建是否过审"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.createUpdateCount>=7?a("i",{staticClass:"el-icon-success"}):e._e(),e._v(" "),t.row.createUpdateCount<7?a("i",{staticClass:"el-icon-error"}):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"counts2",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.chapterInfoByTime()}}},[e._v("更新预览")])]}}])})],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.byTimeData,border:"",height:"300"}},[a("el-table-column",{attrs:{prop:"bookId",label:"ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bookTitle",label:"书籍名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"chapterTitle",label:"章节名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"chapterLength",label:"章节字数"}}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("time")(t.row.createChapterTime,"long")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"发布时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("time")(t.row.releaseTime,"long")))])]}}])})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.outerVisible=!1}}},[e._v("关 闭")])],1)],1)],1)},s=[],r=a("18Nq"),c=n,l=Object(r.a)(o,i,s,!1,c,null,null);t.default=l.exports},rxrk:function(e,t){}});
//# sourceMappingURL=14.8575286a1e0d3ce4f74f.js.map