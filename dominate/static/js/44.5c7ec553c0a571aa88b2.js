webpackJsonp([44],{"Qd+a":function(e,t,l){"use strict";function o(e){l("ni+X")}Object.defineProperty(t,"__esModule",{value:!0});var n={data:function(){return{searchForm:{},replyCommentList:{},keywords:"",selectType:"",multipleSelection:[]}},methods:{getReplyCommentList:function(){var e=this;if(this.searchForm={},this.searchForm.page=this.$route.params.page,this.selectType){if(("bookId"===this.selectType||"userId"===this.selectType||"commentId"===this.selectType)&&!Number(this.keywords))return this.$message({message:"ID必需为数字",type:"warning"}),!1;this.searchForm[this.selectType]=this.keywords}this.$ajax("/admin/bookCommentReplyList",this.searchForm,function(t){200===t.returnCode?e.replyCommentList=t.data:t.data||(e.replyCommentList={})})},searchReplyCom:function(){1==this.$route.params.page?this.getReplyCommentList():this.$router.push({params:{page:1}})},handleCurrentChange:function(e){this.$router.push({params:{page:e}})},handleRowClick:function(e){this.$refs.multipleTable.toggleRowSelection(e)},toggleSelection:function(e,t){var l=this,o=[];if(t)"book"===e?o.push(t.bookid):o.push(t.userId);else{if(!this.multipleSelection.length)return this.$message({message:"请选取要删除的内容",type:"warning"}),!1;this.multipleSelection.forEach(function(e){o.push(e.id)})}!function(){var n=0,s=void 0;"book"===e?(n=2,s='此操作将永久删除书籍<span class="red">'+t.bookName+"</span>的全部书评回复, 是否继续?"):"user"===e?(n=4,s='此操作将永久删除用户<span class="red">'+t.userName+"</span>的全部书评回复, 是否继续?"):(s="此操作将永久删除"+o.length+"条书评回复, 是否继续?",n=o.length>1?1:0),l.$confirm(s,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",dangerouslyUseHTMLString:!0,type:"warning"}).then(function(){l.$ajax("/comm-deletereplyInfo",{commentid:o.toString(),type:n},function(e){200===e.returnCode&&(l.$message({message:"删除成功",type:"success"}),l.getReplyCommentList())})})}()},handleSelectionChange:function(e){this.multipleSelection=e}},created:function(){this.getReplyCommentList()},watch:{$route:function(e){this.getReplyCommentList()}}},s=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"reply-comment-wrap"},[l("el-alert",{attrs:{title:"操作说明",type:"info","show-icon":""}},[l("div",[l("p",[e._v("此表为本站全部书籍书评回复，您可以通过相应评论ID来批量管理；通过内容可以模糊搜索，其他类型均为精确搜索")])])]),e._v(" "),l("el-row",{staticClass:"mbt20"},[e.$store.state.userInfo&&e.$store.state.userInfo.adminRolemenuanduserrole.deletes?l("el-button",{attrs:{type:"danger",plain:""},on:{click:function(t){e.toggleSelection()}}},[e._v("批量删除")]):e._e()],1),e._v(" "),l("el-row",{staticClass:"mbt20"},[l("el-col",{attrs:{xs:20,sm:16,md:12,lg:9,xl:6}},[l("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchReplyCom(t):null}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}},[l("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.selectType,callback:function(t){e.selectType=t},expression:"selectType"}},[l("el-option",{attrs:{label:"内  容",value:"replyCommentsContent"}}),e._v(" "),l("el-option",{attrs:{label:"书  名",value:"bookName"}}),e._v(" "),l("el-option",{attrs:{label:"昵  称",value:"userName"}}),e._v(" "),l("el-option",{attrs:{label:"书籍ID",value:"bookId"}}),e._v(" "),l("el-option",{attrs:{label:"用户ID",value:"userId"}}),e._v(" "),l("el-option",{attrs:{label:"评论ID",value:"commentId"}}),e._v(" "),l("el-option",{attrs:{label:"用户IP",value:"userAddressIP"}})],1),e._v(" "),l("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchReplyCom},slot:"append"})],1)],1)],1),e._v(" "),l("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.replyCommentList.list,border:""},on:{"row-click":e.handleRowClick,"selection-change":e.handleSelectionChange}},[l("el-table-column",{attrs:{type:"selection"}}),e._v(" "),l("el-table-column",{attrs:{prop:"id",label:"ID"}}),e._v(" "),l("el-table-column",{attrs:{prop:"bookName",label:"书名"}}),e._v(" "),l("el-table-column",{attrs:{prop:"bookid",label:"书籍ID"}}),e._v(" "),l("el-table-column",{attrs:{prop:"commentId",label:"父评论ID"}}),e._v(" "),l("el-table-column",{attrs:{prop:"puserId",label:"父评论用户ID"}}),e._v(" "),l("el-table-column",{attrs:{label:"时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",[e._v(e._s(e._f("time")(t.row.commentDateTime,"long")))])]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"userName",label:"用户昵称"}}),e._v(" "),l("el-table-column",{attrs:{prop:"userId",label:"评论用户ID"}}),e._v(" "),l("el-table-column",{attrs:{prop:"replyCommentsContent",minWidth:"240",label:"内容"}})],1),e._v(" "),l("el-pagination",{staticClass:"mbt20",attrs:{background:"","current-page":e.replyCommentList.pageNum,"page-size":e.replyCommentList.pageSize,layout:"total, prev, pager, next, jumper",total:e.replyCommentList.total},on:{"current-change":e.handleCurrentChange}})],1)},a=[],r=l("18Nq"),i=o,c=Object(r.a)(n,s,a,!1,i,null,null);t.default=c.exports},"ni+X":function(e,t){}});
//# sourceMappingURL=44.5c7ec553c0a571aa88b2.js.map