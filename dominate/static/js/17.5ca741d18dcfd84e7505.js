webpackJsonp([17],{DFvP:function(t,e,a){"use strict";function s(t){a("sgrD")}Object.defineProperty(e,"__esModule",{value:!0});var i={data:function(){return{terminalList:[{value:"安卓",label:"安卓"},{value:"IOS",label:"IOS"}],versionData:{version:"",versionTerminal:"",versionUpdateDataTime:new Date,versionDescription:"",code:"200"}}},mounted:function(){this.$store.dispatch("system/getVersionList")},methods:{beforeUpload:function(t){var e=this;-1===t.name.indexOf(".apk")?(this.$message({message:"请上传apk文件！",type:"warning"}),this.$refs.upload.clearFiles()):t.size>419430400?this.$message({message:"文件过大！请重新选择！",type:"warning"}):this.$confirm("确定上传 "+t.name+"？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a=new FormData;a.append("file",t.raw),e.$store.dispatch("system/appPackgetUpload",a).then(function(t){200===t.returnCode&&e.$refs.upload.clearFiles()})}).catch(function(){e.$message({type:"info",message:"已取消删除"}),e.$refs.upload.clearFiles()})},handleRemove:function(t,e){this.file=null},beforeRemove:function(t,e){return this.$confirm("确定移除 "+t.name+"？")},versionUpdate:function(){var t=this;""===this.versionData.versionTerminal?this.$message({message:"请选择设备！",type:"warning"}):""===this.versionData.version?this.$message({message:"请填写版本号！",type:"warning"}):""===this.versionData.versionUpdateDataTime?this.$message({message:"请选择版本更新时间！",type:"warning"}):""===this.versionData.versionDescription?this.$message({message:"请填写版本描述！！",type:"warning"}):(this.FunWeekTime(this.versionData.versionUpdateDataTime.getTime())==this.FunWeekTime((new Date).getTime())?this.versionData.versionUpdateDataTime=this.nowDate(this.versionData.versionUpdateDataTime.getTime()):this.versionData.versionUpdateDataTime=this.dateTiming(this.versionData.versionUpdateDataTime,"start"),this.$store.dispatch("system/addUpdate",this.versionData).then(function(e){200===e.returnCode&&(t.versionData={version:"",versionTerminal:"安卓",versionUpdateDataTime:new Date,versionDescription:"",code:"200"})}))},desc:function(t){return t.replace(/\r\n/g,"<br />")}},computed:{versionTimeLine:function(){return this.$store.state.system.versionTimeLine}}},n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"version-update"},[a("el-alert",{attrs:{title:"操作说明",type:"info","show-icon":""}},[a("div",[a("span",[t._v("暂无")])])]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:this.$store.state.system.loading,expression:"this.$store.state.system.loading"}],staticClass:"version-contain",attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading"}},[a("el-row",{staticStyle:{margin:"0"},attrs:{gutter:24}},[a("el-col",{staticClass:"version-info",attrs:{span:8}},[a("el-row",{staticStyle:{margin:"20px 0"},attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("p",{staticStyle:{"text-align":"right"}},[t._v("上传APK文件")])]),t._v(" "),a("el-col",{attrs:{span:18}},[a("el-upload",{ref:"upload",attrs:{action:"","auto-upload":!1,"on-change":t.beforeUpload,"on-remove":t.handleRemove,"before-remove":t.beforeRemove}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传apk文件")])],1)],1)],1),t._v(" "),a("el-row",{staticStyle:{margin:"20px 0"},attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("p",{staticStyle:{"text-align":"right"}},[t._v("设备")])]),t._v(" "),a("el-col",{attrs:{span:18}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.versionData.versionTerminal,callback:function(e){t.$set(t.versionData,"versionTerminal",e)},expression:"versionData.versionTerminal"}},t._l(t.terminalList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),a("el-row",{staticStyle:{margin:"20px 0"},attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("p",{staticStyle:{"text-align":"right"}},[t._v("版本号")])]),t._v(" "),a("el-col",{attrs:{span:18}},[a("el-input",{model:{value:t.versionData.version,callback:function(e){t.$set(t.versionData,"version",e)},expression:"versionData.version"}})],1)],1),t._v(" "),a("el-row",{staticStyle:{margin:"20px 0"},attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("p",{staticStyle:{"text-align":"right"}},[t._v("更新时间")])]),t._v(" "),a("el-col",{attrs:{span:18}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.versionData.versionUpdateDataTime,callback:function(e){t.$set(t.versionData,"versionUpdateDataTime",e)},expression:"versionData.versionUpdateDataTime"}})],1)],1),t._v(" "),a("el-row",{staticStyle:{margin:"20px 0"},attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("p",{staticStyle:{"text-align":"right"}},[t._v("版本号描述")])]),t._v(" "),a("el-col",{attrs:{span:18}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.versionData.versionDescription,callback:function(e){t.$set(t.versionData,"versionDescription",e)},expression:"versionData.versionDescription"}})],1)],1),t._v(" "),a("el-row",{staticStyle:{margin:"20px 0"},attrs:{gutter:20}},[a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:20}},[a("el-button",{staticStyle:{outline:"none"},attrs:{type:"primary",round:""},on:{click:function(e){t.versionUpdate()}}},[t._v("更新版本")])],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:14,offset:1}},[a("div",{staticClass:"version-date",attrs:{id:"version-date"}},t._l(t.versionTimeLine,function(e,s){return a("div",{key:s,staticClass:"timeline-block"},[a("div",{staticClass:"timeline-img"},[a("i",{staticClass:"fa fa-clock-o"})]),t._v(" "),a("div",{staticClass:"timeline-content"},[a("p",[a("span",{staticClass:"title"},[t._v("设备：")]),a("span",{staticClass:"content"},[t._v(t._s(e.versionTerminal))])]),t._v(" "),a("p",[a("span",{staticClass:"title"},[t._v("版本号：")]),a("span",{staticClass:"content"},[t._v(t._s(e.version))])]),t._v(" "),a("p",[a("span",{staticClass:"title"},[t._v("版本号ID：")]),a("span",{staticClass:"content"},[t._v(t._s(e.id))])]),t._v(" "),a("div",[a("span",{staticClass:"title"},[t._v("版本更新描述：")]),t._v(" "),a("div",{staticClass:"content",domProps:{innerHTML:t._s(t.desc(e.versionDescription))}})]),t._v(" "),a("span",{staticClass:"cd-date"},[t._v(t._s(t._f("time")(e.versionUpdateDataTime,"long")))])])])}))])],1)],1)],1)},r=[],o=a("18Nq"),l=s,v=Object(o.a)(i,n,r,!1,l,null,null);e.default=v.exports},sgrD:function(t,e){}});
//# sourceMappingURL=17.5ca741d18dcfd84e7505.js.map