webpackJsonp([14],{"67zQ":function(t,e,a){"use strict";function s(t){a("o0uZ")}function n(t){a("FA70")}Object.defineProperty(e,"__esModule",{value:!0});var o={data:function(){return{dateName:"按日查询",openDropDown:!1,openDayOption:!1,dayValue:[],openMonthOption:!1,beginMonth:"",endMonth:"",nowMode:""}},methods:{handleCommandUp:function(t){"按日查询"===t?(this.nowMode=t,this.openDayOption=!0,this.openMonthOption=!1):"按月查询"===t&&(this.nowMode=t,this.openDayOption=!1,this.openMonthOption=!0)},handChangeDateUp:function(){"按日查询"===this.nowMode?this.dayValue[1]-this.dayValue[0]<=2592e6?(this.openDayOption=!1,this.openMonthOption=!1,this.openDropDown=!1,this.dateName="日: "+this.FunWeekTime(this.dayValue[0])+"-"+this.FunWeekTime(this.dayValue[1]),this.$emit("dateParam",[this.dateTiming(this.dayValue[0],"start"),this.dateTiming(this.dayValue[1],"end")],"day")):this.$message({message:"时间间隔不能超过一个月！",type:"warning"}):"按月查询"===this.nowMode&&(""===this.endMonth||""===this.beginMonth?this.$message({message:"月份不能为空错误！",type:"warning"}):this.endMonth-this.beginMonth<0?this.$message({message:"月份选取错误！",type:"warning"}):(this.openDayOption=!1,this.openMonthOption=!1,this.openDropDown=!1,this.dateName="月: "+this.RecectMonth(this.beginMonth)+"-"+this.RecectMonth(this.endMonth),this.$emit("dateParam",[this.dateTiming(this.beginMonth,"start"),this.dateMonthTiming(this.endMonth.getTime())],"month")))}}},i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"date-component"},[a("el-button",{staticClass:"date-name",on:{click:function(e){t.openDropDown=!t.openDropDown}}},[t._v(t._s(t.dateName)+" "),a("i",{staticClass:"fa fa-sort-down"})]),t._v(" "),a("div",{staticClass:"drop-down-box"},[a("el-collapse-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.openDropDown,expression:"openDropDown"}]},[a("div",{staticClass:"transition-box",on:{click:function(e){t.handleCommandUp("按日查询")}}},[t._v("\n                    按日查询\n                    "),a("div",{staticClass:"change-date"},[a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:t.openDayOption,expression:"openDayOption"}],attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.dayValue,callback:function(e){t.dayValue=e},expression:"dayValue"}})],1)]),t._v(" "),a("div",{staticClass:"transition-box",on:{click:function(e){t.handleCommandUp("按月查询")}}},[t._v("\n                    按月查询\n                    "),a("div",{staticClass:"change-date"},[a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:t.openMonthOption,expression:"openMonthOption"}],attrs:{type:"month",placeholder:"起始月份"},model:{value:t.beginMonth,callback:function(e){t.beginMonth=e},expression:"beginMonth"}}),t._v(" "),a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:t.openMonthOption,expression:"openMonthOption"}],attrs:{type:"month",placeholder:"结束月份"},model:{value:t.endMonth,callback:function(e){t.endMonth=e},expression:"endMonth"}})],1)]),t._v(" "),a("div",{staticClass:"transition-box tool"},[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){t.handChangeDateUp()}}},[t._v("确定")]),t._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.openDropDown=!1,t.openMonthOption=!1,t.openDayOption=!1}}},[t._v("取消")])],1)])])],1)],1)},r=[],c=a("18Nq"),l=s,h=Object(c.a)(o,i,r,!1,l,null,null),p=h.exports,d=a("0EVO"),u={components:{DateComponent:p,canalID:d.a},data:function(){return{orderParams:{page:1,channelId:"",startdate:this.dateTiming((new Date).getTime()-864e5,"start"),enddate:this.dateTiming((new Date).getTime(),"end")},tableParams:{page:1,type:2,channelId:"",startdate:this.dateTiming((new Date).getTime()-5184e5,"start"),enddate:this.dateTiming((new Date).getTime(),"end")}}},created:function(){"德绚"===JSON.parse(sessionStorage.getItem("user_info")).adminInfo.userName?(this.orderParams.channelId=this.$store.state.census.spreadNameList[2].id,this.tableParams.channelId=this.$store.state.census.spreadNameList[2].id):(this.orderParams.channelId=this.$store.state.census.spreadNameList[0].id,this.tableParams.channelId=this.$store.state.census.spreadNameList[0].id),this.$store.dispatch("census/getRechargerecordByTypeStatistics",this.orderParams),this.$store.dispatch("census/getRechargerecordByTypeDetailed",{params:this.tableParams,type:this.tableParams.type})},methods:{completionRate:function(t){return(100*t).toFixed(2)},handleTable:function(t,e){this.tableParams.type="day"===e?2:3,this.tableParams.startdate=t[0],this.tableParams.enddate=t[1],this.$store.dispatch("census/getRechargerecordByTypeDetailed",{params:this.tableParams,type:this.tableParams.type})},canalParam:function(t){this.orderParams.channelId=t,this.tableParams.channelId=t,this.$store.dispatch("census/getRechargerecordByTypeStatistics",this.orderParams),this.$store.dispatch("census/getRechargerecordByTypeDetailed",{params:this.tableParams,type:this.tableParams.type})}},computed:{rechargeDay:function(){return this.$store.state.census.rechargeDay},rechargeYestoday:function(){return this.$store.state.census.rechargeYestoday},rechargeMonth:function(){return this.$store.state.census.rechargeMonth},rechargeTotal:function(){return this.$store.state.census.rechargeTotal},orderTableList:function(){return this.$store.state.census.orderTableList.reverse()}}},v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:this.$store.state.census.loading,expression:"this.$store.state.census.loading"}],staticClass:"data"},["张三"===this.$store.state.userInfo.adminInfo.userName?[a("canalID",{on:{canalParam:t.canalParam}})]:t._e(),t._v(" "),a("p",{staticClass:"title"},[t._v("订单统计")]),t._v(" "),a("el-row",{staticClass:"order",staticStyle:{"margin-left":"0px","margin-right":"0px"},attrs:{gutter:24}},[a("el-col",{staticClass:"order-contain",staticStyle:{padding:"0 50px"},attrs:{md:12,lg:12,xl:6}},[a("div",{staticClass:"pay-item"},[a("p",{staticClass:"pay-title"},[t._v("今日充值")]),t._v(" "),a("p",{staticClass:"pay-money"},[t._v(t._s("￥"+t.rechargeDay.succMoney+".00"))]),t._v(" "),a("p",{staticClass:"pay-info"},[t._v("已支付 ："),a("span",[t._v(t._s(t.rechargeDay.succCounts))]),t._v(" 笔")]),t._v(" "),a("p",{staticClass:"pay-info"},[t._v("未支付 ："),a("span",[t._v(t._s(t.rechargeDay.errCounts))]),t._v(" 笔")]),t._v(" "),a("p",{staticClass:"pay-info"},[t._v("完成率 ："),a("span",[t._v("\n                    "+t._s("NaN"==t.completionRate(t.rechargeDay.succCounts/(t.rechargeDay.succCounts+t.rechargeDay.errCounts))?0:t.completionRate(t.rechargeDay.succCounts/(t.rechargeDay.succCounts+t.rechargeDay.errCounts)))+"\n                ")]),t._v(" %")])])]),t._v(" "),a("el-col",{staticClass:"order-contain",staticStyle:{padding:"0 50px"},attrs:{md:12,lg:12,xl:6}},[a("div",{staticClass:"pay-item"},[a("p",{staticClass:"pay-title"},[t._v("昨日充值")]),t._v(" "),a("p",{staticClass:"pay-money"},[t._v(t._s("￥"+t.rechargeYestoday.succMoney+".00"))]),t._v(" "),a("p",{staticClass:"pay-info"},[t._v("已支付 ："),a("span",[t._v(t._s(t.rechargeYestoday.succCounts))]),t._v(" 笔")]),t._v(" "),a("p",{staticClass:"pay-info"},[t._v("未支付 ："),a("span",[t._v(t._s(t.rechargeYestoday.errCounts))]),t._v(" 笔")]),t._v(" "),a("p",{staticClass:"pay-info"},[t._v("完成率 ："),a("span",[t._v("\n                    "+t._s("NaN"==t.completionRate(t.rechargeYestoday.succCounts/(t.rechargeYestoday.succCounts+t.rechargeYestoday.errCounts))?0:t.completionRate(t.rechargeYestoday.succCounts/(t.rechargeYestoday.succCounts+t.rechargeYestoday.errCounts)))+"\n                ")]),t._v(" %")])])]),t._v(" "),a("el-col",{staticClass:"order-contain",staticStyle:{padding:"0 50px"},attrs:{md:12,lg:12,xl:6}},[a("div",{staticClass:"pay-item"},[a("p",{staticClass:"pay-title"},[t._v("本月充值（不含今日）")]),t._v(" "),a("p",{staticClass:"pay-money"},[t._v(t._s("￥"+t.rechargeMonth.succMoney+".00"))]),t._v(" "),a("p",{staticClass:"pay-info"},[t._v("已支付 ："),a("span",[t._v(t._s(t.rechargeMonth.succCounts))]),t._v(" 笔")]),t._v(" "),a("p",{staticClass:"pay-info"},[t._v("未支付 ："),a("span",[t._v(t._s(t.rechargeMonth.errCounts))]),t._v(" 笔")]),t._v(" "),a("p",{staticClass:"pay-info"},[t._v("完成率 ："),a("span",[t._v("\n                    "+t._s("NaN"==t.completionRate(t.rechargeMonth.succCounts/(t.rechargeMonth.succCounts+t.rechargeMonth.errCounts))?0:t.completionRate(t.rechargeMonth.succCounts/(t.rechargeMonth.succCounts+t.rechargeMonth.errCounts)))+"\n                ")]),t._v(" %")])])]),t._v(" "),a("el-col",{staticClass:"order-contain",staticStyle:{padding:"0 50px"},attrs:{md:12,lg:12,xl:6}},[a("div",{staticClass:"pay-item"},[a("p",{staticClass:"pay-title"},[t._v("累计充值")]),t._v(" "),a("p",{staticClass:"pay-money"},[t._v(t._s("￥"+t.rechargeTotal.succMoney+".00"))]),t._v(" "),a("p",{staticClass:"pay-info"},[t._v("已支付 ："),a("span",[t._v(t._s(t.rechargeTotal.succCounts))]),t._v(" 笔")]),t._v(" "),a("p",{staticClass:"pay-info"},[t._v("未支付 ："),a("span",[t._v(t._s(t.rechargeTotal.errCounts))]),t._v(" 笔")]),t._v(" "),a("p",{staticClass:"pay-info"},[t._v("完成率 ："),a("span",[t._v("\n                    "+t._s("NaN"==t.completionRate(t.rechargeTotal.succCounts/(t.rechargeTotal.succCounts+t.rechargeTotal.errCounts))?0:t.completionRate(t.rechargeTotal.succCounts/(t.rechargeTotal.succCounts+t.rechargeTotal.errCounts)))+"\n                ")]),t._v(" %")])])])],1),t._v(" "),a("div",{staticClass:"table-title"},[a("p",{staticClass:"title"},[t._v("每日充值统计")]),t._v(" "),a("DateComponent",{staticClass:"date",on:{dateParam:t.handleTable}})],1),t._v(" "),a("div",{staticClass:"pay-table"},[a("div",{staticClass:"pay-table-info"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.orderTableList,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"date",label:"日期",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"充值",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s("￥"+e.row.succMoney+".00"))]),t._v(" "),a("p",[a("span",[t._v(t._s("充值次数 ："+(e.row.succCounts+e.row.errCounts)))]),t._v(" "),a("span",{staticStyle:{"margin-left":"20px"}},[t._v(t._s("次均 ："+(e.row.succMoney/e.row.succCounts).toFixed(2)))])])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"date",label:"充值支付订单数",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.succCounts+e.row.errCounts+" 笔"))]),t._v(" "),a("p",[a("span",[t._v(t._s(e.row.errCounts+" 笔未支付"))]),t._v(" "),a("span",{staticStyle:{"margin-left":"20px"}},[t._v(t._s("完成率 ："+t.completionRate(e.row.succCounts/(e.row.succCounts+e.row.errCounts))+"%"))])])]}}])})],1)],1)])],2)},m=[],_=n,g=Object(c.a)(u,v,m,!1,_,null,null);e.default=g.exports},FA70:function(t,e){},o0uZ:function(t,e){}});
//# sourceMappingURL=14.a2084080a43f0758eb30.js.map